(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/24.
 */
"use strict";

(function ($) {
  /**
   * 生成分页器
   * @param ele 需要添加分页器的元素
   * @param offset 偏移量，即从第data-offset开始
   * @param length 总记录条数
   * @param showPages 分页器显示的页数，超过则隐藏多余的页
   * @param rows 每页显示的记录条数
   */
  $.burster = function (ele, offset, length, showPages, rows) {
    offset = offset ? parseInt(offset) : 0;
    //将分页器装入table中
    if (length && length > offset) {
      var pageHtml = ""
        , ass = ""//清空需要装入的html
        , beforePages = Math.ceil(offset / rows)//需要显示的前页数/当前页
        , afterPages = Math.ceil((length - offset ) / rows)//需要显示的后页数
        , pages = Math.ceil(length / rows) //总页数
        , k = 0;
      //alert("总页数" + pages + " 前页数 " + beforePages + " 后页数 " + afterPages);
      //若页数小于showPages页，则全部显示
      if (pages >= 0 && pages <= showPages) {
        for (k = 0; k < pages; k++) {
          if (k == beforePages) {
            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
          } else {
            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
          }
        }
      } else if (pages > showPages) {//总页数大于showPages页
        if (beforePages <= Math.ceil(showPages / 2) && afterPages > showPages + 1) {
          for (k = 0; k < showPages; k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages <= Math.ceil(showPages / 2) && afterPages == showPages + 1) {
          for (k = 0; k < showPages - 1; k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages <= Math.ceil(showPages / 2) && afterPages <= showPages) {
          for (k = 0; k < showPages - 1; k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages > Math.ceil(showPages / 2) && beforePages <= showPages && afterPages > showPages) {
          pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
          for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages > showPages && afterPages > showPages) {
          pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
          for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages > Math.ceil(showPages / 2) && beforePages <= pages && afterPages <= showPages && afterPages > Math.ceil(showPages / 2) + 1) {
          pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
          for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages > pages && afterPages <= showPages && afterPages > Math.ceil(showPages / 2) + 1) {
          pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
          for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages > Math.ceil(showPages / 2) && afterPages <= Math.ceil(showPages / 2) + 1) {
          pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
          for (k = beforePages - Math.ceil(showPages / 2) + 1; k < pages; k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
        }
      }
      //判断"首页"和"末页"是否可点击
      var firstPage, lastPage;
      if (offset == 0) {//此时首页无法点击
        firstPage = '<li class="disabled"><a class="pages" data-offset="0">首页</a></li>';
        lastPage = '<li><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '" >末页</a></li>';
      } else if ((offset + rows) >= length) {//此时末页无法点击
        firstPage = '<li><a class="pages" data-offset="0">首页</a></li>';
        lastPage = '<li class="disabled"><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '">末页</a></li>';
      } else {
        firstPage = '<li><a class="pages" data-offset="0">首页</a></li>';
        lastPage = '<li><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '">末页</a></li>';
      }
      //判断"上一页"和"下一页"是否存在
      var upPage, downPage;
      if (offset == 0 || (offset < rows && (offset % rows != 0))) {
        upPage = "<li class='disabled'><a class='pages' func='previous' data-offset='" + parseInt(offset) + "' >上页</a></li>"
      } else {
        upPage = "<li><a class='pages' func='previous' data-offset='" + (parseInt(offset) - parseInt(rows)) + "' >上页</a></li>";
      }
      if (offset >= (length - rows)) {
        downPage = "<li class='disabled'><a class='pages' func='next' data-offset='" + parseInt(offset) + "'>下页</a></li>"
      } else {
        downPage = "<li><a class='pages' func='next' data-offset='" + parseInt(parseInt(offset) + parseInt(rows)) + "'>下页</a></li>"
      }
      if (pages != 1) {
        //分页部分
        ass += "<div id='pager' class='pager-info'>" +
        "<h6 id='result' class='pager-record'>共有<span>" + length + "</span>条记录</h6>" +
        "<ul class='pagination'>" + firstPage + upPage + pageHtml + downPage + lastPage + "</ul></div>";
        //table中注入拼装的记录
        ele.html(ass);
      } else {
        ele.html('');
      }
    }
  }
}(jQuery));
},{}],2:[function(require,module,exports){
/**
 * Created by zrz on 2016/2/26.
 * @version 1.0.0 created 通用性功能方法
 */

'use strict';

var Fun = (function () {
    var _timeOut = 100000;//请求超时时间为10s
    /**
     * 封装ajax
     * @param option
     * {
     *      url:"请求的地址"
     *      ,method:"请求的方法"
     *      ,async:"是否并发"
     *      ,data:"发送的数据"
     *      ,success:"成功时回调"
     *      ,error:"失败/超时时回调"
     *      ,timeout:"超时时间"
     *      ,complete:"完成后的回调"
     * }
     */
    var ajax = function (option) {
        //ajax开始时应显示“加载信息框”
        Modal.showLoading();
        $.ajax({
            url: option.url
            , type: "type" in option && option.type || "GET"
            , timeout: option.timeout || _timeOut
            , data: "data" in option && option.data || {}
            , dataType: "json"
            , async: ("async" in option && option.async) ? true : false
            , success: function (json) {
                if ("status" in json && json.status > 0 && "data" in json) {
                    if ("success" in option) {
                        option.success(json.data);
                    } else {
                        Modal.setAlert("无success方法!");
                    }
                } else if ("error" in option && option.error instanceof Function) {
                    option.error(json);
                } else {
                    Modal.setAlert('操作失败!');
                }
            }, error: function (xhr) {//404或者超时
                if ("error" in option && option.error instanceof Function) {
                    //提示用户错误信息
                    Modal.showLoading(false);
                    Modal.setAlert("连接服务器失败，状态：" + (xhr.status || -1) + ",信息：" + (xhr.statusText || "-"));
                    option.error(xhr.status, xhr.statusText);//回调请求的状态和错误信息
                }
            }, complete: function (xhr, type) {
                //关闭“加载信息框”
                Modal.showLoading(false);
                if ("complete" in option && option.complete instanceof Function) {
                    option.complete(xhr, type);//回调请求的xhr信息和类型
                }
            }
        });
    };
    //全选和单选的绑定
    var setCheckboxListener = function (allCheck, radioChecks) {
        //筛选单选按钮组
        var radioValueEles = $(radioChecks);
        //点击全选时，同组按钮被同步
        $(document).delegate(allCheck, "click", function () {
            if (radioValueEles && radioValueEles.length > 0) {
                for (var _r = 0; _r < radioValueEles.length; _r++) {
                    radioValueEles[_r].checked = $(this).is(":checked");
                }
            }
        });
        //点击单选按钮时，
        $(document).delegate(radioChecks, "click", function () {
            $(allCheck)[0].checked = $(radioChecks + ":checked").length == $(radioChecks).length;
        });
    };
    var url = (function () {
        var get = function (name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return decodeURI(r[2]);
            return null;
        };
        /**
         * 根据参数列表长度进行判断，兼容IE9
         * @returns {string}
         */
        var set = function () {
            if (arguments.length === 1 && typeof arguments[0] === 'object') {//一个对象，使用key标记value
                var obj = arguments[0]
                    , search = location.search;
                for (var o in obj) {
                    if (obj.hasOwnProperty(o)) {
                        search = changeURLKeyValue(search, o, obj[o]);
                    }
                }
                if ('pushState' in history) {
                    history.pushState(null, document.title, search);
                } else if ('pushState' in History) {//ie9 不支持pushState方法,javascript.ejs中添加history.js完成html4对pushState的支持
                    History.pushState(null, null, search);//返回重新构造后search串
                }
            } else if (arguments.length === 2) {//key+value
                var key = arguments[0]
                    , value = arguments[1];
                if ('pushState' in history) {
                    history.pushState(null, document.title, changeURLKeyValue(location.toString(), key, value));
                } else if ('pushState' in History) {//ie9 不支持pushState方法,javascript.ejs中添加history.js完成html4对pushState的支持
                    History.pushState(null, null, changeURLKeyValue(location.search, key, value));//返回重新构造后search串
                }
            }
            function changeURLKeyValue(url, arg, arg_val) {
                var pattern = arg + '=([^&]*)';
                var replaceText = arg + '=' + arg_val;
                if (url.match(pattern)) {
                    var tmp = '/(' + arg + '=)([^&]*)/gi';
                    tmp = url.replace(eval(tmp), replaceText);
                    return tmp;
                } else {
                    if (url.match('[\?]')) {
                        return url + '&' + replaceText;
                    } else {
                        return url + '?' + replaceText;
                    }
                }
            }
        };
        return {
            get: get
            , set: set
        }
    }());

    var formatImage=function (path, size, ele) {
        if(path instanceof  Array && path.length>0){
            path = path[0];
        }
        var IMAGE_SIZE = {
            original: {
                path: "",
                size: ""
            },
            xlarge: {
                path: "_xlarge",
                size: "660*660"
            },
            large: {
                path: "_large",
                size: "420*420"
            },
            middle: {
                path: "_middle",
                size: "300*300"
            },
            small: {
                path: "_small",
                size: "240*240"
            },
            little: {
                path: "_little",
                size: "120*120"
            },
            micro: {
                path: "_micro",
                size: "60*60"
            }
        };
        size = IMAGE_SIZE[size || "middle"] || IMAGE_SIZE.middle;
        var pathTemp = /\.\w+?$/.exec(path);
        if (!pathTemp) {
            path += size.path;
        } else {
            path = (path.substr(0, pathTemp.index || path.length)) + size.path + pathTemp[0];
        }
        if (ele && ele.attr) {
            ele.attr("src", path);
        }
        return path;
    };
    //金额格式化小数点2位
    var format = (function () {
        var formatamount = function(_value){
            return parseFloat(_value).toFixed(2);
        };
        //体积格式化小数点2位
        var formatvolume = function(_value){
            return parseFloat(_value).toFixed(3);
        };
        //重量格式化小数点2位
        var formatweight = function(_value){
            return parseFloat(_value).toFixed(3);
        };
        return {
            formatamount: formatamount
            , formatvolume: formatvolume
            , formatweight: formatweight
        }
    }());
    return {
        ajax: ajax
        , getTimtout: _timeOut
        , setCheckboxListener: setCheckboxListener
        , url: url
        , formatImage: formatImage
        , format: format
    }
}());

exports.ajax = Fun.ajax;
exports.getTimeout = Fun.getTimtout;
exports.setCheckboxListener = Fun.setCheckboxListener;
exports.url = Fun.url;
exports.formatImage = Fun.formatImage;
exports.format = Fun.format;

},{}],3:[function(require,module,exports){
/**
 * Created by Jeremy on 2017/1/23.
 */
'use strict';
var Modal = require('./modal');
var general = (function () {
    var run = function () {
        //时间格式化
        Date.prototype.Format = function (fmt) { //author: Jeremyyy
            var o = {
                "M+": this.getMonth() + 1, //月份
                "d+": this.getDate(), //日
                "h+": this.getHours(), //小时
                "m+": this.getMinutes(), //分
                "s+": this.getSeconds(), //秒
                "q+": Math.floor((this.getMonth() + 3) / 3), //季度
                "S": this.getMilliseconds() //毫秒
            };
            if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
            for (var k in o)
                if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
            return fmt;
        };

        //修改密码
        $(document).on('click', '#change-pwd', function () {
            $('.change-back').removeClass('dp-n');
            $('.change-pwd').removeClass('dp-n');
        });
        //关闭修改密码
        $(document).on('click', '.close-pwd', function () {
            $('.change-back').addClass('dp-n');
            $('.change-pwd').addClass('dp-n');
        });
        $(document).on('click', '#ensure-pwd', function () {
            if ($('#new-password').val() != $('#ensure-password').val()) {
                $('#ensure-password').addClass('warm');
            } else {
                $('#ensure-password').removeClass('warm');
                var data = {
                    "agentMemberId": 0,
                    "oldPwd": $('#password').val(),
                    "pwd": $('#new-password').val(),
                    "pwdConfirm": $('#ensure-password').val()
                };
                $.ajax({
                    url: '/api/account/changePwd'
                    , type: 'post'
                    , data: data
                    , dataType: 'json'
                    , timeout: 100000
                    , success: function (json) {
                        if (json && 'resCode' in json && json.resCode == 0) {
                            Modal.setAlert('修改成功！', null, function () {
                                $('.change-back').addClass('dp-n');
                                $('.change-pwd').addClass('dp-n');
                            });
                        } else {
                            Modal.setAlert(json.resMsg || '修改失败，请重试！');
                        }
                    }
                });
            }
        });
    };
    return {
        run: run
    }
}());
module.exports.general = general;
},{"./modal":4}],4:[function(require,module,exports){
/**
 * Created by zrz on 2016/2/24.
 * @version 1.0.0 created
 */

'use strict';

//构造信息框主体
var Modal = (function () {
    //构造原始类
    function M(m) {
        this.s = m.s;//是否显示
        this.id = m.id;
    }

    //构造标准show方法，用于继承
    M.prototype.show = function () {
        var ele = document.getElementById(this.id);
        if (ele) {
            if (this.s && !isShow()) {//显示当前隐藏
                ele.className = ele.className.replace("dp-n", "");
            } else if (!this.s && isShow()) {//隐藏当前显示
                ele.className += " dp-n";
            }
            //去除两边的空格
            ele.className = String(ele.className).trim();
        }
        function isShow() {//是否已显示，无class时显示
            return ele.className.split("dp-n").length == 1;
        }
    };

    //加载信息框
    var loading = (function () {
        //初始化生成加载信息框
        var init = function () {
            if (!document.getElementById("loading_modal_element")) {
                $('body').append('<div id="loading_modal_element" class="loading-modal-body dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="loading-modal-image"></div>' +
                    '<div class="loading-modal-text">' +
                    '<h2>玩命加载中……</h2>' +
                    '</div></div>');
            }
            return false;
        };
        //显示、隐藏信息框
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;//无参数显示信息框
            var m = new M({id: "loading_modal_element", s: s});
            m.show();
        };
        return {
            init: init
            , show: show
        }
    }());
    //弹出信息框
    var alert = (function () {
        var init = function () {
            if (!document.getElementById("alert_modal_element")) {
                $('body').append('<div id="alert_modal_element" class="alert-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="alert-modal-content">' +
                    '<div class="alert-modal-body"><span class="alert-modal-text"></span></div>' +
                    '<div class="alert-modal-footer"><button id="alert_modal_close" class="alert-modal-button">关闭</button></div>' +
                    '</div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "alert_modal_element", s: s});
            m.show();
        };
        /**
         * 设置弹出信息框
         * @param msg       显示的信息，支持html
         * @param sed       倒计时关闭时间，单位：second
         * @param callback  关闭触发回调函数
         */
        var set = function (msg, sed, callback) {
            var ele = document.getElementById("alert_modal_element");
            if (msg) {
                if (typeof msg === 'object') {//应对后端返回提示时使用Object封装
                    msg = JSON.stringify(msg);
                }
                if(ele){
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }else{
                    init();
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }
                show();
            }
            if (sed > 0) {
                setTimeout(function () {
                    show(false);
                }, 1000 * sed);
            }//无关闭时间或者关闭时间为0，不自动关闭
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#alert_modal_close").on("click", function () {
                if (callback && callback instanceof Function) {
                    callback();
                }
                show(false);
                //阻止事件继续传递
                return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //选择信息框
    var confirm = (function () {
        var init = function () {
            if (!document.getElementById("confirm_modal_element")) {
                $('body').append('<div id="confirm_modal_element" class="confirm-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="confirm-modal-content">' +
                    '<div id="confirm_modal_header" class="confirm-modal-header dp-n"></div>' +
                    '<div class="confirm-modal-body"><span id="confirm_modal_text" class="confirm-modal-text"></span></div>' +
                    '<div class="confirm-modal-footer">' +
                    '<div class="footer-button-success"><button class="confirm-modal-button  modal-success" data-confirm="success">确认</button></div>' +
                    '<div class="footer-button-false"><button class="confirm-modal-button" data-confirm="error">取消</button></div>' +
                    '</div></div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "confirm_modal_element", s: s});
            m.show();
        };
        /**
         * 设置选择信息框的内容
         * @param option    配置
         * {
         *      title:"头部显示的信息"
         *      ,text:"显示的提示信息"
         *      ,success:"点击成功后的回调"
         *      ,error:"点击失败后的回调"
         *      ,complete:"点击按钮后的整体回调"
         * }
         */
        var bar = 0;
        var set = function (option) {
            if (!option) {
                return false;
            }
            if ("title" in option && option.title.length > 0) {//有头部，则显示头部
                document.getElementById("confirm_modal_header").innerHTML = option.title;
            }
            if ("text" in option && option.text.length > 0) {//有内容，则显示整个选择信息框
                document.getElementById("confirm_modal_text").innerHTML = option.text;
            }
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#confirm_modal_element").find(".confirm-modal-button").off("click").on("click", function () {
                //fixme .off("click")用于防止多次触发<--很玄学，我也不知道为什么，但是请不要修改。
                var atr = $(this).attr("data-confirm");//选择的按钮
                bar++;
                if (option && atr in option && option[atr] instanceof Function) {
                    option[atr]();
                }
                if (option && "complete" in option && option.complete instanceof Function) {
                    option.complete();//若有完成函数，则执行
                } else {//否则，关闭选择框
                    show(false);
                }
                //阻止事件继续传递
                //return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //覆盖层
    var cover = (function () {
        var init = function () {
            if (!document.getElementById("cover_modal_element")) {
                $('body').append('<div id="cover_modal_element" class="cover-modal-element dp-n"></div>');
            }
            return false;
        };
        var hide = function () {
            document.getElementById("cover_modal_element").style.display = "none";
        };
        var show = function () {
            document.getElementById("cover_modal_element").style.display = "block";
        };
        return {
            init: init
            , show: show
            , hide: hide
        }
    }());
    return {
        initLoading: loading.init
        , showLoading: loading.show

        , initAlert: alert.init
        , showAlert: alert.show
        , setAlert: alert.set

        , initConfirm: confirm.init
        , setConfirm: confirm.set
        , showConfirm: confirm.show
        , initCover: cover.init
    }
}());

//页面加载完毕后生成四个自定义模态框
setTimeout(function () {
    //页面加载时生成一个覆盖层
    Modal.initCover();
    //页面加载时生成一个加载信息框
    Modal.initLoading();
    //页面加载时生成一个弹出信息框
    Modal.initAlert();
    //页面加载时生成一个选择信息框
    Modal.initConfirm();
}, 100);


//抛出上层调用
exports.showLoading = Modal.showLoading;
exports.setAlert = Modal.setAlert;
exports.showAlert = Modal.showAlert;
exports.setConfirm = Modal.setConfirm;
exports.showConfirm = Modal.showConfirm;
},{}],5:[function(require,module,exports){
/**
 * Created by Auser on 2016/12/6.
 */
"use strict";
var Data = (function () {
    var down = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/other/ossDown'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var up = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/other/ossUp'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var ossUpload = function (param, data, callback) {
        var _data = {};
        var formdata = new FormData();
        formdata.append("OSSAccessKeyId", param.AccessKeyId);
        formdata.append("policy", param.Policy);
        formdata.append("Signature", param.Signature);
        formdata.append("key", param.Keyname);
        formdata.append("Content-Disposition", "attachment;filename=\"" + data.name + "\"");
        formdata.append("file", data);
        $.ajax({
            url: param.UploadURL
            , data: formdata
            , processData: false
            , cache: false
            , async: false
            , contentType: false
            , type: 'post'
            , timeout: 100000
            , success: function () {
                _data = {
                    status: 1
                }
            }, error: function () {
                _data = {
                    status: -1
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var addFile = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail/add'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var update = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/underway/update'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var pmxg = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/underway/pmxg'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var removeFile = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail/remove'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var fileList = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail/list'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var warehouseDetail = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/warehouse/detail/'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var company = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail/company'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var changeState = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail/changeState'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var track = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail/track'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var declareData = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail/declareData'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var personAdd = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail/personAdd'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var contactList = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail/contactList'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var subData = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail/subData'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var detail = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var NewSubNum = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail/NewSubNum'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var newStorage = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail/newStorage'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var addStorage = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail/addStorage'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var moveStorage = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail/moveStorage'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var changeName = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/detail/changeName'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    return {
        down: down
        , up: up
        , ossUpload: ossUpload
        , addFile: addFile
        , removeFile: removeFile
        , fileList: fileList
        , warehouseDetail: warehouseDetail
        , company: company
        , changeState: changeState
        , update: update
        , pmxg: pmxg
        , track: track
        , declareData: declareData
        , personAdd: personAdd
        , contactList: contactList
        , subData: subData
        , detail: detail
        , NewSubNum: NewSubNum
        , newStorage: newStorage
        , addStorage: addStorage
        , moveStorage: moveStorage
        , changeName: changeName
    }
}());
module.exports.Data = Data;
},{}],6:[function(require,module,exports){
/**
 * Created by Jeremy on 2017/2/6.
 */
'use strict';
var Dom = (function () {
    var list = function (json, param) {
        var str = '';
        if (json && json.resCode == 0 && 'resBody' in json && json.resBody && 'sList' in json.resBody && json.resBody.sList instanceof Array) {
            if (json.resBody.sList.length > 0) {
                var arr = json.resBody.sList;
                for (var a in arr) {
                    if (arr.hasOwnProperty(a)) {
                        str += render(arr[a]);
                    }
                }
                $.burster($(".outer-page"), param.offset || 0, json.resBody.totalCount || 0, 5, param.limit || 20);
            } else {
                str = '<tr class="wrong"><td colspan="9">暂无订单信息，请添加！</td></tr>';
                $('.outer-page').html('');
            }
        } else {
            str = '<tr class="wrong"><td colspan="9">请求失败，<a href="">请重试！</a></td></tr>';
            $('.outer-page').html('');
        }
        function render(d) {
            var c = d.company || {}
                , o = d.order || {}
                , m = d.member || {}
                , type;
            switch (o.orderChannel) {
                case 1:
                    type = '自助订舱';
                    break;
                case 2:
                    type = '快速订舱';
                    break;
                case 3:
                    type = '后台下单';
                    break;
                default:
                    type = '自助订舱';
                    break;
            }
            return '<tr> <td rowspan="2">' + o.orderNum + '</td> <td rowspan="2">' + (c.companyName || '/') + '</td>' +
                ' <td>' + new Date(o.createDt.replace(/-/g, "/")).Format('yyyy-MM-dd hh:mm') + '</td> <td>起始港：' + (o.deptCode || '/') + '</td> <td>航空公司：' + (o.airCompanyCode || '/') + '</td> ' +
                '<td colspan="2">数量：（' + (o['declareCargo'].cargoCount || '/') + '件） 体积：（' + (myformat.formatvolume(o['declareCargo'].cargoSize) || '/') + 'm³） 重量：（' + (o['declareCargo'].cargoWeight || '/') + 'KG）</td> ' +
                '<td rowspan="2">CNY ' + o.declareChargingTotal + '</td> <td rowspan="2" data-jcbh="' + o.warehouseEntryNum + '" data-khmc="' + (c.companyName || '/') + '" data-lxr="' + (m.memberName || '/') + '"> ' +
                    //(o.orderState == 0 ?
                    //'<a href="javascript:void(0);" class="accept" data-id="' + o.orderId + '">订单确认</a>' :
                    //'<a href="javascript:void(0);" class="show-bg" data-id="' + o.orderId + '">报关</a>' +
                    //'<a href="javascript:void(0);" class="show-zd" data-id="' + o.orderId + '">制单</a>' +
                    //'<a href="javascript:void(0);" class="add-data" data-id="' + o.orderId + '">录入进仓数据</a>' +
                    //'<a href="javascript:void(0);" class="ensure-data" data-id="' + o.orderId + '">确认进仓数据</a> ') +
                    //'<a href="javascript:void(0);" class="refuse" data-id="' + o.orderId + '">取消</a>' +
                '<a href="javascript:void(0);" class="show-zd" data-id="' + o.orderId + '">制单</a>' +
                ' </td> </tr> <tr> <td>' + (type || '/') + '</td> <td>目的港：' + (o.destCode || '/') + '</td> <td>起飞时间：' + new Date(o.flightDate.replace(/-/g, "/")).Format('yyyy-MM-dd') + '</td> ' +
                '<td>品名：' + (o['declareCargo'].cargoName || '/') + '</td> <td>单价：CNY ' + o.chargingPrice + '</td> </tr>' +
                '<tr><td colspan="9" class="short-td"></td></tr>';
        }

        $('.outer-tb').find('tbody').html(str);
    };
    var renderTr = function (json) {
        var str = ''
            , result = "";
        if (json && 'list' in json && json.list instanceof Array) {
            var list = json.list;
            if (list.length > 0) {
                for (var l in list) {
                    if (list.hasOwnProperty(l)) {
                        var d = list[l];
                        str += render(d, parseInt(l) + 1);
                    }
                }
                result += '<tr> <td></td> <td>总计</td> ' +
                    '<td>' + json.totalCount + '</td> <td>' + myformat.formatvolume(json.totalSize) + '</td> <td>' + myformat.formatvolume(json.totalWeight) + '</td>' +
                    ' <td></td> <td>' + json.totalDamage + '</td> <td>' + json.totalDamp + '</td> <td>' + json.totalTransform + '</td> <td>' + json.totalOther +
                    '</td> <td></td> </tr>';
            } else {
                str = '<tr><td colspan="10" class="long-td">暂无进仓数据，请添加！</td></tr>';
            }
        } else {
            str = '<tr><td colspan="10" class="long-td">请求出错，请重试！</td></tr>';
        }
        $('.ensure-data-tb').find('tbody').html(str);
        $('.ensure-data-tb').find('tfoot').html(result);
        function render(d, index) {
            var type;
            switch (d.packageType) {
                case 1:
                    type = '纸箱';
                    break;
                case 2:
                    type = '木箱';
                    break;
                case 3:
                    type = '卷';
                    break;
                case 4:
                    type = '托盘';
                    break;
                default:
                    type = '纸箱';
                    break;
            }
            return '<tr> <td>' + index + '</td> <td>' + new Date(d.createDt.replace(/-/g, "/")).Format('yyyy-MM-dd hh:mm') + '</td>' +
                ' <td>' + d.storageCount + '</td> <td>' + d.storageSize + '</td> <td>' + d.storageWeight + '</td>' +
                ' <td>' + type + '</td> <td>' + d.damageCount + '</td> <td>' + d.dampCount + '</td>' +
                ' <td>' + d.transformCount + '</td> <td>' + d.otherCount + '</td> <td>' + d.storageRemark + '</td> </tr>';
        }
    };
    var innerList = function (json, param) {
        var str = '';
        if (json && json.resCode == 0 && 'resBody' in json && json.resBody && 'sList' in json.resBody && json.resBody.sList instanceof Array) {
            if (json.resBody.sList.length > 0) {
                var arr = json.resBody.sList;
                for (var a in arr) {
                    if (arr.hasOwnProperty(a)) {
                        str += render(arr[a]);
                    }
                }
                $.burster($(".inner-page"), param.offset || 0, json.resBody.totalCount || 0, 5, param.limit || 20);
            } else {
                str = '<tr class="wrong"><td colspan="9">暂无搜索信息！</td></tr>';
                $('.inner-page').html('');
            }
        } else {
            str = '<tr class="wrong"><td colspan="9">请求失败，<a href="">请重试！</a></td></tr>';
            $('.inner-page').html('');
        }
        function render(d) {
            var str = '';
            for (var t in d.transPort) {
                if (d.transPort.hasOwnProperty(t)) {
                    var s = d.transPort[t];
                    str += s.portCode + (t == d.transPort.length - 1 ? '' : ' -> ');
                }
            }
            return ' <tr> <td><input type="radio" name="i-sg" data-id="' + d.airwayId + '"/></td> ' +
                '<td>' + d.airCompanyCode + '</td> <td>' + str + '</td> <td>' + d.airwayPrice.rate[0].policy['45'] + '</td> ' +
                '<td>' + d.airwayPrice.rate[0].policy['100'] + '</td> <td>' + d.airwayPrice.rate[0].policy['300'] + '</td>' +
                ' <td>' + d.airwayPrice.rate[0].policy['500'] + '</td> <td>' + d.airwayPrice.rate[0].policy['1000'] + '</td>'

        }

        $('.search-tb').find('tbody').html(str);
    };
    return {
        list: list
        , renderTr: renderTr
        , innerList: innerList
    }
}());
module.exports.Dom = Dom;
},{}],7:[function(require,module,exports){
/**
 * Created by Jeremy on 2017/2/6.
 */
'use strict';
var Listener = require('./listener').Listener;
var general = require('../../general/general').general

general.run();
Listener.run();
},{"../../general/general":3,"./listener":8}],8:[function(require,module,exports){
/**
 * Created by Jeremy on 2017/1/5.
 */

'use strict';

require('../../general/burster');
var url = require('../../general/function').url
    , myformat = require('../../general/function').format
    , Modal = require('../../general/modal');
var Data = require('./data').Data
    , Dom = require('./dom').Dom;
var Listener = (function () {
    //待提交的分单号
    var subOrderNum;
    var opeSid='';
    var oId = $('#up-file').data('id');
    //待删除的元素
    var removeEle;
    //缓存删除内容
    var removeFile = {
        "orderId": oId,
        "keyName": 0
    };
    //报关&&预审
    var sendType = {
        type: 0
        , id: 0
        , sid: 0
    };
    var listener = function () {
        $('#ip-qfsj').datetimepicker({
            format: 'hh:ii',//日期的格式
            startView: 0,//选择器的开始日期
            startDate: new Date().Format('yyyy-MM-dd'),
            autoclose: true,//日期选择完成后是否关闭选择框
            bootcssVer: 3,//显示向左向右的箭头
            language: 'zh-CN',//语言
            minView: 0,//表示日期选择的最小范围，默认是hour
            minuteStep: 5
            //format: 'hh:ii',
            //autoclose: true,
            //startView: 'hour',
            //minView: 0,
            //minuteStep: 1
        });
        $(document).on('click', '.close-btn', function () {
            $('.white-back').addClass('dp-n');
            $('.alert-part').addClass('dp-n');
        });
        $(document).on('click', 'a.rm', function () {
            removeFile['keyName'] = $(this).data('key');
            removeEle = $(this).parents('.up-part');
            $('.white-back').removeClass('dp-n');
            $('.remove-part').removeClass('dp-n');
        });
        $(document).on('click', 'a.rm-type', function () {
            removeFile['keyName'] = $(this).data('key');
            removeEle = $(this).parents('.add-type');
            $('.white-back').removeClass('dp-n');
            $('.remove-type-part').removeClass('dp-n');
        });
        $(document).on('click', 'a.dl', function () {
            var file = $(this).data('key');
            Data.down({file: file}, function (json) {
                if (json && 'resBody' in json) {
                    window.open(json.resBody);
                }
            });
        });
        $(document).on('click', '.send-bg', function () {
            var ele = $('.bg-part');
            sendType.type = parseInt($(this).data('param'));
            sendType.id = $(this).data('id');
            sendType.sid = $(this).data('sid') || null;
            ele.find('.header').html('<p class="header">确认' + $(this).text() + ' <span class="close-btn">X</span></p>');
            $('.white-back').removeClass('dp-n');
            ele.removeClass('dp-n');
        });
        $(document).on('click', '#bg-ensure', function () {
            var data = {
                "orderId": sendType.id,
                "agentId": 0,
                "state": sendType.type
                , "subNum": sendType.sid
            };
            Data.changeState(data, function (json) {
                if (json && 'resCode' in json && json.resCode == 0) {
                    Modal.setAlert(json.resMsg || '发送成功！', null, function () {
                        location.reload();
                    });
                } else {
                    Modal.setAlert(json.resMsg || '发送失败，请重试！');
                }
            });
        });
        $(document).on('click', '#bjjcsj-btn', function () {
            location.href = '/order/storage?id=' + $(this).data('id') + '&n=' + ($(this).data('n') || '/') + '&c=' + ($(this).data('c') || '/');
        });
    };
    var upload = function () {
        $(document).on('change', '#up-file', function () {
            var arr = ['doc', 'docx', 'xls', 'xlsx', 'pdf', 'jpg', 'png', 'bmp'];
            var _this = $(this);
            var file = this.files[0]
                , size = this.files[0].size
                , name = this.files[0].name;
            var na = name.split('.');
            if (arr.indexOf(na[na.length - 1].toLowerCase()) >= 0) {
                if (size < 2097152) {
                    Data.up({"file": name}, function (json) {
                        var token;
                        if (json && 'resCode' in json && json.resCode == 0) {
                            token = json.resBody;
                        }
                        if (token) {
                            Data.ossUpload(token, file, function (data) {
                                if (data && 'status' in data && data.status > 0) {
                                    var d = {
                                        "orderId": _this.data('id'),
                                        "fileName": name,
                                        "fileComment": '',
                                        "keyName": token.Keyname
                                        , "fileType": 20
                                        , subNum: _this.data('sid') == 0 ? '' : _this.data('sid')
                                    };
                                    Data.addFile(d, function (json) {
                                        if (json && 'resCode' in json && json.resCode == 0 && json.resBody) {
                                            var d = json.resBody;
                                            var str = '<div class="up-part"> <div class="top">' + d.fileExtension.toUpperCase() + '<a href="javascript:void(0);" class="dl" data-key="' + d.keyName + '"></a> ' +
                                                '<a href="javascript:void(0);" class="rm" data-key="' + d.keyName + '"></a> ' +
                                                '</div> <a href="javascript:void(0);" class="dp-b">' + d.fileName + '</a> ' +
                                                '</div>';
                                            $('.ddfj').find('.add').before(str);
                                        } else {
                                            Modal.setAlert('上传失败！');
                                        }
                                    });
                                }
                            });
                        }
                    });
                } else {
                    Modal.setAlert('您上传的文件超过2M！请重新选择。');
                }
            } else {
                Modal.setAlert('文件格式支持.doc/.docx/.xls/.xlsx/.pdf/.jpg/.png/.bmp');
            }
        });
        $(document).on('change', '.up-type', function () {
            var arr = ['doc', 'docx', 'xls', 'xlsx', 'pdf', 'jpg', 'png', 'bmp'];
            var _this = $(this);
            var file = this.files[0]
                , size = this.files[0].size
                , name = this.files[0].name;
            var na = name.split('.');
            if (arr.indexOf(na[na.length - 1].toLowerCase()) >= 0) {
                if (size < 2097152) {
                    Data.up({"file": name}, function (json) {
                        var token;
                        if (json && 'resCode' in json && json.resCode == 0) {
                            token = json.resBody;
                        }
                        if (token) {
                            Data.ossUpload(token, file, function (data) {
                                if (data && 'status' in data && data.status > 0) {
                                    var d = {
                                        "orderId": _this.data('id'),
                                        "fileName": name,
                                        "fileComment": '',
                                        "keyName": token.Keyname
                                        , "fileType": _this.data('type')
                                    };
                                    Data.addFile(d, function (json) {
                                        if (json && 'resCode' in json && json.resCode == 0 && json.resBody) {
                                            var d = json.resBody;
                                            var ele = _this.parents('.add-type');
                                            var str = d.fileExtension.toUpperCase() + '<a href="javascript:void(0);" class="dl" data-key="' + d.keyName + '"></a> <a href="javascript:void(0);" class="rm-type" data-key="' + d.keyName + '"></a>'
                                            ele.addClass('active');
                                            ele.find('.top').html(str);
                                            ele.find('.f-name').html(d.fileName);
                                            ele.find('input').hide();
                                        } else {
                                            Modal.setAlert('上传失败！');
                                        }
                                    });
                                }
                            });
                        }
                    });
                } else {
                    Modal.setAlert('您上传的文件超过2M！请重新选择。');
                }
            } else {
                Modal.setAlert('文件格式支持.doc/.docx/.xls/.xlsx/.pdf/.jpg/.png/.bmp');
            }
        });
        $(document).on('change', '#up-file-fd', function () {
            var arr = ['doc', 'docx', 'xls', 'xlsx', 'pdf', 'jpg', 'png', 'bmp'];
            var _this = $(this);
            var file = this.files[0]
                , size = this.files[0].size
                , name = this.files[0].name;
            var na = name.split('.');
            if (arr.indexOf(na[na.length - 1].toLowerCase()) >= 0) {
                if (size < 2097152) {
                    Data.up({"file": name}, function (json) {
                        var token;
                        if (json && 'resCode' in json && json.resCode == 0) {
                            token = json.resBody;
                        }
                        if (token) {
                            Data.ossUpload(token, file, function (data) {
                                if (data && 'status' in data && data.status > 0) {
                                    var d = {
                                        "orderId": url.get('id'),
                                        "fileName": name,
                                        "fileComment": '',
                                        "keyName": token.Keyname
                                        , "fileType": 20
                                        , subNum: _this.data('sid') == 0 ? '' : _this.data('sid')
                                    };
                                    Data.addFile(d, function (json) {
                                        if (json && 'resCode' in json && json.resCode == 0 && json.resBody) {
                                            var d = json.resBody;
                                            var str = '<div class="up-part"> <div class="top">' + d.fileExtension.toUpperCase() + '<a href="javascript:void(0);" class="dl" data-key="' + d.keyName + '"></a> ' +
                                                '<a href="javascript:void(0);" class="rm" data-key="' + d.keyName + '"></a> ' +
                                                '</div> <a href="javascript:void(0);" class="dp-b">' + d.fileName + '</a> ' +
                                                '</div>';
                                            _this.parents('.ddfj-pub').find('.add').before(str);
                                        } else {
                                            Modal.setAlert('上传失败！');
                                        }
                                    });
                                }
                            });
                        }
                    });
                } else {
                    Modal.setAlert('您上传的文件超过2M！请重新选择。');
                }
            } else {
                Modal.setAlert('文件格式支持.doc/.docx/.xls/.xlsx/.pdf/.jpg/.png/.bmp');
            }
        });
    };
    var fileList = function () {
        Data.fileList({id: url.get('id'), sid: url.get('sid')}, function (json) {
            if (json && 'resCode' in json && json.resCode == 0 && json.resBody) {
                var data22=0;
                var str = '';
                var arr = json.resBody;
                for (var a in arr) {
                    if (arr.hasOwnProperty(a)) {
                        var d = arr[a];
                        if (d.fileType == 20) {
                            str += '<div class="up-part"> <div class="top">' + d.fileExtension.toUpperCase() + '<a href="javascript:void(0);" class="dl" data-key="' + d.keyName + '"></a> ' +
                                '<a href="javascript:void(0);" class="rm" data-key="' + d.keyName + '"></a> ' +
                                '</div> <a href="javascript:void(0);" class="dp-b">' + d.fileName + '</a> ' +
                                '</div>';
                        } else if (d.fileType == 22) {
                            data22=1;
                            $('.dl-file[data-type="' + d.fileType + '"]').data('key', d.keyName);
                        } else if (d.fileType == 21) {
                            var yld = '';
                            yld += '<div class="files"> <div class="top">' + arr[a].fileExtension.toUpperCase() + '<span class="glyphicon glyphicon-circle-arrow-down" data-key="' + arr[a].keyName + '"></span> </div> <a href="javascript:void(0);" class="dp-b">' + arr[a].fileName + '</a> </div>'

                            $('.yl-part').find('.dp-tb').append(yld);
                            $('#yldmain').show();
                        } else {
                            var ele = $('.add-type[data-type=' + d.fileType + ']');
                            ele.addClass('active');
                            ele.find('input').hide();
                            ele.find('.top').html(d.fileExtension.toUpperCase() + '<a href="javascript:void(0);" class="dl" data-key="' + d.keyName + '"></a> <a href="javascript:void(0);" class="rm-type" data-key="' + d.keyName + '"></a> ');
                            ele.find('.f-name').html(d.fileName);
                        }
                    }
                }
                if (data22 == 0) {
                    $('.dl[data-type="22"]').addClass('none-f');
                }
                $('.ddfj').find('.add').before(str);
            }
        });
    };
    var submit = function () {
        $(document).on('click', '#remove-ensure', function () {
            Data.removeFile(removeFile, function (json) {
                if (json && 'resCode' in json && json.resCode == 0) {
                    removeEle.remove();
                    $('.white-back').addClass('dp-n');
                    $('.remove-part').addClass('dp-n');
                } else {
                    Modal.setAlert('删除失败，请重试！');
                }
            });
        });
        $(document).on('click', '#remove-type-ensure', function () {
            Data.removeFile(removeFile, function (json) {
                if (json && 'resCode' in json && json.resCode == 0) {
                    removeEle.removeClass('active');
                    removeEle.find('.top').html('+');
                    var a = removeEle.find('.f-name');
                    a.html(a.data('name'));
                    removeEle.find('input').show();
                    $('.white-back').addClass('dp-n');
                    $('.remove-type-part').addClass('dp-n');
                } else {
                    Modal.setAlert('删除失败，请重试！');
                }
            });
        });
        $(document).on('click', '#save-info', function () {
            var pass = true;
            var info = $('#ip-hbxx').val();
            var tm = $('#ip-qfsj').val();
            var xx=$('#pn-hbxx').val();
            if (!tm || !info) {
                pass = false;
            }
            if (pass) {
                var data = {
                    "airlineInfo": info,
                    "airlineTime": $('#upd-time').html() + ' ' + tm + ':00',
                    "orderId": $(this).data('id'),
                    "memberId": 0
                };
                Data.update(data, function (json) {
                    console.log(json);
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert(json.resMsg || '更新成功！', null, function () {
                            //仅仅更新航班，不需要重载信息
                            //location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '更新失败，请重试！');
                    }
                });
            } else {
                Modal.setAlert('请填写航班信息和起飞时间！');
            }
        });
        $(document).on('click', '#pm-info', function () {
            var pass = true;
            var xx=$('#pn-name').val();
            if (pass) {
                var data = {
                    "cargoName": xx,
                    "markName":$('#mark-name').val(),
                    "orderId": $(this).data('id'),
                    "memberId": 0
                };
                Data.pmxg(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert(json.resMsg || '更新成功！', null, function () {
                            location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '更新失败，请重试！');
                    }
                });
            } else {
                Modal.setAlert('请填写品名！');
            }
        });
    };
    var warehouseDetail = function () {
        Data.warehouseDetail({id: $('.ckmc').data('id')}, function (json) {
            var name = '/';
            if (json && 'resBody' in json && json.resBody) {
                var d = json.resBody;
                name = d.warehouseName;
            }
            $('.ckmc').html(name);
            //$('#zdck').value=$('.ckmc').data('id');
            var ckmId=$('.ckmc').data('id');
        });
    };
    var company = function () {
        Data.company({id: $('.khxx').data('id')}, function (json) {
            var mc = '/', dj = '/', lxr = '/', lxfs = '/', qq = '/';
            if (json && 'resBody' in json && json.resBody) {
                var m = json.resBody.member
                    , c = json.resBody.company;
                mc = c.companyName;
                lxr = m.name || '/';
                lxfs = m.mobile || '/';
                qq = m.QQ || '/';
                switch (c.applyLevel) {
                    case 0:
                        dj = 'D';
                        break;
                    case 1:
                        dj = 'C';
                        break;
                    case 2:
                        dj = 'B';
                        break;
                    case 3:
                        dj = 'A';
                        break;
                    case 4:
                        dj = 'AA';
                        break;
                }
            }
            $('.kh-mc').html(mc);
            $('.kh-dj').html(dj);
            $('.kh-lxr').html(lxr);
            $('.kh-lxfs').html(lxfs);
            $('.kh-qq').html(qq);
        });
    };
    var trackInit = function () {
        var str = '';
        var id = $('#ydh').data('no');
        if (id != 0) {
            Data.track({id: id}, function (json) {
                if (json && 'resBody' in json && json.resBody) {
                    var b = json.resBody;
                    if ('trackList' in b && b.trackList instanceof Array && b.trackList.length > 0) {
                        var arr = b.trackList;
                        for (var a in arr) {
                            if (arr.hasOwnProperty(a)) {
                                var d = arr[a];
                                str += '<tr><td>' + d.itemDate + '</td><td>' + d.itemLocation + '</td>' +
                                    '<td>' + d.itemCode + '</td><td>' + d.itemDescription + '</td>' +
                                    '<td>' + d.cargoCount + '</td><td>' + d.cargoWeight + '</td></tr>'
                            }
                        }
                        $('.ydtb').find('tbody').html(str);
                        $('.ydtb').show();
                    }
                }
            });
        }
    };
    var declareData = function () {
        Data.declareData({id: url.get('id')}, function (json) {
            var str = '';
            if (json && 'resBody' in json && json.resBody) {
                str += '<div class="up-part"> <div class="top">PDF<span data-type="yld" class="span-a" data-key="' + url.get('id') + '"></span> </div> <a href="javascript:void(0);" class="dp-b">电子预录单</a> </div>' +
                    '<div class="up-part"> <div class="top">PDF<span data-type="ckd" class="span-a" data-key="' + url.get('id') + '"></span> </div> <a href="javascript:void(0);" class="dp-b">放行通知书</a> </div>';
                $('.fxtzs-fill').append(str);
                $('.fxtzs').show();
            }
        });
        $(document).on('click', '.span-a', function () {
            location.href = '/order/detail/' + $(this).data('type') + '?id=' + $(this).data('key');
        });
    };
    var contact = function () {
        var pb = {
            type: 1  //1为发货人操作，2为收货人操作
            , operate: 1  //1为新建操作，2为搜索操作
            , offset: 0  //搜索分页偏移量
            , limit: 5    //分页限制条数
            , data: {}  //缓存请求数据
        };
        $(document).on('click', '.close-c', function () {
            pb.offset = 0;
            $('.contact-modal').addClass('dp-n');
            $('.white-back').addClass('dp-n');
        });
        $(document).on('click', '.show-contact', function () {
            subOrderNum = $(this).data('sid') == 0 ? null : $(this).data('sid');
            pb.type = $(this).data('t') == '收货人' ? 2 : 1;
            switch($(this).data('t')){
                case '收货人':
                    pb.type=2;
                    break;
                case '发货人':
                    pb.type=1;
                    break;
                case '通知人':
                    pb.type=3;
                    break;
            }
            var ele = $('.contact-modal');
            opeSid = $(this).data('sid') || null;
            var d;
            //var d = pb.type == 1 ? fhr : shr;
            switch(pb.type){
                case 1:
                    d=fhr;
                    break;
                case 2:
                    d=shr;
                    break;
                case 3:
                    d=tzr;
                    break;
                default:
                    break;
            }
            ele.find('.contact-page').html('');
            $('.ct-require').removeClass('warm');
            ele.find('.new').show();
            ele.find('.search').hide();
            ele.find('#save-contact').show();
            ele.find('#ensure-contact').hide();
            ele.find('#s-name').val(d.contactName || '');
            ele.find('#s-dz').val(d.contactAddress || '');
            ele.find('#s-person').val(d.contactPerson || '');
            ele.find('#s-dh').val(d.contactTel || '');
            ele.find('#s-mail').val(d.contactEmail || '');
            ele.find('#s-cz').val(d.contactFax || '');
            ele.find('.header').html($(this).data('t') + '设置<span class="close-c">X</span>');
            ele.find('.show-name').html($(this).data('t'));
            $('#c-name').val('');
            ele.find('tbody').html('<tr class="wrong"> <td colspan="5">请搜索</td> </tr>');
            ele.removeClass('dp-n');
            $('.white-back').removeClass('dp-n');
        });
        //收发货人信息编辑
        var sNm,sNc,sNn,sNe;
        //var spanText=function(obj,i){
        //    $('#s-name').val('');
        //    $('#s-dz').val('');
        //    $('#s-dh').val('');
        //    $('#s-person').val('');
        //    $('#s-mail').val('');
        //    $('#s-cz').val('');
        //    var parent=$(obj).parent().parent().find('span').eq(i).parent().clone();
        //    parent.find('span').remove();
        //    return parent.text();
        //    parent.remove();
        //};
        opeSid = $(this).data('sid') || null;
        $(document).on('click', '.fd-top .show-contact', function () {
            subOrderNum = $(this).data('sid') == 0 ? null : $(this).data('sid');
            switch($(this).data('t')){
                case '收货人':
                    pb.type=2;
                    sNm=$(this).parent().parent().find('.ocName').html();
                    sNc=$(this).parent().parent().find('.occp').html();
                    sNn=$(this).parent().parent().find('.ocTel').html();
                    sNe=$(this).parent().parent().find('.ocEmail').html();
                    break;
                case '发货人':
                    pb.type=1;
                    sNm=$(this).parent().parent().find('.osName').html();
                    sNc=$(this).parent().parent().find('.oscp').html();
                    sNn=$(this).parent().parent().find('.osTel').html();
                    sNe=$(this).parent().parent().find('.osEmail').html();
                    break;
                case '通知人':
                    pb.type=3;
                    sNm=$(this).parent().parent().find('.otName').html();
                    sNc=$(this).parent().parent().find('.otcp').html();
                    sNn=$(this).parent().parent().find('.otTel').html();
                    sNe=sNe=$(this).parent().parent().find('.otEmail').html();
                    break;
            };

            var ele = $('.contact-modal');
            var sdz=$(this).data('dz') || '';
            var scz=$(this).data('fax') || '';
            ele.find('.contact-page').html('');
            $('.ct-require').removeClass('warm');
            ele.find('.new').show();
            ele.find('.search').hide();
            ele.find('#save-contact').show();
            ele.find('#ensure-contact').hide();
            ele.find('#s-name').val(sNm || '') ;
            ele.find('#s-dz').val(sdz || '');
            ele.find('#s-person').val(sNc || '');
            ele.find('#s-dh').val(sNn || '');
            ele.find('#s-mail').val(sNe || '');
            ele.find('#s-cz').val(scz || '');
            ele.find('.header').html($(this).data('t') + '设置<span class="close-c">X</span>');
            ele.find('.show-name').html($(this).data('t'));
            ele.find('tbody').html('<tr class="wrong"> <td colspan="5">请搜索</td> </tr>');
            ele.removeClass('dp-n');
            $('.white-back').removeClass('dp-n');
        });
        $(document).on('click', '.sel-tp span', function () {
            var ele = $('.contact-modal');
            pb.operate = $(this).data('tp');
            if (pb.operate == 1) {
                ele.find('.new').show();
                ele.find('#save-contact').show();
                ele.find('.search').hide();
                ele.find('#ensure-contact').hide();
            } else {
                ele.find('.new').hide();
                ele.find('#save-contact').hide();
                ele.find('.search').show();
                ele.find('#ensure-contact').show();
            }
        });
        $(document).on('click', '#save-contact', function () {
            var ele = $('.contact-modal');
            var pass = true;
            $('.ct-require').each(function () {
                //通知人不需要验证
                if ($(this).val() || pb.type ==3) {
                    $(this).removeClass('warm');
                } else {
                    $(this).addClass('warm');
                    pass = false;
                }
            });
            if (pass) {
                var data = {
                    "orderId": $(this).data('id'),
                    "subNum": subOrderNum,
                    "memberId": $(this).data('mid'),
                    "contactType": pb.type,
                    "contactName": ele.find('#s-name').val(),
                    "contactAddress": ele.find('#s-dz').val(),
                    "contactPerson": ele.find('#s-person').val(),
                    "contactTel": ele.find('#s-dh').val(),
                    "contactFax": ele.find('#s-cz').val(),
                    "contactEmail": ele.find('#s-mail').val(),
                    "isSave": false
                };
                Data.personAdd(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert('设置成功！', null, function () {
                            location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '设置失败，请重试！');
                    }
                });
            }
        });
        $(document).on('click', '#ensure-contact', function () {
            var id = $('input[name="c-sg"]:checked').data('id');
            if (id) {
                var d = pb.data[id];
                var ele = $('.contact-modal');
                var data = {
                    "orderId": $(this).data('id'),
                    "subNum": subOrderNum,
                    "contactType": pb.type,
                    "contactName": d.contactName,
                    "contactAddress": d.contactAddress,
                    "contactPerson": d.contactPerson,
                    "contactTel": d.contactTel,
                    "contactFax": d.contactFax,
                    "contactEmail": d.contactEmail,
                    "isSave": false,
                    "memberId": $(this).data('mid')
                };
                Data.personAdd(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert('设置成功！', null, function () {
                            location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '设置失败，请重试！');
                    }
                });
            } else {
                Modal.setAlert('请选择一个收发货人！');
            }
        });
        $(document).on('click', '#search-p', function () {
            pb.offset = 0;
            cInit();
        });
        $(document).on('click', '.contact-page .pages', function () {
            pb.offset = $(this).data('offset');
            cInit();
        });
        var cInit = function () {
            var data = {
                type: pb.type
                , key: $('#c-name').val()
                , companyId: $('#search-p').data('cid')
                , offset: pb.offset
                , limit: pb.limit
            };
            Data.contactList(data, function (json) {
                var str = '';
                pb.data = {};
                if (json && 'resCode' in json && json.resCode == 0) {
                    var arr = json.resBody.sList;
                    if (arr.length > 0) {
                        for (var a in arr) {
                            if (arr.hasOwnProperty(a)) {
                                var d = arr[a];
                                pb.data[d.contactId] = d;
                                str += ' <tr> <td><input data-id="' + d.contactId + '" type="radio" name="c-sg"/></td>' +
                                    ' <td>' + d.contactName + '</td> <td>' + d.contactAddress + '</td> <td>' + d.contactPerson + '</td>' +
                                    ' <td>' + d.contactTel + '</td> </tr>';
                            }
                        }
                        $.burster($('.contact-page'), pb.offset || 0, json.resBody.totalCount, 5, pb.limit || 5);
                    } else {
                        str += '<tr class="wrong"> <td colspan="5">暂无收发货人，请添加！</td> </tr>';
                        $('.contact-page').html('');
                    }
                } else {
                    str += '<tr class="wrong"> <td colspan="5">请求出错，请重试！</td> </tr>';
                    $('.contact-page').html('');
                }
                $('.contact-modal').find('tbody').html(str);
            });
        };
    };
    var subData = function () {
        $(document).on('change', '.td-sg,.fd-sg', function () {
            $(this).parents('tr').css('background-color', $(this).prop('checked') ? '#c7edff' : '#fff');
        });
        $(document).on('click', '#sel-td', function () {
            $('.td-sg').prop('checked', $(this).prop('checked')).trigger('change');
        });
        $(document).on('click', '#sel-fd-all', function () {
            var tb = $(this).parents('table');
            tb.find('.fd-sg').prop('checked', $(this).prop('checked')).trigger('change');
        });
        $(document).on('click', '.sg-tab', function () {
            $(this).addClass('active');
            $('#' + $(this).data('tar')).addClass('active');
            $(this).siblings().removeClass('active');
            $('#' + $(this).data('tar')).siblings().removeClass('active');
            $('#cdd').prop('disabled', $(this).data('tar') == 'wfdhw');
        });
        $(document).on('click', '.dl-yld', function () {
            if (this.id =="dlyldmain") { //主单
                if ($('.yl-part').find('.dp-tb').find('.files').length == 0) {
                    $('.yl-part').find('.dp-tb').html('暂无预录单');
                }
            } else {

                if ($(this).find(".temp").find("a").length == 0) {
                    $('.yl-part').find('.dp-tb').html('暂无预录单');
                } else {
                    $('.yl-part').find('.dp-tb').html($(this).find(".temp").html());
                }
            }
            $('.white-back').removeClass('dp-n');
            $('.yl-part').removeClass('dp-n');
        });

        $(document).on('click', '.dl-file', function () {
            var file = $(this).data('key');
            if (file != 0) {
                Data.down({file: file}, function (json) {
                    if (json && 'resBody' in json) {
                        window.open(json.resBody);
                    }
                });
            }
            //} else {
            //    Modal.setAlert('暂无' + $(this).find('.txt').html());
            //}
        });
        $(document).on('click', '.glyphicon-circle-arrow-down', function () {

            var file = $(this).data('key');
            Data.down({file: file}, function (json) {
                if (json && 'resBody' in json) {
                    window.open(json.resBody);
                }
            });

        });
        $(document).on('click', '.yfd-btn', function () {
            var _this = $(this);
            _this.find('.fl-r').html(_this.find('.fl-r').html() == '+展开' ? '-收起' : '+展开');
            url.set('click', _this.find('.fl-r').html() == '+展开' ? '' : _this.data('id'));
            var tar = $($(this).data('target'));
            if (_this.data('time') == 0) {
                $('.loading-part').show();
                Data.detail({
                    orderId: url.get('id')
                    , subOrderNum: $(this).data('id')
                    , agentCompanyId: 10000
                }, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        _this.data('time', 1);
                        var str = '';
                        var body = json.resBody || {};
                        var o = 'order' in body && body.order || {};
                        var storage = 'storage' in body && body.storage || {};
                        var entryList = 'entryList' in storage && storage.entryList || [];
                        var zjjs = 0, zjzl = 0, zjtj = 0, zjps = 0, zjbx = 0, zjsc = 0, zjqt = 0;

                        //发货人信息拼接
                        str += '<div class="fd-top fill">'
                        if (o.orderShipper && 'contactName' in o.orderShipper && o.orderShipper.contactName && o.orderShipper.contactName!='null' ) {
                            str += '<div class="fd-info"> <p class="title">发货人信息 <a href="javascript:void(0);" class="show-contact" data-t="发货人" data-sid="' + (o.subNum || 0) + '" data-dz="' + o.orderShipper.contactAddress + '" data-fax="' + o.orderShipper.contactFax + '">编辑</a> </p>';
                            str += '<p class="osName">' + o.orderShipper.contactName + '</p> <p class="oscp">' + o.orderShipper.contactPerson + '</p> <p class="osTel">' + o.orderShipper.contactTel + '</p> <p class="osEmail">' + o.orderShipper.contactEmail + '</p> </div>';
                        } else {
                            str += '<div class="fd-info"> <p class="title">发货人信息 <a href="javascript:void(0);" class="show-contact" data-t="发货人" data-sid="' + (o.subNum || 0) + '" data-dz="' + o.orderShipper.contactAddress + '" data-fax="' + o.orderShipper.contactFax + '">编辑</a>  </p>';
                            str += '<p class="no-sfhr">暂无发货人信息</p></div>'
                        }
                        //收货人信息拼接
                        if (o.orderConsignee && 'contactName' in o.orderConsignee && o.orderConsignee.contactName && o.orderConsignee.contactName!='null') {
                            str += '<div class="fd-info">' +
                                '<p class="title">收货人信息 ' +
                                '<a href="javascript:void(0);" class="show-contact" data-t="收货人" data-sid="' + (o.subNum || 0) + '" data-dz="' + (o.orderConsignee.contactAddress || '') + '" data-fax="' + o.orderConsignee.contactFax + '">编辑</a>' +
                                '</p>';
                            str += '<p class="ocName">' + o.orderConsignee.contactName + '</p> ' +
                                '<p class="occp">' + o.orderConsignee.contactPerson + '</p> ' +
                                '<p class="ocTel">' + o.orderConsignee.contactTel + '</p>' +
                                ' <p class="ocEmail">' + o.orderConsignee.contactEmail + '</p>' +
                                ' </div>';
                        } else {
                            str += '<div class="fd-info"> ' +
                                '<p class="title">收货人信息 ' +
                                '<a href="javascript:void(0);" class="show-contact" data-t="收货人" data-sid="' + (o.subNum || 0) + '" data-dz="' + o.orderConsignee.contactAddress + '" data-fax="' + o.orderConsignee.contactFax + '">编辑</a>' +
                                ' </p>';
                            str += '<p class="no-sfhr">暂无收货人信息</p></div>'
                        }
                        //通知人信息拼接
                        if (o.orderNotifier && 'contactName' in o.orderNotifier && o.orderNotifier.contactName && o.orderNotifier.contactName!=null) {
                            str += '<div class="fd-info"> <p class="title">通知人 <a href="javascript:void(0);" class="show-contact" data-t="通知人" data-sid="' + (o.subNum || 0) + '" data-dz="' + (o.orderNotifier.contactAddress || '') + '" data-fax="' + o.orderNotifier.contactFax + '">编辑</a> </p>';
                            str += '<p class="otName">' + o.orderNotifier.contactName + '</p> <p class="otcp">' + o.orderNotifier.contactPerson + '</p> <p class="otTel">' + o.orderNotifier.contactTel + '</p> <p class="otEmail">' + o.orderNotifier.contactEmail + '</p> </div>';
                        } else {
                            str += '<div class="fd-info"> <p class="title">通知人 <a href="javascript:void(0);" class="show-contact" data-t="通知人" data-sid="' + (o.subNum || 0) + '" data-fax="" data-dz="">编辑</a> </p>';
                            str += '<p class="no-sfhr">暂无通知人信息</p></div>'
                        }
                        //品名拼
                        str += '<div class="fd-info"> <p class="title">品名 <a href="javascript:void(0);" class="cg-name-btn" data-id="' + o.orderId + '" data-sid="' + o.subNum + '" data-name="' + o.subCargoName + '" data-mark="' + (o.cargo.packageMark || '') + '" data-dz="' + (o.orderNotifier && o.orderNotifier.contactAddress || '') + '" >编辑</a> </p> <p>' + o.subCargoName + '</p> </div>' +
                            '<div class="fd-info"><p class="title">唛头 </p><p>' + (o.cargo.packageMark || '') + '</p> </div></div>';
                        //拼接table
                        str += '<div class="fd-middle"> <p class="title">分单货物信息 ';
                        //拆分单必须至少2个以上规格
                        if (entryList.length>1 || (entryList.length == 1 && entryList[0].entryDetail.length>1)) {
                            str += '<button class="dp-b fl-r ycf-cfd" data-id="' + o.subNum + '" data-wei="' + body.storage.totalWeight + '">拆分单</button>'
                        }
                        str +=' <a href="/order/detail/ensure?id=' + o.orderId + '&sid=' + o.subNum + '" target="_blank" class="fl-r">查看分单</a> </p><table class="mg-b">' +
                            ' <thead> <tr> <td><input type="checkbox" id="sel-fd-all"></td> <td>进仓编号</td> <td>长(CM)</td> <td>宽(CM)</td> <td>高(CM)</td> <td>件数(PCS)</td> <td>重量(KGS)</td> <td>体积(CBM)</td> <td>包装</td> <td>损毁</td> <td>变形</td> <td>受潮</td> <td>其他</td> <td>备注</td> </tr> </thead> <tbody>';

                        for (var e in entryList) {
                            if (entryList.hasOwnProperty(e)) {
                                var dt1 = entryList[e];
                                var dt = entryList[e].entryDetail;
                                var xjjs = 0, xjzl = 0, xjtj = 0, xjps = 0, xjbx = 0, xjsc = 0, xjqt = 0;
                                for (var d1 in dt) {
                                    if (dt.hasOwnProperty(d1)) {
                                        var d = dt[d1];
                                        if (d.subNum == _this.data('id')) {
                                            xjjs += d.itemCount;
                                            zjjs += d.itemCount;
                                            xjtj += d.itemCount * d.itemHeight * d.itemLength * d.itemWidth / 1000000;
                                            zjtj += d.itemCount * d.itemHeight * d.itemLength * d.itemWidth / 1000000;
                                            str += '<tr> <td><input data-enum="' + dt1.entryNum + '" type="checkbox" class="fd-sg" data-dt="' + JSON.stringify(d).replace(/\"/g, "'") + '"></td> <td>' + dt1.entryNum + '</td> ' +
                                                '<td>' + d.itemLength + '</td> <td>' + d.itemWidth + '</td> <td>' + d.itemHeight + '</td>' +
                                                ' <td>' + d.itemCount + '</td> <td>-</td> <td>' + myformat.formatvolume(d.itemCount * d.itemHeight * d.itemLength * d.itemWidth / 1000000) + '</td> ' +
                                                '<td>' + dt1.packageType + '</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> </tr>';
                                        }
                                    }
                                }
                                zjzl += dt1.storageWeight;
                                zjps += dt1.damageCount;
                                zjbx += dt1.transformCount;
                                zjsc += dt1.dampCount;
                                zjqt += dt1.otherCount;
                                str += '<tr class="tr-xj"> <td>小计</td> <td colspan="4" class="font-g">更新时间（' + dt1.storageTime + '）</td>' +
                                    ' <td>' + xjjs + '</td> <td>-</td> <td>' + myformat.formatvolume(xjtj) + '</td> <td></td>' +
                                    '<td>' + (dt1.damageCount || '-') + '</td> <td>' + (dt1.transformCount || '-') + '</td> <td>' + (dt1.dampCount || '-') + '</td> <td>' + (dt1.otherCount || '-') + '</td> <td>-</td> </tr>'
                            }
                        }
                        str += '<tr class="tr-zj"> <td>总计</td> <td colspan="4"></td> <td>' + zjjs + '</td> ' +
                            '<td>' + o.cargo.cargoWeight + '</td> <td>' + myformat.formatvolume(zjtj) + '</td> <td></td> <td>' + (zjps || '') + '</td>' +
                            ' <td>' + (zjbx || '') + '</td> <td>' + (zjsc || '') + '</td> <td>' + (zjqt || '') + '</td> <td></td> </tr></tbody></table></div>';
                        //订单附件拼接
                        str += '<div class="fd-bottom"><div class="ddfj-pub fill"><p class="title fill"><span class="one">分单相关文件</span> ' +
                            '<span class="two"><span class="wxts">温馨提示：</span>请尽快上传报关单、报关委托书、装箱单、发票等资料，文件格式支持.doc/.docx/.xls/.xlsx/.pdf/.jpg/.png/.bmp' +
                            '<br>请检查资料证件上传是否齐全，如果齐全，可向报关行' + (o.allowCustomDeclare ? '<button class="send-bg fsbgzt" id="send-bg" data-param="3" data-id="' + o.orderId + '" data-sid="' + o.subNum + '">发送报关通知</button>' : '') + (o.allowPreCheck ? '<button class="send-bg fsyszt" id="send-bg" data-param="1" data-id="' + o.orderId + '" data-sid="' + o.subNum + '">发送预审通知</button>' : '') + '</span></p><div class="add" data-sid="' + o.subNum + '"> <div class="top"> + </div> <a href="javascript:void(0);" class="dp-b">添加文件</a> <input type="file" id="up-file-fd" data-sid="' + o.subNum + '"> </div></div></div>';
                        //下载打印文件
                        str +='<div class="fd-fileDown"><p class="title">文件下载</p><div class="left">' +
                            '<p>下载/打印文件</p>'+
                                //<div class="dp-b fl-l dl" id="open_map" data-id="<%= o.warehouseId %>">
                                //<a href="javascript:void(0);">
                                //<span class="dp-b img">图</span>
                                //<span class="dp-b txt">进仓地图</span>
                                //</a>
                                //
                                //<div class="cover dp-n"></div>
                                //</div>
                                //<div class="dp-b fl-l dl dl-bh" data-id="<%= o.airwayId %>">
                                //<a href="javascript:void(0);">
                                //<span class="dp-b img">保</span>
                                //<span class="dp-b txt">货物保函</span>
                                //</a>
                                //
                                //<div class="cover dp-n"></div>
                                //</div>
                                //<div class="dp-b fl-l dl dl-price">
                                //<a href="javascript:void(0);">
                                //<span class="dp-b img">报</span>
                                //<span class="dp-b txt">导出报价单</span>
                                //</a>
                                //
                                //<div class="cover dp-n"></div>
                                //</div>
                            '<div class="dp-b fl-l dl dl-yld" data-type="21" data-key="0"><a href="javascript:void(0);"><span class="dp-b img">预</span><span class="dp-b txt">预录单</span></a><div class="cover dp-n"></div><div class="temp dp-n"></div></div>'+
                            '<div class="dp-b fl-l dl dl-file" data-type="22" data-key="0"><a href="javascript:void(0);"><span class="dp-b img">查</span><span class="dp-b txt">查验费用单</span></a> <div class="cover dp-n"></div></div>'+
                            '</div></div>';
                        tar.html(str);
                        tar.collapse('toggle');

                        Data.fileList({id: url.get('id'), sid: o.subNum || ''}, function (json) {

                            if (json && 'resCode' in json && json.resCode == 0 && json.resBody) {
                                var str = '';
                                var arr = json.resBody;

                                var data22=0;
                                for (var a in arr) {
                                    if (arr.hasOwnProperty(a)) {
                                        var d = arr[a];
                                        if (d.fileType == 20) {
                                            str += '<div class="up-part"> <div class="top">' + d.fileExtension.toUpperCase() + '<a href="javascript:void(0);" class="dl" data-key="' + d.keyName + '"></a> ' +
                                                '<a href="javascript:void(0);" class="rm" data-key="' + d.keyName + '"></a> ' +
                                                '</div> <a href="javascript:void(0);" class="dp-b">' + d.fileName + '</a> ' +
                                                '</div>';
                                        } else if (d.fileType == 22) {
                                            data22=1;
                                            _this.parent().find(".fd-info-body").find(".fd-fileDown").find(".dl-file").data('key', d.keyName);
                                           // $('.dl-file[data-type="' + d.fileType + '"]').data('key', d.keyName);
                                        } else if (d.fileType == 21) {
                                            var yld = '';
                                            yld += '<div class="up-part"> <div class="top">' + arr[a].fileExtension.toUpperCase() + '<a href="javascript:void(0);" class="dl glyphicon glyphicon-circle-arrow-down" data-key="' + d.keyName + '"></a> </div> <a href="javascript:void(0);" class="dp-b">' + arr[a].fileName + '</a> </div>';
                                            _this.parent().find(".fd-info-body").find(".fd-fileDown").find(".dl-yld").find(".temp").append(yld);
                                            //$('.fxtzs-fill').append(yld);
                                            $('.fxtzs').show();
                                        } else {
                                            var ele = $('.add-type[data-type=' + d.fileType + ']');
                                            ele.addClass('active');
                                            ele.find('input').hide();
                                            ele.find('.top').html(d.fileExtension.toUpperCase() + '<a href="javascript:void(0);" class="dl" data-key="' + d.keyName + '"></a> <a href="javascript:void(0);" class="rm-type" data-key="' + d.keyName + '"></a> ');
                                            ele.find('.f-name').html(d.fileName);
                                        }
                                    }
                                }
                                if(data22==0){
                                    $('.dl[data-type="22"]').addClass('none-f');
                                }
                                $('.add[data-sid="' + o.subNum + '"]').before(str);
                            }
                        });
                    } else {
                        Modal.setAlert('获取分单详情失败，请重试！');
                    }
                    $('.loading-part').hide();
                });
            } else {
                tar.collapse('toggle');
            }
        });
        $(document).on('click', '.yfd-sg', function (event) {
            event.stopPropagation();
        });
    };
    var createSub = function () {
        var type = {
            cf: 0,     //0是未拆分过的，1是拆分过的
            n: 0,         //0是拆往新订单，1是拆往已有订单
            sid: ''    //已拆分过的分单号
            , tosdi: ''  //拆往哪个订单
            , oriwei: ''   //已拆分重量
            , arr: []   //转移的货物数据
        };
        var initModal = function () {
            $('.w-e').hide();
            $('.y-n').hide();
            $('.y-e').hide();
            $('.fd-alert-part').find('input[type="text"]').val('');
            $('#czxfd').triggle('click');
        };
        $(document).on('change', '#yyfd-fdh', function () {
            var opt = $(this).find('option:selected');
            var ele = $('.fd-alert-part');
            ele.find('.mbfd').html(opt.val());
            ele.find('.mb').find('.ori-wei').html(opt.data('wei'))
        });
        $(document).on('click', 'input[name="sel-fd-type"]', function () {
            $('.w-e').hide();
            $('.y-n').hide();
            $('.y-e').hide();
            $('.fd-alert-part').find('.f-pt').show();
            $('.fd-alert-part').find('.s-pt').hide();
            var ele = $('.alert-body');
            var n = ele.find('.new');
            var e = ele.find('.exist');
            if ($('input[name="sel-fd-type"]:checked').val() == 1) {
                type.n = 0;
                n.show();
                e.hide();
            } else {
                type.n = 1;
                n.hide();
                e.show();
            }
        });
        $(document).on('click', '#w-cfd', function () {
            type.cf = 0;
            type.sid = null;
            var arr = [];
            var table = $(this).parent().siblings('table');
            table.find('.td-sg:checked').each(function () {
                var d = JSON.parse($(this).data('dt').replace(/\'/g, "\""));
                d['warehouseEntryNum'] = $(this).data('enum');
                arr.push(d);
            });
            type.arr = arr;
            if (table.find('.td-sg:checked').length > 0) {
                Data.NewSubNum({orderId: url.get('id')}, function (json) {
                    var num = json && 'resBody' in json && json.resBody || '';
                    $('#nfd-fdh').val(num);
                    $('.white-back').removeClass('dp-n');
                    $('.fd-alert-part').removeClass('dp-n');
                });
            }else{
                //提示必须选中一个
                Modal.setAlert('拆分单需要至少选中一个规格！');
            }
        });
        $(document).on('click', '.ycf-cfd', function () {
            type.cf = 1;
            type.sid = $(this).data('id');
            type.oriwei = $(this).data('wei');
            var arr = [];
            var table = $(this).parent().siblings('table');
            table.find('.fd-sg:checked').each(function () {
                var d = JSON.parse($(this).data('dt').replace(/\'/g, "\""));
                d['warehouseEntryNum'] = $(this).data('enum');
                arr.push(d);
            });
            type.arr = arr;
            //已拆分单拆分单，至少该分单应该保留一个规格。
            var selectedLength = table.find('.fd-sg:checked').length
            var itemsLength = table.find('.fd-sg').length;
            if ( selectedLength> 0) {
                if (itemsLength-selectedLength > 0) {
                    Data.NewSubNum({orderId: url.get('id')}, function (json) {
                        var num = json && 'resBody' in json && json.resBody || '';
                        $('#nfd-fdh').val(num);
                        $('.white-back').removeClass('dp-n');
                        $('.fd-alert-part').removeClass('dp-n');
                        //带入已拆分单分单号
                        $('#origin-fdh').val(type.sid);
                    });
                }else{
                    //提示必须选中一个
                    Modal.setAlert('已拆分单需要预留一个规格！');
                }
            }else{
                //提示必须选中一个
                Modal.setAlert('拆分单需要至少选中一个规格！');
            }
        });
        $(document).on('click', '#create-fd', function () {
            var _this = $(this);
            var pass = true;
            if (type.cf == 0 && type.n == 0) {//未拆分货物拆往新分单
                $('.nfd-required').each(function () {
                    if (!$(this).val()) {
                        pass = false;
                        $(this).addClass('warm');
                    } else {
                        $(this).removeClass('warm');
                    }
                });
                if (pass) {
                    if(parseFloat($('#nfd-zl').val())<=0){
                        Modal.setAlert('分单重量必须大于0！');
                        return;
                    }
                    var data = {
                        "orderId": url.get('id'),
                        "orderSubNum": $('#nfd-fdh').val(),
                        "cargoName": $('#nfd-pm').val(),
                        "weight": $('#nfd-zl').val(),
                        "entryItemList": type.arr
                    };
                    Data.newStorage(data, function (json) {
                        if (json && 'resCode' in json && json.resCode == 0) {
                            Modal.setAlert('分单创建成功!', null, function () {
                                location.reload();
                            });
                        } else {
                            Modal.setAlert(json.resMsg || '分单创建失败，请重试！');
                        }
                    });
                }
            }
            if (type.cf == 0 && type.n == 1) {//未拆分货物拆往已有分单
                if ($('#yyfd-fdh').find('option').length > 0) {
                    var we = $('.w-e');
                    var option = $('#yyfd-fdh').find('option:selected');
                    we.find('.mbfd').html(option.val());
                    we.find('.ori-wei').html(option.data('wei'));
                    we.siblings().hide();
                    we.show();
                    _this.parent().find('.f-pt').hide();
                    _this.parent().find('.s-pt').show();
                } else {
                    Modal.setAlert('暂无可选分单，请拆至新分单！');
                }
            }
            if (type.cf == 1 && type.n == 0) {
                $('.nfd-required').each(function () {
                    if (!$(this).val()) {
                        pass = false;
                        $(this).addClass('warm');
                    } else {
                        $(this).removeClass('warm');
                    }
                });
                if (pass) {
                    var yn = $('.y-n');
                    yn.siblings().hide();
                    yn.show();
                    yn.find('.body').html(type.oriwei + ' KG');
                    _this.parent().find('.f-pt').hide();
                    _this.parent().find('.s-pt').show();
                }
            }
            if (type.cf == 1 && type.n == 1) {//已拆分货物拆往已有分单
                if ($('#yyfd-fdh').find('option').length > 0) {
                    var ye = $('.y-e');
                    var option = $('#yyfd-fdh').find('option:selected');
                    ye.find('.mbfd').html(option.val());
                    ye.find('.bcfd').html(type.sid);
                    $('#yyfd-fdh option').each(function() {
                        if ($(this).val() == type.sid) {
                            ye.find('.bc').find('.ori-wei').html($(this).data('wei'));
                        }
                    });

                    ye.find('.mb').find('.ori-wei').html(option.data('wei'));

                    ye.siblings().hide();
                    ye.show();
                    _this.parent().find('.f-pt').hide();
                    _this.parent().find('.s-pt').show();
                } else {
                    Modal.setAlert('暂无可选分单，请拆至新分单！');
                }
            }
        });
        $(document).on('click', '#fd-tz', function () {
            if (type.cf == 0 && type.n == 1) {//未拆分货物拆往已有分单
                if ($('#w-e--n-w').val()) {
                    $('#w-e--n-w').removeClass('warm');
                    var data = {
                        "orderId": url.get('id'),
                        "subNum": $('#yyfd-fdh').find('option:selected').val(),
                        "cargoName": "",
                        "entryItemList": type.arr,
                        "weight": $('#w-e--n-w').val()
                    };
                    Data.addStorage(data, function (json) {
                        if (json && 'resCode' in json && json.resCode == 0) {
                            Modal.setAlert('分单操作成功!', null, function () {
                                location.reload();
                            });
                        } else {
                            Modal.setAlert(json.resMsg || '分单操作失败，请重试！');
                        }
                    });
                } else {
                    $('#w-e--n-w').addClass('warm');
                }
            }
            if (type.cf == 1 && type.n == 0) {
                if ($('#y-n-xzl').val()) {
                    $('#y-n-xzl').removeClass('warm');
                    var d1 = {
                        "orderId": url.get('id'),
                        "subNum": type.sid,
                        "subNumTo": $('#nfd-fdh').val(),
                        "cargoName": $('#nfd-pm').val(),
                        "entryItemList": type.arr,
                        "weight": $('#y-n-xzl').val(),
                        "weightTo": $('#nfd-zl').val()
                    };
                    Data.moveStorage(d1, function (json) {
                        if (json && 'resCode' in json && json.resCode == 0) {
                            Modal.setAlert('分单操作成功!', null, function () {
                                location.reload();
                            });
                        } else {
                            Modal.setAlert(json.resMsg || '分单操作失败，请重试！');
                        }
                    });
                } else {
                    $('#y-n-xzl').addClass('warm');
                }
            }
            if (type.cf == 1 && type.n == 1) {
                if ($('#y-e-b-zl').val() && $('#y-e-mb-zl').val()) {
                    $('#y-e-b-zl').removeClass('warm');
                    $('#y-e-mb-zl').removeClass('warm');
                    var d2 = {
                        "orderId": url.get('id'),
                        "subNum": type.sid,
                        "subNumTo": $('#yyfd-fdh').find('option:selected').val(),
                        "cargoName": '',
                        "entryItemList": type.arr,
                        "weight": $('#y-e-b-zl').val(),
                        "weightTo": $('#y-e-mb-zl').val()
                    };
                    Data.moveStorage(d2, function (json) {
                        if (json && 'resCode' in json && json.resCode == 0) {
                            Modal.setAlert('分单操作成功!', null, function () {
                                location.reload();
                            });
                        } else {
                            Modal.setAlert(json.resMsg || '分单操作失败，请重试！');
                        }
                    });

                } else {
                    if (!$('#y-e-b-zl').val()) {
                        $('#y-e-b-zl').addClass('warm');
                    } else {
                        $('#y-e-b-zl').removeClass('warm');
                    }
                    if (!$('#y-e-mb-zl').val()) {
                        $('#y-e-mb-zl').addClass('warm');
                    } else {
                        $('#y-e-mb-zl').removeClass('warm');
                    }
                }
            }
        });
        $(document).on('click', '#fd-btz', function () {
            if (type.cf == 0 && type.n == 1) {//未拆分货物拆往已有分单
                var data = {
                    "orderId": url.get('id'),
                    "subNum": $('#yyfd-fdh').find('option:selected').val(),
                    "cargoName": "",
                    "entryItemList": type.arr,
                    "weight": $('.w-e').find('.ori-wei').html()
                };
                Data.addStorage(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert('分单操作成功!', null, function () {
                            location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '分单操作失败，请重试！');
                    }
                });
            }
            if (type.cf == 1 && type.n == 0) {
                var d1 = {
                    "orderId": url.get('id'),
                    "subNum": type.sid,
                    "subNumTo": $('#nfd-fdh').val(),
                    "cargoName": $('#nfd-pm').val(),
                    "entryItemList": type.arr,
                    "weight": type.oriwei,
                    "weightTo": $('#nfd-zl').val()
                };
                Data.moveStorage(d1, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert('分单操作成功!', null, function () {
                            location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '分单操作失败，请重试！');
                    }
                });
            }
            if (type.cf == 1 && type.n == 1) {
                var d2 = {
                    "orderId": url.get('id'),
                    "subNum": type.sid,
                    "subNumTo": $('#yyfd-fdh').find('option:selected').val(),
                    "cargoName": '',
                    "entryItemList": type.arr,
                    "weight": type.oriwei,
                    "weightTo": $('#yyfd-fdh').find('option:selected').data('wei')
                };
                Data.moveStorage(d2, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert('分单操作成功!', null, function () {
                            location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '分单操作失败，请重试！');
                    }
                });
            }
        });
    };
    var changeName = function () {
        var cgid, cgsid,cgname,markname;
        $(document).on('click', '.cg-name-btn', function () {
            cgid = $(this).data('id');
            cgsid = $(this).data('sid');
            cgname= $(this).data('name');
            markname= $(this).data('mark');
            $('#cg-name').val(cgname);
            $('#mark-subname').val(markname);
            $('.name-part').removeClass('dp-n');
            $('.white-back').removeClass('dp-n');

        });
        $(document).on('click', '#name-ensure', function () {
            if ($('#cg-name').val()) {
                $('#cg-name').removeClass('warm');
                Data.changeName({
                    "orderId": cgid,
                    "subNum": cgsid,
                    "subCargoName": $('#cg-name').val(),
                    "markName": $('#mark-subname').val()
                }, function (json) {
                    console.log(json);
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert('修改成功!', null, function () {
                            location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '修改失败，请重试！');
                    }
                });
            } else {
                $('#cg-name').addClass('warm');
            }
        });
    };

    var otherinit = function(){
        if (url.get('click')) {
            $('.yfd-btn[data-id="' + url.get('click') + '"]').click();
        }
        //小数点控制
        $('#entrysize').html(myformat.formatvolume($('#entrysize').data('size'))+' CBM');

        $('.item-tj').each(function(){
            $(this).html(myformat.formatvolume($(this).html()));
        })
        $('.xj-tj').each(function(){
            $(this).html(myformat.formatvolume($(this).html()));
        })
        $('.total-tj').html(myformat.formatvolume($('.total-tj').html()));
    }
    var run = function () {
        listener();
        upload();
        fileList();
        submit();
        warehouseDetail();
        //company();
        trackInit();
        declareData();
        contact();
        subData();
        changeName();
        createSub();

        otherinit();
    };
    return {
        run: run
    }
}());
module.exports.Listener = Listener;
},{"../../general/burster":1,"../../general/function":2,"../../general/modal":4,"./data":5,"./dom":6}]},{},[7])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL252bS92Ni4yLjAvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi4uLy4uL2dlbmVyYWwvYnVyc3Rlci5qcyIsIi4uLy4uL2dlbmVyYWwvZnVuY3Rpb24uanMiLCIuLi8uLi9nZW5lcmFsL2dlbmVyYWwuanMiLCIuLi8uLi9nZW5lcmFsL21vZGFsLmpzIiwiZGF0YS5qcyIsImRvbS5qcyIsImluZGV4LmpzIiwibGlzdGVuZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4ZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNi8xMS8yNC5cclxuICovXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuKGZ1bmN0aW9uICgkKSB7XHJcbiAgLyoqXHJcbiAgICog55Sf5oiQ5YiG6aG15ZmoXHJcbiAgICogQHBhcmFtIGVsZSDpnIDopoHmt7vliqDliIbpobXlmajnmoTlhYPntKBcclxuICAgKiBAcGFyYW0gb2Zmc2V0IOWBj+enu+mHj++8jOWNs+S7juesrGRhdGEtb2Zmc2V05byA5aeLXHJcbiAgICogQHBhcmFtIGxlbmd0aCDmgLvorrDlvZXmnaHmlbBcclxuICAgKiBAcGFyYW0gc2hvd1BhZ2VzIOWIhumhteWZqOaYvuekuueahOmhteaVsO+8jOi2hei/h+WImemakOiXj+WkmuS9meeahOmhtVxyXG4gICAqIEBwYXJhbSByb3dzIOavj+mhteaYvuekuueahOiusOW9leadoeaVsFxyXG4gICAqL1xyXG4gICQuYnVyc3RlciA9IGZ1bmN0aW9uIChlbGUsIG9mZnNldCwgbGVuZ3RoLCBzaG93UGFnZXMsIHJvd3MpIHtcclxuICAgIG9mZnNldCA9IG9mZnNldCA/IHBhcnNlSW50KG9mZnNldCkgOiAwO1xyXG4gICAgLy/lsIbliIbpobXlmajoo4XlhaV0YWJsZeS4rVxyXG4gICAgaWYgKGxlbmd0aCAmJiBsZW5ndGggPiBvZmZzZXQpIHtcclxuICAgICAgdmFyIHBhZ2VIdG1sID0gXCJcIlxyXG4gICAgICAgICwgYXNzID0gXCJcIi8v5riF56m66ZyA6KaB6KOF5YWl55qEaHRtbFxyXG4gICAgICAgICwgYmVmb3JlUGFnZXMgPSBNYXRoLmNlaWwob2Zmc2V0IC8gcm93cykvL+mcgOimgeaYvuekuueahOWJjemhteaVsC/lvZPliY3pobVcclxuICAgICAgICAsIGFmdGVyUGFnZXMgPSBNYXRoLmNlaWwoKGxlbmd0aCAtIG9mZnNldCApIC8gcm93cykvL+mcgOimgeaYvuekuueahOWQjumhteaVsFxyXG4gICAgICAgICwgcGFnZXMgPSBNYXRoLmNlaWwobGVuZ3RoIC8gcm93cykgLy/mgLvpobXmlbBcclxuICAgICAgICAsIGsgPSAwO1xyXG4gICAgICAvL2FsZXJ0KFwi5oC76aG15pWwXCIgKyBwYWdlcyArIFwiIOWJjemhteaVsCBcIiArIGJlZm9yZVBhZ2VzICsgXCIg5ZCO6aG15pWwIFwiICsgYWZ0ZXJQYWdlcyk7XHJcbiAgICAgIC8v6Iul6aG15pWw5bCP5LqOc2hvd1BhZ2Vz6aG177yM5YiZ5YWo6YOo5pi+56S6XHJcbiAgICAgIGlmIChwYWdlcyA+PSAwICYmIHBhZ2VzIDw9IHNob3dQYWdlcykge1xyXG4gICAgICAgIGZvciAoayA9IDA7IGsgPCBwYWdlczsgaysrKSB7XHJcbiAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChwYWdlcyA+IHNob3dQYWdlcykgey8v5oC76aG15pWw5aSn5LqOc2hvd1BhZ2Vz6aG1XHJcbiAgICAgICAgaWYgKGJlZm9yZVBhZ2VzIDw9IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSAmJiBhZnRlclBhZ2VzID4gc2hvd1BhZ2VzICsgMSkge1xyXG4gICAgICAgICAgZm9yIChrID0gMDsgayA8IHNob3dQYWdlczsgaysrKSB7XHJcbiAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGkgY2xhc3M9J2FjdGl2ZScgPjxhPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKChwYWdlcyAtIDEpICogcm93cykgKyBcIic+Li4uXCIgKyBwYWdlcyArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChiZWZvcmVQYWdlcyA8PSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgJiYgYWZ0ZXJQYWdlcyA9PSBzaG93UGFnZXMgKyAxKSB7XHJcbiAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgc2hvd1BhZ2VzIC0gMTsgaysrKSB7XHJcbiAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGkgY2xhc3M9J2FjdGl2ZScgPjxhPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKChwYWdlcyAtIDEpICogcm93cykgKyBcIic+Li4uXCIgKyBwYWdlcyArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChiZWZvcmVQYWdlcyA8PSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgJiYgYWZ0ZXJQYWdlcyA8PSBzaG93UGFnZXMpIHtcclxuICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBzaG93UGFnZXMgLSAxOyBrKyspIHtcclxuICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoKHBhZ2VzIC0gMSkgKiByb3dzKSArIFwiJz4uLi5cIiArIHBhZ2VzICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZVBhZ2VzID4gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICYmIGJlZm9yZVBhZ2VzIDw9IHNob3dQYWdlcyAmJiBhZnRlclBhZ2VzID4gc2hvd1BhZ2VzKSB7XHJcbiAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PScwJz4xLi4uPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICBmb3IgKGsgPSBiZWZvcmVQYWdlcyAtIE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSArIDE7IGsgPCBiZWZvcmVQYWdlcyArIE1hdGguY2VpbChzaG93UGFnZXMgLyAyKTsgaysrKSB7XHJcbiAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGkgY2xhc3M9J2FjdGl2ZScgPjxhPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKChwYWdlcyAtIDEpICogcm93cykgKyBcIic+Li4uXCIgKyBwYWdlcyArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChiZWZvcmVQYWdlcyA+IHNob3dQYWdlcyAmJiBhZnRlclBhZ2VzID4gc2hvd1BhZ2VzKSB7XHJcbiAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PScwJz4xLi4uPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICBmb3IgKGsgPSBiZWZvcmVQYWdlcyAtIE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSArIDE7IGsgPCBiZWZvcmVQYWdlcyArIE1hdGguY2VpbChzaG93UGFnZXMgLyAyKTsgaysrKSB7XHJcbiAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGkgY2xhc3M9J2FjdGl2ZScgPjxhPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKChwYWdlcyAtIDEpICogcm93cykgKyBcIic+Li4uXCIgKyBwYWdlcyArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChiZWZvcmVQYWdlcyA+IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSAmJiBiZWZvcmVQYWdlcyA8PSBwYWdlcyAmJiBhZnRlclBhZ2VzIDw9IHNob3dQYWdlcyAmJiBhZnRlclBhZ2VzID4gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMSkge1xyXG4gICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nMCc+MS4uLjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgZm9yIChrID0gYmVmb3JlUGFnZXMgLSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxOyBrIDwgYmVmb3JlUGFnZXMgKyBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMik7IGsrKykge1xyXG4gICAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArICgocGFnZXMgLSAxKSAqIHJvd3MpICsgXCInPi4uLlwiICsgcGFnZXMgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlUGFnZXMgPiBwYWdlcyAmJiBhZnRlclBhZ2VzIDw9IHNob3dQYWdlcyAmJiBhZnRlclBhZ2VzID4gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMSkge1xyXG4gICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nMCc+MS4uLjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgZm9yIChrID0gYmVmb3JlUGFnZXMgLSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxOyBrIDwgYmVmb3JlUGFnZXMgKyBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMik7IGsrKykge1xyXG4gICAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArICgocGFnZXMgLSAxKSAqIHJvd3MpICsgXCInPi4uLlwiICsgcGFnZXMgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlUGFnZXMgPiBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgJiYgYWZ0ZXJQYWdlcyA8PSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxKSB7XHJcbiAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PScwJz4xLi4uPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICBmb3IgKGsgPSBiZWZvcmVQYWdlcyAtIE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSArIDE7IGsgPCBwYWdlczsgaysrKSB7XHJcbiAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGkgY2xhc3M9J2FjdGl2ZScgPjxhPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy/liKTmlq1cIummlumhtVwi5ZKMXCLmnKvpobVcIuaYr+WQpuWPr+eCueWHu1xyXG4gICAgICB2YXIgZmlyc3RQYWdlLCBsYXN0UGFnZTtcclxuICAgICAgaWYgKG9mZnNldCA9PSAwKSB7Ly/mraTml7bpppbpobXml6Dms5Xngrnlh7tcclxuICAgICAgICBmaXJzdFBhZ2UgPSAnPGxpIGNsYXNzPVwiZGlzYWJsZWRcIj48YSBjbGFzcz1cInBhZ2VzXCIgZGF0YS1vZmZzZXQ9XCIwXCI+6aaW6aG1PC9hPjwvbGk+JztcclxuICAgICAgICBsYXN0UGFnZSA9ICc8bGk+PGEgY2xhc3M9XCJwYWdlc1wiIGRhdGEtb2Zmc2V0PVwiJyArIHBhcnNlSW50KHBhcnNlSW50KChsZW5ndGggJSByb3dzID09IDAgPyAobGVuZ3RoIC0gMSkgOiBsZW5ndGgpIC8gcm93cykgKiByb3dzKSArICdcIiA+5pyr6aG1PC9hPjwvbGk+JztcclxuICAgICAgfSBlbHNlIGlmICgob2Zmc2V0ICsgcm93cykgPj0gbGVuZ3RoKSB7Ly/mraTml7bmnKvpobXml6Dms5Xngrnlh7tcclxuICAgICAgICBmaXJzdFBhZ2UgPSAnPGxpPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIjBcIj7pppbpobU8L2E+PC9saT4nO1xyXG4gICAgICAgIGxhc3RQYWdlID0gJzxsaSBjbGFzcz1cImRpc2FibGVkXCI+PGEgY2xhc3M9XCJwYWdlc1wiIGRhdGEtb2Zmc2V0PVwiJyArIHBhcnNlSW50KHBhcnNlSW50KChsZW5ndGggJSByb3dzID09IDAgPyAobGVuZ3RoIC0gMSkgOiBsZW5ndGgpIC8gcm93cykgKiByb3dzKSArICdcIj7mnKvpobU8L2E+PC9saT4nO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZpcnN0UGFnZSA9ICc8bGk+PGEgY2xhc3M9XCJwYWdlc1wiIGRhdGEtb2Zmc2V0PVwiMFwiPummlumhtTwvYT48L2xpPic7XHJcbiAgICAgICAgbGFzdFBhZ2UgPSAnPGxpPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIicgKyBwYXJzZUludChwYXJzZUludCgobGVuZ3RoICUgcm93cyA9PSAwID8gKGxlbmd0aCAtIDEpIDogbGVuZ3RoKSAvIHJvd3MpICogcm93cykgKyAnXCI+5pyr6aG1PC9hPjwvbGk+JztcclxuICAgICAgfVxyXG4gICAgICAvL+WIpOaWrVwi5LiK5LiA6aG1XCLlkoxcIuS4i+S4gOmhtVwi5piv5ZCm5a2Y5ZyoXHJcbiAgICAgIHZhciB1cFBhZ2UsIGRvd25QYWdlO1xyXG4gICAgICBpZiAob2Zmc2V0ID09IDAgfHwgKG9mZnNldCA8IHJvd3MgJiYgKG9mZnNldCAlIHJvd3MgIT0gMCkpKSB7XHJcbiAgICAgICAgdXBQYWdlID0gXCI8bGkgY2xhc3M9J2Rpc2FibGVkJz48YSBjbGFzcz0ncGFnZXMnIGZ1bmM9J3ByZXZpb3VzJyBkYXRhLW9mZnNldD0nXCIgKyBwYXJzZUludChvZmZzZXQpICsgXCInID7kuIrpobU8L2E+PC9saT5cIlxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVwUGFnZSA9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZnVuYz0ncHJldmlvdXMnIGRhdGEtb2Zmc2V0PSdcIiArIChwYXJzZUludChvZmZzZXQpIC0gcGFyc2VJbnQocm93cykpICsgXCInID7kuIrpobU8L2E+PC9saT5cIjtcclxuICAgICAgfVxyXG4gICAgICBpZiAob2Zmc2V0ID49IChsZW5ndGggLSByb3dzKSkge1xyXG4gICAgICAgIGRvd25QYWdlID0gXCI8bGkgY2xhc3M9J2Rpc2FibGVkJz48YSBjbGFzcz0ncGFnZXMnIGZ1bmM9J25leHQnIGRhdGEtb2Zmc2V0PSdcIiArIHBhcnNlSW50KG9mZnNldCkgKyBcIic+5LiL6aG1PC9hPjwvbGk+XCJcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkb3duUGFnZSA9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZnVuYz0nbmV4dCcgZGF0YS1vZmZzZXQ9J1wiICsgcGFyc2VJbnQocGFyc2VJbnQob2Zmc2V0KSArIHBhcnNlSW50KHJvd3MpKSArIFwiJz7kuIvpobU8L2E+PC9saT5cIlxyXG4gICAgICB9XHJcbiAgICAgIGlmIChwYWdlcyAhPSAxKSB7XHJcbiAgICAgICAgLy/liIbpobXpg6jliIZcclxuICAgICAgICBhc3MgKz0gXCI8ZGl2IGlkPSdwYWdlcicgY2xhc3M9J3BhZ2VyLWluZm8nPlwiICtcclxuICAgICAgICBcIjxoNiBpZD0ncmVzdWx0JyBjbGFzcz0ncGFnZXItcmVjb3JkJz7lhbHmnIk8c3Bhbj5cIiArIGxlbmd0aCArIFwiPC9zcGFuPuadoeiusOW9lTwvaDY+XCIgK1xyXG4gICAgICAgIFwiPHVsIGNsYXNzPSdwYWdpbmF0aW9uJz5cIiArIGZpcnN0UGFnZSArIHVwUGFnZSArIHBhZ2VIdG1sICsgZG93blBhZ2UgKyBsYXN0UGFnZSArIFwiPC91bD48L2Rpdj5cIjtcclxuICAgICAgICAvL3RhYmxl5Lit5rOo5YWl5ou86KOF55qE6K6w5b2VXHJcbiAgICAgICAgZWxlLmh0bWwoYXNzKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBlbGUuaHRtbCgnJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0oalF1ZXJ5KSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgenJ6IG9uIDIwMTYvMi8yNi5cclxuICogQHZlcnNpb24gMS4wLjAgY3JlYXRlZCDpgJrnlKjmgKflip/og73mlrnms5VcclxuICovXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG52YXIgRnVuID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBfdGltZU91dCA9IDEwMDAwMDsvL+ivt+axgui2heaXtuaXtumXtOS4ujEwc1xyXG4gICAgLyoqXHJcbiAgICAgKiDlsIHoo4VhamF4XHJcbiAgICAgKiBAcGFyYW0gb3B0aW9uXHJcbiAgICAgKiB7XHJcbiAgICAgKiAgICAgIHVybDpcIuivt+axgueahOWcsOWdgFwiXHJcbiAgICAgKiAgICAgICxtZXRob2Q6XCLor7fmsYLnmoTmlrnms5VcIlxyXG4gICAgICogICAgICAsYXN5bmM6XCLmmK/lkKblubblj5FcIlxyXG4gICAgICogICAgICAsZGF0YTpcIuWPkemAgeeahOaVsOaNrlwiXHJcbiAgICAgKiAgICAgICxzdWNjZXNzOlwi5oiQ5Yqf5pe25Zue6LCDXCJcclxuICAgICAqICAgICAgLGVycm9yOlwi5aSx6LSlL+i2heaXtuaXtuWbnuiwg1wiXHJcbiAgICAgKiAgICAgICx0aW1lb3V0Olwi6LaF5pe25pe26Ze0XCJcclxuICAgICAqICAgICAgLGNvbXBsZXRlOlwi5a6M5oiQ5ZCO55qE5Zue6LCDXCJcclxuICAgICAqIH1cclxuICAgICAqL1xyXG4gICAgdmFyIGFqYXggPSBmdW5jdGlvbiAob3B0aW9uKSB7XHJcbiAgICAgICAgLy9hamF45byA5aeL5pe25bqU5pi+56S64oCc5Yqg6L295L+h5oGv5qGG4oCdXHJcbiAgICAgICAgTW9kYWwuc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IG9wdGlvbi51cmxcclxuICAgICAgICAgICAgLCB0eXBlOiBcInR5cGVcIiBpbiBvcHRpb24gJiYgb3B0aW9uLnR5cGUgfHwgXCJHRVRcIlxyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IG9wdGlvbi50aW1lb3V0IHx8IF90aW1lT3V0XHJcbiAgICAgICAgICAgICwgZGF0YTogXCJkYXRhXCIgaW4gb3B0aW9uICYmIG9wdGlvbi5kYXRhIHx8IHt9XHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6IFwianNvblwiXHJcbiAgICAgICAgICAgICwgYXN5bmM6IChcImFzeW5jXCIgaW4gb3B0aW9uICYmIG9wdGlvbi5hc3luYykgPyB0cnVlIDogZmFsc2VcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKFwic3RhdHVzXCIgaW4ganNvbiAmJiBqc29uLnN0YXR1cyA+IDAgJiYgXCJkYXRhXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcInN1Y2Nlc3NcIiBpbiBvcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnN1Y2Nlc3MoanNvbi5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChcIuaXoHN1Y2Nlc3Pmlrnms5UhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJlcnJvclwiIGluIG9wdGlvbiAmJiBvcHRpb24uZXJyb3IgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5lcnJvcihqc29uKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+aTjeS9nOWksei0pSEnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgZXJyb3I6IGZ1bmN0aW9uICh4aHIpIHsvLzQwNOaIluiAhei2heaXtlxyXG4gICAgICAgICAgICAgICAgaWYgKFwiZXJyb3JcIiBpbiBvcHRpb24gJiYgb3B0aW9uLmVycm9yIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAvL+aPkOekuueUqOaIt+mUmeivr+S/oeaBr1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNob3dMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChcIui/nuaOpeacjeWKoeWZqOWksei0pe+8jOeKtuaAge+8mlwiICsgKHhoci5zdGF0dXMgfHwgLTEpICsgXCIs5L+h5oGv77yaXCIgKyAoeGhyLnN0YXR1c1RleHQgfHwgXCItXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24uZXJyb3IoeGhyLnN0YXR1cywgeGhyLnN0YXR1c1RleHQpOy8v5Zue6LCD6K+35rGC55qE54q25oCB5ZKM6ZSZ6K+v5L+h5oGvXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoeGhyLCB0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAvL+WFs+mXreKAnOWKoOi9veS/oeaBr+ahhuKAnVxyXG4gICAgICAgICAgICAgICAgTW9kYWwuc2hvd0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKFwiY29tcGxldGVcIiBpbiBvcHRpb24gJiYgb3B0aW9uLmNvbXBsZXRlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24uY29tcGxldGUoeGhyLCB0eXBlKTsvL+Wbnuiwg+ivt+axgueahHhocuS/oeaBr+WSjOexu+Wei1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy/lhajpgInlkozljZXpgInnmoTnu5HlrppcclxuICAgIHZhciBzZXRDaGVja2JveExpc3RlbmVyID0gZnVuY3Rpb24gKGFsbENoZWNrLCByYWRpb0NoZWNrcykge1xyXG4gICAgICAgIC8v562b6YCJ5Y2V6YCJ5oyJ6ZKu57uEXHJcbiAgICAgICAgdmFyIHJhZGlvVmFsdWVFbGVzID0gJChyYWRpb0NoZWNrcyk7XHJcbiAgICAgICAgLy/ngrnlh7vlhajpgInml7bvvIzlkIznu4TmjInpkq7ooqvlkIzmraVcclxuICAgICAgICAkKGRvY3VtZW50KS5kZWxlZ2F0ZShhbGxDaGVjaywgXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChyYWRpb1ZhbHVlRWxlcyAmJiByYWRpb1ZhbHVlRWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfciA9IDA7IF9yIDwgcmFkaW9WYWx1ZUVsZXMubGVuZ3RoOyBfcisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9WYWx1ZUVsZXNbX3JdLmNoZWNrZWQgPSAkKHRoaXMpLmlzKFwiOmNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+eCueWHu+WNlemAieaMiemSruaXtu+8jFxyXG4gICAgICAgICQoZG9jdW1lbnQpLmRlbGVnYXRlKHJhZGlvQ2hlY2tzLCBcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJChhbGxDaGVjaylbMF0uY2hlY2tlZCA9ICQocmFkaW9DaGVja3MgKyBcIjpjaGVja2VkXCIpLmxlbmd0aCA9PSAkKHJhZGlvQ2hlY2tzKS5sZW5ndGg7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHVybCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGdldCA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKFwiKF58JilcIiArIG5hbWUgKyBcIj0oW14mXSopKCZ8JClcIiwgXCJpXCIpO1xyXG4gICAgICAgICAgICB2YXIgciA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpLm1hdGNoKHJlZyk7XHJcbiAgICAgICAgICAgIGlmIChyICE9IG51bGwpIHJldHVybiBkZWNvZGVVUkkoclsyXSk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5qC55o2u5Y+C5pWw5YiX6KGo6ZW/5bqm6L+b6KGM5Yik5pat77yM5YW85a65SUU5XHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnb2JqZWN0Jykgey8v5LiA5Liq5a+56LGh77yM5L2/55Soa2V55qCH6K6wdmFsdWVcclxuICAgICAgICAgICAgICAgIHZhciBvYmogPSBhcmd1bWVudHNbMF1cclxuICAgICAgICAgICAgICAgICAgICAsIHNlYXJjaCA9IGxvY2F0aW9uLnNlYXJjaDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIG8gaW4gb2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShvKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2ggPSBjaGFuZ2VVUkxLZXlWYWx1ZShzZWFyY2gsIG8sIG9ialtvXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCdwdXNoU3RhdGUnIGluIGhpc3RvcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBkb2N1bWVudC50aXRsZSwgc2VhcmNoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJ3B1c2hTdGF0ZScgaW4gSGlzdG9yeSkgey8vaWU5IOS4jeaUr+aMgXB1c2hTdGF0ZeaWueazlSxqYXZhc2NyaXB0LmVqc+S4rea3u+WKoGhpc3RvcnkuanPlrozmiJBodG1sNOWvuXB1c2hTdGF0ZeeahOaUr+aMgVxyXG4gICAgICAgICAgICAgICAgICAgIEhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIHNlYXJjaCk7Ly/ov5Tlm57ph43mlrDmnoTpgKDlkI5zZWFyY2jkuLJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7Ly9rZXkrdmFsdWVcclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBhcmd1bWVudHNbMF1cclxuICAgICAgICAgICAgICAgICAgICAsIHZhbHVlID0gYXJndW1lbnRzWzFdO1xyXG4gICAgICAgICAgICAgICAgaWYgKCdwdXNoU3RhdGUnIGluIGhpc3RvcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBkb2N1bWVudC50aXRsZSwgY2hhbmdlVVJMS2V5VmFsdWUobG9jYXRpb24udG9TdHJpbmcoKSwga2V5LCB2YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgncHVzaFN0YXRlJyBpbiBIaXN0b3J5KSB7Ly9pZTkg5LiN5pSv5oyBcHVzaFN0YXRl5pa55rOVLGphdmFzY3JpcHQuZWpz5Lit5re75YqgaGlzdG9yeS5qc+WujOaIkGh0bWw05a+5cHVzaFN0YXRl55qE5pSv5oyBXHJcbiAgICAgICAgICAgICAgICAgICAgSGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgY2hhbmdlVVJMS2V5VmFsdWUobG9jYXRpb24uc2VhcmNoLCBrZXksIHZhbHVlKSk7Ly/ov5Tlm57ph43mlrDmnoTpgKDlkI5zZWFyY2jkuLJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGFuZ2VVUkxLZXlWYWx1ZSh1cmwsIGFyZywgYXJnX3ZhbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBhcmcgKyAnPShbXiZdKiknO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VUZXh0ID0gYXJnICsgJz0nICsgYXJnX3ZhbDtcclxuICAgICAgICAgICAgICAgIGlmICh1cmwubWF0Y2gocGF0dGVybikpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG1wID0gJy8oJyArIGFyZyArICc9KShbXiZdKikvZ2knO1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcCA9IHVybC5yZXBsYWNlKGV2YWwodG1wKSwgcmVwbGFjZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0bXA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1cmwubWF0Y2goJ1tcXD9dJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVybCArICcmJyArIHJlcGxhY2VUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cmwgKyAnPycgKyByZXBsYWNlVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGdldDogZ2V0XHJcbiAgICAgICAgICAgICwgc2V0OiBzZXRcclxuICAgICAgICB9XHJcbiAgICB9KCkpO1xyXG5cclxuICAgIHZhciBmb3JtYXRJbWFnZT1mdW5jdGlvbiAocGF0aCwgc2l6ZSwgZWxlKSB7XHJcbiAgICAgICAgaWYocGF0aCBpbnN0YW5jZW9mICBBcnJheSAmJiBwYXRoLmxlbmd0aD4wKXtcclxuICAgICAgICAgICAgcGF0aCA9IHBhdGhbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBJTUFHRV9TSVpFID0ge1xyXG4gICAgICAgICAgICBvcmlnaW5hbDoge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJcIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgeGxhcmdlOiB7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiBcIl94bGFyZ2VcIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiNjYwKjY2MFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxhcmdlOiB7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiBcIl9sYXJnZVwiLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogXCI0MjAqNDIwXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWlkZGxlOiB7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiBcIl9taWRkbGVcIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiMzAwKjMwMFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNtYWxsOiB7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiBcIl9zbWFsbFwiLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogXCIyNDAqMjQwXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGl0dGxlOiB7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiBcIl9saXR0bGVcIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiMTIwKjEyMFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1pY3JvOiB7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiBcIl9taWNyb1wiLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogXCI2MCo2MFwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHNpemUgPSBJTUFHRV9TSVpFW3NpemUgfHwgXCJtaWRkbGVcIl0gfHwgSU1BR0VfU0laRS5taWRkbGU7XHJcbiAgICAgICAgdmFyIHBhdGhUZW1wID0gL1xcLlxcdys/JC8uZXhlYyhwYXRoKTtcclxuICAgICAgICBpZiAoIXBhdGhUZW1wKSB7XHJcbiAgICAgICAgICAgIHBhdGggKz0gc2l6ZS5wYXRoO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBhdGggPSAocGF0aC5zdWJzdHIoMCwgcGF0aFRlbXAuaW5kZXggfHwgcGF0aC5sZW5ndGgpKSArIHNpemUucGF0aCArIHBhdGhUZW1wWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZWxlICYmIGVsZS5hdHRyKSB7XHJcbiAgICAgICAgICAgIGVsZS5hdHRyKFwic3JjXCIsIHBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgIH07XHJcbiAgICAvL+mHkemineagvOW8j+WMluWwj+aVsOeCuTLkvY1cclxuICAgIHZhciBmb3JtYXQgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmb3JtYXRhbW91bnQgPSBmdW5jdGlvbihfdmFsdWUpe1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChfdmFsdWUpLnRvRml4ZWQoMik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL+S9k+enr+agvOW8j+WMluWwj+aVsOeCuTLkvY1cclxuICAgICAgICB2YXIgZm9ybWF0dm9sdW1lID0gZnVuY3Rpb24oX3ZhbHVlKXtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoX3ZhbHVlKS50b0ZpeGVkKDMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy/ph43ph4/moLzlvI/ljJblsI/mlbDngrky5L2NXHJcbiAgICAgICAgdmFyIGZvcm1hdHdlaWdodCA9IGZ1bmN0aW9uKF92YWx1ZSl7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KF92YWx1ZSkudG9GaXhlZCgzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGZvcm1hdGFtb3VudDogZm9ybWF0YW1vdW50XHJcbiAgICAgICAgICAgICwgZm9ybWF0dm9sdW1lOiBmb3JtYXR2b2x1bWVcclxuICAgICAgICAgICAgLCBmb3JtYXR3ZWlnaHQ6IGZvcm1hdHdlaWdodFxyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGFqYXg6IGFqYXhcclxuICAgICAgICAsIGdldFRpbXRvdXQ6IF90aW1lT3V0XHJcbiAgICAgICAgLCBzZXRDaGVja2JveExpc3RlbmVyOiBzZXRDaGVja2JveExpc3RlbmVyXHJcbiAgICAgICAgLCB1cmw6IHVybFxyXG4gICAgICAgICwgZm9ybWF0SW1hZ2U6IGZvcm1hdEltYWdlXHJcbiAgICAgICAgLCBmb3JtYXQ6IGZvcm1hdFxyXG4gICAgfVxyXG59KCkpO1xyXG5cclxuZXhwb3J0cy5hamF4ID0gRnVuLmFqYXg7XHJcbmV4cG9ydHMuZ2V0VGltZW91dCA9IEZ1bi5nZXRUaW10b3V0O1xyXG5leHBvcnRzLnNldENoZWNrYm94TGlzdGVuZXIgPSBGdW4uc2V0Q2hlY2tib3hMaXN0ZW5lcjtcclxuZXhwb3J0cy51cmwgPSBGdW4udXJsO1xyXG5leHBvcnRzLmZvcm1hdEltYWdlID0gRnVuLmZvcm1hdEltYWdlO1xyXG5leHBvcnRzLmZvcm1hdCA9IEZ1bi5mb3JtYXQ7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplcmVteSBvbiAyMDE3LzEvMjMuXHJcbiAqL1xyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBNb2RhbCA9IHJlcXVpcmUoJy4vbW9kYWwnKTtcclxudmFyIGdlbmVyYWwgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+aXtumXtOagvOW8j+WMllxyXG4gICAgICAgIERhdGUucHJvdG90eXBlLkZvcm1hdCA9IGZ1bmN0aW9uIChmbXQpIHsgLy9hdXRob3I6IEplcmVteXl5XHJcbiAgICAgICAgICAgIHZhciBvID0ge1xyXG4gICAgICAgICAgICAgICAgXCJNK1wiOiB0aGlzLmdldE1vbnRoKCkgKyAxLCAvL+aciOS7vVxyXG4gICAgICAgICAgICAgICAgXCJkK1wiOiB0aGlzLmdldERhdGUoKSwgLy/ml6VcclxuICAgICAgICAgICAgICAgIFwiaCtcIjogdGhpcy5nZXRIb3VycygpLCAvL+Wwj+aXtlxyXG4gICAgICAgICAgICAgICAgXCJtK1wiOiB0aGlzLmdldE1pbnV0ZXMoKSwgLy/liIZcclxuICAgICAgICAgICAgICAgIFwicytcIjogdGhpcy5nZXRTZWNvbmRzKCksIC8v56eSXHJcbiAgICAgICAgICAgICAgICBcInErXCI6IE1hdGguZmxvb3IoKHRoaXMuZ2V0TW9udGgoKSArIDMpIC8gMyksIC8v5a2j5bqmXHJcbiAgICAgICAgICAgICAgICBcIlNcIjogdGhpcy5nZXRNaWxsaXNlY29uZHMoKSAvL+avq+enklxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAoLyh5KykvLnRlc3QoZm10KSkgZm10ID0gZm10LnJlcGxhY2UoUmVnRXhwLiQxLCAodGhpcy5nZXRGdWxsWWVhcigpICsgXCJcIikuc3Vic3RyKDQgLSBSZWdFeHAuJDEubGVuZ3RoKSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gbylcclxuICAgICAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKFwiKFwiICsgayArIFwiKVwiKS50ZXN0KGZtdCkpIGZtdCA9IGZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKFJlZ0V4cC4kMS5sZW5ndGggPT0gMSkgPyAob1trXSkgOiAoKFwiMDBcIiArIG9ba10pLnN1YnN0cigoXCJcIiArIG9ba10pLmxlbmd0aCkpKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZtdDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL+S/ruaUueWvhueggVxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjY2hhbmdlLXB3ZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnLmNoYW5nZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgJCgnLmNoYW5nZS1wd2QnKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5YWz6Zet5L+u5pS55a+G56CBXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jbG9zZS1wd2QnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJy5jaGFuZ2UtYmFjaycpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICQoJy5jaGFuZ2UtcHdkJykuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2Vuc3VyZS1wd2QnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKCcjbmV3LXBhc3N3b3JkJykudmFsKCkgIT0gJCgnI2Vuc3VyZS1wYXNzd29yZCcpLnZhbCgpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjZW5zdXJlLXBhc3N3b3JkJykuYWRkQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJyNlbnN1cmUtcGFzc3dvcmQnKS5yZW1vdmVDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJhZ2VudE1lbWJlcklkXCI6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJvbGRQd2RcIjogJCgnI3Bhc3N3b3JkJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJwd2RcIjogJCgnI25ldy1wYXNzd29yZCcpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwicHdkQ29uZmlybVwiOiAkKCcjZW5zdXJlLXBhc3N3b3JkJykudmFsKClcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcGkvYWNjb3VudC9jaGFuZ2VQd2QnXHJcbiAgICAgICAgICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfkv67mlLnmiJDlip/vvIEnLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNoYW5nZS1iYWNrJykuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuY2hhbmdlLXB3ZCcpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnIHx8ICfkv67mlLnlpLHotKXvvIzor7fph43or5XvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBydW46IHJ1blxyXG4gICAgfVxyXG59KCkpO1xyXG5tb2R1bGUuZXhwb3J0cy5nZW5lcmFsID0gZ2VuZXJhbDsiLCIvKipcclxuICogQ3JlYXRlZCBieSB6cnogb24gMjAxNi8yLzI0LlxyXG4gKiBAdmVyc2lvbiAxLjAuMCBjcmVhdGVkXHJcbiAqL1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuLy/mnoTpgKDkv6Hmga/moYbkuLvkvZNcclxudmFyIE1vZGFsID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8v5p6E6YCg5Y6f5aeL57G7XHJcbiAgICBmdW5jdGlvbiBNKG0pIHtcclxuICAgICAgICB0aGlzLnMgPSBtLnM7Ly/mmK/lkKbmmL7npLpcclxuICAgICAgICB0aGlzLmlkID0gbS5pZDtcclxuICAgIH1cclxuXHJcbiAgICAvL+aehOmAoOagh+WHhnNob3fmlrnms5XvvIznlKjkuo7nu6fmib9cclxuICAgIE0ucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuaWQpO1xyXG4gICAgICAgIGlmIChlbGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucyAmJiAhaXNTaG93KCkpIHsvL+aYvuekuuW9k+WJjemakOiXj1xyXG4gICAgICAgICAgICAgICAgZWxlLmNsYXNzTmFtZSA9IGVsZS5jbGFzc05hbWUucmVwbGFjZShcImRwLW5cIiwgXCJcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMucyAmJiBpc1Nob3coKSkgey8v6ZqQ6JeP5b2T5YmN5pi+56S6XHJcbiAgICAgICAgICAgICAgICBlbGUuY2xhc3NOYW1lICs9IFwiIGRwLW5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+WOu+mZpOS4pOi+ueeahOepuuagvFxyXG4gICAgICAgICAgICBlbGUuY2xhc3NOYW1lID0gU3RyaW5nKGVsZS5jbGFzc05hbWUpLnRyaW0oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gaXNTaG93KCkgey8v5piv5ZCm5bey5pi+56S677yM5pegY2xhc3Pml7bmmL7npLpcclxuICAgICAgICAgICAgcmV0dXJuIGVsZS5jbGFzc05hbWUuc3BsaXQoXCJkcC1uXCIpLmxlbmd0aCA9PSAxO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy/liqDovb3kv6Hmga/moYZcclxuICAgIHZhciBsb2FkaW5nID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+WIneWni+WMlueUn+aIkOWKoOi9veS/oeaBr+ahhlxyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9hZGluZ19tb2RhbF9lbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwibG9hZGluZ19tb2RhbF9lbGVtZW50XCIgY2xhc3M9XCJsb2FkaW5nLW1vZGFsLWJvZHkgZHAtblwiPjxkaXYgY2xhc3M9XCJjb3Zlcl9tb2RhbF9lbGVtZW50XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJsb2FkaW5nLW1vZGFsLWltYWdlXCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJsb2FkaW5nLW1vZGFsLXRleHRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGgyPueOqeWRveWKoOi9veS4reKApuKApjwvaDI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8v5pi+56S644CB6ZqQ6JeP5L+h5oGv5qGGXHJcbiAgICAgICAgdmFyIHNob3cgPSBmdW5jdGlvbiAocykge1xyXG4gICAgICAgICAgICBzID0gdHlwZW9mIHMgPT0gXCJ1bmRlZmluZWRcIiA/IHRydWUgOiBzOy8v5peg5Y+C5pWw5pi+56S65L+h5oGv5qGGXHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE0oe2lkOiBcImxvYWRpbmdfbW9kYWxfZWxlbWVudFwiLCBzOiBzfSk7XHJcbiAgICAgICAgICAgIG0uc2hvdygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICAsIHNob3c6IHNob3dcclxuICAgICAgICB9XHJcbiAgICB9KCkpO1xyXG4gICAgLy/lvLnlh7rkv6Hmga/moYZcclxuICAgIHZhciBhbGVydCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGVydF9tb2RhbF9lbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwiYWxlcnRfbW9kYWxfZWxlbWVudFwiIGNsYXNzPVwiYWxlcnQtbW9kYWwtZWxlbWVudCBkcC1uXCI+PGRpdiBjbGFzcz1cImNvdmVyX21vZGFsX2VsZW1lbnRcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsZXJ0LW1vZGFsLWNvbnRlbnRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsZXJ0LW1vZGFsLWJvZHlcIj48c3BhbiBjbGFzcz1cImFsZXJ0LW1vZGFsLXRleHRcIj48L3NwYW4+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhbGVydC1tb2RhbC1mb290ZXJcIj48YnV0dG9uIGlkPVwiYWxlcnRfbW9kYWxfY2xvc2VcIiBjbGFzcz1cImFsZXJ0LW1vZGFsLWJ1dHRvblwiPuWFs+mXrTwvYnV0dG9uPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgc2hvdyA9IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgIHMgPSB0eXBlb2YgcyA9PSBcInVuZGVmaW5lZFwiID8gdHJ1ZSA6IHM7XHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE0oe2lkOiBcImFsZXJ0X21vZGFsX2VsZW1lbnRcIiwgczogc30pO1xyXG4gICAgICAgICAgICBtLnNob3coKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOiuvue9ruW8ueWHuuS/oeaBr+ahhlxyXG4gICAgICAgICAqIEBwYXJhbSBtc2cgICAgICAg5pi+56S655qE5L+h5oGv77yM5pSv5oyBaHRtbFxyXG4gICAgICAgICAqIEBwYXJhbSBzZWQgICAgICAg5YCS6K6h5pe25YWz6Zet5pe26Ze077yM5Y2V5L2N77yac2Vjb25kXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrICDlhbPpl63op6blj5Hlm57osIPlh73mlbBcclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgc2V0ID0gZnVuY3Rpb24gKG1zZywgc2VkLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGVydF9tb2RhbF9lbGVtZW50XCIpO1xyXG4gICAgICAgICAgICBpZiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1zZyA9PT0gJ29iamVjdCcpIHsvL+W6lOWvueWQjuerr+i/lOWbnuaPkOekuuaXtuS9v+eUqE9iamVjdOWwgeijhVxyXG4gICAgICAgICAgICAgICAgICAgIG1zZyA9IEpTT04uc3RyaW5naWZ5KG1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihlbGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYWxlcnQtbW9kYWwtdGV4dFwiKVswXS5pbm5lckhUTUwgPSBtc2c7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJhbGVydC1tb2RhbC10ZXh0XCIpWzBdLmlubmVySFRNTCA9IG1zZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2VkID4gMCkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDAwICogc2VkKTtcclxuICAgICAgICAgICAgfS8v5peg5YWz6Zet5pe26Ze05oiW6ICF5YWz6Zet5pe26Ze05Li6MO+8jOS4jeiHquWKqOWFs+mXrVxyXG4gICAgICAgICAgICAvL2ZpeG1lIOS6i+S7tuebkeWQrOeahGll5YW85a655oCnXHJcbiAgICAgICAgICAgIC8v5YWz6Zet5oyJ6ZKu55qE5LqL5Lu25L6m5ZCsXHJcbiAgICAgICAgICAgICQoXCIjYWxlcnRfbW9kYWxfY2xvc2VcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIC8v6Zi75q2i5LqL5Lu257un57ut5Lyg6YCSXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICAsIHNob3c6IHNob3dcclxuICAgICAgICAgICAgLCBzZXQ6IHNldFxyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICAvL+mAieaLqeS/oeaBr+ahhlxyXG4gICAgdmFyIGNvbmZpcm0gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlybV9tb2RhbF9lbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwiY29uZmlybV9tb2RhbF9lbGVtZW50XCIgY2xhc3M9XCJjb25maXJtLW1vZGFsLWVsZW1lbnQgZHAtblwiPjxkaXYgY2xhc3M9XCJjb3Zlcl9tb2RhbF9lbGVtZW50XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb25maXJtLW1vZGFsLWNvbnRlbnRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBpZD1cImNvbmZpcm1fbW9kYWxfaGVhZGVyXCIgY2xhc3M9XCJjb25maXJtLW1vZGFsLWhlYWRlciBkcC1uXCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb25maXJtLW1vZGFsLWJvZHlcIj48c3BhbiBpZD1cImNvbmZpcm1fbW9kYWxfdGV4dFwiIGNsYXNzPVwiY29uZmlybS1tb2RhbC10ZXh0XCI+PC9zcGFuPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29uZmlybS1tb2RhbC1mb290ZXJcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImZvb3Rlci1idXR0b24tc3VjY2Vzc1wiPjxidXR0b24gY2xhc3M9XCJjb25maXJtLW1vZGFsLWJ1dHRvbiAgbW9kYWwtc3VjY2Vzc1wiIGRhdGEtY29uZmlybT1cInN1Y2Nlc3NcIj7noa7orqQ8L2J1dHRvbj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImZvb3Rlci1idXR0b24tZmFsc2VcIj48YnV0dG9uIGNsYXNzPVwiY29uZmlybS1tb2RhbC1idXR0b25cIiBkYXRhLWNvbmZpcm09XCJlcnJvclwiPuWPlua2iDwvYnV0dG9uPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgc2hvdyA9IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgIHMgPSB0eXBlb2YgcyA9PSBcInVuZGVmaW5lZFwiID8gdHJ1ZSA6IHM7XHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE0oe2lkOiBcImNvbmZpcm1fbW9kYWxfZWxlbWVudFwiLCBzOiBzfSk7XHJcbiAgICAgICAgICAgIG0uc2hvdygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6K6+572u6YCJ5oup5L+h5oGv5qGG55qE5YaF5a65XHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbiAgICDphY3nva5cclxuICAgICAgICAgKiB7XHJcbiAgICAgICAgICogICAgICB0aXRsZTpcIuWktOmDqOaYvuekuueahOS/oeaBr1wiXHJcbiAgICAgICAgICogICAgICAsdGV4dDpcIuaYvuekuueahOaPkOekuuS/oeaBr1wiXHJcbiAgICAgICAgICogICAgICAsc3VjY2VzczpcIueCueWHu+aIkOWKn+WQjueahOWbnuiwg1wiXHJcbiAgICAgICAgICogICAgICAsZXJyb3I6XCLngrnlh7vlpLHotKXlkI7nmoTlm57osINcIlxyXG4gICAgICAgICAqICAgICAgLGNvbXBsZXRlOlwi54K55Ye75oyJ6ZKu5ZCO55qE5pW05L2T5Zue6LCDXCJcclxuICAgICAgICAgKiB9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGJhciA9IDA7XHJcbiAgICAgICAgdmFyIHNldCA9IGZ1bmN0aW9uIChvcHRpb24pIHtcclxuICAgICAgICAgICAgaWYgKCFvcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoXCJ0aXRsZVwiIGluIG9wdGlvbiAmJiBvcHRpb24udGl0bGUubGVuZ3RoID4gMCkgey8v5pyJ5aS06YOo77yM5YiZ5pi+56S65aS06YOoXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbmZpcm1fbW9kYWxfaGVhZGVyXCIpLmlubmVySFRNTCA9IG9wdGlvbi50aXRsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoXCJ0ZXh0XCIgaW4gb3B0aW9uICYmIG9wdGlvbi50ZXh0Lmxlbmd0aCA+IDApIHsvL+acieWGheWuue+8jOWImeaYvuekuuaVtOS4qumAieaLqeS/oeaBr+ahhlxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maXJtX21vZGFsX3RleHRcIikuaW5uZXJIVE1MID0gb3B0aW9uLnRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9maXhtZSDkuovku7bnm5HlkKznmoRpZeWFvOWuueaAp1xyXG4gICAgICAgICAgICAvL+WFs+mXreaMiemSrueahOS6i+S7tuS+puWQrFxyXG4gICAgICAgICAgICAkKFwiI2NvbmZpcm1fbW9kYWxfZWxlbWVudFwiKS5maW5kKFwiLmNvbmZpcm0tbW9kYWwtYnV0dG9uXCIpLm9mZihcImNsaWNrXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy9maXhtZSAub2ZmKFwiY2xpY2tcIinnlKjkuo7pmLLmraLlpJrmrKHop6blj5E8LS3lvojnjoTlrabvvIzmiJHkuZ/kuI3nn6XpgZPkuLrku4DkuYjvvIzkvYbmmK/or7fkuI3opoHkv67mlLnjgIJcclxuICAgICAgICAgICAgICAgIHZhciBhdHIgPSAkKHRoaXMpLmF0dHIoXCJkYXRhLWNvbmZpcm1cIik7Ly/pgInmi6nnmoTmjInpkq5cclxuICAgICAgICAgICAgICAgIGJhcisrO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbiAmJiBhdHIgaW4gb3B0aW9uICYmIG9wdGlvblthdHJdIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25bYXRyXSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbiAmJiBcImNvbXBsZXRlXCIgaW4gb3B0aW9uICYmIG9wdGlvbi5jb21wbGV0ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmNvbXBsZXRlKCk7Ly/oi6XmnInlrozmiJDlh73mlbDvvIzliJnmiafooYxcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7Ly/lkKbliJnvvIzlhbPpl63pgInmi6nmoYZcclxuICAgICAgICAgICAgICAgICAgICBzaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8v6Zi75q2i5LqL5Lu257un57ut5Lyg6YCSXHJcbiAgICAgICAgICAgICAgICAvL3JldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbml0OiBpbml0XHJcbiAgICAgICAgICAgICwgc2hvdzogc2hvd1xyXG4gICAgICAgICAgICAsIHNldDogc2V0XHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuICAgIC8v6KaG55uW5bGCXHJcbiAgICB2YXIgY292ZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY292ZXJfbW9kYWxfZWxlbWVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImNvdmVyX21vZGFsX2VsZW1lbnRcIiBjbGFzcz1cImNvdmVyLW1vZGFsLWVsZW1lbnQgZHAtblwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBoaWRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdmVyX21vZGFsX2VsZW1lbnRcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHNob3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY292ZXJfbW9kYWxfZWxlbWVudFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICAsIHNob3c6IHNob3dcclxuICAgICAgICAgICAgLCBoaWRlOiBoaWRlXHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5pdExvYWRpbmc6IGxvYWRpbmcuaW5pdFxyXG4gICAgICAgICwgc2hvd0xvYWRpbmc6IGxvYWRpbmcuc2hvd1xyXG5cclxuICAgICAgICAsIGluaXRBbGVydDogYWxlcnQuaW5pdFxyXG4gICAgICAgICwgc2hvd0FsZXJ0OiBhbGVydC5zaG93XHJcbiAgICAgICAgLCBzZXRBbGVydDogYWxlcnQuc2V0XHJcblxyXG4gICAgICAgICwgaW5pdENvbmZpcm06IGNvbmZpcm0uaW5pdFxyXG4gICAgICAgICwgc2V0Q29uZmlybTogY29uZmlybS5zZXRcclxuICAgICAgICAsIHNob3dDb25maXJtOiBjb25maXJtLnNob3dcclxuICAgICAgICAsIGluaXRDb3ZlcjogY292ZXIuaW5pdFxyXG4gICAgfVxyXG59KCkpO1xyXG5cclxuLy/pobXpnaLliqDovb3lrozmr5XlkI7nlJ/miJDlm5vkuKroh6rlrprkuYnmqKHmgIHmoYZcclxuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAvL+mhtemdouWKoOi9veaXtueUn+aIkOS4gOS4quimhuebluWxglxyXG4gICAgTW9kYWwuaW5pdENvdmVyKCk7XHJcbiAgICAvL+mhtemdouWKoOi9veaXtueUn+aIkOS4gOS4quWKoOi9veS/oeaBr+ahhlxyXG4gICAgTW9kYWwuaW5pdExvYWRpbmcoKTtcclxuICAgIC8v6aG16Z2i5Yqg6L295pe255Sf5oiQ5LiA5Liq5by55Ye65L+h5oGv5qGGXHJcbiAgICBNb2RhbC5pbml0QWxlcnQoKTtcclxuICAgIC8v6aG16Z2i5Yqg6L295pe255Sf5oiQ5LiA5Liq6YCJ5oup5L+h5oGv5qGGXHJcbiAgICBNb2RhbC5pbml0Q29uZmlybSgpO1xyXG59LCAxMDApO1xyXG5cclxuXHJcbi8v5oqb5Ye65LiK5bGC6LCD55SoXHJcbmV4cG9ydHMuc2hvd0xvYWRpbmcgPSBNb2RhbC5zaG93TG9hZGluZztcclxuZXhwb3J0cy5zZXRBbGVydCA9IE1vZGFsLnNldEFsZXJ0O1xyXG5leHBvcnRzLnNob3dBbGVydCA9IE1vZGFsLnNob3dBbGVydDtcclxuZXhwb3J0cy5zZXRDb25maXJtID0gTW9kYWwuc2V0Q29uZmlybTtcclxuZXhwb3J0cy5zaG93Q29uZmlybSA9IE1vZGFsLnNob3dDb25maXJtOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEF1c2VyIG9uIDIwMTYvMTIvNi5cclxuICovXHJcblwidXNlIHN0cmljdFwiO1xyXG52YXIgRGF0YSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZG93biA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3RoZXIvb3NzRG93bidcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgdXAgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL290aGVyL29zc1VwJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBvc3NVcGxvYWQgPSBmdW5jdGlvbiAocGFyYW0sIGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgdmFyIGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybWRhdGEuYXBwZW5kKFwiT1NTQWNjZXNzS2V5SWRcIiwgcGFyYW0uQWNjZXNzS2V5SWQpO1xyXG4gICAgICAgIGZvcm1kYXRhLmFwcGVuZChcInBvbGljeVwiLCBwYXJhbS5Qb2xpY3kpO1xyXG4gICAgICAgIGZvcm1kYXRhLmFwcGVuZChcIlNpZ25hdHVyZVwiLCBwYXJhbS5TaWduYXR1cmUpO1xyXG4gICAgICAgIGZvcm1kYXRhLmFwcGVuZChcImtleVwiLCBwYXJhbS5LZXluYW1lKTtcclxuICAgICAgICBmb3JtZGF0YS5hcHBlbmQoXCJDb250ZW50LURpc3Bvc2l0aW9uXCIsIFwiYXR0YWNobWVudDtmaWxlbmFtZT1cXFwiXCIgKyBkYXRhLm5hbWUgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgZm9ybWRhdGEuYXBwZW5kKFwiZmlsZVwiLCBkYXRhKTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IHBhcmFtLlVwbG9hZFVSTFxyXG4gICAgICAgICAgICAsIGRhdGE6IGZvcm1kYXRhXHJcbiAgICAgICAgICAgICwgcHJvY2Vzc0RhdGE6IGZhbHNlXHJcbiAgICAgICAgICAgICwgY2FjaGU6IGZhbHNlXHJcbiAgICAgICAgICAgICwgYXN5bmM6IGZhbHNlXHJcbiAgICAgICAgICAgICwgY29udGVudFR5cGU6IGZhbHNlXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX2RhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGVycm9yOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IC0xXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBhZGRGaWxlID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci9kZXRhaWwvYWRkJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciB1cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL3VuZGVyd2F5L3VwZGF0ZSdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgcG14ZyA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvdW5kZXJ3YXkvcG14ZydcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgcmVtb3ZlRmlsZSA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvZGV0YWlsL3JlbW92ZSdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgZmlsZUxpc3QgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL2RldGFpbC9saXN0J1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciB3YXJlaG91c2VEZXRhaWwgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL3dhcmVob3VzZS9kZXRhaWwvJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBjb21wYW55ID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci9kZXRhaWwvY29tcGFueSdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgY2hhbmdlU3RhdGUgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL2RldGFpbC9jaGFuZ2VTdGF0ZSdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgdHJhY2sgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL2RldGFpbC90cmFjaydcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgZGVjbGFyZURhdGEgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL2RldGFpbC9kZWNsYXJlRGF0YSdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgcGVyc29uQWRkID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci9kZXRhaWwvcGVyc29uQWRkJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBjb250YWN0TGlzdCA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvZGV0YWlsL2NvbnRhY3RMaXN0J1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBzdWJEYXRhID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci9kZXRhaWwvc3ViRGF0YSdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgZGV0YWlsID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci9kZXRhaWwnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIE5ld1N1Yk51bSA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvZGV0YWlsL05ld1N1Yk51bSdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgbmV3U3RvcmFnZSA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvZGV0YWlsL25ld1N0b3JhZ2UnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGFkZFN0b3JhZ2UgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL2RldGFpbC9hZGRTdG9yYWdlJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBtb3ZlU3RvcmFnZSA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvZGV0YWlsL21vdmVTdG9yYWdlJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBjaGFuZ2VOYW1lID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci9kZXRhaWwvY2hhbmdlTmFtZSdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGRvd246IGRvd25cclxuICAgICAgICAsIHVwOiB1cFxyXG4gICAgICAgICwgb3NzVXBsb2FkOiBvc3NVcGxvYWRcclxuICAgICAgICAsIGFkZEZpbGU6IGFkZEZpbGVcclxuICAgICAgICAsIHJlbW92ZUZpbGU6IHJlbW92ZUZpbGVcclxuICAgICAgICAsIGZpbGVMaXN0OiBmaWxlTGlzdFxyXG4gICAgICAgICwgd2FyZWhvdXNlRGV0YWlsOiB3YXJlaG91c2VEZXRhaWxcclxuICAgICAgICAsIGNvbXBhbnk6IGNvbXBhbnlcclxuICAgICAgICAsIGNoYW5nZVN0YXRlOiBjaGFuZ2VTdGF0ZVxyXG4gICAgICAgICwgdXBkYXRlOiB1cGRhdGVcclxuICAgICAgICAsIHBteGc6IHBteGdcclxuICAgICAgICAsIHRyYWNrOiB0cmFja1xyXG4gICAgICAgICwgZGVjbGFyZURhdGE6IGRlY2xhcmVEYXRhXHJcbiAgICAgICAgLCBwZXJzb25BZGQ6IHBlcnNvbkFkZFxyXG4gICAgICAgICwgY29udGFjdExpc3Q6IGNvbnRhY3RMaXN0XHJcbiAgICAgICAgLCBzdWJEYXRhOiBzdWJEYXRhXHJcbiAgICAgICAgLCBkZXRhaWw6IGRldGFpbFxyXG4gICAgICAgICwgTmV3U3ViTnVtOiBOZXdTdWJOdW1cclxuICAgICAgICAsIG5ld1N0b3JhZ2U6IG5ld1N0b3JhZ2VcclxuICAgICAgICAsIGFkZFN0b3JhZ2U6IGFkZFN0b3JhZ2VcclxuICAgICAgICAsIG1vdmVTdG9yYWdlOiBtb3ZlU3RvcmFnZVxyXG4gICAgICAgICwgY2hhbmdlTmFtZTogY2hhbmdlTmFtZVxyXG4gICAgfVxyXG59KCkpO1xyXG5tb2R1bGUuZXhwb3J0cy5EYXRhID0gRGF0YTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNy8yLzYuXHJcbiAqL1xyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBEb20gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGxpc3QgPSBmdW5jdGlvbiAoanNvbiwgcGFyYW0pIHtcclxuICAgICAgICB2YXIgc3RyID0gJyc7XHJcbiAgICAgICAgaWYgKGpzb24gJiYganNvbi5yZXNDb2RlID09IDAgJiYgJ3Jlc0JvZHknIGluIGpzb24gJiYganNvbi5yZXNCb2R5ICYmICdzTGlzdCcgaW4ganNvbi5yZXNCb2R5ICYmIGpzb24ucmVzQm9keS5zTGlzdCBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIGlmIChqc29uLnJlc0JvZHkuc0xpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IGpzb24ucmVzQm9keS5zTGlzdDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGEgaW4gYXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyci5oYXNPd25Qcm9wZXJ0eShhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gcmVuZGVyKGFyclthXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJC5idXJzdGVyKCQoXCIub3V0ZXItcGFnZVwiKSwgcGFyYW0ub2Zmc2V0IHx8IDAsIGpzb24ucmVzQm9keS50b3RhbENvdW50IHx8IDAsIDUsIHBhcmFtLmxpbWl0IHx8IDIwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN0ciA9ICc8dHIgY2xhc3M9XCJ3cm9uZ1wiPjx0ZCBjb2xzcGFuPVwiOVwiPuaaguaXoOiuouWNleS/oeaBr++8jOivt+a3u+WKoO+8gTwvdGQ+PC90cj4nO1xyXG4gICAgICAgICAgICAgICAgJCgnLm91dGVyLXBhZ2UnKS5odG1sKCcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN0ciA9ICc8dHIgY2xhc3M9XCJ3cm9uZ1wiPjx0ZCBjb2xzcGFuPVwiOVwiPuivt+axguWksei0pe+8jDxhIGhyZWY9XCJcIj7or7fph43or5XvvIE8L2E+PC90ZD48L3RyPic7XHJcbiAgICAgICAgICAgICQoJy5vdXRlci1wYWdlJykuaHRtbCgnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbmRlcihkKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gZC5jb21wYW55IHx8IHt9XHJcbiAgICAgICAgICAgICAgICAsIG8gPSBkLm9yZGVyIHx8IHt9XHJcbiAgICAgICAgICAgICAgICAsIG0gPSBkLm1lbWJlciB8fCB7fVxyXG4gICAgICAgICAgICAgICAgLCB0eXBlO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG8ub3JkZXJDaGFubmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICfoh6rliqnorqLoiLEnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAn5b+r6YCf6K6i6IixJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ+WQjuWPsOS4i+WNlSc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAn6Ieq5Yqp6K6i6IixJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJzx0cj4gPHRkIHJvd3NwYW49XCIyXCI+JyArIG8ub3JkZXJOdW0gKyAnPC90ZD4gPHRkIHJvd3NwYW49XCIyXCI+JyArIChjLmNvbXBhbnlOYW1lIHx8ICcvJykgKyAnPC90ZD4nICtcclxuICAgICAgICAgICAgICAgICcgPHRkPicgKyBuZXcgRGF0ZShvLmNyZWF0ZUR0LnJlcGxhY2UoLy0vZywgXCIvXCIpKS5Gb3JtYXQoJ3l5eXktTU0tZGQgaGg6bW0nKSArICc8L3RkPiA8dGQ+6LW35aeL5riv77yaJyArIChvLmRlcHRDb2RlIHx8ICcvJykgKyAnPC90ZD4gPHRkPuiIquepuuWFrOWPuO+8micgKyAoby5haXJDb21wYW55Q29kZSB8fCAnLycpICsgJzwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzx0ZCBjb2xzcGFuPVwiMlwiPuaVsOmHj++8mu+8iCcgKyAob1snZGVjbGFyZUNhcmdvJ10uY2FyZ29Db3VudCB8fCAnLycpICsgJ+S7tu+8iSDkvZPnp6/vvJrvvIgnICsgKG15Zm9ybWF0LmZvcm1hdHZvbHVtZShvWydkZWNsYXJlQ2FyZ28nXS5jYXJnb1NpemUpIHx8ICcvJykgKyAnbcKz77yJIOmHjemHj++8mu+8iCcgKyAob1snZGVjbGFyZUNhcmdvJ10uY2FyZ29XZWlnaHQgfHwgJy8nKSArICdLR++8iTwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzx0ZCByb3dzcGFuPVwiMlwiPkNOWSAnICsgby5kZWNsYXJlQ2hhcmdpbmdUb3RhbCArICc8L3RkPiA8dGQgcm93c3Bhbj1cIjJcIiBkYXRhLWpjYmg9XCInICsgby53YXJlaG91c2VFbnRyeU51bSArICdcIiBkYXRhLWtobWM9XCInICsgKGMuY29tcGFueU5hbWUgfHwgJy8nKSArICdcIiBkYXRhLWx4cj1cIicgKyAobS5tZW1iZXJOYW1lIHx8ICcvJykgKyAnXCI+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIC8vKG8ub3JkZXJTdGF0ZSA9PSAwID9cclxuICAgICAgICAgICAgICAgICAgICAvLyc8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwiYWNjZXB0XCIgZGF0YS1pZD1cIicgKyBvLm9yZGVySWQgKyAnXCI+6K6i5Y2V56Gu6K6kPC9hPicgOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJzaG93LWJnXCIgZGF0YS1pZD1cIicgKyBvLm9yZGVySWQgKyAnXCI+5oql5YWzPC9hPicgK1xyXG4gICAgICAgICAgICAgICAgICAgIC8vJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJzaG93LXpkXCIgZGF0YS1pZD1cIicgKyBvLm9yZGVySWQgKyAnXCI+5Yi25Y2VPC9hPicgK1xyXG4gICAgICAgICAgICAgICAgICAgIC8vJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJhZGQtZGF0YVwiIGRhdGEtaWQ9XCInICsgby5vcmRlcklkICsgJ1wiPuW9leWFpei/m+S7k+aVsOaNrjwvYT4nICtcclxuICAgICAgICAgICAgICAgICAgICAvLyc8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwiZW5zdXJlLWRhdGFcIiBkYXRhLWlkPVwiJyArIG8ub3JkZXJJZCArICdcIj7noa7orqTov5vku5PmlbDmja48L2E+ICcpICtcclxuICAgICAgICAgICAgICAgICAgICAvLyc8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwicmVmdXNlXCIgZGF0YS1pZD1cIicgKyBvLm9yZGVySWQgKyAnXCI+5Y+W5raIPC9hPicgK1xyXG4gICAgICAgICAgICAgICAgJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJzaG93LXpkXCIgZGF0YS1pZD1cIicgKyBvLm9yZGVySWQgKyAnXCI+5Yi25Y2VPC9hPicgK1xyXG4gICAgICAgICAgICAgICAgJyA8L3RkPiA8L3RyPiA8dHI+IDx0ZD4nICsgKHR5cGUgfHwgJy8nKSArICc8L3RkPiA8dGQ+55uu55qE5riv77yaJyArIChvLmRlc3RDb2RlIHx8ICcvJykgKyAnPC90ZD4gPHRkPui1t+mjnuaXtumXtO+8micgKyBuZXcgRGF0ZShvLmZsaWdodERhdGUucmVwbGFjZSgvLS9nLCBcIi9cIikpLkZvcm1hdCgneXl5eS1NTS1kZCcpICsgJzwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzx0ZD7lk4HlkI3vvJonICsgKG9bJ2RlY2xhcmVDYXJnbyddLmNhcmdvTmFtZSB8fCAnLycpICsgJzwvdGQ+IDx0ZD7ljZXku7fvvJpDTlkgJyArIG8uY2hhcmdpbmdQcmljZSArICc8L3RkPiA8L3RyPicgK1xyXG4gICAgICAgICAgICAgICAgJzx0cj48dGQgY29sc3Bhbj1cIjlcIiBjbGFzcz1cInNob3J0LXRkXCI+PC90ZD48L3RyPic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKCcub3V0ZXItdGInKS5maW5kKCd0Ym9keScpLmh0bWwoc3RyKTtcclxuICAgIH07XHJcbiAgICB2YXIgcmVuZGVyVHIgPSBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgIHZhciBzdHIgPSAnJ1xyXG4gICAgICAgICAgICAsIHJlc3VsdCA9IFwiXCI7XHJcbiAgICAgICAgaWYgKGpzb24gJiYgJ2xpc3QnIGluIGpzb24gJiYganNvbi5saXN0IGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgdmFyIGxpc3QgPSBqc29uLmxpc3Q7XHJcbiAgICAgICAgICAgIGlmIChsaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGwgaW4gbGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaXN0Lmhhc093blByb3BlcnR5KGwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gbGlzdFtsXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9IHJlbmRlcihkLCBwYXJzZUludChsKSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnPHRyPiA8dGQ+PC90ZD4gPHRkPuaAu+iuoTwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8dGQ+JyArIGpzb24udG90YWxDb3VudCArICc8L3RkPiA8dGQ+JyArIG15Zm9ybWF0LmZvcm1hdHZvbHVtZShqc29uLnRvdGFsU2l6ZSkgKyAnPC90ZD4gPHRkPicgKyBteWZvcm1hdC5mb3JtYXR2b2x1bWUoanNvbi50b3RhbFdlaWdodCkgKyAnPC90ZD4nICtcclxuICAgICAgICAgICAgICAgICAgICAnIDx0ZD48L3RkPiA8dGQ+JyArIGpzb24udG90YWxEYW1hZ2UgKyAnPC90ZD4gPHRkPicgKyBqc29uLnRvdGFsRGFtcCArICc8L3RkPiA8dGQ+JyArIGpzb24udG90YWxUcmFuc2Zvcm0gKyAnPC90ZD4gPHRkPicgKyBqc29uLnRvdGFsT3RoZXIgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L3RkPiA8dGQ+PC90ZD4gPC90cj4nO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3RyID0gJzx0cj48dGQgY29sc3Bhbj1cIjEwXCIgY2xhc3M9XCJsb25nLXRkXCI+5pqC5peg6L+b5LuT5pWw5o2u77yM6K+35re75Yqg77yBPC90ZD48L3RyPic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdHIgPSAnPHRyPjx0ZCBjb2xzcGFuPVwiMTBcIiBjbGFzcz1cImxvbmctdGRcIj7or7fmsYLlh7rplJnvvIzor7fph43or5XvvIE8L3RkPjwvdHI+JztcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnLmVuc3VyZS1kYXRhLXRiJykuZmluZCgndGJvZHknKS5odG1sKHN0cik7XHJcbiAgICAgICAgJCgnLmVuc3VyZS1kYXRhLXRiJykuZmluZCgndGZvb3QnKS5odG1sKHJlc3VsdCk7XHJcbiAgICAgICAgZnVuY3Rpb24gcmVuZGVyKGQsIGluZGV4KSB7XHJcbiAgICAgICAgICAgIHZhciB0eXBlO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGQucGFja2FnZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ+e6uOeusSc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICfmnKjnrrEnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAn5Y23JztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ+aJmOebmCc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAn57q4566xJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJzx0cj4gPHRkPicgKyBpbmRleCArICc8L3RkPiA8dGQ+JyArIG5ldyBEYXRlKGQuY3JlYXRlRHQucmVwbGFjZSgvLS9nLCBcIi9cIikpLkZvcm1hdCgneXl5eS1NTS1kZCBoaDptbScpICsgJzwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAnIDx0ZD4nICsgZC5zdG9yYWdlQ291bnQgKyAnPC90ZD4gPHRkPicgKyBkLnN0b3JhZ2VTaXplICsgJzwvdGQ+IDx0ZD4nICsgZC5zdG9yYWdlV2VpZ2h0ICsgJzwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAnIDx0ZD4nICsgdHlwZSArICc8L3RkPiA8dGQ+JyArIGQuZGFtYWdlQ291bnQgKyAnPC90ZD4gPHRkPicgKyBkLmRhbXBDb3VudCArICc8L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgJyA8dGQ+JyArIGQudHJhbnNmb3JtQ291bnQgKyAnPC90ZD4gPHRkPicgKyBkLm90aGVyQ291bnQgKyAnPC90ZD4gPHRkPicgKyBkLnN0b3JhZ2VSZW1hcmsgKyAnPC90ZD4gPC90cj4nO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB2YXIgaW5uZXJMaXN0ID0gZnVuY3Rpb24gKGpzb24sIHBhcmFtKSB7XHJcbiAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgIGlmIChqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwICYmICdyZXNCb2R5JyBpbiBqc29uICYmIGpzb24ucmVzQm9keSAmJiAnc0xpc3QnIGluIGpzb24ucmVzQm9keSAmJiBqc29uLnJlc0JvZHkuc0xpc3QgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICBpZiAoanNvbi5yZXNCb2R5LnNMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcnIgPSBqc29uLnJlc0JvZHkuc0xpc3Q7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBhIGluIGFycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcnIuaGFzT3duUHJvcGVydHkoYSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9IHJlbmRlcihhcnJbYV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQuYnVyc3RlcigkKFwiLmlubmVyLXBhZ2VcIiksIHBhcmFtLm9mZnNldCB8fCAwLCBqc29uLnJlc0JvZHkudG90YWxDb3VudCB8fCAwLCA1LCBwYXJhbS5saW1pdCB8fCAyMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSAnPHRyIGNsYXNzPVwid3JvbmdcIj48dGQgY29sc3Bhbj1cIjlcIj7mmoLml6DmkJzntKLkv6Hmga/vvIE8L3RkPjwvdHI+JztcclxuICAgICAgICAgICAgICAgICQoJy5pbm5lci1wYWdlJykuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdHIgPSAnPHRyIGNsYXNzPVwid3JvbmdcIj48dGQgY29sc3Bhbj1cIjlcIj7or7fmsYLlpLHotKXvvIw8YSBocmVmPVwiXCI+6K+36YeN6K+V77yBPC9hPjwvdGQ+PC90cj4nO1xyXG4gICAgICAgICAgICAkKCcuaW5uZXItcGFnZScpLmh0bWwoJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiByZW5kZXIoZCkge1xyXG4gICAgICAgICAgICB2YXIgc3RyID0gJyc7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHQgaW4gZC50cmFuc1BvcnQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkLnRyYW5zUG9ydC5oYXNPd25Qcm9wZXJ0eSh0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gZC50cmFuc1BvcnRbdF07XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyICs9IHMucG9ydENvZGUgKyAodCA9PSBkLnRyYW5zUG9ydC5sZW5ndGggLSAxID8gJycgOiAnIC0+ICcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAnIDx0cj4gPHRkPjxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwiaS1zZ1wiIGRhdGEtaWQ9XCInICsgZC5haXJ3YXlJZCArICdcIi8+PC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAnPHRkPicgKyBkLmFpckNvbXBhbnlDb2RlICsgJzwvdGQ+IDx0ZD4nICsgc3RyICsgJzwvdGQ+IDx0ZD4nICsgZC5haXJ3YXlQcmljZS5yYXRlWzBdLnBvbGljeVsnNDUnXSArICc8L3RkPiAnICtcclxuICAgICAgICAgICAgICAgICc8dGQ+JyArIGQuYWlyd2F5UHJpY2UucmF0ZVswXS5wb2xpY3lbJzEwMCddICsgJzwvdGQ+IDx0ZD4nICsgZC5haXJ3YXlQcmljZS5yYXRlWzBdLnBvbGljeVsnMzAwJ10gKyAnPC90ZD4nICtcclxuICAgICAgICAgICAgICAgICcgPHRkPicgKyBkLmFpcndheVByaWNlLnJhdGVbMF0ucG9saWN5Wyc1MDAnXSArICc8L3RkPiA8dGQ+JyArIGQuYWlyd2F5UHJpY2UucmF0ZVswXS5wb2xpY3lbJzEwMDAnXSArICc8L3RkPidcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKCcuc2VhcmNoLXRiJykuZmluZCgndGJvZHknKS5odG1sKHN0cik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBsaXN0OiBsaXN0XHJcbiAgICAgICAgLCByZW5kZXJUcjogcmVuZGVyVHJcclxuICAgICAgICAsIGlubmVyTGlzdDogaW5uZXJMaXN0XHJcbiAgICB9XHJcbn0oKSk7XHJcbm1vZHVsZS5leHBvcnRzLkRvbSA9IERvbTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNy8yLzYuXHJcbiAqL1xyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBMaXN0ZW5lciA9IHJlcXVpcmUoJy4vbGlzdGVuZXInKS5MaXN0ZW5lcjtcclxudmFyIGdlbmVyYWwgPSByZXF1aXJlKCcuLi8uLi9nZW5lcmFsL2dlbmVyYWwnKS5nZW5lcmFsXHJcblxyXG5nZW5lcmFsLnJ1bigpO1xyXG5MaXN0ZW5lci5ydW4oKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNy8xLzUuXHJcbiAqL1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxucmVxdWlyZSgnLi4vLi4vZ2VuZXJhbC9idXJzdGVyJyk7XHJcbnZhciB1cmwgPSByZXF1aXJlKCcuLi8uLi9nZW5lcmFsL2Z1bmN0aW9uJykudXJsXHJcbiAgICAsIG15Zm9ybWF0ID0gcmVxdWlyZSgnLi4vLi4vZ2VuZXJhbC9mdW5jdGlvbicpLmZvcm1hdFxyXG4gICAgLCBNb2RhbCA9IHJlcXVpcmUoJy4uLy4uL2dlbmVyYWwvbW9kYWwnKTtcclxudmFyIERhdGEgPSByZXF1aXJlKCcuL2RhdGEnKS5EYXRhXHJcbiAgICAsIERvbSA9IHJlcXVpcmUoJy4vZG9tJykuRG9tO1xyXG52YXIgTGlzdGVuZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgLy/lvoXmj5DkuqTnmoTliIbljZXlj7dcclxuICAgIHZhciBzdWJPcmRlck51bTtcclxuICAgIHZhciBvcGVTaWQ9Jyc7XHJcbiAgICB2YXIgb0lkID0gJCgnI3VwLWZpbGUnKS5kYXRhKCdpZCcpO1xyXG4gICAgLy/lvoXliKDpmaTnmoTlhYPntKBcclxuICAgIHZhciByZW1vdmVFbGU7XHJcbiAgICAvL+e8k+WtmOWIoOmZpOWGheWuuVxyXG4gICAgdmFyIHJlbW92ZUZpbGUgPSB7XHJcbiAgICAgICAgXCJvcmRlcklkXCI6IG9JZCxcclxuICAgICAgICBcImtleU5hbWVcIjogMFxyXG4gICAgfTtcclxuICAgIC8v5oql5YWzJibpooTlrqFcclxuICAgIHZhciBzZW5kVHlwZSA9IHtcclxuICAgICAgICB0eXBlOiAwXHJcbiAgICAgICAgLCBpZDogMFxyXG4gICAgICAgICwgc2lkOiAwXHJcbiAgICB9O1xyXG4gICAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJyNpcC1xZnNqJykuZGF0ZXRpbWVwaWNrZXIoe1xyXG4gICAgICAgICAgICBmb3JtYXQ6ICdoaDppaScsLy/ml6XmnJ/nmoTmoLzlvI9cclxuICAgICAgICAgICAgc3RhcnRWaWV3OiAwLC8v6YCJ5oup5Zmo55qE5byA5aeL5pel5pyfXHJcbiAgICAgICAgICAgIHN0YXJ0RGF0ZTogbmV3IERhdGUoKS5Gb3JtYXQoJ3l5eXktTU0tZGQnKSxcclxuICAgICAgICAgICAgYXV0b2Nsb3NlOiB0cnVlLC8v5pel5pyf6YCJ5oup5a6M5oiQ5ZCO5piv5ZCm5YWz6Zet6YCJ5oup5qGGXHJcbiAgICAgICAgICAgIGJvb3Rjc3NWZXI6IDMsLy/mmL7npLrlkJHlt6blkJHlj7PnmoTnrq3lpLRcclxuICAgICAgICAgICAgbGFuZ3VhZ2U6ICd6aC1DTicsLy/or63oqIBcclxuICAgICAgICAgICAgbWluVmlldzogMCwvL+ihqOekuuaXpeacn+mAieaLqeeahOacgOWwj+iMg+WbtO+8jOm7mOiupOaYr2hvdXJcclxuICAgICAgICAgICAgbWludXRlU3RlcDogNVxyXG4gICAgICAgICAgICAvL2Zvcm1hdDogJ2hoOmlpJyxcclxuICAgICAgICAgICAgLy9hdXRvY2xvc2U6IHRydWUsXHJcbiAgICAgICAgICAgIC8vc3RhcnRWaWV3OiAnaG91cicsXHJcbiAgICAgICAgICAgIC8vbWluVmlldzogMCxcclxuICAgICAgICAgICAgLy9taW51dGVTdGVwOiAxXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jbG9zZS1idG4nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgJCgnLmFsZXJ0LXBhcnQnKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdhLnJtJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZW1vdmVGaWxlWydrZXlOYW1lJ10gPSAkKHRoaXMpLmRhdGEoJ2tleScpO1xyXG4gICAgICAgICAgICByZW1vdmVFbGUgPSAkKHRoaXMpLnBhcmVudHMoJy51cC1wYXJ0Jyk7XHJcbiAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgJCgnLnJlbW92ZS1wYXJ0JykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnYS5ybS10eXBlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZW1vdmVGaWxlWydrZXlOYW1lJ10gPSAkKHRoaXMpLmRhdGEoJ2tleScpO1xyXG4gICAgICAgICAgICByZW1vdmVFbGUgPSAkKHRoaXMpLnBhcmVudHMoJy5hZGQtdHlwZScpO1xyXG4gICAgICAgICAgICAkKCcud2hpdGUtYmFjaycpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICQoJy5yZW1vdmUtdHlwZS1wYXJ0JykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnYS5kbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGZpbGUgPSAkKHRoaXMpLmRhdGEoJ2tleScpO1xyXG4gICAgICAgICAgICBEYXRhLmRvd24oe2ZpbGU6IGZpbGV9LCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0JvZHknIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3Blbihqc29uLnJlc0JvZHkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNlbmQtYmcnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGUgPSAkKCcuYmctcGFydCcpO1xyXG4gICAgICAgICAgICBzZW5kVHlwZS50eXBlID0gcGFyc2VJbnQoJCh0aGlzKS5kYXRhKCdwYXJhbScpKTtcclxuICAgICAgICAgICAgc2VuZFR5cGUuaWQgPSAkKHRoaXMpLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgICAgIHNlbmRUeXBlLnNpZCA9ICQodGhpcykuZGF0YSgnc2lkJykgfHwgbnVsbDtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5oZWFkZXInKS5odG1sKCc8cCBjbGFzcz1cImhlYWRlclwiPuehruiupCcgKyAkKHRoaXMpLnRleHQoKSArICcgPHNwYW4gY2xhc3M9XCJjbG9zZS1idG5cIj5YPC9zcGFuPjwvcD4nKTtcclxuICAgICAgICAgICAgJCgnLndoaXRlLWJhY2snKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICBlbGUucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2JnLWVuc3VyZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogc2VuZFR5cGUuaWQsXHJcbiAgICAgICAgICAgICAgICBcImFnZW50SWRcIjogMCxcclxuICAgICAgICAgICAgICAgIFwic3RhdGVcIjogc2VuZFR5cGUudHlwZVxyXG4gICAgICAgICAgICAgICAgLCBcInN1Yk51bVwiOiBzZW5kVHlwZS5zaWRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgRGF0YS5jaGFuZ2VTdGF0ZShkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5Y+R6YCB5oiQ5Yqf77yBJywgbnVsbCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+WPkemAgeWksei0pe+8jOivt+mHjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2JqamNzai1idG4nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnL29yZGVyL3N0b3JhZ2U/aWQ9JyArICQodGhpcykuZGF0YSgnaWQnKSArICcmbj0nICsgKCQodGhpcykuZGF0YSgnbicpIHx8ICcvJykgKyAnJmM9JyArICgkKHRoaXMpLmRhdGEoJ2MnKSB8fCAnLycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciB1cGxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsICcjdXAtZmlsZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGFyciA9IFsnZG9jJywgJ2RvY3gnLCAneGxzJywgJ3hsc3gnLCAncGRmJywgJ2pwZycsICdwbmcnLCAnYm1wJ107XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXVxyXG4gICAgICAgICAgICAgICAgLCBzaXplID0gdGhpcy5maWxlc1swXS5zaXplXHJcbiAgICAgICAgICAgICAgICAsIG5hbWUgPSB0aGlzLmZpbGVzWzBdLm5hbWU7XHJcbiAgICAgICAgICAgIHZhciBuYSA9IG5hbWUuc3BsaXQoJy4nKTtcclxuICAgICAgICAgICAgaWYgKGFyci5pbmRleE9mKG5hW25hLmxlbmd0aCAtIDFdLnRvTG93ZXJDYXNlKCkpID49IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChzaXplIDwgMjA5NzE1Mikge1xyXG4gICAgICAgICAgICAgICAgICAgIERhdGEudXAoe1wiZmlsZVwiOiBuYW1lfSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSBqc29uLnJlc0JvZHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhLm9zc1VwbG9hZCh0b2tlbiwgZmlsZSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiAnc3RhdHVzJyBpbiBkYXRhICYmIGRhdGEuc3RhdHVzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3JkZXJJZFwiOiBfdGhpcy5kYXRhKCdpZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmaWxlTmFtZVwiOiBuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmaWxlQ29tbWVudFwiOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwia2V5TmFtZVwiOiB0b2tlbi5LZXluYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIFwiZmlsZVR5cGVcIjogMjBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgc3ViTnVtOiBfdGhpcy5kYXRhKCdzaWQnKSA9PSAwID8gJycgOiBfdGhpcy5kYXRhKCdzaWQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhLmFkZEZpbGUoZCwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwICYmIGpzb24ucmVzQm9keSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0ganNvbi5yZXNCb2R5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSAnPGRpdiBjbGFzcz1cInVwLXBhcnRcIj4gPGRpdiBjbGFzcz1cInRvcFwiPicgKyBkLmZpbGVFeHRlbnNpb24udG9VcHBlckNhc2UoKSArICc8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwiZGxcIiBkYXRhLWtleT1cIicgKyBkLmtleU5hbWUgKyAnXCI+PC9hPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJybVwiIGRhdGEta2V5PVwiJyArIGQua2V5TmFtZSArICdcIj48L2E+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJkcC1iXCI+JyArIGQuZmlsZU5hbWUgKyAnPC9hPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmRkZmonKS5maW5kKCcuYWRkJykuYmVmb3JlKHN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfkuIrkvKDlpLHotKXvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+aCqOS4iuS8oOeahOaWh+S7tui2hei/hzJN77yB6K+36YeN5paw6YCJ5oup44CCJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn5paH5Lu25qC85byP5pSv5oyBLmRvYy8uZG9jeC8ueGxzLy54bHN4Ly5wZGYvLmpwZy8ucG5nLy5ibXAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnLnVwLXR5cGUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhcnIgPSBbJ2RvYycsICdkb2N4JywgJ3hscycsICd4bHN4JywgJ3BkZicsICdqcGcnLCAncG5nJywgJ2JtcCddO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF1cclxuICAgICAgICAgICAgICAgICwgc2l6ZSA9IHRoaXMuZmlsZXNbMF0uc2l6ZVxyXG4gICAgICAgICAgICAgICAgLCBuYW1lID0gdGhpcy5maWxlc1swXS5uYW1lO1xyXG4gICAgICAgICAgICB2YXIgbmEgPSBuYW1lLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgICAgIGlmIChhcnIuaW5kZXhPZihuYVtuYS5sZW5ndGggLSAxXS50b0xvd2VyQ2FzZSgpKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2l6ZSA8IDIwOTcxNTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBEYXRhLnVwKHtcImZpbGVcIjogbmFtZX0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuID0ganNvbi5yZXNCb2R5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YS5vc3NVcGxvYWQodG9rZW4sIGZpbGUsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgJ3N0YXR1cycgaW4gZGF0YSAmJiBkYXRhLnN0YXR1cyA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogX3RoaXMuZGF0YSgnaWQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZmlsZU5hbWVcIjogbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZmlsZUNvbW1lbnRcIjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImtleU5hbWVcIjogdG9rZW4uS2V5bmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBcImZpbGVUeXBlXCI6IF90aGlzLmRhdGEoJ3R5cGUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhLmFkZEZpbGUoZCwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwICYmIGpzb24ucmVzQm9keSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0ganNvbi5yZXNCb2R5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSBfdGhpcy5wYXJlbnRzKCcuYWRkLXR5cGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gZC5maWxlRXh0ZW5zaW9uLnRvVXBwZXJDYXNlKCkgKyAnPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBjbGFzcz1cImRsXCIgZGF0YS1rZXk9XCInICsgZC5rZXlOYW1lICsgJ1wiPjwvYT4gPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBjbGFzcz1cInJtLXR5cGVcIiBkYXRhLWtleT1cIicgKyBkLmtleU5hbWUgKyAnXCI+PC9hPidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5maW5kKCcudG9wJykuaHRtbChzdHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5maW5kKCcuZi1uYW1lJykuaHRtbChkLmZpbGVOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUuZmluZCgnaW5wdXQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfkuIrkvKDlpLHotKXvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+aCqOS4iuS8oOeahOaWh+S7tui2hei/hzJN77yB6K+36YeN5paw6YCJ5oup44CCJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn5paH5Lu25qC85byP5pSv5oyBLmRvYy8uZG9jeC8ueGxzLy54bHN4Ly5wZGYvLmpwZy8ucG5nLy5ibXAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnI3VwLWZpbGUtZmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhcnIgPSBbJ2RvYycsICdkb2N4JywgJ3hscycsICd4bHN4JywgJ3BkZicsICdqcGcnLCAncG5nJywgJ2JtcCddO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF1cclxuICAgICAgICAgICAgICAgICwgc2l6ZSA9IHRoaXMuZmlsZXNbMF0uc2l6ZVxyXG4gICAgICAgICAgICAgICAgLCBuYW1lID0gdGhpcy5maWxlc1swXS5uYW1lO1xyXG4gICAgICAgICAgICB2YXIgbmEgPSBuYW1lLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgICAgIGlmIChhcnIuaW5kZXhPZihuYVtuYS5sZW5ndGggLSAxXS50b0xvd2VyQ2FzZSgpKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2l6ZSA8IDIwOTcxNTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBEYXRhLnVwKHtcImZpbGVcIjogbmFtZX0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuID0ganNvbi5yZXNCb2R5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YS5vc3NVcGxvYWQodG9rZW4sIGZpbGUsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgJ3N0YXR1cycgaW4gZGF0YSAmJiBkYXRhLnN0YXR1cyA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogdXJsLmdldCgnaWQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZmlsZU5hbWVcIjogbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZmlsZUNvbW1lbnRcIjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImtleU5hbWVcIjogdG9rZW4uS2V5bmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBcImZpbGVUeXBlXCI6IDIwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHN1Yk51bTogX3RoaXMuZGF0YSgnc2lkJykgPT0gMCA/ICcnIDogX3RoaXMuZGF0YSgnc2lkJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YS5hZGRGaWxlKGQsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCAmJiBqc29uLnJlc0JvZHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGpzb24ucmVzQm9keTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gJzxkaXYgY2xhc3M9XCJ1cC1wYXJ0XCI+IDxkaXYgY2xhc3M9XCJ0b3BcIj4nICsgZC5maWxlRXh0ZW5zaW9uLnRvVXBwZXJDYXNlKCkgKyAnPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBjbGFzcz1cImRsXCIgZGF0YS1rZXk9XCInICsgZC5rZXlOYW1lICsgJ1wiPjwvYT4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwicm1cIiBkYXRhLWtleT1cIicgKyBkLmtleU5hbWUgKyAnXCI+PC9hPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PiA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwiZHAtYlwiPicgKyBkLmZpbGVOYW1lICsgJzwvYT4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudHMoJy5kZGZqLXB1YicpLmZpbmQoJy5hZGQnKS5iZWZvcmUoc3RyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+S4iuS8oOWksei0pe+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn5oKo5LiK5Lyg55qE5paH5Lu26LaF6L+HMk3vvIHor7fph43mlrDpgInmi6njgIInKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfmlofku7bmoLzlvI/mlK/mjIEuZG9jLy5kb2N4Ly54bHMvLnhsc3gvLnBkZi8uanBnLy5wbmcvLmJtcCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGZpbGVMaXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIERhdGEuZmlsZUxpc3Qoe2lkOiB1cmwuZ2V0KCdpZCcpLCBzaWQ6IHVybC5nZXQoJ3NpZCcpfSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDAgJiYganNvbi5yZXNCb2R5KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YTIyPTA7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RyID0gJyc7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0ganNvbi5yZXNCb2R5O1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYSBpbiBhcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyLmhhc093blByb3BlcnR5KGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gYXJyW2FdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZC5maWxlVHlwZSA9PSAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICc8ZGl2IGNsYXNzPVwidXAtcGFydFwiPiA8ZGl2IGNsYXNzPVwidG9wXCI+JyArIGQuZmlsZUV4dGVuc2lvbi50b1VwcGVyQ2FzZSgpICsgJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJkbFwiIGRhdGEta2V5PVwiJyArIGQua2V5TmFtZSArICdcIj48L2E+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwicm1cIiBkYXRhLWtleT1cIicgKyBkLmtleU5hbWUgKyAnXCI+PC9hPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJkcC1iXCI+JyArIGQuZmlsZU5hbWUgKyAnPC9hPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkLmZpbGVUeXBlID09IDIyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhMjI9MTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5kbC1maWxlW2RhdGEtdHlwZT1cIicgKyBkLmZpbGVUeXBlICsgJ1wiXScpLmRhdGEoJ2tleScsIGQua2V5TmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZC5maWxlVHlwZSA9PSAyMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHlsZCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeWxkICs9ICc8ZGl2IGNsYXNzPVwiZmlsZXNcIj4gPGRpdiBjbGFzcz1cInRvcFwiPicgKyBhcnJbYV0uZmlsZUV4dGVuc2lvbi50b1VwcGVyQ2FzZSgpICsgJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaXJjbGUtYXJyb3ctZG93blwiIGRhdGEta2V5PVwiJyArIGFyclthXS5rZXlOYW1lICsgJ1wiPjwvc3Bhbj4gPC9kaXY+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJkcC1iXCI+JyArIGFyclthXS5maWxlTmFtZSArICc8L2E+IDwvZGl2PidcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcueWwtcGFydCcpLmZpbmQoJy5kcC10YicpLmFwcGVuZCh5bGQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3lsZG1haW4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gJCgnLmFkZC10eXBlW2RhdGEtdHlwZT0nICsgZC5maWxlVHlwZSArICddJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlLmZpbmQoJ2lucHV0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlLmZpbmQoJy50b3AnKS5odG1sKGQuZmlsZUV4dGVuc2lvbi50b1VwcGVyQ2FzZSgpICsgJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJkbFwiIGRhdGEta2V5PVwiJyArIGQua2V5TmFtZSArICdcIj48L2E+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJybS10eXBlXCIgZGF0YS1rZXk9XCInICsgZC5rZXlOYW1lICsgJ1wiPjwvYT4gJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUuZmluZCgnLmYtbmFtZScpLmh0bWwoZC5maWxlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YTIyID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZGxbZGF0YS10eXBlPVwiMjJcIl0nKS5hZGRDbGFzcygnbm9uZS1mJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKCcuZGRmaicpLmZpbmQoJy5hZGQnKS5iZWZvcmUoc3RyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBzdWJtaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNyZW1vdmUtZW5zdXJlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBEYXRhLnJlbW92ZUZpbGUocmVtb3ZlRmlsZSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRWxlLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucmVtb3ZlLXBhcnQnKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn5Yig6Zmk5aSx6LSl77yM6K+36YeN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjcmVtb3ZlLXR5cGUtZW5zdXJlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBEYXRhLnJlbW92ZUZpbGUocmVtb3ZlRmlsZSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRWxlLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVFbGUuZmluZCgnLnRvcCcpLmh0bWwoJysnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHJlbW92ZUVsZS5maW5kKCcuZi1uYW1lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYS5odG1sKGEuZGF0YSgnbmFtZScpKTtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVFbGUuZmluZCgnaW5wdXQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLndoaXRlLWJhY2snKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5yZW1vdmUtdHlwZS1wYXJ0JykuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+WIoOmZpOWksei0pe+8jOivt+mHjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3NhdmUtaW5mbycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBhc3MgPSB0cnVlO1xyXG4gICAgICAgICAgICB2YXIgaW5mbyA9ICQoJyNpcC1oYnh4JykudmFsKCk7XHJcbiAgICAgICAgICAgIHZhciB0bSA9ICQoJyNpcC1xZnNqJykudmFsKCk7XHJcbiAgICAgICAgICAgIHZhciB4eD0kKCcjcG4taGJ4eCcpLnZhbCgpO1xyXG4gICAgICAgICAgICBpZiAoIXRtIHx8ICFpbmZvKSB7XHJcbiAgICAgICAgICAgICAgICBwYXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBhc3MpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiYWlybGluZUluZm9cIjogaW5mbyxcclxuICAgICAgICAgICAgICAgICAgICBcImFpcmxpbmVUaW1lXCI6ICQoJyN1cGQtdGltZScpLmh0bWwoKSArICcgJyArIHRtICsgJzowMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJvcmRlcklkXCI6ICQodGhpcykuZGF0YSgnaWQnKSxcclxuICAgICAgICAgICAgICAgICAgICBcIm1lbWJlcklkXCI6IDBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBEYXRhLnVwZGF0ZShkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGpzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnIHx8ICfmm7TmlrDmiJDlip/vvIEnLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+S7heS7heabtOaWsOiIquePre+8jOS4jemcgOimgemHjei9veS/oeaBr1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+abtOaWsOWksei0pe+8jOivt+mHjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+ivt+Whq+WGmeiIquePreS/oeaBr+WSjOi1t+mjnuaXtumXtO+8gScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNwbS1pbmZvJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGFzcyA9IHRydWU7XHJcbiAgICAgICAgICAgIHZhciB4eD0kKCcjcG4tbmFtZScpLnZhbCgpO1xyXG4gICAgICAgICAgICBpZiAocGFzcykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJjYXJnb05hbWVcIjogeHgsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYXJrTmFtZVwiOiQoJyNtYXJrLW5hbWUnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogJCh0aGlzKS5kYXRhKCdpZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibWVtYmVySWRcIjogMFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIERhdGEucG14ZyhkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnIHx8ICfmm7TmlrDmiJDlip/vvIEnLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+abtOaWsOWksei0pe+8jOivt+mHjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+ivt+Whq+WGmeWTgeWQje+8gScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHdhcmVob3VzZURldGFpbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBEYXRhLndhcmVob3VzZURldGFpbCh7aWQ6ICQoJy5ja21jJykuZGF0YSgnaWQnKX0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgIHZhciBuYW1lID0gJy8nO1xyXG4gICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQm9keScgaW4ganNvbiAmJiBqc29uLnJlc0JvZHkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkID0ganNvbi5yZXNCb2R5O1xyXG4gICAgICAgICAgICAgICAgbmFtZSA9IGQud2FyZWhvdXNlTmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKCcuY2ttYycpLmh0bWwobmFtZSk7XHJcbiAgICAgICAgICAgIC8vJCgnI3pkY2snKS52YWx1ZT0kKCcuY2ttYycpLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgICAgIHZhciBja21JZD0kKCcuY2ttYycpLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGNvbXBhbnkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgRGF0YS5jb21wYW55KHtpZDogJCgnLmtoeHgnKS5kYXRhKCdpZCcpfSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgdmFyIG1jID0gJy8nLCBkaiA9ICcvJywgbHhyID0gJy8nLCBseGZzID0gJy8nLCBxcSA9ICcvJztcclxuICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0JvZHknIGluIGpzb24gJiYganNvbi5yZXNCb2R5KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbSA9IGpzb24ucmVzQm9keS5tZW1iZXJcclxuICAgICAgICAgICAgICAgICAgICAsIGMgPSBqc29uLnJlc0JvZHkuY29tcGFueTtcclxuICAgICAgICAgICAgICAgIG1jID0gYy5jb21wYW55TmFtZTtcclxuICAgICAgICAgICAgICAgIGx4ciA9IG0ubmFtZSB8fCAnLyc7XHJcbiAgICAgICAgICAgICAgICBseGZzID0gbS5tb2JpbGUgfHwgJy8nO1xyXG4gICAgICAgICAgICAgICAgcXEgPSBtLlFRIHx8ICcvJztcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYy5hcHBseUxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaiA9ICdEJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaiA9ICdDJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaiA9ICdCJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaiA9ICdBJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaiA9ICdBQSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJy5raC1tYycpLmh0bWwobWMpO1xyXG4gICAgICAgICAgICAkKCcua2gtZGonKS5odG1sKGRqKTtcclxuICAgICAgICAgICAgJCgnLmtoLWx4cicpLmh0bWwobHhyKTtcclxuICAgICAgICAgICAgJCgnLmtoLWx4ZnMnKS5odG1sKGx4ZnMpO1xyXG4gICAgICAgICAgICAkKCcua2gtcXEnKS5odG1sKHFxKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgdHJhY2tJbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzdHIgPSAnJztcclxuICAgICAgICB2YXIgaWQgPSAkKCcjeWRoJykuZGF0YSgnbm8nKTtcclxuICAgICAgICBpZiAoaWQgIT0gMCkge1xyXG4gICAgICAgICAgICBEYXRhLnRyYWNrKHtpZDogaWR9LCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0JvZHknIGluIGpzb24gJiYganNvbi5yZXNCb2R5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBqc29uLnJlc0JvZHk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCd0cmFja0xpc3QnIGluIGIgJiYgYi50cmFja0xpc3QgaW5zdGFuY2VvZiBBcnJheSAmJiBiLnRyYWNrTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBiLnRyYWNrTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSBpbiBhcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcnIuaGFzT3duUHJvcGVydHkoYSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGFyclthXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzx0cj48dGQ+JyArIGQuaXRlbURhdGUgKyAnPC90ZD48dGQ+JyArIGQuaXRlbUxvY2F0aW9uICsgJzwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dGQ+JyArIGQuaXRlbUNvZGUgKyAnPC90ZD48dGQ+JyArIGQuaXRlbURlc2NyaXB0aW9uICsgJzwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dGQ+JyArIGQuY2FyZ29Db3VudCArICc8L3RkPjx0ZD4nICsgZC5jYXJnb1dlaWdodCArICc8L3RkPjwvdHI+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy55ZHRiJykuZmluZCgndGJvZHknKS5odG1sKHN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy55ZHRiJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHZhciBkZWNsYXJlRGF0YSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBEYXRhLmRlY2xhcmVEYXRhKHtpZDogdXJsLmdldCgnaWQnKX0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgIHZhciBzdHIgPSAnJztcclxuICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0JvZHknIGluIGpzb24gJiYganNvbi5yZXNCb2R5KSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9XCJ1cC1wYXJ0XCI+IDxkaXYgY2xhc3M9XCJ0b3BcIj5QREY8c3BhbiBkYXRhLXR5cGU9XCJ5bGRcIiBjbGFzcz1cInNwYW4tYVwiIGRhdGEta2V5PVwiJyArIHVybC5nZXQoJ2lkJykgKyAnXCI+PC9zcGFuPiA8L2Rpdj4gPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBjbGFzcz1cImRwLWJcIj7nlLXlrZDpooTlvZXljZU8L2E+IDwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidXAtcGFydFwiPiA8ZGl2IGNsYXNzPVwidG9wXCI+UERGPHNwYW4gZGF0YS10eXBlPVwiY2tkXCIgY2xhc3M9XCJzcGFuLWFcIiBkYXRhLWtleT1cIicgKyB1cmwuZ2V0KCdpZCcpICsgJ1wiPjwvc3Bhbj4gPC9kaXY+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJkcC1iXCI+5pS+6KGM6YCa55+l5LmmPC9hPiA8L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgJCgnLmZ4dHpzLWZpbGwnKS5hcHBlbmQoc3RyKTtcclxuICAgICAgICAgICAgICAgICQoJy5meHR6cycpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuc3Bhbi1hJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gJy9vcmRlci9kZXRhaWwvJyArICQodGhpcykuZGF0YSgndHlwZScpICsgJz9pZD0nICsgJCh0aGlzKS5kYXRhKCdrZXknKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgY29udGFjdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcGIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6IDEgIC8vMeS4uuWPkei0p+S6uuaTjeS9nO+8jDLkuLrmlLbotKfkurrmk43kvZxcclxuICAgICAgICAgICAgLCBvcGVyYXRlOiAxICAvLzHkuLrmlrDlu7rmk43kvZzvvIwy5Li65pCc57Si5pON5L2cXHJcbiAgICAgICAgICAgICwgb2Zmc2V0OiAwICAvL+aQnOe0ouWIhumhteWBj+enu+mHj1xyXG4gICAgICAgICAgICAsIGxpbWl0OiA1ICAgIC8v5YiG6aG16ZmQ5Yi25p2h5pWwXHJcbiAgICAgICAgICAgICwgZGF0YToge30gIC8v57yT5a2Y6K+35rGC5pWw5o2uXHJcbiAgICAgICAgfTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmNsb3NlLWMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHBiLm9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgICQoJy5jb250YWN0LW1vZGFsJykuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgJCgnLndoaXRlLWJhY2snKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuc2hvdy1jb250YWN0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzdWJPcmRlck51bSA9ICQodGhpcykuZGF0YSgnc2lkJykgPT0gMCA/IG51bGwgOiAkKHRoaXMpLmRhdGEoJ3NpZCcpO1xyXG4gICAgICAgICAgICBwYi50eXBlID0gJCh0aGlzKS5kYXRhKCd0JykgPT0gJ+aUtui0p+S6uicgPyAyIDogMTtcclxuICAgICAgICAgICAgc3dpdGNoKCQodGhpcykuZGF0YSgndCcpKXtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ+aUtui0p+S6uic6XHJcbiAgICAgICAgICAgICAgICAgICAgcGIudHlwZT0yO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAn5Y+R6LSn5Lq6JzpcclxuICAgICAgICAgICAgICAgICAgICBwYi50eXBlPTE7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICfpgJrnn6XkuronOlxyXG4gICAgICAgICAgICAgICAgICAgIHBiLnR5cGU9MztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZWxlID0gJCgnLmNvbnRhY3QtbW9kYWwnKTtcclxuICAgICAgICAgICAgb3BlU2lkID0gJCh0aGlzKS5kYXRhKCdzaWQnKSB8fCBudWxsO1xyXG4gICAgICAgICAgICB2YXIgZDtcclxuICAgICAgICAgICAgLy92YXIgZCA9IHBiLnR5cGUgPT0gMSA/IGZociA6IHNocjtcclxuICAgICAgICAgICAgc3dpdGNoKHBiLnR5cGUpe1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGQ9ZmhyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGQ9c2hyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIGQ9dHpyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbGUuZmluZCgnLmNvbnRhY3QtcGFnZScpLmh0bWwoJycpO1xyXG4gICAgICAgICAgICAkKCcuY3QtcmVxdWlyZScpLnJlbW92ZUNsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcubmV3Jykuc2hvdygpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLnNlYXJjaCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJyNzYXZlLWNvbnRhY3QnKS5zaG93KCk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcjZW5zdXJlLWNvbnRhY3QnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcjcy1uYW1lJykudmFsKGQuY29udGFjdE5hbWUgfHwgJycpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnI3MtZHonKS52YWwoZC5jb250YWN0QWRkcmVzcyB8fCAnJyk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcjcy1wZXJzb24nKS52YWwoZC5jb250YWN0UGVyc29uIHx8ICcnKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJyNzLWRoJykudmFsKGQuY29udGFjdFRlbCB8fCAnJyk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcjcy1tYWlsJykudmFsKGQuY29udGFjdEVtYWlsIHx8ICcnKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJyNzLWN6JykudmFsKGQuY29udGFjdEZheCB8fCAnJyk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuaGVhZGVyJykuaHRtbCgkKHRoaXMpLmRhdGEoJ3QnKSArICforr7nva48c3BhbiBjbGFzcz1cImNsb3NlLWNcIj5YPC9zcGFuPicpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLnNob3ctbmFtZScpLmh0bWwoJCh0aGlzKS5kYXRhKCd0JykpO1xyXG4gICAgICAgICAgICAkKCcjYy1uYW1lJykudmFsKCcnKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJ3Rib2R5JykuaHRtbCgnPHRyIGNsYXNzPVwid3JvbmdcIj4gPHRkIGNvbHNwYW49XCI1XCI+6K+35pCc57SiPC90ZD4gPC90cj4nKTtcclxuICAgICAgICAgICAgZWxlLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+aUtuWPkei0p+S6uuS/oeaBr+e8lui+kVxyXG4gICAgICAgIHZhciBzTm0sc05jLHNObixzTmU7XHJcbiAgICAgICAgLy92YXIgc3BhblRleHQ9ZnVuY3Rpb24ob2JqLGkpe1xyXG4gICAgICAgIC8vICAgICQoJyNzLW5hbWUnKS52YWwoJycpO1xyXG4gICAgICAgIC8vICAgICQoJyNzLWR6JykudmFsKCcnKTtcclxuICAgICAgICAvLyAgICAkKCcjcy1kaCcpLnZhbCgnJyk7XHJcbiAgICAgICAgLy8gICAgJCgnI3MtcGVyc29uJykudmFsKCcnKTtcclxuICAgICAgICAvLyAgICAkKCcjcy1tYWlsJykudmFsKCcnKTtcclxuICAgICAgICAvLyAgICAkKCcjcy1jeicpLnZhbCgnJyk7XHJcbiAgICAgICAgLy8gICAgdmFyIHBhcmVudD0kKG9iaikucGFyZW50KCkucGFyZW50KCkuZmluZCgnc3BhbicpLmVxKGkpLnBhcmVudCgpLmNsb25lKCk7XHJcbiAgICAgICAgLy8gICAgcGFyZW50LmZpbmQoJ3NwYW4nKS5yZW1vdmUoKTtcclxuICAgICAgICAvLyAgICByZXR1cm4gcGFyZW50LnRleHQoKTtcclxuICAgICAgICAvLyAgICBwYXJlbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgLy99O1xyXG4gICAgICAgIG9wZVNpZCA9ICQodGhpcykuZGF0YSgnc2lkJykgfHwgbnVsbDtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmZkLXRvcCAuc2hvdy1jb250YWN0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzdWJPcmRlck51bSA9ICQodGhpcykuZGF0YSgnc2lkJykgPT0gMCA/IG51bGwgOiAkKHRoaXMpLmRhdGEoJ3NpZCcpO1xyXG4gICAgICAgICAgICBzd2l0Y2goJCh0aGlzKS5kYXRhKCd0Jykpe1xyXG4gICAgICAgICAgICAgICAgY2FzZSAn5pS26LSn5Lq6JzpcclxuICAgICAgICAgICAgICAgICAgICBwYi50eXBlPTI7XHJcbiAgICAgICAgICAgICAgICAgICAgc05tPSQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZCgnLm9jTmFtZScpLmh0bWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBzTmM9JCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCcub2NjcCcpLmh0bWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBzTm49JCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCcub2NUZWwnKS5odG1sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc05lPSQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZCgnLm9jRW1haWwnKS5odG1sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICflj5HotKfkuronOlxyXG4gICAgICAgICAgICAgICAgICAgIHBiLnR5cGU9MTtcclxuICAgICAgICAgICAgICAgICAgICBzTm09JCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCcub3NOYW1lJykuaHRtbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNOYz0kKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoJy5vc2NwJykuaHRtbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNObj0kKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoJy5vc1RlbCcpLmh0bWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBzTmU9JCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCcub3NFbWFpbCcpLmh0bWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ+mAmuefpeS6uic6XHJcbiAgICAgICAgICAgICAgICAgICAgcGIudHlwZT0zO1xyXG4gICAgICAgICAgICAgICAgICAgIHNObT0kKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoJy5vdE5hbWUnKS5odG1sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc05jPSQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZCgnLm90Y3AnKS5odG1sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc05uPSQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZCgnLm90VGVsJykuaHRtbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNOZT1zTmU9JCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCcub3RFbWFpbCcpLmh0bWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBlbGUgPSAkKCcuY29udGFjdC1tb2RhbCcpO1xyXG4gICAgICAgICAgICB2YXIgc2R6PSQodGhpcykuZGF0YSgnZHonKSB8fCAnJztcclxuICAgICAgICAgICAgdmFyIHNjej0kKHRoaXMpLmRhdGEoJ2ZheCcpIHx8ICcnO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLmNvbnRhY3QtcGFnZScpLmh0bWwoJycpO1xyXG4gICAgICAgICAgICAkKCcuY3QtcmVxdWlyZScpLnJlbW92ZUNsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcubmV3Jykuc2hvdygpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLnNlYXJjaCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJyNzYXZlLWNvbnRhY3QnKS5zaG93KCk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcjZW5zdXJlLWNvbnRhY3QnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcjcy1uYW1lJykudmFsKHNObSB8fCAnJykgO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnI3MtZHonKS52YWwoc2R6IHx8ICcnKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJyNzLXBlcnNvbicpLnZhbChzTmMgfHwgJycpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnI3MtZGgnKS52YWwoc05uIHx8ICcnKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJyNzLW1haWwnKS52YWwoc05lIHx8ICcnKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJyNzLWN6JykudmFsKHNjeiB8fCAnJyk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuaGVhZGVyJykuaHRtbCgkKHRoaXMpLmRhdGEoJ3QnKSArICforr7nva48c3BhbiBjbGFzcz1cImNsb3NlLWNcIj5YPC9zcGFuPicpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLnNob3ctbmFtZScpLmh0bWwoJCh0aGlzKS5kYXRhKCd0JykpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgndGJvZHknKS5odG1sKCc8dHIgY2xhc3M9XCJ3cm9uZ1wiPiA8dGQgY29sc3Bhbj1cIjVcIj7or7fmkJzntKI8L3RkPiA8L3RyPicpO1xyXG4gICAgICAgICAgICBlbGUucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgJCgnLndoaXRlLWJhY2snKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuc2VsLXRwIHNwYW4nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGUgPSAkKCcuY29udGFjdC1tb2RhbCcpO1xyXG4gICAgICAgICAgICBwYi5vcGVyYXRlID0gJCh0aGlzKS5kYXRhKCd0cCcpO1xyXG4gICAgICAgICAgICBpZiAocGIub3BlcmF0ZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBlbGUuZmluZCgnLm5ldycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIGVsZS5maW5kKCcjc2F2ZS1jb250YWN0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgZWxlLmZpbmQoJy5zZWFyY2gnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBlbGUuZmluZCgnI2Vuc3VyZS1jb250YWN0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWxlLmZpbmQoJy5uZXcnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBlbGUuZmluZCgnI3NhdmUtY29udGFjdCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIGVsZS5maW5kKCcuc2VhcmNoJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgZWxlLmZpbmQoJyNlbnN1cmUtY29udGFjdCcpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjc2F2ZS1jb250YWN0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gJCgnLmNvbnRhY3QtbW9kYWwnKTtcclxuICAgICAgICAgICAgdmFyIHBhc3MgPSB0cnVlO1xyXG4gICAgICAgICAgICAkKCcuY3QtcmVxdWlyZScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy/pgJrnn6XkurrkuI3pnIDopoHpqozor4FcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpIHx8IHBiLnR5cGUgPT0zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFzcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHBhc3MpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFwib3JkZXJJZFwiOiAkKHRoaXMpLmRhdGEoJ2lkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdWJOdW1cIjogc3ViT3JkZXJOdW0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtZW1iZXJJZFwiOiAkKHRoaXMpLmRhdGEoJ21pZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY29udGFjdFR5cGVcIjogcGIudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBcImNvbnRhY3ROYW1lXCI6IGVsZS5maW5kKCcjcy1uYW1lJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjb250YWN0QWRkcmVzc1wiOiBlbGUuZmluZCgnI3MtZHonKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcImNvbnRhY3RQZXJzb25cIjogZWxlLmZpbmQoJyNzLXBlcnNvbicpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY29udGFjdFRlbFwiOiBlbGUuZmluZCgnI3MtZGgnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcImNvbnRhY3RGYXhcIjogZWxlLmZpbmQoJyNzLWN6JykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjb250YWN0RW1haWxcIjogZWxlLmZpbmQoJyNzLW1haWwnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcImlzU2F2ZVwiOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIERhdGEucGVyc29uQWRkKGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+iuvue9ruaIkOWKn++8gScsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn6K6+572u5aSx6LSl77yM6K+36YeN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2Vuc3VyZS1jb250YWN0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaWQgPSAkKCdpbnB1dFtuYW1lPVwiYy1zZ1wiXTpjaGVja2VkJykuZGF0YSgnaWQnKTtcclxuICAgICAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9IHBiLmRhdGFbaWRdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9ICQoJy5jb250YWN0LW1vZGFsJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogJCh0aGlzKS5kYXRhKCdpZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic3ViTnVtXCI6IHN1Yk9yZGVyTnVtLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY29udGFjdFR5cGVcIjogcGIudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBcImNvbnRhY3ROYW1lXCI6IGQuY29udGFjdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjb250YWN0QWRkcmVzc1wiOiBkLmNvbnRhY3RBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY29udGFjdFBlcnNvblwiOiBkLmNvbnRhY3RQZXJzb24sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjb250YWN0VGVsXCI6IGQuY29udGFjdFRlbCxcclxuICAgICAgICAgICAgICAgICAgICBcImNvbnRhY3RGYXhcIjogZC5jb250YWN0RmF4LFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY29udGFjdEVtYWlsXCI6IGQuY29udGFjdEVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiaXNTYXZlXCI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibWVtYmVySWRcIjogJCh0aGlzKS5kYXRhKCdtaWQnKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIERhdGEucGVyc29uQWRkKGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+iuvue9ruaIkOWKn++8gScsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn6K6+572u5aSx6LSl77yM6K+36YeN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn6K+36YCJ5oup5LiA5Liq5pS25Y+R6LSn5Lq677yBJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3NlYXJjaC1wJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBwYi5vZmZzZXQgPSAwO1xyXG4gICAgICAgICAgICBjSW5pdCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuY29udGFjdC1wYWdlIC5wYWdlcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcGIub2Zmc2V0ID0gJCh0aGlzKS5kYXRhKCdvZmZzZXQnKTtcclxuICAgICAgICAgICAgY0luaXQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgY0luaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogcGIudHlwZVxyXG4gICAgICAgICAgICAgICAgLCBrZXk6ICQoJyNjLW5hbWUnKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgLCBjb21wYW55SWQ6ICQoJyNzZWFyY2gtcCcpLmRhdGEoJ2NpZCcpXHJcbiAgICAgICAgICAgICAgICAsIG9mZnNldDogcGIub2Zmc2V0XHJcbiAgICAgICAgICAgICAgICAsIGxpbWl0OiBwYi5saW1pdFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBEYXRhLmNvbnRhY3RMaXN0KGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RyID0gJyc7XHJcbiAgICAgICAgICAgICAgICBwYi5kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBqc29uLnJlc0JvZHkuc0xpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGEgaW4gYXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJyLmhhc093blByb3BlcnR5KGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBhcnJbYV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGIuZGF0YVtkLmNvbnRhY3RJZF0gPSBkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnIDx0cj4gPHRkPjxpbnB1dCBkYXRhLWlkPVwiJyArIGQuY29udGFjdElkICsgJ1wiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJjLXNnXCIvPjwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgPHRkPicgKyBkLmNvbnRhY3ROYW1lICsgJzwvdGQ+IDx0ZD4nICsgZC5jb250YWN0QWRkcmVzcyArICc8L3RkPiA8dGQ+JyArIGQuY29udGFjdFBlcnNvbiArICc8L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIDx0ZD4nICsgZC5jb250YWN0VGVsICsgJzwvdGQ+IDwvdHI+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmJ1cnN0ZXIoJCgnLmNvbnRhY3QtcGFnZScpLCBwYi5vZmZzZXQgfHwgMCwganNvbi5yZXNCb2R5LnRvdGFsQ291bnQsIDUsIHBiLmxpbWl0IHx8IDUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnPHRyIGNsYXNzPVwid3JvbmdcIj4gPHRkIGNvbHNwYW49XCI1XCI+5pqC5peg5pS25Y+R6LSn5Lq677yM6K+35re75Yqg77yBPC90ZD4gPC90cj4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuY29udGFjdC1wYWdlJykuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzx0ciBjbGFzcz1cIndyb25nXCI+IDx0ZCBjb2xzcGFuPVwiNVwiPuivt+axguWHuumUme+8jOivt+mHjeivle+8gTwvdGQ+IDwvdHI+JztcclxuICAgICAgICAgICAgICAgICAgICAkKCcuY29udGFjdC1wYWdlJykuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKCcuY29udGFjdC1tb2RhbCcpLmZpbmQoJ3Rib2R5JykuaHRtbChzdHIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIHZhciBzdWJEYXRhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnLnRkLXNnLC5mZC1zZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCd0cicpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsICQodGhpcykucHJvcCgnY2hlY2tlZCcpID8gJyNjN2VkZmYnIDogJyNmZmYnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3NlbC10ZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnLnRkLXNnJykucHJvcCgnY2hlY2tlZCcsICQodGhpcykucHJvcCgnY2hlY2tlZCcpKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3NlbC1mZC1hbGwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0YiA9ICQodGhpcykucGFyZW50cygndGFibGUnKTtcclxuICAgICAgICAgICAgdGIuZmluZCgnLmZkLXNnJykucHJvcCgnY2hlY2tlZCcsICQodGhpcykucHJvcCgnY2hlY2tlZCcpKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNnLXRhYicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQoJyMnICsgJCh0aGlzKS5kYXRhKCd0YXInKSkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKCcjJyArICQodGhpcykuZGF0YSgndGFyJykpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKCcjY2RkJykucHJvcCgnZGlzYWJsZWQnLCAkKHRoaXMpLmRhdGEoJ3RhcicpID09ICd3ZmRodycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZGwteWxkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pZCA9PVwiZGx5bGRtYWluXCIpIHsgLy/kuLvljZVcclxuICAgICAgICAgICAgICAgIGlmICgkKCcueWwtcGFydCcpLmZpbmQoJy5kcC10YicpLmZpbmQoJy5maWxlcycpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnlsLXBhcnQnKS5maW5kKCcuZHAtdGInKS5odG1sKCfmmoLml6DpooTlvZXljZUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKFwiLnRlbXBcIikuZmluZChcImFcIikubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcueWwtcGFydCcpLmZpbmQoJy5kcC10YicpLmh0bWwoJ+aaguaXoOmihOW9leWNlScpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcueWwtcGFydCcpLmZpbmQoJy5kcC10YicpLmh0bWwoJCh0aGlzKS5maW5kKFwiLnRlbXBcIikuaHRtbCgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKCcud2hpdGUtYmFjaycpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICQoJy55bC1wYXJ0JykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5kbC1maWxlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZmlsZSA9ICQodGhpcykuZGF0YSgna2V5Jyk7XHJcbiAgICAgICAgICAgIGlmIChmaWxlICE9IDApIHtcclxuICAgICAgICAgICAgICAgIERhdGEuZG93bih7ZmlsZTogZmlsZX0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0JvZHknIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oanNvbi5yZXNCb2R5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL30gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICAgIE1vZGFsLnNldEFsZXJ0KCfmmoLml6AnICsgJCh0aGlzKS5maW5kKCcudHh0JykuaHRtbCgpKTtcclxuICAgICAgICAgICAgLy99XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5nbHlwaGljb24tY2lyY2xlLWFycm93LWRvd24nLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZmlsZSA9ICQodGhpcykuZGF0YSgna2V5Jyk7XHJcbiAgICAgICAgICAgIERhdGEuZG93bih7ZmlsZTogZmlsZX0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQm9keScgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGpzb24ucmVzQm9keSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnlmZC1idG4nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIF90aGlzLmZpbmQoJy5mbC1yJykuaHRtbChfdGhpcy5maW5kKCcuZmwtcicpLmh0bWwoKSA9PSAnK+WxleW8gCcgPyAnLeaUtui1tycgOiAnK+WxleW8gCcpO1xyXG4gICAgICAgICAgICB1cmwuc2V0KCdjbGljaycsIF90aGlzLmZpbmQoJy5mbC1yJykuaHRtbCgpID09ICcr5bGV5byAJyA/ICcnIDogX3RoaXMuZGF0YSgnaWQnKSk7XHJcbiAgICAgICAgICAgIHZhciB0YXIgPSAkKCQodGhpcykuZGF0YSgndGFyZ2V0JykpO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuZGF0YSgndGltZScpID09IDApIHtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkaW5nLXBhcnQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICBEYXRhLmRldGFpbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJJZDogdXJsLmdldCgnaWQnKVxyXG4gICAgICAgICAgICAgICAgICAgICwgc3ViT3JkZXJOdW06ICQodGhpcykuZGF0YSgnaWQnKVxyXG4gICAgICAgICAgICAgICAgICAgICwgYWdlbnRDb21wYW55SWQ6IDEwMDAwXHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGEoJ3RpbWUnLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9keSA9IGpzb24ucmVzQm9keSB8fCB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSAnb3JkZXInIGluIGJvZHkgJiYgYm9keS5vcmRlciB8fCB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JhZ2UgPSAnc3RvcmFnZScgaW4gYm9keSAmJiBib2R5LnN0b3JhZ2UgfHwge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbnRyeUxpc3QgPSAnZW50cnlMaXN0JyBpbiBzdG9yYWdlICYmIHN0b3JhZ2UuZW50cnlMaXN0IHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgempqcyA9IDAsIHpqemwgPSAwLCB6anRqID0gMCwgempwcyA9IDAsIHpqYnggPSAwLCB6anNjID0gMCwgempxdCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+WPkei0p+S6uuS/oeaBr+aLvOaOpVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9XCJmZC10b3AgZmlsbFwiPidcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8ub3JkZXJTaGlwcGVyICYmICdjb250YWN0TmFtZScgaW4gby5vcmRlclNoaXBwZXIgJiYgby5vcmRlclNoaXBwZXIuY29udGFjdE5hbWUgJiYgby5vcmRlclNoaXBwZXIuY29udGFjdE5hbWUhPSdudWxsJyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz1cImZkLWluZm9cIj4gPHAgY2xhc3M9XCJ0aXRsZVwiPuWPkei0p+S6uuS/oeaBryA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwic2hvdy1jb250YWN0XCIgZGF0YS10PVwi5Y+R6LSn5Lq6XCIgZGF0YS1zaWQ9XCInICsgKG8uc3ViTnVtIHx8IDApICsgJ1wiIGRhdGEtZHo9XCInICsgby5vcmRlclNoaXBwZXIuY29udGFjdEFkZHJlc3MgKyAnXCIgZGF0YS1mYXg9XCInICsgby5vcmRlclNoaXBwZXIuY29udGFjdEZheCArICdcIj7nvJbovpE8L2E+IDwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICc8cCBjbGFzcz1cIm9zTmFtZVwiPicgKyBvLm9yZGVyU2hpcHBlci5jb250YWN0TmFtZSArICc8L3A+IDxwIGNsYXNzPVwib3NjcFwiPicgKyBvLm9yZGVyU2hpcHBlci5jb250YWN0UGVyc29uICsgJzwvcD4gPHAgY2xhc3M9XCJvc1RlbFwiPicgKyBvLm9yZGVyU2hpcHBlci5jb250YWN0VGVsICsgJzwvcD4gPHAgY2xhc3M9XCJvc0VtYWlsXCI+JyArIG8ub3JkZXJTaGlwcGVyLmNvbnRhY3RFbWFpbCArICc8L3A+IDwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9XCJmZC1pbmZvXCI+IDxwIGNsYXNzPVwidGl0bGVcIj7lj5HotKfkurrkv6Hmga8gPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBjbGFzcz1cInNob3ctY29udGFjdFwiIGRhdGEtdD1cIuWPkei0p+S6ulwiIGRhdGEtc2lkPVwiJyArIChvLnN1Yk51bSB8fCAwKSArICdcIiBkYXRhLWR6PVwiJyArIG8ub3JkZXJTaGlwcGVyLmNvbnRhY3RBZGRyZXNzICsgJ1wiIGRhdGEtZmF4PVwiJyArIG8ub3JkZXJTaGlwcGVyLmNvbnRhY3RGYXggKyAnXCI+57yW6L6RPC9hPiAgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzxwIGNsYXNzPVwibm8tc2ZoclwiPuaaguaXoOWPkei0p+S6uuS/oeaBrzwvcD48L2Rpdj4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/mlLbotKfkurrkv6Hmga/mi7zmjqVcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8ub3JkZXJDb25zaWduZWUgJiYgJ2NvbnRhY3ROYW1lJyBpbiBvLm9yZGVyQ29uc2lnbmVlICYmIG8ub3JkZXJDb25zaWduZWUuY29udGFjdE5hbWUgJiYgby5vcmRlckNvbnNpZ25lZS5jb250YWN0TmFtZSE9J251bGwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9XCJmZC1pbmZvXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxwIGNsYXNzPVwidGl0bGVcIj7mlLbotKfkurrkv6Hmga8gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJzaG93LWNvbnRhY3RcIiBkYXRhLXQ9XCLmlLbotKfkurpcIiBkYXRhLXNpZD1cIicgKyAoby5zdWJOdW0gfHwgMCkgKyAnXCIgZGF0YS1kej1cIicgKyAoby5vcmRlckNvbnNpZ25lZS5jb250YWN0QWRkcmVzcyB8fCAnJykgKyAnXCIgZGF0YS1mYXg9XCInICsgby5vcmRlckNvbnNpZ25lZS5jb250YWN0RmF4ICsgJ1wiPue8lui+kTwvYT4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzxwIGNsYXNzPVwib2NOYW1lXCI+JyArIG8ub3JkZXJDb25zaWduZWUuY29udGFjdE5hbWUgKyAnPC9wPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJvY2NwXCI+JyArIG8ub3JkZXJDb25zaWduZWUuY29udGFjdFBlcnNvbiArICc8L3A+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cIm9jVGVsXCI+JyArIG8ub3JkZXJDb25zaWduZWUuY29udGFjdFRlbCArICc8L3A+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyA8cCBjbGFzcz1cIm9jRW1haWxcIj4nICsgby5vcmRlckNvbnNpZ25lZS5jb250YWN0RW1haWwgKyAnPC9wPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgPC9kaXY+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz1cImZkLWluZm9cIj4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxwIGNsYXNzPVwidGl0bGVcIj7mlLbotKfkurrkv6Hmga8gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJzaG93LWNvbnRhY3RcIiBkYXRhLXQ9XCLmlLbotKfkurpcIiBkYXRhLXNpZD1cIicgKyAoby5zdWJOdW0gfHwgMCkgKyAnXCIgZGF0YS1kej1cIicgKyBvLm9yZGVyQ29uc2lnbmVlLmNvbnRhY3RBZGRyZXNzICsgJ1wiIGRhdGEtZmF4PVwiJyArIG8ub3JkZXJDb25zaWduZWUuY29udGFjdEZheCArICdcIj7nvJbovpE8L2E+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnPHAgY2xhc3M9XCJuby1zZmhyXCI+5pqC5peg5pS26LSn5Lq65L+h5oGvPC9wPjwvZGl2PidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+mAmuefpeS6uuS/oeaBr+aLvOaOpVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5vcmRlck5vdGlmaWVyICYmICdjb250YWN0TmFtZScgaW4gby5vcmRlck5vdGlmaWVyICYmIG8ub3JkZXJOb3RpZmllci5jb250YWN0TmFtZSAmJiBvLm9yZGVyTm90aWZpZXIuY29udGFjdE5hbWUhPW51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz1cImZkLWluZm9cIj4gPHAgY2xhc3M9XCJ0aXRsZVwiPumAmuefpeS6uiA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwic2hvdy1jb250YWN0XCIgZGF0YS10PVwi6YCa55+l5Lq6XCIgZGF0YS1zaWQ9XCInICsgKG8uc3ViTnVtIHx8IDApICsgJ1wiIGRhdGEtZHo9XCInICsgKG8ub3JkZXJOb3RpZmllci5jb250YWN0QWRkcmVzcyB8fCAnJykgKyAnXCIgZGF0YS1mYXg9XCInICsgby5vcmRlck5vdGlmaWVyLmNvbnRhY3RGYXggKyAnXCI+57yW6L6RPC9hPiA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnPHAgY2xhc3M9XCJvdE5hbWVcIj4nICsgby5vcmRlck5vdGlmaWVyLmNvbnRhY3ROYW1lICsgJzwvcD4gPHAgY2xhc3M9XCJvdGNwXCI+JyArIG8ub3JkZXJOb3RpZmllci5jb250YWN0UGVyc29uICsgJzwvcD4gPHAgY2xhc3M9XCJvdFRlbFwiPicgKyBvLm9yZGVyTm90aWZpZXIuY29udGFjdFRlbCArICc8L3A+IDxwIGNsYXNzPVwib3RFbWFpbFwiPicgKyBvLm9yZGVyTm90aWZpZXIuY29udGFjdEVtYWlsICsgJzwvcD4gPC9kaXY+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz1cImZkLWluZm9cIj4gPHAgY2xhc3M9XCJ0aXRsZVwiPumAmuefpeS6uiA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwic2hvdy1jb250YWN0XCIgZGF0YS10PVwi6YCa55+l5Lq6XCIgZGF0YS1zaWQ9XCInICsgKG8uc3ViTnVtIHx8IDApICsgJ1wiIGRhdGEtZmF4PVwiXCIgZGF0YS1kej1cIlwiPue8lui+kTwvYT4gPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzxwIGNsYXNzPVwibm8tc2ZoclwiPuaaguaXoOmAmuefpeS6uuS/oeaBrzwvcD48L2Rpdj4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/lk4HlkI3mi7xcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICc8ZGl2IGNsYXNzPVwiZmQtaW5mb1wiPiA8cCBjbGFzcz1cInRpdGxlXCI+5ZOB5ZCNIDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJjZy1uYW1lLWJ0blwiIGRhdGEtaWQ9XCInICsgby5vcmRlcklkICsgJ1wiIGRhdGEtc2lkPVwiJyArIG8uc3ViTnVtICsgJ1wiIGRhdGEtbmFtZT1cIicgKyBvLnN1YkNhcmdvTmFtZSArICdcIiBkYXRhLW1hcms9XCInICsgKG8uY2FyZ28ucGFja2FnZU1hcmsgfHwgJycpICsgJ1wiIGRhdGEtZHo9XCInICsgKG8ub3JkZXJOb3RpZmllciAmJiBvLm9yZGVyTm90aWZpZXIuY29udGFjdEFkZHJlc3MgfHwgJycpICsgJ1wiID7nvJbovpE8L2E+IDwvcD4gPHA+JyArIG8uc3ViQ2FyZ29OYW1lICsgJzwvcD4gPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImZkLWluZm9cIj48cCBjbGFzcz1cInRpdGxlXCI+5ZSb5aS0IDwvcD48cD4nICsgKG8uY2FyZ28ucGFja2FnZU1hcmsgfHwgJycpICsgJzwvcD4gPC9kaXY+PC9kaXY+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/mi7zmjqV0YWJsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9XCJmZC1taWRkbGVcIj4gPHAgY2xhc3M9XCJ0aXRsZVwiPuWIhuWNlei0p+eJqeS/oeaBryAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+aLhuWIhuWNleW/hemhu+iHs+WwkTLkuKrku6XkuIrop4TmoLxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5TGlzdC5sZW5ndGg+MSB8fCAoZW50cnlMaXN0Lmxlbmd0aCA9PSAxICYmIGVudHJ5TGlzdFswXS5lbnRyeURldGFpbC5sZW5ndGg+MSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnPGJ1dHRvbiBjbGFzcz1cImRwLWIgZmwtciB5Y2YtY2ZkXCIgZGF0YS1pZD1cIicgKyBvLnN1Yk51bSArICdcIiBkYXRhLXdlaT1cIicgKyBib2R5LnN0b3JhZ2UudG90YWxXZWlnaHQgKyAnXCI+5ouG5YiG5Y2VPC9idXR0b24+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPScgPGEgaHJlZj1cIi9vcmRlci9kZXRhaWwvZW5zdXJlP2lkPScgKyBvLm9yZGVySWQgKyAnJnNpZD0nICsgby5zdWJOdW0gKyAnXCIgdGFyZ2V0PVwiX2JsYW5rXCIgY2xhc3M9XCJmbC1yXCI+5p+l55yL5YiG5Y2VPC9hPiA8L3A+PHRhYmxlIGNsYXNzPVwibWctYlwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyA8dGhlYWQ+IDx0cj4gPHRkPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cInNlbC1mZC1hbGxcIj48L3RkPiA8dGQ+6L+b5LuT57yW5Y+3PC90ZD4gPHRkPumVvyhDTSk8L3RkPiA8dGQ+5a69KENNKTwvdGQ+IDx0ZD7pq5goQ00pPC90ZD4gPHRkPuS7tuaVsChQQ1MpPC90ZD4gPHRkPumHjemHjyhLR1MpPC90ZD4gPHRkPuS9k+enryhDQk0pPC90ZD4gPHRkPuWMheijhTwvdGQ+IDx0ZD7mjZ/mr4E8L3RkPiA8dGQ+5Y+Y5b2iPC90ZD4gPHRkPuWPl+a9rjwvdGQ+IDx0ZD7lhbbku5Y8L3RkPiA8dGQ+5aSH5rOoPC90ZD4gPC90cj4gPC90aGVhZD4gPHRib2R5Pic7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlIGluIGVudHJ5TGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5TGlzdC5oYXNPd25Qcm9wZXJ0eShlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkdDEgPSBlbnRyeUxpc3RbZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGR0ID0gZW50cnlMaXN0W2VdLmVudHJ5RGV0YWlsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ampzID0gMCwgeGp6bCA9IDAsIHhqdGogPSAwLCB4anBzID0gMCwgeGpieCA9IDAsIHhqc2MgPSAwLCB4anF0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBkMSBpbiBkdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHQuaGFzT3duUHJvcGVydHkoZDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGR0W2QxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLnN1Yk51bSA9PSBfdGhpcy5kYXRhKCdpZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGpqcyArPSBkLml0ZW1Db3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6ampzICs9IGQuaXRlbUNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhqdGogKz0gZC5pdGVtQ291bnQgKiBkLml0ZW1IZWlnaHQgKiBkLml0ZW1MZW5ndGggKiBkLml0ZW1XaWR0aCAvIDEwMDAwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemp0aiArPSBkLml0ZW1Db3VudCAqIGQuaXRlbUhlaWdodCAqIGQuaXRlbUxlbmd0aCAqIGQuaXRlbVdpZHRoIC8gMTAwMDAwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzx0cj4gPHRkPjxpbnB1dCBkYXRhLWVudW09XCInICsgZHQxLmVudHJ5TnVtICsgJ1wiIHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwiZmQtc2dcIiBkYXRhLWR0PVwiJyArIEpTT04uc3RyaW5naWZ5KGQpLnJlcGxhY2UoL1xcXCIvZywgXCInXCIpICsgJ1wiPjwvdGQ+IDx0ZD4nICsgZHQxLmVudHJ5TnVtICsgJzwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHRkPicgKyBkLml0ZW1MZW5ndGggKyAnPC90ZD4gPHRkPicgKyBkLml0ZW1XaWR0aCArICc8L3RkPiA8dGQ+JyArIGQuaXRlbUhlaWdodCArICc8L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIDx0ZD4nICsgZC5pdGVtQ291bnQgKyAnPC90ZD4gPHRkPi08L3RkPiA8dGQ+JyArIG15Zm9ybWF0LmZvcm1hdHZvbHVtZShkLml0ZW1Db3VudCAqIGQuaXRlbUhlaWdodCAqIGQuaXRlbUxlbmd0aCAqIGQuaXRlbVdpZHRoIC8gMTAwMDAwMCkgKyAnPC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dGQ+JyArIGR0MS5wYWNrYWdlVHlwZSArICc8L3RkPiA8dGQ+LTwvdGQ+IDx0ZD4tPC90ZD4gPHRkPi08L3RkPiA8dGQ+LTwvdGQ+IDx0ZD4tPC90ZD4gPC90cj4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpqemwgKz0gZHQxLnN0b3JhZ2VXZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgempwcyArPSBkdDEuZGFtYWdlQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgempieCArPSBkdDEudHJhbnNmb3JtQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgempzYyArPSBkdDEuZGFtcENvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpqcXQgKz0gZHQxLm90aGVyQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICc8dHIgY2xhc3M9XCJ0ci14alwiPiA8dGQ+5bCP6K6hPC90ZD4gPHRkIGNvbHNwYW49XCI0XCIgY2xhc3M9XCJmb250LWdcIj7mm7TmlrDml7bpl7TvvIgnICsgZHQxLnN0b3JhZ2VUaW1lICsgJ++8iTwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgPHRkPicgKyB4ampzICsgJzwvdGQ+IDx0ZD4tPC90ZD4gPHRkPicgKyBteWZvcm1hdC5mb3JtYXR2b2x1bWUoeGp0aikgKyAnPC90ZD4gPHRkPjwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dGQ+JyArIChkdDEuZGFtYWdlQ291bnQgfHwgJy0nKSArICc8L3RkPiA8dGQ+JyArIChkdDEudHJhbnNmb3JtQ291bnQgfHwgJy0nKSArICc8L3RkPiA8dGQ+JyArIChkdDEuZGFtcENvdW50IHx8ICctJykgKyAnPC90ZD4gPHRkPicgKyAoZHQxLm90aGVyQ291bnQgfHwgJy0nKSArICc8L3RkPiA8dGQ+LTwvdGQ+IDwvdHI+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnPHRyIGNsYXNzPVwidHItempcIj4gPHRkPuaAu+iuoTwvdGQ+IDx0ZCBjb2xzcGFuPVwiNFwiPjwvdGQ+IDx0ZD4nICsgempqcyArICc8L3RkPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dGQ+JyArIG8uY2FyZ28uY2FyZ29XZWlnaHQgKyAnPC90ZD4gPHRkPicgKyBteWZvcm1hdC5mb3JtYXR2b2x1bWUoemp0aikgKyAnPC90ZD4gPHRkPjwvdGQ+IDx0ZD4nICsgKHpqcHMgfHwgJycpICsgJzwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIDx0ZD4nICsgKHpqYnggfHwgJycpICsgJzwvdGQ+IDx0ZD4nICsgKHpqc2MgfHwgJycpICsgJzwvdGQ+IDx0ZD4nICsgKHpqcXQgfHwgJycpICsgJzwvdGQ+IDx0ZD48L3RkPiA8L3RyPjwvdGJvZHk+PC90YWJsZT48L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+iuouWNlemZhOS7tuaLvOaOpVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9XCJmZC1ib3R0b21cIj48ZGl2IGNsYXNzPVwiZGRmai1wdWIgZmlsbFwiPjxwIGNsYXNzPVwidGl0bGUgZmlsbFwiPjxzcGFuIGNsYXNzPVwib25lXCI+5YiG5Y2V55u45YWz5paH5Lu2PC9zcGFuPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cInR3b1wiPjxzcGFuIGNsYXNzPVwid3h0c1wiPua4qemmqOaPkOekuu+8mjwvc3Bhbj7or7flsL3lv6vkuIrkvKDmiqXlhbPljZXjgIHmiqXlhbPlp5TmiZjkuabjgIHoo4XnrrHljZXjgIHlj5HnpajnrYnotYTmlpnvvIzmlofku7bmoLzlvI/mlK/mjIEuZG9jLy5kb2N4Ly54bHMvLnhsc3gvLnBkZi8uanBnLy5wbmcvLmJtcCcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxicj7or7fmo4Dmn6XotYTmlpnor4Hku7bkuIrkvKDmmK/lkKbpvZDlhajvvIzlpoLmnpzpvZDlhajvvIzlj6/lkJHmiqXlhbPooYwnICsgKG8uYWxsb3dDdXN0b21EZWNsYXJlID8gJzxidXR0b24gY2xhc3M9XCJzZW5kLWJnIGZzYmd6dFwiIGlkPVwic2VuZC1iZ1wiIGRhdGEtcGFyYW09XCIzXCIgZGF0YS1pZD1cIicgKyBvLm9yZGVySWQgKyAnXCIgZGF0YS1zaWQ9XCInICsgby5zdWJOdW0gKyAnXCI+5Y+R6YCB5oql5YWz6YCa55+lPC9idXR0b24+JyA6ICcnKSArIChvLmFsbG93UHJlQ2hlY2sgPyAnPGJ1dHRvbiBjbGFzcz1cInNlbmQtYmcgZnN5c3p0XCIgaWQ9XCJzZW5kLWJnXCIgZGF0YS1wYXJhbT1cIjFcIiBkYXRhLWlkPVwiJyArIG8ub3JkZXJJZCArICdcIiBkYXRhLXNpZD1cIicgKyBvLnN1Yk51bSArICdcIj7lj5HpgIHpooTlrqHpgJrnn6U8L2J1dHRvbj4nIDogJycpICsgJzwvc3Bhbj48L3A+PGRpdiBjbGFzcz1cImFkZFwiIGRhdGEtc2lkPVwiJyArIG8uc3ViTnVtICsgJ1wiPiA8ZGl2IGNsYXNzPVwidG9wXCI+ICsgPC9kaXY+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJkcC1iXCI+5re75Yqg5paH5Lu2PC9hPiA8aW5wdXQgdHlwZT1cImZpbGVcIiBpZD1cInVwLWZpbGUtZmRcIiBkYXRhLXNpZD1cIicgKyBvLnN1Yk51bSArICdcIj4gPC9kaXY+PC9kaXY+PC9kaXY+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/kuIvovb3miZPljbDmlofku7ZcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9JzxkaXYgY2xhc3M9XCJmZC1maWxlRG93blwiPjxwIGNsYXNzPVwidGl0bGVcIj7mlofku7bkuIvovb08L3A+PGRpdiBjbGFzcz1cImxlZnRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8cD7kuIvovb0v5omT5Y2w5paH5Lu2PC9wPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy88ZGl2IGNsYXNzPVwiZHAtYiBmbC1sIGRsXCIgaWQ9XCJvcGVuX21hcFwiIGRhdGEtaWQ9XCI8JT0gby53YXJlaG91c2VJZCAlPlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLzxzcGFuIGNsYXNzPVwiZHAtYiBpbWdcIj7lm748L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy88c3BhbiBjbGFzcz1cImRwLWIgdHh0XCI+6L+b5LuT5Zyw5Zu+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy88ZGl2IGNsYXNzPVwiY292ZXIgZHAtblwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy88ZGl2IGNsYXNzPVwiZHAtYiBmbC1sIGRsIGRsLWJoXCIgZGF0YS1pZD1cIjwlPSBvLmFpcndheUlkICU+XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy88YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPHNwYW4gY2xhc3M9XCJkcC1iIGltZ1wiPuS/nTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLzxzcGFuIGNsYXNzPVwiZHAtYiB0eHRcIj7otKfniankv53lh708L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy88L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLzxkaXYgY2xhc3M9XCJjb3ZlciBkcC1uXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy88L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLzxkaXYgY2xhc3M9XCJkcC1iIGZsLWwgZGwgZGwtcHJpY2VcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy88c3BhbiBjbGFzcz1cImRwLWIgaW1nXCI+5oqlPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPHNwYW4gY2xhc3M9XCJkcC1iIHR4dFwiPuWvvOWHuuaKpeS7t+WNlTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLzwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPGRpdiBjbGFzcz1cImNvdmVyIGRwLW5cIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLzwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJkcC1iIGZsLWwgZGwgZGwteWxkXCIgZGF0YS10eXBlPVwiMjFcIiBkYXRhLWtleT1cIjBcIj48YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPjxzcGFuIGNsYXNzPVwiZHAtYiBpbWdcIj7pooQ8L3NwYW4+PHNwYW4gY2xhc3M9XCJkcC1iIHR4dFwiPumihOW9leWNlTwvc3Bhbj48L2E+PGRpdiBjbGFzcz1cImNvdmVyIGRwLW5cIj48L2Rpdj48ZGl2IGNsYXNzPVwidGVtcCBkcC1uXCI+PC9kaXY+PC9kaXY+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZHAtYiBmbC1sIGRsIGRsLWZpbGVcIiBkYXRhLXR5cGU9XCIyMlwiIGRhdGEta2V5PVwiMFwiPjxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCI+PHNwYW4gY2xhc3M9XCJkcC1iIGltZ1wiPuafpTwvc3Bhbj48c3BhbiBjbGFzcz1cImRwLWIgdHh0XCI+5p+l6aqM6LS555So5Y2VPC9zcGFuPjwvYT4gPGRpdiBjbGFzcz1cImNvdmVyIGRwLW5cIj48L2Rpdj48L2Rpdj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhci5odG1sKHN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhci5jb2xsYXBzZSgndG9nZ2xlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBEYXRhLmZpbGVMaXN0KHtpZDogdXJsLmdldCgnaWQnKSwgc2lkOiBvLnN1Yk51bSB8fCAnJ30sIGZ1bmN0aW9uIChqc29uKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDAgJiYganNvbi5yZXNCb2R5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBqc29uLnJlc0JvZHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhMjI9MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhIGluIGFycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJyLmhhc093blByb3BlcnR5KGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGFyclthXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLmZpbGVUeXBlID09IDIwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICc8ZGl2IGNsYXNzPVwidXAtcGFydFwiPiA8ZGl2IGNsYXNzPVwidG9wXCI+JyArIGQuZmlsZUV4dGVuc2lvbi50b1VwcGVyQ2FzZSgpICsgJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJkbFwiIGRhdGEta2V5PVwiJyArIGQua2V5TmFtZSArICdcIj48L2E+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBjbGFzcz1cInJtXCIgZGF0YS1rZXk9XCInICsgZC5rZXlOYW1lICsgJ1wiPjwvYT4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4gPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBjbGFzcz1cImRwLWJcIj4nICsgZC5maWxlTmFtZSArICc8L2E+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZC5maWxlVHlwZSA9PSAyMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEyMj0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudCgpLmZpbmQoXCIuZmQtaW5mby1ib2R5XCIpLmZpbmQoXCIuZmQtZmlsZURvd25cIikuZmluZChcIi5kbC1maWxlXCIpLmRhdGEoJ2tleScsIGQua2V5TmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAkKCcuZGwtZmlsZVtkYXRhLXR5cGU9XCInICsgZC5maWxlVHlwZSArICdcIl0nKS5kYXRhKCdrZXknLCBkLmtleU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkLmZpbGVUeXBlID09IDIxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHlsZCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlsZCArPSAnPGRpdiBjbGFzcz1cInVwLXBhcnRcIj4gPGRpdiBjbGFzcz1cInRvcFwiPicgKyBhcnJbYV0uZmlsZUV4dGVuc2lvbi50b1VwcGVyQ2FzZSgpICsgJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJkbCBnbHlwaGljb24gZ2x5cGhpY29uLWNpcmNsZS1hcnJvdy1kb3duXCIgZGF0YS1rZXk9XCInICsgZC5rZXlOYW1lICsgJ1wiPjwvYT4gPC9kaXY+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJkcC1iXCI+JyArIGFyclthXS5maWxlTmFtZSArICc8L2E+IDwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFyZW50KCkuZmluZChcIi5mZC1pbmZvLWJvZHlcIikuZmluZChcIi5mZC1maWxlRG93blwiKS5maW5kKFwiLmRsLXlsZFwiKS5maW5kKFwiLnRlbXBcIikuYXBwZW5kKHlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kKCcuZnh0enMtZmlsbCcpLmFwcGVuZCh5bGQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5meHR6cycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9ICQoJy5hZGQtdHlwZVtkYXRhLXR5cGU9JyArIGQuZmlsZVR5cGUgKyAnXScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlLmZpbmQoJ2lucHV0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5maW5kKCcudG9wJykuaHRtbChkLmZpbGVFeHRlbnNpb24udG9VcHBlckNhc2UoKSArICc8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwiZGxcIiBkYXRhLWtleT1cIicgKyBkLmtleU5hbWUgKyAnXCI+PC9hPiA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwicm0tdHlwZVwiIGRhdGEta2V5PVwiJyArIGQua2V5TmFtZSArICdcIj48L2E+ICcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5maW5kKCcuZi1uYW1lJykuaHRtbChkLmZpbGVOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhMjI9PTApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZGxbZGF0YS10eXBlPVwiMjJcIl0nKS5hZGRDbGFzcygnbm9uZS1mJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hZGRbZGF0YS1zaWQ9XCInICsgby5zdWJOdW0gKyAnXCJdJykuYmVmb3JlKHN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfojrflj5bliIbljZXor6bmg4XlpLHotKXvvIzor7fph43or5XvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRpbmctcGFydCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFyLmNvbGxhcHNlKCd0b2dnbGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcueWZkLXNnJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBjcmVhdGVTdWIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHR5cGUgPSB7XHJcbiAgICAgICAgICAgIGNmOiAwLCAgICAgLy8w5piv5pyq5ouG5YiG6L+H55qE77yMMeaYr+aLhuWIhui/h+eahFxyXG4gICAgICAgICAgICBuOiAwLCAgICAgICAgIC8vMOaYr+aLhuW+gOaWsOiuouWNle+8jDHmmK/mi4blvoDlt7LmnInorqLljZVcclxuICAgICAgICAgICAgc2lkOiAnJyAgICAvL+W3suaLhuWIhui/h+eahOWIhuWNleWPt1xyXG4gICAgICAgICAgICAsIHRvc2RpOiAnJyAgLy/mi4blvoDlk6rkuKrorqLljZVcclxuICAgICAgICAgICAgLCBvcml3ZWk6ICcnICAgLy/lt7Lmi4bliIbph43ph49cclxuICAgICAgICAgICAgLCBhcnI6IFtdICAgLy/ovaznp7vnmoTotKfnianmlbDmja5cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBpbml0TW9kYWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJy53LWUnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy55LW4nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy55LWUnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy5mZC1hbGVydC1wYXJ0JykuZmluZCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAkKCcjY3p4ZmQnKS50cmlnZ2xlKCdjbGljaycpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsICcjeXlmZC1mZGgnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBvcHQgPSAkKHRoaXMpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gJCgnLmZkLWFsZXJ0LXBhcnQnKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5tYmZkJykuaHRtbChvcHQudmFsKCkpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLm1iJykuZmluZCgnLm9yaS13ZWknKS5odG1sKG9wdC5kYXRhKCd3ZWknKSlcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnaW5wdXRbbmFtZT1cInNlbC1mZC10eXBlXCJdJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcudy1lJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcueS1uJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcueS1lJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcuZmQtYWxlcnQtcGFydCcpLmZpbmQoJy5mLXB0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcuZmQtYWxlcnQtcGFydCcpLmZpbmQoJy5zLXB0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gJCgnLmFsZXJ0LWJvZHknKTtcclxuICAgICAgICAgICAgdmFyIG4gPSBlbGUuZmluZCgnLm5ldycpO1xyXG4gICAgICAgICAgICB2YXIgZSA9IGVsZS5maW5kKCcuZXhpc3QnKTtcclxuICAgICAgICAgICAgaWYgKCQoJ2lucHV0W25hbWU9XCJzZWwtZmQtdHlwZVwiXTpjaGVja2VkJykudmFsKCkgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgdHlwZS5uID0gMDtcclxuICAgICAgICAgICAgICAgIG4uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgZS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlLm4gPSAxO1xyXG4gICAgICAgICAgICAgICAgbi5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBlLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjdy1jZmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHR5cGUuY2YgPSAwO1xyXG4gICAgICAgICAgICB0eXBlLnNpZCA9IG51bGw7XHJcbiAgICAgICAgICAgIHZhciBhcnIgPSBbXTtcclxuICAgICAgICAgICAgdmFyIHRhYmxlID0gJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygndGFibGUnKTtcclxuICAgICAgICAgICAgdGFibGUuZmluZCgnLnRkLXNnOmNoZWNrZWQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gSlNPTi5wYXJzZSgkKHRoaXMpLmRhdGEoJ2R0JykucmVwbGFjZSgvXFwnL2csIFwiXFxcIlwiKSk7XHJcbiAgICAgICAgICAgICAgICBkWyd3YXJlaG91c2VFbnRyeU51bSddID0gJCh0aGlzKS5kYXRhKCdlbnVtJyk7XHJcbiAgICAgICAgICAgICAgICBhcnIucHVzaChkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHR5cGUuYXJyID0gYXJyO1xyXG4gICAgICAgICAgICBpZiAodGFibGUuZmluZCgnLnRkLXNnOmNoZWNrZWQnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBEYXRhLk5ld1N1Yk51bSh7b3JkZXJJZDogdXJsLmdldCgnaWQnKX0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG51bSA9IGpzb24gJiYgJ3Jlc0JvZHknIGluIGpzb24gJiYganNvbi5yZXNCb2R5IHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNuZmQtZmRoJykudmFsKG51bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLndoaXRlLWJhY2snKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5mZC1hbGVydC1wYXJ0JykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIC8v5o+Q56S65b+F6aG76YCJ5Lit5LiA5LiqXHJcbiAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn5ouG5YiG5Y2V6ZyA6KaB6Iez5bCR6YCJ5Lit5LiA5Liq6KeE5qC877yBJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnljZi1jZmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHR5cGUuY2YgPSAxO1xyXG4gICAgICAgICAgICB0eXBlLnNpZCA9ICQodGhpcykuZGF0YSgnaWQnKTtcclxuICAgICAgICAgICAgdHlwZS5vcml3ZWkgPSAkKHRoaXMpLmRhdGEoJ3dlaScpO1xyXG4gICAgICAgICAgICB2YXIgYXJyID0gW107XHJcbiAgICAgICAgICAgIHZhciB0YWJsZSA9ICQodGhpcykucGFyZW50KCkuc2libGluZ3MoJ3RhYmxlJyk7XHJcbiAgICAgICAgICAgIHRhYmxlLmZpbmQoJy5mZC1zZzpjaGVja2VkJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9IEpTT04ucGFyc2UoJCh0aGlzKS5kYXRhKCdkdCcpLnJlcGxhY2UoL1xcJy9nLCBcIlxcXCJcIikpO1xyXG4gICAgICAgICAgICAgICAgZFsnd2FyZWhvdXNlRW50cnlOdW0nXSA9ICQodGhpcykuZGF0YSgnZW51bScpO1xyXG4gICAgICAgICAgICAgICAgYXJyLnB1c2goZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0eXBlLmFyciA9IGFycjtcclxuICAgICAgICAgICAgLy/lt7Lmi4bliIbljZXmi4bliIbljZXvvIzoh7PlsJHor6XliIbljZXlupTor6Xkv53nlZnkuIDkuKrop4TmoLzjgIJcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkTGVuZ3RoID0gdGFibGUuZmluZCgnLmZkLXNnOmNoZWNrZWQnKS5sZW5ndGhcclxuICAgICAgICAgICAgdmFyIGl0ZW1zTGVuZ3RoID0gdGFibGUuZmluZCgnLmZkLXNnJykubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAoIHNlbGVjdGVkTGVuZ3RoPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbXNMZW5ndGgtc2VsZWN0ZWRMZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgRGF0YS5OZXdTdWJOdW0oe29yZGVySWQ6IHVybC5nZXQoJ2lkJyl9LCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbnVtID0ganNvbiAmJiAncmVzQm9keScgaW4ganNvbiAmJiBqc29uLnJlc0JvZHkgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNuZmQtZmRoJykudmFsKG51bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmZkLWFsZXJ0LXBhcnQnKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+W4puWFpeW3suaLhuWIhuWNleWIhuWNleWPt1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjb3JpZ2luLWZkaCcpLnZhbCh0eXBlLnNpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAvL+aPkOekuuW/hemhu+mAieS4reS4gOS4qlxyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCflt7Lmi4bliIbljZXpnIDopoHpooTnlZnkuIDkuKrop4TmoLzvvIEnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAvL+aPkOekuuW/hemhu+mAieS4reS4gOS4qlxyXG4gICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+aLhuWIhuWNlemcgOimgeiHs+WwkemAieS4reS4gOS4quinhOagvO+8gScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNjcmVhdGUtZmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIHZhciBwYXNzID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHR5cGUuY2YgPT0gMCAmJiB0eXBlLm4gPT0gMCkgey8v5pyq5ouG5YiG6LSn54mp5ouG5b6A5paw5YiG5Y2VXHJcbiAgICAgICAgICAgICAgICAkKCcubmZkLXJlcXVpcmVkJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkKHRoaXMpLnZhbCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocGFyc2VGbG9hdCgkKCcjbmZkLXpsJykudmFsKCkpPD0wKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+WIhuWNlemHjemHj+W/hemhu+Wkp+S6jjDvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJvcmRlcklkXCI6IHVybC5nZXQoJ2lkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwib3JkZXJTdWJOdW1cIjogJCgnI25mZC1mZGgnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjYXJnb05hbWVcIjogJCgnI25mZC1wbScpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIndlaWdodFwiOiAkKCcjbmZkLXpsJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZW50cnlJdGVtTGlzdFwiOiB0eXBlLmFyclxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgRGF0YS5uZXdTdG9yYWdlKGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn5YiG5Y2V5Yib5bu65oiQ5YqfIScsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+WIhuWNleWIm+W7uuWksei0pe+8jOivt+mHjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGUuY2YgPT0gMCAmJiB0eXBlLm4gPT0gMSkgey8v5pyq5ouG5YiG6LSn54mp5ouG5b6A5bey5pyJ5YiG5Y2VXHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnI3l5ZmQtZmRoJykuZmluZCgnb3B0aW9uJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB3ZSA9ICQoJy53LWUnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0gJCgnI3l5ZmQtZmRoJykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2UuZmluZCgnLm1iZmQnKS5odG1sKG9wdGlvbi52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2UuZmluZCgnLm9yaS13ZWknKS5odG1sKG9wdGlvbi5kYXRhKCd3ZWknKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2Uuc2libGluZ3MoKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2Uuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudCgpLmZpbmQoJy5mLXB0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudCgpLmZpbmQoJy5zLXB0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn5pqC5peg5Y+v6YCJ5YiG5Y2V77yM6K+35ouG6Iez5paw5YiG5Y2V77yBJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGUuY2YgPT0gMSAmJiB0eXBlLm4gPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLm5mZC1yZXF1aXJlZCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJCh0aGlzKS52YWwoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB5biA9ICQoJy55LW4nKTtcclxuICAgICAgICAgICAgICAgICAgICB5bi5zaWJsaW5ncygpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB5bi5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgeW4uZmluZCgnLmJvZHknKS5odG1sKHR5cGUub3Jpd2VpICsgJyBLRycpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudCgpLmZpbmQoJy5mLXB0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudCgpLmZpbmQoJy5zLXB0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlLmNmID09IDEgJiYgdHlwZS5uID09IDEpIHsvL+W3suaLhuWIhui0p+eJqeaLhuW+gOW3suacieWIhuWNlVxyXG4gICAgICAgICAgICAgICAgaWYgKCQoJyN5eWZkLWZkaCcpLmZpbmQoJ29wdGlvbicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeWUgPSAkKCcueS1lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9ICQoJyN5eWZkLWZkaCcpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHllLmZpbmQoJy5tYmZkJykuaHRtbChvcHRpb24udmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHllLmZpbmQoJy5iY2ZkJykuaHRtbCh0eXBlLnNpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3l5ZmQtZmRoIG9wdGlvbicpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpID09IHR5cGUuc2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZS5maW5kKCcuYmMnKS5maW5kKCcub3JpLXdlaScpLmh0bWwoJCh0aGlzKS5kYXRhKCd3ZWknKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeWUuZmluZCgnLm1iJykuZmluZCgnLm9yaS13ZWknKS5odG1sKG9wdGlvbi5kYXRhKCd3ZWknKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHllLnNpYmxpbmdzKCkuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHllLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQoKS5maW5kKCcuZi1wdCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQoKS5maW5kKCcucy1wdCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+aaguaXoOWPr+mAieWIhuWNle+8jOivt+aLhuiHs+aWsOWIhuWNle+8gScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNmZC10eicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGUuY2YgPT0gMCAmJiB0eXBlLm4gPT0gMSkgey8v5pyq5ouG5YiG6LSn54mp5ouG5b6A5bey5pyJ5YiG5Y2VXHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnI3ctZS0tbi13JykudmFsKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjdy1lLS1uLXcnKS5yZW1vdmVDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogdXJsLmdldCgnaWQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdWJOdW1cIjogJCgnI3l5ZmQtZmRoJykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2FyZ29OYW1lXCI6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZW50cnlJdGVtTGlzdFwiOiB0eXBlLmFycixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3ZWlnaHRcIjogJCgnI3ctZS0tbi13JykudmFsKClcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIERhdGEuYWRkU3RvcmFnZShkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+WIhuWNleaTjeS9nOaIkOWKnyEnLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnIHx8ICfliIbljZXmk43kvZzlpLHotKXvvIzor7fph43or5XvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjdy1lLS1uLXcnKS5hZGRDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlLmNmID09IDEgJiYgdHlwZS5uID09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKCcjeS1uLXh6bCcpLnZhbCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3ktbi14emwnKS5yZW1vdmVDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkMSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJvcmRlcklkXCI6IHVybC5nZXQoJ2lkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3ViTnVtXCI6IHR5cGUuc2lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN1Yk51bVRvXCI6ICQoJyNuZmQtZmRoJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2FyZ29OYW1lXCI6ICQoJyNuZmQtcG0nKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJlbnRyeUl0ZW1MaXN0XCI6IHR5cGUuYXJyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIndlaWdodFwiOiAkKCcjeS1uLXh6bCcpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIndlaWdodFRvXCI6ICQoJyNuZmQtemwnKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgRGF0YS5tb3ZlU3RvcmFnZShkMSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfliIbljZXmk43kvZzmiJDlip8hJywgbnVsbCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5YiG5Y2V5pON5L2c5aSx6LSl77yM6K+36YeN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3ktbi14emwnKS5hZGRDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlLmNmID09IDEgJiYgdHlwZS5uID09IDEpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKCcjeS1lLWItemwnKS52YWwoKSAmJiAkKCcjeS1lLW1iLXpsJykudmFsKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjeS1lLWItemwnKS5yZW1vdmVDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyN5LWUtbWItemwnKS5yZW1vdmVDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkMiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJvcmRlcklkXCI6IHVybC5nZXQoJ2lkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3ViTnVtXCI6IHR5cGUuc2lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN1Yk51bVRvXCI6ICQoJyN5eWZkLWZkaCcpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNhcmdvTmFtZVwiOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJlbnRyeUl0ZW1MaXN0XCI6IHR5cGUuYXJyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIndlaWdodFwiOiAkKCcjeS1lLWItemwnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3ZWlnaHRUb1wiOiAkKCcjeS1lLW1iLXpsJykudmFsKClcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIERhdGEubW92ZVN0b3JhZ2UoZDIsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn5YiG5Y2V5pON5L2c5oiQ5YqfIScsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+WIhuWNleaTjeS9nOWksei0pe+8jOivt+mHjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISQoJyN5LWUtYi16bCcpLnZhbCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyN5LWUtYi16bCcpLmFkZENsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3ktZS1iLXpsJykucmVtb3ZlQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkKCcjeS1lLW1iLXpsJykudmFsKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3ktZS1tYi16bCcpLmFkZENsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3ktZS1tYi16bCcpLnJlbW92ZUNsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNmZC1idHonLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlLmNmID09IDAgJiYgdHlwZS5uID09IDEpIHsvL+acquaLhuWIhui0p+eJqeaLhuW+gOW3suacieWIhuWNlVxyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJvcmRlcklkXCI6IHVybC5nZXQoJ2lkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdWJOdW1cIjogJCgnI3l5ZmQtZmRoJykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjYXJnb05hbWVcIjogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBcImVudHJ5SXRlbUxpc3RcIjogdHlwZS5hcnIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ3ZWlnaHRcIjogJCgnLnctZScpLmZpbmQoJy5vcmktd2VpJykuaHRtbCgpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgRGF0YS5hZGRTdG9yYWdlKGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+WIhuWNleaTjeS9nOaIkOWKnyEnLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+WIhuWNleaTjeS9nOWksei0pe+8jOivt+mHjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlLmNmID09IDEgJiYgdHlwZS5uID09IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBkMSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogdXJsLmdldCgnaWQnKSxcclxuICAgICAgICAgICAgICAgICAgICBcInN1Yk51bVwiOiB0eXBlLnNpZCxcclxuICAgICAgICAgICAgICAgICAgICBcInN1Yk51bVRvXCI6ICQoJyNuZmQtZmRoJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjYXJnb05hbWVcIjogJCgnI25mZC1wbScpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZW50cnlJdGVtTGlzdFwiOiB0eXBlLmFycixcclxuICAgICAgICAgICAgICAgICAgICBcIndlaWdodFwiOiB0eXBlLm9yaXdlaSxcclxuICAgICAgICAgICAgICAgICAgICBcIndlaWdodFRvXCI6ICQoJyNuZmQtemwnKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIERhdGEubW92ZVN0b3JhZ2UoZDEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+WIhuWNleaTjeS9nOaIkOWKnyEnLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+WIhuWNleaTjeS9nOWksei0pe+8jOivt+mHjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlLmNmID09IDEgJiYgdHlwZS5uID09IDEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkMiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogdXJsLmdldCgnaWQnKSxcclxuICAgICAgICAgICAgICAgICAgICBcInN1Yk51bVwiOiB0eXBlLnNpZCxcclxuICAgICAgICAgICAgICAgICAgICBcInN1Yk51bVRvXCI6ICQoJyN5eWZkLWZkaCcpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2FyZ29OYW1lXCI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZW50cnlJdGVtTGlzdFwiOiB0eXBlLmFycixcclxuICAgICAgICAgICAgICAgICAgICBcIndlaWdodFwiOiB0eXBlLm9yaXdlaSxcclxuICAgICAgICAgICAgICAgICAgICBcIndlaWdodFRvXCI6ICQoJyN5eWZkLWZkaCcpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLmRhdGEoJ3dlaScpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgRGF0YS5tb3ZlU3RvcmFnZShkMiwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn5YiG5Y2V5pON5L2c5oiQ5YqfIScsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5YiG5Y2V5pON5L2c5aSx6LSl77yM6K+36YeN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgY2hhbmdlTmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY2dpZCwgY2dzaWQsY2duYW1lLG1hcmtuYW1lO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuY2ctbmFtZS1idG4nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNnaWQgPSAkKHRoaXMpLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgICAgIGNnc2lkID0gJCh0aGlzKS5kYXRhKCdzaWQnKTtcclxuICAgICAgICAgICAgY2duYW1lPSAkKHRoaXMpLmRhdGEoJ25hbWUnKTtcclxuICAgICAgICAgICAgbWFya25hbWU9ICQodGhpcykuZGF0YSgnbWFyaycpO1xyXG4gICAgICAgICAgICAkKCcjY2ctbmFtZScpLnZhbChjZ25hbWUpO1xyXG4gICAgICAgICAgICAkKCcjbWFyay1zdWJuYW1lJykudmFsKG1hcmtuYW1lKTtcclxuICAgICAgICAgICAgJCgnLm5hbWUtcGFydCcpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNuYW1lLWVuc3VyZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQoJyNjZy1uYW1lJykudmFsKCkpIHtcclxuICAgICAgICAgICAgICAgICQoJyNjZy1uYW1lJykucmVtb3ZlQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgIERhdGEuY2hhbmdlTmFtZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJvcmRlcklkXCI6IGNnaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdWJOdW1cIjogY2dzaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdWJDYXJnb05hbWVcIjogJCgnI2NnLW5hbWUnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcIm1hcmtOYW1lXCI6ICQoJyNtYXJrLXN1Ym5hbWUnKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhqc29uKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn5L+u5pS55oiQ5YqfIScsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5L+u5pS55aSx6LSl77yM6K+36YeN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjY2ctbmFtZScpLmFkZENsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIG90aGVyaW5pdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYgKHVybC5nZXQoJ2NsaWNrJykpIHtcclxuICAgICAgICAgICAgJCgnLnlmZC1idG5bZGF0YS1pZD1cIicgKyB1cmwuZ2V0KCdjbGljaycpICsgJ1wiXScpLmNsaWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5bCP5pWw54K55o6n5Yi2XHJcbiAgICAgICAgJCgnI2VudHJ5c2l6ZScpLmh0bWwobXlmb3JtYXQuZm9ybWF0dm9sdW1lKCQoJyNlbnRyeXNpemUnKS5kYXRhKCdzaXplJykpKycgQ0JNJyk7XHJcblxyXG4gICAgICAgICQoJy5pdGVtLXRqJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKHRoaXMpLmh0bWwobXlmb3JtYXQuZm9ybWF0dm9sdW1lKCQodGhpcykuaHRtbCgpKSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAkKCcueGotdGonKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQodGhpcykuaHRtbChteWZvcm1hdC5mb3JtYXR2b2x1bWUoJCh0aGlzKS5odG1sKCkpKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICQoJy50b3RhbC10aicpLmh0bWwobXlmb3JtYXQuZm9ybWF0dm9sdW1lKCQoJy50b3RhbC10aicpLmh0bWwoKSkpO1xyXG4gICAgfVxyXG4gICAgdmFyIHJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsaXN0ZW5lcigpO1xyXG4gICAgICAgIHVwbG9hZCgpO1xyXG4gICAgICAgIGZpbGVMaXN0KCk7XHJcbiAgICAgICAgc3VibWl0KCk7XHJcbiAgICAgICAgd2FyZWhvdXNlRGV0YWlsKCk7XHJcbiAgICAgICAgLy9jb21wYW55KCk7XHJcbiAgICAgICAgdHJhY2tJbml0KCk7XHJcbiAgICAgICAgZGVjbGFyZURhdGEoKTtcclxuICAgICAgICBjb250YWN0KCk7XHJcbiAgICAgICAgc3ViRGF0YSgpO1xyXG4gICAgICAgIGNoYW5nZU5hbWUoKTtcclxuICAgICAgICBjcmVhdGVTdWIoKTtcclxuXHJcbiAgICAgICAgb3RoZXJpbml0KCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBydW46IHJ1blxyXG4gICAgfVxyXG59KCkpO1xyXG5tb2R1bGUuZXhwb3J0cy5MaXN0ZW5lciA9IExpc3RlbmVyOyJdfQ==
