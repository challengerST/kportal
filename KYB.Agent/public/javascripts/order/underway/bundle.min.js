(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/24.
 */
"use strict";

(function ($) {
  /**
   * 生成分页器
   * @param ele 需要添加分页器的元素
   * @param offset 偏移量，即从第data-offset开始
   * @param length 总记录条数
   * @param showPages 分页器显示的页数，超过则隐藏多余的页
   * @param rows 每页显示的记录条数
   */
  $.burster = function (ele, offset, length, showPages, rows) {
    offset = offset ? parseInt(offset) : 0;
    //将分页器装入table中
    if (length && length > offset) {
      var pageHtml = ""
        , ass = ""//清空需要装入的html
        , beforePages = Math.ceil(offset / rows)//需要显示的前页数/当前页
        , afterPages = Math.ceil((length - offset ) / rows)//需要显示的后页数
        , pages = Math.ceil(length / rows) //总页数
        , k = 0;
      //alert("总页数" + pages + " 前页数 " + beforePages + " 后页数 " + afterPages);
      //若页数小于showPages页，则全部显示
      if (pages >= 0 && pages <= showPages) {
        for (k = 0; k < pages; k++) {
          if (k == beforePages) {
            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
          } else {
            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
          }
        }
      } else if (pages > showPages) {//总页数大于showPages页
        if (beforePages <= Math.ceil(showPages / 2) && afterPages > showPages + 1) {
          for (k = 0; k < showPages; k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages <= Math.ceil(showPages / 2) && afterPages == showPages + 1) {
          for (k = 0; k < showPages - 1; k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages <= Math.ceil(showPages / 2) && afterPages <= showPages) {
          for (k = 0; k < showPages - 1; k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages > Math.ceil(showPages / 2) && beforePages <= showPages && afterPages > showPages) {
          pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
          for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages > showPages && afterPages > showPages) {
          pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
          for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages > Math.ceil(showPages / 2) && beforePages <= pages && afterPages <= showPages && afterPages > Math.ceil(showPages / 2) + 1) {
          pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
          for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages > pages && afterPages <= showPages && afterPages > Math.ceil(showPages / 2) + 1) {
          pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
          for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages > Math.ceil(showPages / 2) && afterPages <= Math.ceil(showPages / 2) + 1) {
          pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
          for (k = beforePages - Math.ceil(showPages / 2) + 1; k < pages; k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
        }
      }
      //判断"首页"和"末页"是否可点击
      var firstPage, lastPage;
      if (offset == 0) {//此时首页无法点击
        firstPage = '<li class="disabled"><a class="pages" data-offset="0">首页</a></li>';
        lastPage = '<li><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '" >末页</a></li>';
      } else if ((offset + rows) >= length) {//此时末页无法点击
        firstPage = '<li><a class="pages" data-offset="0">首页</a></li>';
        lastPage = '<li class="disabled"><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '">末页</a></li>';
      } else {
        firstPage = '<li><a class="pages" data-offset="0">首页</a></li>';
        lastPage = '<li><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '">末页</a></li>';
      }
      //判断"上一页"和"下一页"是否存在
      var upPage, downPage;
      if (offset == 0 || (offset < rows && (offset % rows != 0))) {
        upPage = "<li class='disabled'><a class='pages' func='previous' data-offset='" + parseInt(offset) + "' >上页</a></li>"
      } else {
        upPage = "<li><a class='pages' func='previous' data-offset='" + (parseInt(offset) - parseInt(rows)) + "' >上页</a></li>";
      }
      if (offset >= (length - rows)) {
        downPage = "<li class='disabled'><a class='pages' func='next' data-offset='" + parseInt(offset) + "'>下页</a></li>"
      } else {
        downPage = "<li><a class='pages' func='next' data-offset='" + parseInt(parseInt(offset) + parseInt(rows)) + "'>下页</a></li>"
      }
      if (pages != 1) {
        //分页部分
        ass += "<div id='pager' class='pager-info'>" +
        "<h6 id='result' class='pager-record'>共有<span>" + length + "</span>条记录</h6>" +
        "<ul class='pagination'>" + firstPage + upPage + pageHtml + downPage + lastPage + "</ul></div>";
        //table中注入拼装的记录
        ele.html(ass);
      } else {
        ele.html('');
      }
    }
  }
}(jQuery));
},{}],2:[function(require,module,exports){
/**
 * Created by zrz on 2016/2/26.
 * @version 1.0.0 created 通用性功能方法
 */

'use strict';

var Fun = (function () {
    var _timeOut = 100000;//请求超时时间为10s
    /**
     * 封装ajax
     * @param option
     * {
     *      url:"请求的地址"
     *      ,method:"请求的方法"
     *      ,async:"是否并发"
     *      ,data:"发送的数据"
     *      ,success:"成功时回调"
     *      ,error:"失败/超时时回调"
     *      ,timeout:"超时时间"
     *      ,complete:"完成后的回调"
     * }
     */
    var ajax = function (option) {
        //ajax开始时应显示“加载信息框”
        Modal.showLoading();
        $.ajax({
            url: option.url
            , type: "type" in option && option.type || "GET"
            , timeout: option.timeout || _timeOut
            , data: "data" in option && option.data || {}
            , dataType: "json"
            , async: ("async" in option && option.async) ? true : false
            , success: function (json) {
                if ("status" in json && json.status > 0 && "data" in json) {
                    if ("success" in option) {
                        option.success(json.data);
                    } else {
                        Modal.setAlert("无success方法!");
                    }
                } else if ("error" in option && option.error instanceof Function) {
                    option.error(json);
                } else {
                    Modal.setAlert('操作失败!');
                }
            }, error: function (xhr) {//404或者超时
                if ("error" in option && option.error instanceof Function) {
                    //提示用户错误信息
                    Modal.showLoading(false);
                    Modal.setAlert("连接服务器失败，状态：" + (xhr.status || -1) + ",信息：" + (xhr.statusText || "-"));
                    option.error(xhr.status, xhr.statusText);//回调请求的状态和错误信息
                }
            }, complete: function (xhr, type) {
                //关闭“加载信息框”
                Modal.showLoading(false);
                if ("complete" in option && option.complete instanceof Function) {
                    option.complete(xhr, type);//回调请求的xhr信息和类型
                }
            }
        });
    };
    //全选和单选的绑定
    var setCheckboxListener = function (allCheck, radioChecks) {
        //筛选单选按钮组
        var radioValueEles = $(radioChecks);
        //点击全选时，同组按钮被同步
        $(document).delegate(allCheck, "click", function () {
            if (radioValueEles && radioValueEles.length > 0) {
                for (var _r = 0; _r < radioValueEles.length; _r++) {
                    radioValueEles[_r].checked = $(this).is(":checked");
                }
            }
        });
        //点击单选按钮时，
        $(document).delegate(radioChecks, "click", function () {
            $(allCheck)[0].checked = $(radioChecks + ":checked").length == $(radioChecks).length;
        });
    };
    var url = (function () {
        var get = function (name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return decodeURI(r[2]);
            return null;
        };
        /**
         * 根据参数列表长度进行判断，兼容IE9
         * @returns {string}
         */
        var set = function () {
            if (arguments.length === 1 && typeof arguments[0] === 'object') {//一个对象，使用key标记value
                var obj = arguments[0]
                    , search = location.search;
                for (var o in obj) {
                    if (obj.hasOwnProperty(o)) {
                        search = changeURLKeyValue(search, o, obj[o]);
                    }
                }
                if ('pushState' in history) {
                    history.pushState(null, document.title, search);
                } else if ('pushState' in History) {//ie9 不支持pushState方法,javascript.ejs中添加history.js完成html4对pushState的支持
                    History.pushState(null, null, search);//返回重新构造后search串
                }
            } else if (arguments.length === 2) {//key+value
                var key = arguments[0]
                    , value = arguments[1];
                if ('pushState' in history) {
                    history.pushState(null, document.title, changeURLKeyValue(location.toString(), key, value));
                } else if ('pushState' in History) {//ie9 不支持pushState方法,javascript.ejs中添加history.js完成html4对pushState的支持
                    History.pushState(null, null, changeURLKeyValue(location.search, key, value));//返回重新构造后search串
                }
            }
            function changeURLKeyValue(url, arg, arg_val) {
                var pattern = arg + '=([^&]*)';
                var replaceText = arg + '=' + arg_val;
                if (url.match(pattern)) {
                    var tmp = '/(' + arg + '=)([^&]*)/gi';
                    tmp = url.replace(eval(tmp), replaceText);
                    return tmp;
                } else {
                    if (url.match('[\?]')) {
                        return url + '&' + replaceText;
                    } else {
                        return url + '?' + replaceText;
                    }
                }
            }
        };
        return {
            get: get
            , set: set
        }
    }());

    var formatImage=function (path, size, ele) {
        if(path instanceof  Array && path.length>0){
            path = path[0];
        }
        var IMAGE_SIZE = {
            original: {
                path: "",
                size: ""
            },
            xlarge: {
                path: "_xlarge",
                size: "660*660"
            },
            large: {
                path: "_large",
                size: "420*420"
            },
            middle: {
                path: "_middle",
                size: "300*300"
            },
            small: {
                path: "_small",
                size: "240*240"
            },
            little: {
                path: "_little",
                size: "120*120"
            },
            micro: {
                path: "_micro",
                size: "60*60"
            }
        };
        size = IMAGE_SIZE[size || "middle"] || IMAGE_SIZE.middle;
        var pathTemp = /\.\w+?$/.exec(path);
        if (!pathTemp) {
            path += size.path;
        } else {
            path = (path.substr(0, pathTemp.index || path.length)) + size.path + pathTemp[0];
        }
        if (ele && ele.attr) {
            ele.attr("src", path);
        }
        return path;
    };
    //金额格式化小数点2位
    var format = (function () {
        var formatamount = function(_value){
            return parseFloat(_value).toFixed(2);
        };
        //体积格式化小数点2位
        var formatvolume = function(_value){
            return parseFloat(_value).toFixed(3);
        };
        //重量格式化小数点2位
        var formatweight = function(_value){
            return parseFloat(_value).toFixed(3);
        };
        return {
            formatamount: formatamount
            , formatvolume: formatvolume
            , formatweight: formatweight
        }
    }());
    return {
        ajax: ajax
        , getTimtout: _timeOut
        , setCheckboxListener: setCheckboxListener
        , url: url
        , formatImage: formatImage
        , format: format
    }
}());

exports.ajax = Fun.ajax;
exports.getTimeout = Fun.getTimtout;
exports.setCheckboxListener = Fun.setCheckboxListener;
exports.url = Fun.url;
exports.formatImage = Fun.formatImage;
exports.format = Fun.format;

},{}],3:[function(require,module,exports){
/**
 * Created by Jeremy on 2017/1/23.
 */
'use strict';
var Modal = require('./modal');
var general = (function () {
    var run = function () {
        //时间格式化
        Date.prototype.Format = function (fmt) { //author: Jeremyyy
            var o = {
                "M+": this.getMonth() + 1, //月份
                "d+": this.getDate(), //日
                "h+": this.getHours(), //小时
                "m+": this.getMinutes(), //分
                "s+": this.getSeconds(), //秒
                "q+": Math.floor((this.getMonth() + 3) / 3), //季度
                "S": this.getMilliseconds() //毫秒
            };
            if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
            for (var k in o)
                if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
            return fmt;
        };

        //修改密码
        $(document).on('click', '#change-pwd', function () {
            $('.change-back').removeClass('dp-n');
            $('.change-pwd').removeClass('dp-n');
        });
        //关闭修改密码
        $(document).on('click', '.close-pwd', function () {
            $('.change-back').addClass('dp-n');
            $('.change-pwd').addClass('dp-n');
        });
        $(document).on('click', '#ensure-pwd', function () {
            if ($('#new-password').val() != $('#ensure-password').val()) {
                $('#ensure-password').addClass('warm');
            } else {
                $('#ensure-password').removeClass('warm');
                var data = {
                    "agentMemberId": 0,
                    "oldPwd": $('#password').val(),
                    "pwd": $('#new-password').val(),
                    "pwdConfirm": $('#ensure-password').val()
                };
                $.ajax({
                    url: '/api/account/changePwd'
                    , type: 'post'
                    , data: data
                    , dataType: 'json'
                    , timeout: 100000
                    , success: function (json) {
                        if (json && 'resCode' in json && json.resCode == 0) {
                            Modal.setAlert('修改成功！', null, function () {
                                $('.change-back').addClass('dp-n');
                                $('.change-pwd').addClass('dp-n');
                            });
                        } else {
                            Modal.setAlert(json.resMsg || '修改失败，请重试！');
                        }
                    }
                });
            }
        });
    };
    return {
        run: run
    }
}());
module.exports.general = general;
},{"./modal":4}],4:[function(require,module,exports){
/**
 * Created by zrz on 2016/2/24.
 * @version 1.0.0 created
 */

'use strict';

//构造信息框主体
var Modal = (function () {
    //构造原始类
    function M(m) {
        this.s = m.s;//是否显示
        this.id = m.id;
    }

    //构造标准show方法，用于继承
    M.prototype.show = function () {
        var ele = document.getElementById(this.id);
        if (ele) {
            if (this.s && !isShow()) {//显示当前隐藏
                ele.className = ele.className.replace("dp-n", "");
            } else if (!this.s && isShow()) {//隐藏当前显示
                ele.className += " dp-n";
            }
            //去除两边的空格
            ele.className = String(ele.className).trim();
        }
        function isShow() {//是否已显示，无class时显示
            return ele.className.split("dp-n").length == 1;
        }
    };

    //加载信息框
    var loading = (function () {
        //初始化生成加载信息框
        var init = function () {
            if (!document.getElementById("loading_modal_element")) {
                $('body').append('<div id="loading_modal_element" class="loading-modal-body dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="loading-modal-image"></div>' +
                    '<div class="loading-modal-text">' +
                    '<h2>玩命加载中……</h2>' +
                    '</div></div>');
            }
            return false;
        };
        //显示、隐藏信息框
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;//无参数显示信息框
            var m = new M({id: "loading_modal_element", s: s});
            m.show();
        };
        return {
            init: init
            , show: show
        }
    }());
    //弹出信息框
    var alert = (function () {
        var init = function () {
            if (!document.getElementById("alert_modal_element")) {
                $('body').append('<div id="alert_modal_element" class="alert-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="alert-modal-content">' +
                    '<div class="alert-modal-body"><span class="alert-modal-text"></span></div>' +
                    '<div class="alert-modal-footer"><button id="alert_modal_close" class="alert-modal-button">关闭</button></div>' +
                    '</div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "alert_modal_element", s: s});
            m.show();
        };
        /**
         * 设置弹出信息框
         * @param msg       显示的信息，支持html
         * @param sed       倒计时关闭时间，单位：second
         * @param callback  关闭触发回调函数
         */
        var set = function (msg, sed, callback) {
            var ele = document.getElementById("alert_modal_element");
            if (msg) {
                if (typeof msg === 'object') {//应对后端返回提示时使用Object封装
                    msg = JSON.stringify(msg);
                }
                if(ele){
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }else{
                    init();
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }
                show();
            }
            if (sed > 0) {
                setTimeout(function () {
                    show(false);
                }, 1000 * sed);
            }//无关闭时间或者关闭时间为0，不自动关闭
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#alert_modal_close").on("click", function () {
                if (callback && callback instanceof Function) {
                    callback();
                }
                show(false);
                //阻止事件继续传递
                return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //选择信息框
    var confirm = (function () {
        var init = function () {
            if (!document.getElementById("confirm_modal_element")) {
                $('body').append('<div id="confirm_modal_element" class="confirm-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="confirm-modal-content">' +
                    '<div id="confirm_modal_header" class="confirm-modal-header dp-n"></div>' +
                    '<div class="confirm-modal-body"><span id="confirm_modal_text" class="confirm-modal-text"></span></div>' +
                    '<div class="confirm-modal-footer">' +
                    '<div class="footer-button-success"><button class="confirm-modal-button  modal-success" data-confirm="success">确认</button></div>' +
                    '<div class="footer-button-false"><button class="confirm-modal-button" data-confirm="error">取消</button></div>' +
                    '</div></div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "confirm_modal_element", s: s});
            m.show();
        };
        /**
         * 设置选择信息框的内容
         * @param option    配置
         * {
         *      title:"头部显示的信息"
         *      ,text:"显示的提示信息"
         *      ,success:"点击成功后的回调"
         *      ,error:"点击失败后的回调"
         *      ,complete:"点击按钮后的整体回调"
         * }
         */
        var bar = 0;
        var set = function (option) {
            if (!option) {
                return false;
            }
            if ("title" in option && option.title.length > 0) {//有头部，则显示头部
                document.getElementById("confirm_modal_header").innerHTML = option.title;
            }
            if ("text" in option && option.text.length > 0) {//有内容，则显示整个选择信息框
                document.getElementById("confirm_modal_text").innerHTML = option.text;
            }
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#confirm_modal_element").find(".confirm-modal-button").off("click").on("click", function () {
                //fixme .off("click")用于防止多次触发<--很玄学，我也不知道为什么，但是请不要修改。
                var atr = $(this).attr("data-confirm");//选择的按钮
                bar++;
                if (option && atr in option && option[atr] instanceof Function) {
                    option[atr]();
                }
                if (option && "complete" in option && option.complete instanceof Function) {
                    option.complete();//若有完成函数，则执行
                } else {//否则，关闭选择框
                    show(false);
                }
                //阻止事件继续传递
                //return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //覆盖层
    var cover = (function () {
        var init = function () {
            if (!document.getElementById("cover_modal_element")) {
                $('body').append('<div id="cover_modal_element" class="cover-modal-element dp-n"></div>');
            }
            return false;
        };
        var hide = function () {
            document.getElementById("cover_modal_element").style.display = "none";
        };
        var show = function () {
            document.getElementById("cover_modal_element").style.display = "block";
        };
        return {
            init: init
            , show: show
            , hide: hide
        }
    }());
    return {
        initLoading: loading.init
        , showLoading: loading.show

        , initAlert: alert.init
        , showAlert: alert.show
        , setAlert: alert.set

        , initConfirm: confirm.init
        , setConfirm: confirm.set
        , showConfirm: confirm.show
        , initCover: cover.init
    }
}());

//页面加载完毕后生成四个自定义模态框
setTimeout(function () {
    //页面加载时生成一个覆盖层
    Modal.initCover();
    //页面加载时生成一个加载信息框
    Modal.initLoading();
    //页面加载时生成一个弹出信息框
    Modal.initAlert();
    //页面加载时生成一个选择信息框
    Modal.initConfirm();
}, 100);


//抛出上层调用
exports.showLoading = Modal.showLoading;
exports.setAlert = Modal.setAlert;
exports.showAlert = Modal.showAlert;
exports.setConfirm = Modal.setConfirm;
exports.showConfirm = Modal.showConfirm;
},{}],5:[function(require,module,exports){
/**
 * Created by Auser on 2016/12/6.
 */
"use strict";
var Data = (function () {
    var list = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/underway/list'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var bg = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/underway/bg'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var cy = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/underway/cy'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var ys = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/underway/ys'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var addData = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/addData'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var ensureData = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/ensureData'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var storage = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/storage'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var cancel = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/cancel'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var ydSearch = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/ydSearch'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var ydExist = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/ydExist'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var ydNew = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/ydNew'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var priceList = function (callback) {
        var _data = {};
        $.ajax({
            url: '/api/airline/price/list'
            , type: 'post'
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var createCharge = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/done/createCharge'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var getName = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/airline/manage/getName'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var getCode = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/airline/manage/getCode'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var search = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/airlineSearch'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var gp = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/underway/gp'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var transfer = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/staff/list/transfer'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var opList = function (callback) {
        var _data = {};
        $.ajax({
            url: '/api/staff/list/opList'
            , type: 'post'
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var log = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/log'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    return {
        list: list
        , bg: bg
        , cy: cy
        , ys: ys
        , addData: addData
        , ensureData: ensureData
        , storage: storage
        , cancel: cancel
        , ydSearch: ydSearch
        , ydExist: ydExist
        , ydNew: ydNew
        , priceList: priceList
        , createCharge: createCharge
        , getName: getName
        , getCode: getCode
        , search: search
        , gp: gp
        , transfer: transfer
        , opList: opList
        , log: log
    }
}());
module.exports.Data = Data;
},{}],6:[function(require,module,exports){
/**
 * Created by Jeremy on 2017/2/6.
 */
'use strict';
var url = require('../../general/function').url
    ,myformat = require('../../general/function').format;
var Dom = (function () {
    var list = function (json, param) {
        var dt = {};
        var str = '';
        var operate = '';
        str += '<thead> <tr> <td><input type="checkbox" id="check-all"></td><td>主单号/订单号</td> <td colspan="3">订单信息</td> <td colspan="4">航班信息</td> <td colspan="7">货物信息</td></tr> </thead>';
        if (json && json.resCode == 0 && 'resBody' in json && json.resBody && 'sList' in json.resBody && json.resBody.sList instanceof Array) {
            if (json.resBody.sList.length > 0) {
                var arr = json.resBody.sList;
                for (var a in arr) {
                    if (arr.hasOwnProperty(a)) {
                        str += render(arr[a], a);
                        dt[arr[a].order.orderId] = arr[a];
                    }
                }
                $.burster($(".outer-pages"), param.offset || 0, json.resBody.totalCount || 0, 5, param.limit || 20);
                $('.list-cout').html('共为您找到 ' + json.resBody.totalCount + ' 条结果');
            } else {
                str = '<tr class="wrong"><td colspan="9">暂无订单信息，请添加！</td></tr>';
                $('.outer-pages').html('');
                $('.list-cout').html('共为您找到 0 条结果');
            }
        } else {
            str = '<tr class="wrong"><td colspan="9">请求失败，<a href="">请重试！</a></td></tr>';
            $('.outer-pages').html('');
            $('.list-cout').html('共为您找到 0 条结果');
        }
        function render(d, index) {
            var oStr = '', type = url.get('tp') || 'book';
            var o = d;
            oStr += '<tr> <td>' + (o.order.airwayBillNum || '/') + '<br><a href="/order/detail?tp=underway&id=' + o.order.orderId + '">' + o.order.orderNum + '</a></td> <td>' + o.company.companyName + '</td> ' +
                '<td>' + (o.member.name || '/') + ' <br/> ' + (o.member.mobile || '/') + '</td>' +
                ' <td>' + getStr(type, o.order) + '</td> <td>' + (o.order.deptCode || '/') + '</td> <td>' + (o.order.destCode || '/') + '</td> <td>' + (o.order.airCompanyCode || '/') + '</td> <td>' + (new Date(o.order.flightDate.replace(/-/g, "/")).Format('yyyy-MM-dd')) + '</td> ' +
                '<td>' + o.order.cargo.cargoCount + '</td> <td>' + o.order.cargo.cargoWeight + '</td> ' +
                '<td>' + myformat.formatvolume(o.order.cargo.cargoSize) + '</td> <td><div class="tw" title="'+o.order.cargo.cargoName+'">' + o.order.cargo.cargoName + '</div></td> <td>' + (o.order.cargo.cargoType == 1 ? '普货' : '转关') + '</td> <td>' + (new Date(new Date(o.order.flightDate.replace(/-/g, "/")).getTime() - 24 * 60 * 60 * 1000).Format('yyyy-MM-dd')) + ' 12:00</td>' +
                '</tr>';
            operate = '<td class="opt-td" rowspan="2" data-jcbh="' + o.order.warehouseEntryNum + '" data-khmc="' + (o.company.companyName || '/') + '" data-lxr="' + (o.company.companyContact || '/') + '">' +
                ' <a class="show-opt" href="javascript:void(0);">操作<span class="caret"></span></a> <div class="opt-part dp-n" style="display: none;">' +
                '<a href="javascript:void(0);" class="show-change" data-id="' + o.order.orderId + '">改配</a>' +
                (o.order.entryState == 0 ?
                    ''
               // '<a href="/order/storage?id=' + o.order.orderId + '&n=' + (o.company.companyName || '/') + '&c=' + (o.company.companyContact || '/') + '" data-id="' + o.order.orderId + '">进仓数据</a>'
                    : (o.order.entryState == 1 ?
                    //'<a href="javascript:void(0);" class="add-data" data-id="' + o.order.orderId + '">录入进仓数据</a>' +
                    ''
               // '<a href="/order/storage?id=' + o.order.orderId + '&n=' + (o.company.companyName || '/') + '&c=' + (o.company.companyContact || '/') + '" data-id="' + o.order.orderId + '">进仓数据</a>'
                    : '<a href="javascript:void(0);" class="show-bg" data-id="' + o.order.orderId + '">报关</a>')) +
                    //(o.order.declareState == 2 ? '<a href="javascript:void(0);" class="show-cy" data-id="' + o.order.orderId + '">查验</a>' : '') +
                (o.order.checkState == 2 || o.order.checkState == 3 ?
                '<a href="javascript:void(0);" class="show-zd" data-id="' + o.order.orderId + '">制单</a>' : '') +
                '<a href="javascript:void(0);" class="refuse" data-id="' + o.order.orderId + '">取消</a>' +
                (o.order.declareState == 5 ? '<a href="javascript:void(0);" class="show-ys" data-id="' + o.order.orderId + '">运输</a>' : '') +
                '<a href="javascript:void(0);" class="show-log" data-id="' + o.order.orderId + '">操作日志</a>' +
                '</div> </td>';

            return '<tbody><tr><td class="short-td" colspan="15"></td></tr></tbody><tbody class="data-tbd"> <tr><td rowspan="2" style="padding: 0 5px;"><input data-id="' + o.order.orderId + '" type="checkbox" name="list-sg"></td> <td class="' + (o.order.orderType == 1 ? 'bg-p' : (o.order.allowClearence ? 'bg-q' : 'bg-y')) + '">' + (o.order.orderType == 1 ? '月结' : '票结') + (d.agent ? (o.agent.name ? '&nbsp;&nbsp;&nbsp;&nbsp;' + o.agent.name : '&nbsp;&nbsp;&nbsp;&nbsp;/') : '&nbsp;&nbsp;&nbsp;&nbsp;/') + '</td> <td class="bg-g">客户公司</td>' +
                ' <td class="bg-g">联系人/方式</td> <td class="bg-g">' + getTp(type) + '</td> ' +
                '<td class="bg-g">起始港</td> <td class="bg-g">目的港</td> ' +
                '<td class="bg-g">航空公司</td> <td class="bg-g">航班日期</td> ' +
                '<td class="bg-g">数量（PCS）</td> <td class="bg-g">重量（KGS）</td> <td class="bg-g">体积（CBM）</td> ' +
                '<td class="bg-g">品名</td> <td class="bg-g">类型</td> <td class="bg-g">最晚进仓</td>' + operate +
                '</tr> ' + oStr + ' </tbody>'
        }

        function getStr(type, d) {
            var str = '';
            if (type == 'book') {
                switch (d.bookingState) {
                    case 0:
                        str = '未订舱';
                        break;
                    case 1:
                        str = '已订舱';
                        break;
                    case -1:
                        str = '订舱失败';
                        break;
                    case 2:
                        str = '已改配';
                        break;
                    case -2:
                        str = '改配中';
                        break;
                }
            } else if (type == 'entry') {
                switch (d.entryState) {
                    case 0:
                        str = '待进仓';
                        break;
                    case 1:
                        str = '已进仓，未确认';
                        break;
                    case 2:
                        str = '已确认';
                        break;
                }
            } else if (type == 'declare') {
                switch (d.declareState) {
                    case 0:
                        str = '未报关';
                        break;
                    case 1:
                        str = '预审中';
                        break;
                    case 2:
                        str = '预审通过';
                        break;
                    case 3:
                        str = '开始报关';
                        break;
                    case 4:
                        str = '报关中';
                        break;
                    case 5:
                        str = '报关完成';
                        break;
                    case -6:
                        str = '报关失败';
                        break;
                    case -4:
                        str = '退关中';
                        break;
                    case -5:
                        str = '退关完成';
                        break;
                }
            } else if (type == 'check') {
                switch (d.checkState) {
                    case 0:
                        str = '待查验';
                        break;
                    case 1:
                        str = '查验中';
                        break;
                    case 2:
                        str = '直接放行';
                        break;
                    case 3:
                        str = '查验放行';
                        break;
                    case 4:
                        str = '查验扣货';
                        break;
                }
            } else if (type == 'transform') {
                switch (d.transState) {
                    case 0:
                        str = '待出库';
                        break;
                    case 1:
                        str = '已出库，待起飞';
                        break;
                    case 2:
                        str = '已起飞';
                        break;
                    case 3:
                        str = '已到达';
                        break;
                }
            }
            return str;
        }

        function getTp(type) {
            switch (type) {
                case 'book':
                    return '订舱状态';
                case 'entry':
                    return '进仓状态';
                case 'declare':
                    return '报关状态';
                case 'check':
                    return '查验状态';
                case 'transform':
                    return '运输状态';
            }
        }

        $('.outer-tb').html(str);
        return dt;
    };
    var renderTr = function (json) {
        var str = '';
        if (json && 'entryList' in json && json.entryList instanceof Array) {
            var list = json.entryList;
            if (list.length > 0) {
                for (var l in list) {
                    if (list.hasOwnProperty(l)) {
                        var d = list[l];
                        str += render(d);
                    }
                }
                str += '<tr><td>总计</td><td>' + json.totalCount + '</td><td>' + json.totalWeight + '</td><td>' +  myformat.formatvolume(json.totalSize) + '</td>' +
                    '<td>/</td><td>/</td><td>/</td><td>/</td><td>' + json.totalDamage + '</td><td>' + json.totalTransform + '</td><td>' + json.totalDamp + '</td><td>' + json.totalOther + '</td><td>/</td></tr>'
            } else {
                str = '<tr><td colspan="13" ">暂无进仓数据，请添加！</td></tr>';
            }
        } else {
            str = '<tr><td colspan="13" ">获取数据失败，请重试！</td></tr>';
        }

        $('.ensure-tb').find('tbody').html(str);
        function render(d) {
            var str = '';
            var arr = d.entryDetail || [];
            for (var a in arr) {
                if (arr.hasOwnProperty(a)) {
                    var dt = arr[a];
                    str += '<tr><td>' + (a == 0 ? d.entryNum : '') + '</td><td>' + dt.itemCount + '</td><td>/</td>' +
                        '<td>' +  myformat.formatvolume((dt.itemCount * dt.itemHeight * dt.itemLength * dt.itemWidth) / 1000000) + '</td><td>' + dt.itemLength + '</td>' +
                        '<td>' + dt.itemWidth + '</td><td>' + dt.itemHeight + '</td><td>/</td><td>/</td><td>/</td><td>/</td><td>/</td><td>' + (a == 0 ? new Date(d.storageTime).Format('yyyy-MM-dd hh:mm') : '') + '</td></tr>';
                }
            }
            str += '<tr><td>小计</td><td>' + d.storageCount + '</td><td>' + d.storageWeight + '</td><td>' +  myformat.formatvolume(d.storageSize) + '</td><td>/</td><td>/</td><td>/</td>' +
                '<td>' + d.packageType + '</td><td>' + d.damageCount + '</td><td>' + d.transformCount + '</td><td>' + d.dampCount + '</td><td>' + d.otherCount + '</td><td></td></tr>';
            return str;
        }
    };
    var innerList = function (json, param) {
        var str = '';
        if (json && json.resCode == 0 && 'resBody' in json && json.resBody && 'sList' in json.resBody && json.resBody.sList instanceof Array) {
            if (json.resBody.sList.length > 0) {
                var arr = json.resBody.sList;
                for (var a in arr) {
                    if (arr.hasOwnProperty(a)) {
                        str += render(arr[a]);
                    }
                }
                $.burster($(".gp-pages"), param.offset || 0, json.resBody.totalCount || 0, 5, param.limit || 20);
            } else {
                str = '<tr class="wrong"><td colspan="9">暂无搜索信息！</td></tr>';
                $('.gp-pages').html('');
            }
        } else {
            str = '<tr class="wrong"><td colspan="9">请求失败，<a href="">请重试！</a></td></tr>';
            $('.gp-pages').html('');
        }
        function render(d) {
            var str = '';
            for (var t in d.transPort) {
                if (d.transPort.hasOwnProperty(t)) {
                    var s = d.transPort[t];
                    str += s.portCode + (t == d.transPort.length - 1 ? '' : ' -> ');
                }
            }
            return ' <tr> <td><input type="radio" name="i-sg" data-id="' + d.airwayId + '"/></td> ' +
                '<td>' + d.airCompanyCode + '</td> <td>' + str + '</td> <td>' + d.airwayPrice.rate[0].policy['45'] + '</td> ' +
                '<td>' + d.airwayPrice.rate[0].policy['100'] + '</td> <td>' + d.airwayPrice.rate[0].policy['300'] + '</td>' +
                ' <td>' + d.airwayPrice.rate[0].policy['500'] + '</td> <td>' + d.airwayPrice.rate[0].policy['1000'] + '</td>'

        }

        $('.gp-tb').find('tbody').html(str);
    };
    return {
        list: list
        , renderTr: renderTr
        , innerList: innerList
    }
}());
module.exports.Dom = Dom;
},{"../../general/function":2}],7:[function(require,module,exports){
/**
 * Created by Jeremy on 2017/2/6.
 */
'use strict';
'use strict';
var Listener = require('./listener').Listener;
var general = require('../../general/general').general;
general.run();
Listener.run();
},{"../../general/general":3,"./listener":8}],8:[function(require,module,exports){
/**
 * Created by Jeremy on 2017/1/5.
 */
'use strict';
require('../../general/burster');
var url = require('../../general/function').url
    ,myformat = require('../../general/function').format
    , Modal = require('../../general/modal');
var Data = require('./data').Data
    , Dom = require('./dom').Dom;
var Listener = (function () {
    //存放默认费用模板
    var defaultPrice = {};
    var stopgap = {};
    var process = {};
    var operateId, ydId;
    //存放运单列表
    var ydList = {};
    var listener = function () {
        $(document).on('click', '.show-log', function () {
            Data.log({id: $(this).data('id')}, function (json) {
                if (json && 'resBody' in json && json.resBody instanceof Array) {
                    var str = '';
                    var arr = json.resBody;
                    if (arr.length > 0) {
                        for (var a in arr) {
                            if (arr.hasOwnProperty(a)) {
                                var type = '';
                                var d = arr[a];
                                switch (d.operatorType) {
                                    case 1:
                                        type = '客户';
                                        break;
                                    case 2:
                                        type = '货代';
                                        break;
                                    case 3:
                                        type = '报关行';
                                        break;
                                }
                                str += '<tr><td>' + (new Date(d.createDt).Format('yyyy-MM-dd hh:mm')) + '</td><td>' + d.orderNum + '</td>' +
                                    '<td>' + type + '</td><td>' + d.operatorId + '</td><td class="long">' + d.remark + '</td></tr>'
                            }
                        }
                    } else {
                        str = '<tr><td colspan="5">暂无操作日志</td></tr>'
                    }
                    $('.log-part').find('tbody').html(str);
                    $('.log-part').removeClass('dp-n');
                    $('.white-back').removeClass('dp-n');
                } else {
                    Modal.setAlert(json.resMsg || '获取失败，请重试');
                }
            });
        });
        $(document).on('click', '#check-all', function () {
            $('input[type="checkbox"][name="list-sg"]').prop('checked', $(this).prop('checked'));
        });
        $(document).on('click', '#search', function () {
            url.set('offset', 0);
            init();
        });
        $(document).on('mouseenter', '.opt-td', function () {
            $(this).children('.opt-part').fadeIn(200);
        });
        $(document).on('mouseleave', '.opt-td', function () {
            $(this).children('.opt-part').fadeOut(200);
        });
        $(document).on('click', '.show-zd', function () {
            stopgap = process[$(this).data('id')] || null;
            if (stopgap) {
                var ele = $('.zd-part')
                    , c = stopgap.company
                    , o = stopgap.order;
                var type = '', str = '';
                switch (o.cargo.cargoType) {
                    case 1:
                        type = '纸箱';
                        break;
                    case 2:
                        type = '木箱';
                        break;
                    case 3:
                        type = '卷';
                        break;
                    case 4:
                        type = '托盘';
                        break;
                }
                $('.ddh').html(o.orderNum || '/');
                $('.kh').html(c.companyName || '/');
                $('.qsg').html(o.deptCode || '/');
                $('.mdg').html(o.destCode || '/');
                $('.hkgs').html(o.airCompanyCode || '/');
                $('.qfrq').html(o.flightDate ? new Date(o.flightDate.replace(/-/g, "/")).Format('yyyy-MM-dd') : '/');
                $('.hbh').html(o.airlineInfo || '/');
                $('.pm').html(o.cargo.cargoName || '/');
                $('.lx').html(type || '/');
                $('.wtbg').html(o.cargo.isBulkyCargo ? '是' : '否');
                $('.js').html(o.cargo.cargoCount + 'PCS');
                $('.tj').html(myformat.formatvolume(o.cargo.cargoSize) + 'CBM');
                $('.zl').html(o.cargo.cargoWeight + 'KGS（计费重量：' + o.cargo.chargingWeight + 'KGS）');
                str += '<tr class="data"> <td><input type="text" class="fymt" readonly value="空运费"/>' +
                    '</td> <td><input type="text" class="ip-dj" value="' + o.chargingPrice + '"/>' +
                    '</td> <td><input type="text" class="ip-zl" value="' + o.chargingWeight + '"/>' +
                    '</td> <td><input type="text" class="ttp" readonly value="' + o.airwayFee + '"/>' +
                    '</td> <td><span class="glyphicon glyphicon-remove"></span></td></tr>';
                for (var s in o.serviceFeeList) {
                    if (o.serviceFeeList.hasOwnProperty(s)) {
                        var d = o.serviceFeeList[s];
                        str += '<tr class="data"> <td><input type="text" class="fymt" readonly value="' + d.itemName + '"/>' +
                            '</td> <td><input type="text" class="ip-dj" value="' + d.itemPrice + '"/>' +
                            '</td> <td><input type="text" class="ip-zl" value="' + d.itemUnit + '"/>' +
                            '</td> <td><input type="text" class="ttp" readonly value="' + d.itemTotal + '"/>' +
                            '</td> <td><span class="glyphicon glyphicon-remove"></span></td></tr>';
                    }
                }
                str += '<tr class="tr-add"> <td></td> <td></td> <td></td> <td></td> <td><span class="glyphicon glyphicon-plus"></span></td> </tr>';
                ele.find('.zd-tb').find('tbody').html(str);
                ele.removeClass('dp-n');
                $('.white-back').removeClass('dp-n');
            }
        });
        $(document).on('click', '.outer-pages .pages', function () {
            url.set('offset', $(this).data('offset'));
            init();
        });
        $(document).on('click', '.close-btn', function () {
            $('.alert-part').addClass('dp-n');
            $('.white-back').addClass('dp-n');
        });
        $(document).on('click', '.sel-head p', function () {
            url.set('tp', $(this).data('tp'));
            url.set('offset', 0);
            $(this).addClass('active');
            $(this).siblings().removeClass('active');
            init();
        });
        $(document).on('click', '.show-bg', function () {
            operateId = $(this).data('id');
            var d = process[operateId];
            var ele = $('.bg-part');
            var jczt = '', dczt = '';
            switch (d.order.bookingState) {
                case 0:
                    dczt = '未订舱';
                    break;
                case 1:
                    dczt = '已订舱';
                    break;
                case -1:
                    dczt = '订舱失败';
                    break;
                case 2:
                    dczt = '已改配';
                    break;
            }
            switch (d.order.entryState) {
                case 0:
                    jczt = '待进仓';
                    break;
                case 1:
                    jczt = '已进仓';
                    break;
                case 2:
                    jczt = '已确认';
                    break;
            }
            ele.find('.ddh').html(d.order.orderNum);
            ele.find('.qsg').html(d.order.deptCode);
            ele.find('.mdg').html(d.order.destCode);
            ele.find('.hkgs').html(d.order.airCompanyCode);
            ele.find('.qfrq').html(new Date(d.order.flightDate.replace(/-/g, "/")).Format('yyyy-MM-dd'));
            ele.find('.jczt').html(jczt);
            ele.find('.dczt').html(dczt);
            $('.white-back').removeClass('dp-n');
            ele.removeClass('dp-n');
        });
        $(document).on('click', '.show-cy', function () {
            operateId = $(this).data('id');
            var d = process[operateId];
            var ele = $('.cy-part');
            var jczt = '', dczt = '';
            switch (d.order.bookingState) {
                case 0:
                    dczt = '未订舱';
                    break;
                case 1:
                    dczt = '已订舱';
                    break;
                case -1:
                    dczt = '订舱失败';
                    break;
                case 2:
                    dczt = '已改配';
                    break;
            }
            switch (d.order.entryState) {
                case 0:
                    jczt = '待进仓';
                    break;
                case 1:
                    jczt = '已进仓';
                    break;
                case 2:
                    jczt = '已确认';
                    break;
            }
            ele.find('.ddh').html(d.order.orderNum);
            ele.find('.qsg').html(d.order.deptCode);
            ele.find('.mdg').html(d.order.destCode);
            ele.find('.hkgs').html(d.order.airCompanyCode);
            ele.find('.qfrq').html(new Date(d.order.flightDate.replace(/-/g, "/")).Format('yyyy-MM-dd'));
            ele.find('.jczt').html(jczt);
            ele.find('.dczt').html(dczt);
            $('.white-back').removeClass('dp-n');
            ele.removeClass('dp-n');
        });
        $(document).on('click', '.show-ys', function () {
            operateId = $(this).data('id');
            var d = process[operateId];
            var ele = $('.ys-part');
            var jczt = '', dczt = '';
            switch (d.order.bookingState) {
                case 0:
                    dczt = '未订舱';
                    break;
                case 1:
                    dczt = '已订舱';
                    break;
                case -1:
                    dczt = '订舱失败';
                    break;
                case 2:
                    dczt = '已改配';
                    break;
            }
            switch (d.order.entryState) {
                case 0:
                    jczt = '待进仓';
                    break;
                case 1:
                    jczt = '已进仓';
                    break;
                case 2:
                    jczt = '已确认';
                    break;
            }
            ele.find('.ddh').html(d.order.orderNum);
            ele.find('.qsg').html(d.order.deptCode);
            ele.find('.mdg').html(d.order.destCode);
            ele.find('.hkgs').html(d.order.airCompanyCode);
            ele.find('.qfrq').html(new Date(d.order.flightDate.replace(/-/g, "/")).Format('yyyy-MM-dd'));
            ele.find('.jczt').html(jczt);
            ele.find('.dczt').html(dczt);
            $('.white-back').removeClass('dp-n');
            ele.removeClass('dp-n');
        });
        $(document).on('click', '.add-data', function () {
            var d = process[$(this).data('id')];
            var ele = $(this).parents('td');
            $('.jcbh').html(ele.data('jcbh'));
            $('.khmc').html(ele.data('khmc'));
            $('.lxr').html(ele.data('lxr'));
            $('.add-data-part').find('.tbd').html(' <div class="ttr fill data"> ' +
                '<div class="big"><input type="text" class="a-date" id="first-date"></div> ' +
                '<div><input type="text" class="a-num kup-num" value="0"> </div> <div><input type="text" class="a-long  kup-num" value="0"> ' +
                '</div> <div><input type="text" class="a-width  kup-num" value="0"> </div> <div><input type="text" class="a-height  kup-num" value="0"> ' +
                '</div> <div class="a-size">0</div> <div>' +
                '</div> <div></div> ' +
                '<div></div> <div>' +
                '</div> <div></div> <div></div>' +
                ' <div></div> <div></div> </div> ').css('padding-right', '20px');

            $('.add-data-part').find('.tft').html(' <div class="big">总计</div> <div class="t-js">0</div> <div class="t-c"></div> <div class="t-k"></div> <div class="t-g"></div> <div class="t-s">0</div> <div class="t-w"><input type="text" class="total-wei kup-num" value="0"></div> <div><input type="text" class="total-bz"></div> <div class="t-ps"><input type="text" class="total-ps kup-num" value="0"></div> <div class="t-sc"><input type="text" class="total-sc kup-num" value="0"></div> <div class="t-bx"><input type="text" class="total-bx kup-num" value="0"></div> <div class="t-qt"><input type="text" class="total-qt kup-num" value="0"></div> <div><input type="text" class="total-remark"></div> <div></div>');
            $('#add-data').data('id', $(this).data('id'));
            $('#first-date').datetimepicker({
                format: 'yyyy-mm-dd hh:ii:ss',//日期的格式
                endDate: new Date(),//选择器的开始日期
                autoclose: true,//日期选择完成后是否关闭选择框
                bootcssVer: 3,//显示向左向右的箭头
                language: 'zh-CN',//语言
                minView: "month"//表示日期选择的最小范围，默认是hour
            }).on('changeDate', function (e) {
                $('.copy-date').html(new Date(e.date).Format('yyyy-MM-dd hh:mm:ss'));
            });

            var option = '';
            var arr = d.order.warehouseEntryNumList || [];
            for (var a = 0; a < arr.length; a++) {
                option += '<option value="' + arr[a] + '">' + arr[a] + '</option>'
            }
            $('.add-data-part').find('#bhList').html(option);

            $('.white-back').removeClass('dp-n');
            $('.add-data-part').removeClass('dp-n');
        });
        $(document).on('click', '.add-data-part .glyphicon-plus', function () {
            if ($('.add-data-part').find('.ttr.data').length >= 6) {
                $('.add-data-part').find('.tbd').css('padding-right', '3px');
            }
            $('.add-data-part').find('.tbd').append(' <div class="ttr fill data"> ' +
                '<div class="big copy-date">' + $('#first-date').val() + '</div>' +
                '<div><input type="text" class="a-num kup-num" value="0"> </div> <div><input type="text" class="a-long  kup-num" value="0"> ' +
                '</div> <div><input type="text" class="a-width  kup-num" value="0"> </div> <div><input type="text" class="a-height  kup-num" value="0"> ' +
                '</div> <div class="a-size">0</div> <div>' +
                '</div> <div> </div> ' +
                '<div></div> <div>' +
                '</div> <div> </div> <div></div>' +
                ' <div></div> <div><span class="glyphicon glyphicon-remove"></span></div></div> ');
        });
        $(document).on('click', '.add-data-part .glyphicon-remove', function () {
            $(this).parents('.ttr').remove();
            getTotal();
        });
        $(document).on('keyup', '.add-data-part .kup-num', function () {
            $(this).val($(this).val().replace(/[^\-?\d]/g, ''));
        });
        $(document).on('blur', '.add-data-part .kup-num', function () {
            if (!$(this).val()) {
                $(this).val(0);
            } else {
                $(this).val(parseInt($(this).val()));
            }
            var ele = $(this).parents('.ttr.data');
            var c = parseFloat(ele.find('.a-long').val())
                , k = parseFloat(ele.find('.a-width').val())
                , g = parseFloat(ele.find('.a-height').val())
                , js = parseFloat(ele.find('.a-num').val());
            ele.find('.a-size').html(myformat.formatvolume(c * k * g * js / 1000000));
            getTotal();
        });
        $(document).on('keyup', '.add-data-part .kup-fnum', function () {
            $(this).val($(this).val().replace(/[^\-?\d.]/g, ''));
        });
        $(document).on('blur', '.add-data-part .kup-fnum', function () {
            $(this).val($(this).val().replace(/[^\-?\d.]/g, ''));
            if (!$(this).val()) {
                $(this).val(0);
            } else {
                $(this).val(parseFloat($(this).val()));
            }
            var ele = $(this).parents('.ttr.data');
            var c = parseFloat(ele.find('.a-long').val())
                , k = parseFloat(ele.find('.a-width').val())
                , g = parseFloat(ele.find('.a-height').val())
                , js = parseFloat(ele.find('.a-num').val());
            ele.find('.a-size').html(myformat.formatvolume(c * k * g * js));
            getTotal();
        });
        $(document).on('click', '.ensure-data', function () {
            var ele = $(this).parents('td');
            $('.jcbh').html(ele.data('jcbh'));
            $('.khmc').html(ele.data('khmc'));
            $('.lxr').html(ele.data('lxr'));
            $('#ensure-data').data('id', $(this).data('id'));
            Data.storage({id: $(this).data('id')}, function (json) {
                if (json && 'resCode' in json && json.resCode == 0) {
                    Dom.renderTr(json.resBody || {});
                    $('.white-back').removeClass('dp-n');
                    $('.ensure-data-part').removeClass('dp-n');
                } else {
                    Modal.setAlert('添加失败，请重试！');
                }
            });
        });
        $(document).on('click', '.refuse', function () {
            operateId = $(this).data('id');
            $('.white-back').removeClass('dp-n');
            $('.refuse-part').removeClass('dp-n');
        });
        $(document).on('click', '.show-yd', function () {
            var id = $(this).data('id');
            ydId = id;
            var dd = process[id];
            var c = dd.company || {}
                , o = dd.order || {};
            var ele = $('.yd-part');
            ele.find('.ddh').html(o.orderNum);
            ele.find('.qsg').html(o.deptCode);
            ele.find('.mdg').html(o.destCode);
            ele.find('.hkgs').html(o.airCompanyCode);
            ele.find('.qfrq').html(new Date(o.flightDate.replace(/-/g, "/")).Format('yyyy-MM-dd'));
            ele.find('.js').html(o.cargo.cargoCount + 'PCS');
            ele.find('.tj').html(myformat.formatvolume(o.cargo.cargoSize) + 'CBM');
            ele.find('.zl').html(o.cargo.cargoWeight + 'KGS （计费重量：' + dd.order.cargo.chargingWeight + 'KGS）');
            ele.find('.jczt').html(o.entryState == 0 ? '待进仓' : (o.entryState == 1 ? '已进仓，未确认' : '已确认'));
            ele.find('#yd-c').val(o.cargo.cargoCount);
            ele.find('#yd-s').val(o.cargo.cargoSize);
            ele.find('#yd-w').val(o.cargo.cargoWeight);
            var data = {
                "agentCompanyId": 10000,
                "airwayId": o.airwayInfo.airwayId,
                "flightDate": new Date(o.flightDate.replace(/-/g, "/"))
            };
            Data.ydSearch(data, function (json) {
                var str = '';
                ydList = {};
                if (json && 'resBody' in json && json.resBody instanceof Array && json.resBody.length > 0) {
                    for (var b in json.resBody) {
                        if (json.resBody.hasOwnProperty(b)) {
                            var dt = json.resBody[b];
                            ydList[dt.billInfo.billId] = dt;
                        }
                    }
                    for (var y in ydList) {
                        if (ydList.hasOwnProperty(y)) {
                            str += '<p class="yd-rd"> <input type="radio" name="s-yd" data-id="' + y + '">' + y + '</p>';
                        }
                    }
                    ele.find('.left').html(str);
                    ele.find('.result-part').removeClass('dp-n');
                    ele.find('.add-yd').addClass('dp-n');
                    $('#gl-ensure').data('tp', 1);
                } else {
                    ele.find('.result-part').addClass('dp-n');
                    ele.find('.add-yd').removeClass('dp-n');
                    $('#gl-ensure').data('tp', 2);
                }
                $('.white-back').removeClass('dp-n');
                ele.removeClass('dp-n');
            });
        });
        $(document).on('click', 'input[name="s-yd"]', function () {
            var arr = ydList[$(this).data('id')].orderList;
            var str = '';
            for (var a in arr) {
                if (arr.hasOwnProperty(a)) {
                    var d = arr[a];
                    str += '<tr><td>' + d.orderId + '</td>' +
                        '<td>' + d.cargo.cargoCount + 'PCS</td>' +
                        '<td>' + d.cargo.cargoSize + 'CBM</td>' +
                        '<td>' + d.cargo.cargoWeight + 'KGS</td>' +
                        '<td>' + (d.entryState == 0 ? '待进仓' : (d.entryState == 1 ? '已进仓，未确认' : '已结束')) + '</td></tr>';
                }
            }
            $('.yd-tb').find('tbody').html(str);
        });
        $(document).on('click', '#transfer', function () {
            var arr = [];
            $('input[name="list-sg"]:checked').each(function () {
                arr.push($(this).data('id'));
            });
            if (arr.length > 0) {
                $('.white-back').removeClass('dp-n');
                $('.transfer-part').removeClass('dp-n');
            }
        });
        $(document).on('click', '#accept-transfer', function () {
            var arr = [];
            var mId;
            $('input[name="list-sg"]:checked').each(function () {
                arr.push($(this).data('id'));
            });
            mId = $('#czy').find('option:selected').val();
            if (arr.length > 0 && mId) {
                var data = {
                    "orderIds": arr,
                    "companyId": 0,
                    "memberFrom": 0,
                    "memberTo": mId,
                    "requireMeberId": 0
                };
                Data.transfer(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert('转移成功！', null, function () {
                            location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '转移失败，请重试！');
                    }
                });
            }
        });
    };
    var init = function () {
        var data = {
            offset: url.get('offset') || 0,
            limit: url.get('limit') || 10,
            "deptCode": $('#start').val(),
            "destCode": $('#end').val(),
            "number": $('#order-num').val()
        };
        Data.list(data, function (json) {
            process = Dom.list(json, data);
        });
    };
    var submit = function () {
        $(document).on('click', '#zd-ensure', function () {
            var arr = [], total = 0;
            $('.zd-tb').find('tr.data').each(function () {
                var data = {
                    "itemName": $(this).find('.fymt').val(),
                    "itemPrice": parseFloat($(this).find('.ip-dj').val()),
                    "itemUnit": 1,
                    "itemCount": parseFloat($(this).find('.ip-zl').val()),
                    "itemTotal": parseFloat($(this).find('.ttp').val())
                };
                arr.push(data);
                total += parseFloat($(this).find('.ttp').val());
            });
            if (arr.length > 0) {
                var data = {
                    "orderId": stopgap.order.orderId,
                    "serviceFeeList": arr,
                    "orderChargingTotal": total,
                    "chargeState": 0
                };
                Data.createCharge(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert(json.resMsg || '制单成功！', null, function () {
                            location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '制单失败，请重试！');
                    }
                });
            }
        });
        $(document).on('click', '#bg-ensure', function () {
            var data = {
                "orderId": operateId,
                "state": $('#c-bgzt').find('option:selected').val()
            };
            Data.bg(data, function (json) {
                if (json && 'resCode' in json && json.resCode == 0) {
                    Modal.setAlert(json.resMsg || '更新成功！', null, function () {
                        location.reload();
                    });
                } else {
                    Modal.setAlert(json.resMsg || '更新失败，请重试！')
                }
            });
        });
        $(document).on('click', '#cy-ensure', function () {
            var data = {
                "orderId": operateId,
                "state": $('#c-cyzt').find('option:selected').val()
            };
            Data.cy(data, function (json) {
                if (json && 'resCode' in json && json.resCode == 0) {
                    Modal.setAlert(json.resMsg || '更新成功！', null, function () {
                        location.reload();
                    });
                } else {
                    Modal.setAlert(json.resMsg || '更新失败，请重试！')
                }
            });
        });
        $(document).on('click', '#ys-ensure', function () {
            var data = {
                "orderId": operateId,
                "state": $('#c-yszt').find('option:selected').val()
            };
            Data.ys(data, function (json) {
                if (json && 'resCode' in json && json.resCode == 0) {
                    Modal.setAlert(json.resMsg || '更新成功！', null, function () {
                        location.reload();
                    });
                } else {
                    Modal.setAlert(json.resMsg || '更新失败，请重试！')
                }
            });
        });
        $(document).on('click', '#add-data', function () {
            var _this = $(this), arr = [];
            var tf = $('.add-data-part').find('.tft');
            if ($('#first-date').val()) {
                $('.add-data-part').find('.ttr.data').each(function () {
                    var d = {
                        "storageTime": $('#first-date').val(),
                        "orderId": _this.data('id'),
                        "packageType": '',
                        "packageMark": 'string',
                        "storageCount": $(this).find('.a-num').val(),
                        "storageWeight": 0,
                        "storageSize": $(this).find('.a-size').html(),
                        "damageCount": 0,
                        "dampCount": 0,
                        "transformCount": 0,
                        "otherCount": 0,
                        "storageRemark": '',
                        "storageLength": $(this).find('.a-long').val(),
                        "storageWidth": $(this).find('.a-width').val(),
                        "storageHeight": $(this).find('.a-height').val(),
                        "warehousentryNum": $('#bhList').find('option:selected').val()
                    };
                    arr.push(d);
                });
                arr.push({
                    "storageTime": $('#first-date').val(),
                    "orderId": _this.data('id'),
                    "packageType": tf.find('.total-bz').val(),
                    "packageMark": 'string',
                    "storageCount": 0,
                    "storageWeight": tf.find('.total-wei').val(),
                    "storageSize": 0,
                    "damageCount": tf.find('.total-ps').val(),
                    "dampCount": tf.find('.total-sc').val(),
                    "transformCount": tf.find('.total-bx').val(),
                    "otherCount": tf.find('.total-qt').val(),
                    "storageRemark": tf.find('.total-remark').val(),
                    "storageLength": 0,
                    "storageWidth": 0,
                    "storageHeight": 0,
                    "warehousentryNum": $('#bhList').find('option:selected').val()
                });
                var data = {
                    orderId: _this.data('id')
                    , entryNum: $('#bhList').find('option:selected').val()
                    , entryList: arr
                };

                if (tf.find('.total-bz').val()) {
                    tf.find('.total-bz').removeClass('warm');
                    if (parseInt(tf.find('.total-wei').val()) && parseInt(tf.find('.total-wei').val()) > 0) {
                        tf.find('.total-wei').removeClass('warm');
                        Data.addData(data, function (json) {
                            if (json && 'resCode' in json && json.resCode == 0) {
                                Modal.setAlert(json.resMsg || '添加成功！', null, function () {
                                    location.reload();
                                });
                            } else {
                                Modal.setAlert(json.resMsg || '添加失败，请重试！');
                            }
                        });
                    } else {
                        tf.find('.total-wei').addClass('warm');
                    }
                } else {
                    tf.find('.total-bz').addClass('warm');
                }
            } else {
                Modal.setAlert('请录入进仓时间！');
            }
        });
        $(document).on('click', '#ensure-data', function () {
            var data = {
                orderId: $(this).data('id')
            };
            Data.ensureData(data, function (json) {
                if (json && 'resCode' in json && json.resCode == 0) {
                    Modal.setAlert(json.resMsg || '确认成功！', null, function () {
                        location.reload();
                    });
                } else {
                    Modal.setAlert(json.resMsg || '确认失败！');
                }
            });
        });
        $(document).on('click', '#refuse-ensure', function () {
            var id = $('input[name="reason"]:checked').prop('id');
            var txt = '';
            if (id == 'r5') {
                txt = $('#text-r4').val();
            } else {
                txt = $('#' + id).siblings('label').html();
            }
            var data = {
                "agentCompanyId": 10000,
                "serviceFee": $('#r6').prop('checked'),
                "comment": txt,
                "orderId": operateId
            };
            Data.cancel(data, function (json) {
                if (json && 'resCode' in json && json.resCode == 0) {
                    Modal.setAlert(json.resMsg || '取消成功！', null, function () {
                        location.reload();
                    });
                } else {
                    Modal.setAlert(json.resMsg || '取消失败，请重试！');
                }
            });
        });
        $(document).on('click', '#gl-ensure', function () {
            if ($(this).data('tp') == 2) {
                var newPass = true;
                $('.yd-ip').each(function () {
                    if (!$(this).val()) {
                        $(this).addClass('warm');
                        newPass = false;
                    } else {
                        $(this).removeClass('warm');
                    }
                });
                if (newPass) {
                    var data = {
                        "bookingCount": $('#yd-c').val(),
                        "bookingSize": $('#yd-s').val(),
                        "bookingWeight": $('#yd-w').val(),
                        "orderId": ydId,
                        "billId": 0
                    };
                    Data.ydNew(data, function (json) {
                        if (json && 'resCode' in json && json.resCode == 0) {
                            Modal.setAlert(json.resMsg || '关联成功！', null, function () {
                                location.reload();
                            });
                        } else {
                            Modal.setAlert(json.resMsg || '关联失败,请重试！');
                        }
                    });
                }
            } else {
                if ($('.yd-body').find('input[name="s-yd"]:checked').length > 0) {
                    var dt = {
                        "orderId": ydId,
                        "billId": $('.yd-body').find('input[name="s-yd"]:checked').data('id')
                    };
                    Data.ydExist(dt, function (json) {
                        if (json && 'resCode' in json && json.resCode == 0) {
                            Modal.setAlert(json.resMsg || '关联成功！', null, function () {
                                location.reload();
                            });
                        } else {
                            Modal.setAlert(json.resMsg || '关联失败,请重试！');
                        }
                    });
                } else {
                    Modal.setAlert('请选择一条航线关联！');
                }
            }
        });
    };
    var getTotal = function () {
        var js = 0, c = 0, k = 0, g = 0, tj = 0, zl = 0, ps = 0, sc = 0, bx = 0, qt = 0;
        var ele = $('.add-data-part');
        ele.find('.a-num').each(function () {
            js += parseInt($(this).val());
        });
        ele.find('.a-size').each(function () {
            tj += parseFloat($(this).html());
        });
        ele.find('.a-wei').each(function () {
            zl += parseFloat($(this).val());
        });
        ele.find('.a-ps').each(function () {
            ps += parseInt($(this).val());
        });
        ele.find('.a-sc').each(function () {
            sc += parseInt($(this).val());
        });
        ele.find('.a-bx').each(function () {
            bx += parseInt($(this).val());
        });
        ele.find('.a-qt').each(function () {
            qt += parseInt($(this).val());
        });
        ele.find('.t-js').html(js).end()
            .find('.t-s').html(myformat.formatvolume(tj)).end();
        //.find('.t-w').html(zl).end()
        //.find('.t-ps').html(ps).end()
        //.find('.t-sc').html(sc).end()
        //.find('.t-bx').html(bx).end()
        //.find('.t-qt').html(qt).end();
    };
    var zdTable = function () {
        $(document).on('click', '.fymt.choose', function () {
            $('.se-part').addClass('dp-n');
            $(this).siblings('.se-part').removeClass('dp-n');
        });
        $(document).on('click', '.se-part li', function () {
            var dj = parseFloat($(this).data('dj'))
                , zl = parseFloat($(this).data('zl'))
                , ele = $(this).parents('tr.data');
            ele.find('.ip-dj').val(dj);
            ele.find('.ip-zl').val(zl);
            ele.find('.ttp').val(dj * zl);
            $(this).parents('ul').siblings('input').val($(this).html());
            $(this).parents('ul').addClass('dp-n');
            ele.find('.fymt').removeClass('choose');
            ele.find('.se-part').remove();
        });
        $(document).on('click', function (e) {
            var target = $(e.target);
            if (target.closest('.fymt.choose,.se-part li').length == 0) {
                $('.se-part').addClass('dp-n');
            }
        });
        $(document).on('keyup', '.ip-zl,.ip-dj', function () {
            $(this).val($(this).val().replace(/[^\d.]/g, ""))
        });
        $(document).on('blur', '.ip-zl,.ip-dj', function () {
            var v = $(this).val() || 0;
            $(this).val(parseFloat(v));
            var ele = $(this).parents('tr.data');
            var dj = parseFloat(ele.find('.ip-dj').val())
                , zl = parseFloat(ele.find('.ip-zl').val());
            ele.find('.ttp').val(dj * zl);
        });
        $(document).on('click', '.glyphicon-remove', function () {
            $(this).parents('tr.data').remove();
        });
        $(document).on('click', '.glyphicon-plus', function () {
            var exist = [], arr = [], str = '', ul = '';
            //获取已存在的项目
            $('.zd-tb').find('.fymt').each(function () {
                exist.push($(this).val());
            });
            //计算可添加的项目
            for (var d in defaultPrice) {
                if (defaultPrice.hasOwnProperty(d)) {
                    if (exist.indexOf(d) < 0) {
                        arr.push(defaultPrice[d]);
                    }
                }
            }
            if (arr.length > 0) {
                for (var a in arr) {
                    if (arr.hasOwnProperty(a)) {
                        var sg = arr[a];
                        ul += '<li data-dj="' + sg.itemPrice + '" data-zl="' + sg.itemUnit + '">' + sg.itemName + '</li>';
                    }
                }
                str += '<tr class="data"> <td><input type="text" class="fymt choose" readonly value="请选择费用名称"/> ' +
                    '<ul class="se-part dp-n">' + ul + '</ul> ' +
                    '</td> <td><input type="text" class="ip-dj" value="0"/>' +
                    '</td> <td><input type="text" class="ip-zl" value="0"/></td> ' +
                    '<td><input type="text" class="ttp" readonly value="0"/></td> <td><span class="glyphicon glyphicon-remove"></span></td> </tr>';
                $('.zd-tb').find('.tr-add').before(str);
            }
        });
    };
    var priceInit = function () {
        Data.priceList(function (json) {
            if (json && 'resCode' in json && json.resCode == 0 && json.resBody && json.resBody.sList) {
                var arr = json.resBody.sList;
                for (var a in arr) {
                    if (arr.hasOwnProperty(a)) {
                        var d = arr[a];
                        if (d.expenseDefault) {
                            for (var e in d.expenseTemplate) {
                                if (d.expenseTemplate.hasOwnProperty(e)) {
                                    var dt = d.expenseTemplate[e];
                                    defaultPrice[dt.itemName] = dt;
                                }
                            }
                            break;
                        }
                    }
                }
            }
        });
    };
    //改配
    var gp = function () {
        var gData = {
            offset: 0
            , limit: 5
        };
        $(document).on('click', '.show-change', function () {
            gData.offset = 0;
            var d = process[$(this).data('id')];
            stopgap = process[$(this).data('id')];
            var c = d.company || {}
                , o = d.order || {};
            var qd = '', dc = '', jc = '', lj = '';
            var ele = $('.change-part');
            ele.find('.gp-ydh').html(o.airwayBillNum || '/');
            ele.find('.gp-kh').html(c.companyName || '/');
            switch (o.orderChannel) {
                case 1:
                    qd = '自助订舱';
                    break;
                case 2:
                    qd = '快速订舱';
                    break;
                case 3:
                    qd = '后台下单';
                    break;
                default:
                    qd = '自助订舱';
                    break;
            }
            ele.find('.gp-qd').html(qd || '/');
            ele.find('.gp-pm').html(o.cargo.cargoName || '/');
            ele.find('.gp-lx').html(o.cargo.cargoType == 1 ? '普货' : '转关');
            ele.find('.gp-bg').html(o.cargo.isBulkyCargo ? '是' : '否');
            ele.find('.gp-pm').html(o.cargo.cargoName || '/');
            ele.find('.gp-js').html((o.cargo.cargoCount || 0) + 'PCS');
            ele.find('.gp-tj').html((myformat.formatvolume(o.cargo.cargoSize) || 0) + 'CBM');
            ele.find('.gp-zl').html((o.cargo.cargoWeight || 0) + 'KGS(计费重量：' + o.cargo.chargingWeight + 'KGS)');
            switch (o.bookingState) {
                case 0:
                    dc = '未订舱';
                    break;
                case 1:
                    dc = '已订舱';
                    break;
                case -1:
                    dc = '订舱失败';
                    break;
                case 2:
                    dc = '已改配';
                    break;
            }
            ele.find('.gp-dc').html(dc || '/');
            switch (o.entryState) {
                case 0:
                    jc = '待进仓';
                    break;
                case 1:
                    jc = '已进仓';
                    break;
                case 2:
                    jc = '已确认';
                    break;
            }
            ele.find('.gp-jc').html(jc || '/');
            ele.find('.gp-s').html(o.deptCode || '/');
            ele.find('#gp-e').val(o.destCode || '/');
            ele.find('#gp-c').val(o.airCompanyCode || '/');
            ele.find('#gp-d').val(new Date(o.flightDate.replace(/-/g, "/")).Format('yyyy-MM-dd'));
            if (o.airwayInfo) {
                var arr = o.airwayInfo.transPort;
                for (var i = 0; i < arr.length; i++) {
                    lj += arr[i].portCode + (i == arr.length - 1 ? '' : ' -> ')
                }
            }
            $('#gp-d').datetimepicker({
                format: 'yyyy-mm-dd',//日期的格式
                startDate: new Date(o.flightDate.replace(/-/g, "/")),//选择器的开始日期
                autoclose: true,//日期选择完成后是否关闭选择框
                bootcssVer: 3,//显示向左向右的箭头
                language: 'zh-CN',//语言
                minView: "month"//表示日期选择的最小范围，默认是hour
            });
            ele.find('.gp-l').html(lj || '/');
            ele.find('.bg-ip').each(function () {
                $(this).prop('readonly', Boolean(o.declareState));
            });

            $('.hxlb').addClass('dp-n');
            $('.white-back').removeClass('dp-n');
            ele.removeClass('dp-n');
        });
        $(document).on('click', '.gp-pages .pages', function () {
            gData.offset = $(this).data('offset');
            inti();
        });
        $(document).on('click', '#gp-search', function () {
            gData.offset = 0;
            inti();
        });
        $(document).on('click', '#change-ensure', function () {
            var ele = $('input[name="i-sg"]:checked');
            if (ele.length > 0) {
                var pass = true;
                var fix = $('#gp-fix').prop('checked');
                var price = $('#gp-dj').val();
                if (fix && !price) {
                    pass = false;
                    $('#gp-dj').css('border-color', 'red');
                } else {
                    $('#gp-dj').css('border-color', '#d4d4d4');
                }
                if (pass) {
                    var data = {
                        "orderId": stopgap.order.orderId,
                        "agentCompanyId": 10000,
                        "agentId": 1,
                        "airwayId": ele.data('id'),
                        "flightDate": $('#gp-d').val(),
                        "Price": price,
                        "fixPrice": fix
                    };
                    Data.gp(data, function (json) {
                        if (json && 'resCode' in json && json.resCode == 0) {
                            Modal.setAlert('改配成功！', null, function () {
                                location.reload();
                            });
                        } else {
                            Modal.setAlert(json.resMsg || '改配失败，请重试！');
                        }
                    });
                }
            } else {
                Modal.setAlert('请选择一条航线!');
            }
        });
        var inti = function () {
            var pass = true;
            $('.s-req').each(function () {
                if (!$(this).val()) {
                    $(this).addClass('warm');
                    pass = false;
                } else {
                    $(this).removeClass('warm');
                }
            });
            if (pass) {
                var data = {
                    "deptCode": $('#gp-s').html(),
                    "destCode": $('#gp-e').val(),
                    "flightDate": new Date($('#gp-d').val().replace(/-/g, "/")),
                    "airCompanyCode": $('#gp-c').val(),
                    "transCount": 1,
                    "offset": gData.offset || 0,
                    "limit": gData.limit || 5
                };
                Data.search(data, function (json) {
                    Dom.innerList(json, data);
                    $('.hxlb').removeClass('dp-n');
                });
            }
        };
    };
    var airports = function () {
        //获取机场名称
        $(document).on('keyup', '#gp-e', function (e) {
            var _this = $(this)
                , ul = _this.siblings('.get-name');
            var index = ul.find('.active').index() || 0
                , len = ul.children().length;
            if (e.keyCode == 13) {//回车键
                var data = ul.children('.active').data('val') || ul.find('li:first-child').data('val') || '';
                $(this).val(data);
                $(this).data('val', data);
                ul.hide();
            } else if (e.keyCode == 38) {//上键
                index = index == 0 ? len - 1 : index - 1;
                ul.find('li').removeClass('active');
                ul.find('li').eq(index).addClass('active');
            } else if (e.keyCode == 40) {//下键
                index = index == len - 1 ? 0 : index + 1;
                ul.find('li').removeClass('active');
                ul.find('li').eq(index).addClass('active');
            } else {//正常输入
                Data.getName({key: _this.val()}, function (json) {
                    if (json && 'resBody' in json && json.resBody instanceof Array && json.resBody.length > 0) {
                        var str = ''
                            , body = json.resBody;
                        for (var b in body) {
                            if (body.hasOwnProperty(b)) {
                                var d = body[b];
                                str += '<li data-val="' + d.airportCode + '" class="' + (b == 0 ? 'active' : '') + '">' + d.displayName + '</li>'
                            }
                        }
                        ul.html(str);
                        ul.show();
                    }
                });
            }
        });
        //input失去焦点
        $(document).on('blur', '#gp-e', function () {
            if (!$(this).prop('readonly')) {
                var ul = $(this).siblings('.get-name');
                var data = ul.children('.active').data('val') || ul.find('li:first-child').data('val') || '';
                $(this).val(data);
                $(this).data('val', data);
                ul.hide();
            }
        });
        //li元素悬浮获得焦点
        $(document).on('mouseenter ', '.get-name li', function () {
            $(this).addClass('active');
            $(this).siblings().removeClass('active');
        });
    };
    var company = function () {
//获取机场名称
        $(document).on('keyup', '#gp-c', function (e) {
            var _this = $(this)
                , ul = _this.siblings('.get-name');
            var index = ul.find('.active').index() || 0
                , len = ul.children().length;
            if (e.keyCode == 13) {//回车键
                var data = ul.children('.active').data('val') || ul.find('li:first-child').data('val') || '';
                $(this).val(data);
                $(this).data('val', data);
                ul.hide();
            } else if (e.keyCode == 38) {//上键
                index = index == 0 ? len - 1 : index - 1;
                ul.find('li').removeClass('active');
                ul.find('li').eq(index).addClass('active');
            } else if (e.keyCode == 40) {//下键
                index = index == len - 1 ? 0 : index + 1;
                ul.find('li').removeClass('active');
                ul.find('li').eq(index).addClass('active');
            } else {//正常输入
                Data.getCode({key: _this.val()}, function (json) {
                    if (json && 'resBody' in json && json.resBody instanceof Array && json.resBody.length > 0) {
                        var str = ''
                            , body = json.resBody;
                        for (var b in body) {
                            if (body.hasOwnProperty(b)) {
                                var d = body[b];
                                str += '<li data-val="' + d.airlineCode + '" class="' + (b == 0 ? 'active' : '') + '">' + d.companyName + '</li>';
                            }
                        }
                        ul.html(str);
                        ul.show();
                    }
                });
            }
        });
        //input失去焦点
        $(document).on('blur', '#gp-c', function () {
            if (!$(this).prop('readonly')) {
                var ul = $(this).siblings('.get-name');
                var data = ul.children('.active').data('val') || ul.find('li:first-child').data('val') || '';
                $(this).val(data);
                $(this).data('val', data);
                ul.hide();
            }
        });
    };
    var opInit = function () {
        Data.opList(function (json) {
            var option = '';
            if (json && 'resCode' in json && json.resCode == 0 && json.resBody.length > 0) {
                var arr = json.resBody || [];
                for (var a = 0; a < arr.length; a++) {
                    option += '<option value="' + arr[a].memberId + '">' + arr[a].name + '</option>'
                }
                $('#czy').html(option);
            } else {
                option = '暂无操作员，请添加！';
                $('.transfer-part').find('.dp-tb').html(option);
            }
        });
    };
    var run = function () {
        listener();
        init();
        submit();
        zdTable();
        priceInit();
        gp();
        airports();
        company();
        opInit();
    };
    return {
        run: run
    }
}());
module.exports.Listener = Listener;
},{"../../general/burster":1,"../../general/function":2,"../../general/modal":4,"./data":5,"./dom":6}]},{},[7])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL252bS92Ni4yLjAvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi4uLy4uL2dlbmVyYWwvYnVyc3Rlci5qcyIsIi4uLy4uL2dlbmVyYWwvZnVuY3Rpb24uanMiLCIuLi8uLi9nZW5lcmFsL2dlbmVyYWwuanMiLCIuLi8uLi9nZW5lcmFsL21vZGFsLmpzIiwiZGF0YS5qcyIsImRvbS5qcyIsImluZGV4LmpzIiwibGlzdGVuZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOWJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTYvMTEvMjQuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbihmdW5jdGlvbiAoJCkge1xyXG4gIC8qKlxyXG4gICAqIOeUn+aIkOWIhumhteWZqFxyXG4gICAqIEBwYXJhbSBlbGUg6ZyA6KaB5re75Yqg5YiG6aG15Zmo55qE5YWD57SgXHJcbiAgICogQHBhcmFtIG9mZnNldCDlgY/np7vph4/vvIzljbPku47nrKxkYXRhLW9mZnNldOW8gOWni1xyXG4gICAqIEBwYXJhbSBsZW5ndGgg5oC76K6w5b2V5p2h5pWwXHJcbiAgICogQHBhcmFtIHNob3dQYWdlcyDliIbpobXlmajmmL7npLrnmoTpobXmlbDvvIzotoXov4fliJnpmpDol4/lpJrkvZnnmoTpobVcclxuICAgKiBAcGFyYW0gcm93cyDmr4/pobXmmL7npLrnmoTorrDlvZXmnaHmlbBcclxuICAgKi9cclxuICAkLmJ1cnN0ZXIgPSBmdW5jdGlvbiAoZWxlLCBvZmZzZXQsIGxlbmd0aCwgc2hvd1BhZ2VzLCByb3dzKSB7XHJcbiAgICBvZmZzZXQgPSBvZmZzZXQgPyBwYXJzZUludChvZmZzZXQpIDogMDtcclxuICAgIC8v5bCG5YiG6aG15Zmo6KOF5YWldGFibGXkuK1cclxuICAgIGlmIChsZW5ndGggJiYgbGVuZ3RoID4gb2Zmc2V0KSB7XHJcbiAgICAgIHZhciBwYWdlSHRtbCA9IFwiXCJcclxuICAgICAgICAsIGFzcyA9IFwiXCIvL+a4heepuumcgOimgeijheWFpeeahGh0bWxcclxuICAgICAgICAsIGJlZm9yZVBhZ2VzID0gTWF0aC5jZWlsKG9mZnNldCAvIHJvd3MpLy/pnIDopoHmmL7npLrnmoTliY3pobXmlbAv5b2T5YmN6aG1XHJcbiAgICAgICAgLCBhZnRlclBhZ2VzID0gTWF0aC5jZWlsKChsZW5ndGggLSBvZmZzZXQgKSAvIHJvd3MpLy/pnIDopoHmmL7npLrnmoTlkI7pobXmlbBcclxuICAgICAgICAsIHBhZ2VzID0gTWF0aC5jZWlsKGxlbmd0aCAvIHJvd3MpIC8v5oC76aG15pWwXHJcbiAgICAgICAgLCBrID0gMDtcclxuICAgICAgLy9hbGVydChcIuaAu+mhteaVsFwiICsgcGFnZXMgKyBcIiDliY3pobXmlbAgXCIgKyBiZWZvcmVQYWdlcyArIFwiIOWQjumhteaVsCBcIiArIGFmdGVyUGFnZXMpO1xyXG4gICAgICAvL+iLpemhteaVsOWwj+S6jnNob3dQYWdlc+mhte+8jOWImeWFqOmDqOaYvuekulxyXG4gICAgICBpZiAocGFnZXMgPj0gMCAmJiBwYWdlcyA8PSBzaG93UGFnZXMpIHtcclxuICAgICAgICBmb3IgKGsgPSAwOyBrIDwgcGFnZXM7IGsrKykge1xyXG4gICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGkgY2xhc3M9J2FjdGl2ZScgPjxhPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAocGFnZXMgPiBzaG93UGFnZXMpIHsvL+aAu+mhteaVsOWkp+S6jnNob3dQYWdlc+mhtVxyXG4gICAgICAgIGlmIChiZWZvcmVQYWdlcyA8PSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgJiYgYWZ0ZXJQYWdlcyA+IHNob3dQYWdlcyArIDEpIHtcclxuICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBzaG93UGFnZXM7IGsrKykge1xyXG4gICAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArICgocGFnZXMgLSAxKSAqIHJvd3MpICsgXCInPi4uLlwiICsgcGFnZXMgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlUGFnZXMgPD0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICYmIGFmdGVyUGFnZXMgPT0gc2hvd1BhZ2VzICsgMSkge1xyXG4gICAgICAgICAgZm9yIChrID0gMDsgayA8IHNob3dQYWdlcyAtIDE7IGsrKykge1xyXG4gICAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArICgocGFnZXMgLSAxKSAqIHJvd3MpICsgXCInPi4uLlwiICsgcGFnZXMgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlUGFnZXMgPD0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICYmIGFmdGVyUGFnZXMgPD0gc2hvd1BhZ2VzKSB7XHJcbiAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgc2hvd1BhZ2VzIC0gMTsgaysrKSB7XHJcbiAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGkgY2xhc3M9J2FjdGl2ZScgPjxhPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKChwYWdlcyAtIDEpICogcm93cykgKyBcIic+Li4uXCIgKyBwYWdlcyArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChiZWZvcmVQYWdlcyA+IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSAmJiBiZWZvcmVQYWdlcyA8PSBzaG93UGFnZXMgJiYgYWZ0ZXJQYWdlcyA+IHNob3dQYWdlcykge1xyXG4gICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nMCc+MS4uLjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgZm9yIChrID0gYmVmb3JlUGFnZXMgLSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxOyBrIDwgYmVmb3JlUGFnZXMgKyBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMik7IGsrKykge1xyXG4gICAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArICgocGFnZXMgLSAxKSAqIHJvd3MpICsgXCInPi4uLlwiICsgcGFnZXMgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlUGFnZXMgPiBzaG93UGFnZXMgJiYgYWZ0ZXJQYWdlcyA+IHNob3dQYWdlcykge1xyXG4gICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nMCc+MS4uLjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgZm9yIChrID0gYmVmb3JlUGFnZXMgLSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxOyBrIDwgYmVmb3JlUGFnZXMgKyBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMik7IGsrKykge1xyXG4gICAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArICgocGFnZXMgLSAxKSAqIHJvd3MpICsgXCInPi4uLlwiICsgcGFnZXMgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlUGFnZXMgPiBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgJiYgYmVmb3JlUGFnZXMgPD0gcGFnZXMgJiYgYWZ0ZXJQYWdlcyA8PSBzaG93UGFnZXMgJiYgYWZ0ZXJQYWdlcyA+IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSArIDEpIHtcclxuICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9JzAnPjEuLi48L2E+PC9saT5cIjtcclxuICAgICAgICAgIGZvciAoayA9IGJlZm9yZVBhZ2VzIC0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMTsgayA8IGJlZm9yZVBhZ2VzICsgTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpOyBrKyspIHtcclxuICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoKHBhZ2VzIC0gMSkgKiByb3dzKSArIFwiJz4uLi5cIiArIHBhZ2VzICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZVBhZ2VzID4gcGFnZXMgJiYgYWZ0ZXJQYWdlcyA8PSBzaG93UGFnZXMgJiYgYWZ0ZXJQYWdlcyA+IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSArIDEpIHtcclxuICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9JzAnPjEuLi48L2E+PC9saT5cIjtcclxuICAgICAgICAgIGZvciAoayA9IGJlZm9yZVBhZ2VzIC0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMTsgayA8IGJlZm9yZVBhZ2VzICsgTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpOyBrKyspIHtcclxuICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoKHBhZ2VzIC0gMSkgKiByb3dzKSArIFwiJz4uLi5cIiArIHBhZ2VzICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZVBhZ2VzID4gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICYmIGFmdGVyUGFnZXMgPD0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMSkge1xyXG4gICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nMCc+MS4uLjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgZm9yIChrID0gYmVmb3JlUGFnZXMgLSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxOyBrIDwgcGFnZXM7IGsrKykge1xyXG4gICAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8v5Yik5patXCLpppbpobVcIuWSjFwi5pyr6aG1XCLmmK/lkKblj6/ngrnlh7tcclxuICAgICAgdmFyIGZpcnN0UGFnZSwgbGFzdFBhZ2U7XHJcbiAgICAgIGlmIChvZmZzZXQgPT0gMCkgey8v5q2k5pe26aaW6aG15peg5rOV54K55Ye7XHJcbiAgICAgICAgZmlyc3RQYWdlID0gJzxsaSBjbGFzcz1cImRpc2FibGVkXCI+PGEgY2xhc3M9XCJwYWdlc1wiIGRhdGEtb2Zmc2V0PVwiMFwiPummlumhtTwvYT48L2xpPic7XHJcbiAgICAgICAgbGFzdFBhZ2UgPSAnPGxpPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIicgKyBwYXJzZUludChwYXJzZUludCgobGVuZ3RoICUgcm93cyA9PSAwID8gKGxlbmd0aCAtIDEpIDogbGVuZ3RoKSAvIHJvd3MpICogcm93cykgKyAnXCIgPuacq+mhtTwvYT48L2xpPic7XHJcbiAgICAgIH0gZWxzZSBpZiAoKG9mZnNldCArIHJvd3MpID49IGxlbmd0aCkgey8v5q2k5pe25pyr6aG15peg5rOV54K55Ye7XHJcbiAgICAgICAgZmlyc3RQYWdlID0gJzxsaT48YSBjbGFzcz1cInBhZ2VzXCIgZGF0YS1vZmZzZXQ9XCIwXCI+6aaW6aG1PC9hPjwvbGk+JztcclxuICAgICAgICBsYXN0UGFnZSA9ICc8bGkgY2xhc3M9XCJkaXNhYmxlZFwiPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIicgKyBwYXJzZUludChwYXJzZUludCgobGVuZ3RoICUgcm93cyA9PSAwID8gKGxlbmd0aCAtIDEpIDogbGVuZ3RoKSAvIHJvd3MpICogcm93cykgKyAnXCI+5pyr6aG1PC9hPjwvbGk+JztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmaXJzdFBhZ2UgPSAnPGxpPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIjBcIj7pppbpobU8L2E+PC9saT4nO1xyXG4gICAgICAgIGxhc3RQYWdlID0gJzxsaT48YSBjbGFzcz1cInBhZ2VzXCIgZGF0YS1vZmZzZXQ9XCInICsgcGFyc2VJbnQocGFyc2VJbnQoKGxlbmd0aCAlIHJvd3MgPT0gMCA/IChsZW5ndGggLSAxKSA6IGxlbmd0aCkgLyByb3dzKSAqIHJvd3MpICsgJ1wiPuacq+mhtTwvYT48L2xpPic7XHJcbiAgICAgIH1cclxuICAgICAgLy/liKTmlq1cIuS4iuS4gOmhtVwi5ZKMXCLkuIvkuIDpobVcIuaYr+WQpuWtmOWcqFxyXG4gICAgICB2YXIgdXBQYWdlLCBkb3duUGFnZTtcclxuICAgICAgaWYgKG9mZnNldCA9PSAwIHx8IChvZmZzZXQgPCByb3dzICYmIChvZmZzZXQgJSByb3dzICE9IDApKSkge1xyXG4gICAgICAgIHVwUGFnZSA9IFwiPGxpIGNsYXNzPSdkaXNhYmxlZCc+PGEgY2xhc3M9J3BhZ2VzJyBmdW5jPSdwcmV2aW91cycgZGF0YS1vZmZzZXQ9J1wiICsgcGFyc2VJbnQob2Zmc2V0KSArIFwiJyA+5LiK6aG1PC9hPjwvbGk+XCJcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB1cFBhZ2UgPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGZ1bmM9J3ByZXZpb3VzJyBkYXRhLW9mZnNldD0nXCIgKyAocGFyc2VJbnQob2Zmc2V0KSAtIHBhcnNlSW50KHJvd3MpKSArIFwiJyA+5LiK6aG1PC9hPjwvbGk+XCI7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG9mZnNldCA+PSAobGVuZ3RoIC0gcm93cykpIHtcclxuICAgICAgICBkb3duUGFnZSA9IFwiPGxpIGNsYXNzPSdkaXNhYmxlZCc+PGEgY2xhc3M9J3BhZ2VzJyBmdW5jPSduZXh0JyBkYXRhLW9mZnNldD0nXCIgKyBwYXJzZUludChvZmZzZXQpICsgXCInPuS4i+mhtTwvYT48L2xpPlwiXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG93blBhZ2UgPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGZ1bmM9J25leHQnIGRhdGEtb2Zmc2V0PSdcIiArIHBhcnNlSW50KHBhcnNlSW50KG9mZnNldCkgKyBwYXJzZUludChyb3dzKSkgKyBcIic+5LiL6aG1PC9hPjwvbGk+XCJcclxuICAgICAgfVxyXG4gICAgICBpZiAocGFnZXMgIT0gMSkge1xyXG4gICAgICAgIC8v5YiG6aG16YOo5YiGXHJcbiAgICAgICAgYXNzICs9IFwiPGRpdiBpZD0ncGFnZXInIGNsYXNzPSdwYWdlci1pbmZvJz5cIiArXHJcbiAgICAgICAgXCI8aDYgaWQ9J3Jlc3VsdCcgY2xhc3M9J3BhZ2VyLXJlY29yZCc+5YWx5pyJPHNwYW4+XCIgKyBsZW5ndGggKyBcIjwvc3Bhbj7mnaHorrDlvZU8L2g2PlwiICtcclxuICAgICAgICBcIjx1bCBjbGFzcz0ncGFnaW5hdGlvbic+XCIgKyBmaXJzdFBhZ2UgKyB1cFBhZ2UgKyBwYWdlSHRtbCArIGRvd25QYWdlICsgbGFzdFBhZ2UgKyBcIjwvdWw+PC9kaXY+XCI7XHJcbiAgICAgICAgLy90YWJsZeS4reazqOWFpeaLvOijheeahOiusOW9lVxyXG4gICAgICAgIGVsZS5odG1sKGFzcyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZWxlLmh0bWwoJycpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59KGpRdWVyeSkpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHpyeiBvbiAyMDE2LzIvMjYuXHJcbiAqIEB2ZXJzaW9uIDEuMC4wIGNyZWF0ZWQg6YCa55So5oCn5Yqf6IO95pa55rOVXHJcbiAqL1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIEZ1biA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgX3RpbWVPdXQgPSAxMDAwMDA7Ly/or7fmsYLotoXml7bml7bpl7TkuLoxMHNcclxuICAgIC8qKlxyXG4gICAgICog5bCB6KOFYWpheFxyXG4gICAgICogQHBhcmFtIG9wdGlvblxyXG4gICAgICoge1xyXG4gICAgICogICAgICB1cmw6XCLor7fmsYLnmoTlnLDlnYBcIlxyXG4gICAgICogICAgICAsbWV0aG9kOlwi6K+35rGC55qE5pa55rOVXCJcclxuICAgICAqICAgICAgLGFzeW5jOlwi5piv5ZCm5bm25Y+RXCJcclxuICAgICAqICAgICAgLGRhdGE6XCLlj5HpgIHnmoTmlbDmja5cIlxyXG4gICAgICogICAgICAsc3VjY2VzczpcIuaIkOWKn+aXtuWbnuiwg1wiXHJcbiAgICAgKiAgICAgICxlcnJvcjpcIuWksei0pS/otoXml7bml7blm57osINcIlxyXG4gICAgICogICAgICAsdGltZW91dDpcIui2heaXtuaXtumXtFwiXHJcbiAgICAgKiAgICAgICxjb21wbGV0ZTpcIuWujOaIkOWQjueahOWbnuiwg1wiXHJcbiAgICAgKiB9XHJcbiAgICAgKi9cclxuICAgIHZhciBhamF4ID0gZnVuY3Rpb24gKG9wdGlvbikge1xyXG4gICAgICAgIC8vYWpheOW8gOWni+aXtuW6lOaYvuekuuKAnOWKoOi9veS/oeaBr+ahhuKAnVxyXG4gICAgICAgIE1vZGFsLnNob3dMb2FkaW5nKCk7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBvcHRpb24udXJsXHJcbiAgICAgICAgICAgICwgdHlwZTogXCJ0eXBlXCIgaW4gb3B0aW9uICYmIG9wdGlvbi50eXBlIHx8IFwiR0VUXCJcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiBvcHRpb24udGltZW91dCB8fCBfdGltZU91dFxyXG4gICAgICAgICAgICAsIGRhdGE6IFwiZGF0YVwiIGluIG9wdGlvbiAmJiBvcHRpb24uZGF0YSB8fCB7fVxyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiBcImpzb25cIlxyXG4gICAgICAgICAgICAsIGFzeW5jOiAoXCJhc3luY1wiIGluIG9wdGlvbiAmJiBvcHRpb24uYXN5bmMpID8gdHJ1ZSA6IGZhbHNlXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChcInN0YXR1c1wiIGluIGpzb24gJiYganNvbi5zdGF0dXMgPiAwICYmIFwiZGF0YVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXCJzdWNjZXNzXCIgaW4gb3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zdWNjZXNzKGpzb24uZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoXCLml6BzdWNjZXNz5pa55rOVIVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwiZXJyb3JcIiBpbiBvcHRpb24gJiYgb3B0aW9uLmVycm9yIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24uZXJyb3IoanNvbik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfmk43kvZzlpLHotKUhJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGVycm9yOiBmdW5jdGlvbiAoeGhyKSB7Ly80MDTmiJbogIXotoXml7ZcclxuICAgICAgICAgICAgICAgIGlmIChcImVycm9yXCIgaW4gb3B0aW9uICYmIG9wdGlvbi5lcnJvciBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/mj5DnpLrnlKjmiLfplJnor6/kv6Hmga9cclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zaG93TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoXCLov57mjqXmnI3liqHlmajlpLHotKXvvIznirbmgIHvvJpcIiArICh4aHIuc3RhdHVzIHx8IC0xKSArIFwiLOS/oeaBr++8mlwiICsgKHhoci5zdGF0dXNUZXh0IHx8IFwiLVwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmVycm9yKHhoci5zdGF0dXMsIHhoci5zdGF0dXNUZXh0KTsvL+Wbnuiwg+ivt+axgueahOeKtuaAgeWSjOmUmeivr+S/oeaBr1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKHhociwgdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgLy/lhbPpl63igJzliqDovb3kv6Hmga/moYbigJ1cclxuICAgICAgICAgICAgICAgIE1vZGFsLnNob3dMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGlmIChcImNvbXBsZXRlXCIgaW4gb3B0aW9uICYmIG9wdGlvbi5jb21wbGV0ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmNvbXBsZXRlKHhociwgdHlwZSk7Ly/lm57osIPor7fmsYLnmoR4aHLkv6Hmga/lkoznsbvlnotcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8v5YWo6YCJ5ZKM5Y2V6YCJ55qE57uR5a6aXHJcbiAgICB2YXIgc2V0Q2hlY2tib3hMaXN0ZW5lciA9IGZ1bmN0aW9uIChhbGxDaGVjaywgcmFkaW9DaGVja3MpIHtcclxuICAgICAgICAvL+etm+mAieWNlemAieaMiemSrue7hFxyXG4gICAgICAgIHZhciByYWRpb1ZhbHVlRWxlcyA9ICQocmFkaW9DaGVja3MpO1xyXG4gICAgICAgIC8v54K55Ye75YWo6YCJ5pe277yM5ZCM57uE5oyJ6ZKu6KKr5ZCM5q2lXHJcbiAgICAgICAgJChkb2N1bWVudCkuZGVsZWdhdGUoYWxsQ2hlY2ssIFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAocmFkaW9WYWx1ZUVsZXMgJiYgcmFkaW9WYWx1ZUVsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX3IgPSAwOyBfciA8IHJhZGlvVmFsdWVFbGVzLmxlbmd0aDsgX3IrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhZGlvVmFsdWVFbGVzW19yXS5jaGVja2VkID0gJCh0aGlzKS5pcyhcIjpjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/ngrnlh7vljZXpgInmjInpkq7ml7bvvIxcclxuICAgICAgICAkKGRvY3VtZW50KS5kZWxlZ2F0ZShyYWRpb0NoZWNrcywgXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoYWxsQ2hlY2spWzBdLmNoZWNrZWQgPSAkKHJhZGlvQ2hlY2tzICsgXCI6Y2hlY2tlZFwiKS5sZW5ndGggPT0gJChyYWRpb0NoZWNrcykubGVuZ3RoO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciB1cmwgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBnZXQgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cChcIihefCYpXCIgKyBuYW1lICsgXCI9KFteJl0qKSgmfCQpXCIsIFwiaVwiKTtcclxuICAgICAgICAgICAgdmFyIHIgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKS5tYXRjaChyZWcpO1xyXG4gICAgICAgICAgICBpZiAociAhPSBudWxsKSByZXR1cm4gZGVjb2RlVVJJKHJbMl0pO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOagueaNruWPguaVsOWIl+ihqOmVv+W6pui/m+ihjOWIpOaWre+8jOWFvOWuuUlFOVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIHNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYgdHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ29iamVjdCcpIHsvL+S4gOS4quWvueixoe+8jOS9v+eUqGtleeagh+iusHZhbHVlXHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqID0gYXJndW1lbnRzWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgLCBzZWFyY2ggPSBsb2NhdGlvbi5zZWFyY2g7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBvIGluIG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkobykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoID0gY2hhbmdlVVJMS2V5VmFsdWUoc2VhcmNoLCBvLCBvYmpbb10pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgncHVzaFN0YXRlJyBpbiBoaXN0b3J5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgZG9jdW1lbnQudGl0bGUsIHNlYXJjaCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCdwdXNoU3RhdGUnIGluIEhpc3RvcnkpIHsvL2llOSDkuI3mlK/mjIFwdXNoU3RhdGXmlrnms5UsamF2YXNjcmlwdC5lanPkuK3mt7vliqBoaXN0b3J5Lmpz5a6M5oiQaHRtbDTlr7lwdXNoU3RhdGXnmoTmlK/mjIFcclxuICAgICAgICAgICAgICAgICAgICBIaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCBzZWFyY2gpOy8v6L+U5Zue6YeN5paw5p6E6YCg5ZCOc2VhcmNo5LiyXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgey8va2V5K3ZhbHVlXHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gYXJndW1lbnRzWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgLCB2YWx1ZSA9IGFyZ3VtZW50c1sxXTtcclxuICAgICAgICAgICAgICAgIGlmICgncHVzaFN0YXRlJyBpbiBoaXN0b3J5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgZG9jdW1lbnQudGl0bGUsIGNoYW5nZVVSTEtleVZhbHVlKGxvY2F0aW9uLnRvU3RyaW5nKCksIGtleSwgdmFsdWUpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJ3B1c2hTdGF0ZScgaW4gSGlzdG9yeSkgey8vaWU5IOS4jeaUr+aMgXB1c2hTdGF0ZeaWueazlSxqYXZhc2NyaXB0LmVqc+S4rea3u+WKoGhpc3RvcnkuanPlrozmiJBodG1sNOWvuXB1c2hTdGF0ZeeahOaUr+aMgVxyXG4gICAgICAgICAgICAgICAgICAgIEhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIGNoYW5nZVVSTEtleVZhbHVlKGxvY2F0aW9uLnNlYXJjaCwga2V5LCB2YWx1ZSkpOy8v6L+U5Zue6YeN5paw5p6E6YCg5ZCOc2VhcmNo5LiyXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2hhbmdlVVJMS2V5VmFsdWUodXJsLCBhcmcsIGFyZ192YWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXR0ZXJuID0gYXJnICsgJz0oW14mXSopJztcclxuICAgICAgICAgICAgICAgIHZhciByZXBsYWNlVGV4dCA9IGFyZyArICc9JyArIGFyZ192YWw7XHJcbiAgICAgICAgICAgICAgICBpZiAodXJsLm1hdGNoKHBhdHRlcm4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9ICcvKCcgKyBhcmcgKyAnPSkoW14mXSopL2dpJztcclxuICAgICAgICAgICAgICAgICAgICB0bXAgPSB1cmwucmVwbGFjZShldmFsKHRtcCksIHJlcGxhY2VUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG1wO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXJsLm1hdGNoKCdbXFw/XScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cmwgKyAnJicgKyByZXBsYWNlVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXJsICsgJz8nICsgcmVwbGFjZVRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBnZXQ6IGdldFxyXG4gICAgICAgICAgICAsIHNldDogc2V0XHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuXHJcbiAgICB2YXIgZm9ybWF0SW1hZ2U9ZnVuY3Rpb24gKHBhdGgsIHNpemUsIGVsZSkge1xyXG4gICAgICAgIGlmKHBhdGggaW5zdGFuY2VvZiAgQXJyYXkgJiYgcGF0aC5sZW5ndGg+MCl7XHJcbiAgICAgICAgICAgIHBhdGggPSBwYXRoWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgSU1BR0VfU0laRSA9IHtcclxuICAgICAgICAgICAgb3JpZ2luYWw6IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIlwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHhsYXJnZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfeGxhcmdlXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjY2MCo2NjBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsYXJnZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbGFyZ2VcIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiNDIwKjQyMFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1pZGRsZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbWlkZGxlXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjMwMCozMDBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzbWFsbDoge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfc21hbGxcIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiMjQwKjI0MFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxpdHRsZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbGl0dGxlXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjEyMCoxMjBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtaWNybzoge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbWljcm9cIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiNjAqNjBcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzaXplID0gSU1BR0VfU0laRVtzaXplIHx8IFwibWlkZGxlXCJdIHx8IElNQUdFX1NJWkUubWlkZGxlO1xyXG4gICAgICAgIHZhciBwYXRoVGVtcCA9IC9cXC5cXHcrPyQvLmV4ZWMocGF0aCk7XHJcbiAgICAgICAgaWYgKCFwYXRoVGVtcCkge1xyXG4gICAgICAgICAgICBwYXRoICs9IHNpemUucGF0aDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwYXRoID0gKHBhdGguc3Vic3RyKDAsIHBhdGhUZW1wLmluZGV4IHx8IHBhdGgubGVuZ3RoKSkgKyBzaXplLnBhdGggKyBwYXRoVGVtcFswXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVsZSAmJiBlbGUuYXR0cikge1xyXG4gICAgICAgICAgICBlbGUuYXR0cihcInNyY1wiLCBwYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9O1xyXG4gICAgLy/ph5Hpop3moLzlvI/ljJblsI/mlbDngrky5L2NXHJcbiAgICB2YXIgZm9ybWF0ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZm9ybWF0YW1vdW50ID0gZnVuY3Rpb24oX3ZhbHVlKXtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoX3ZhbHVlKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy/kvZPnp6/moLzlvI/ljJblsI/mlbDngrky5L2NXHJcbiAgICAgICAgdmFyIGZvcm1hdHZvbHVtZSA9IGZ1bmN0aW9uKF92YWx1ZSl7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KF92YWx1ZSkudG9GaXhlZCgzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8v6YeN6YeP5qC85byP5YyW5bCP5pWw54K5MuS9jVxyXG4gICAgICAgIHZhciBmb3JtYXR3ZWlnaHQgPSBmdW5jdGlvbihfdmFsdWUpe1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChfdmFsdWUpLnRvRml4ZWQoMyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmb3JtYXRhbW91bnQ6IGZvcm1hdGFtb3VudFxyXG4gICAgICAgICAgICAsIGZvcm1hdHZvbHVtZTogZm9ybWF0dm9sdW1lXHJcbiAgICAgICAgICAgICwgZm9ybWF0d2VpZ2h0OiBmb3JtYXR3ZWlnaHRcclxuICAgICAgICB9XHJcbiAgICB9KCkpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhamF4OiBhamF4XHJcbiAgICAgICAgLCBnZXRUaW10b3V0OiBfdGltZU91dFxyXG4gICAgICAgICwgc2V0Q2hlY2tib3hMaXN0ZW5lcjogc2V0Q2hlY2tib3hMaXN0ZW5lclxyXG4gICAgICAgICwgdXJsOiB1cmxcclxuICAgICAgICAsIGZvcm1hdEltYWdlOiBmb3JtYXRJbWFnZVxyXG4gICAgICAgICwgZm9ybWF0OiBmb3JtYXRcclxuICAgIH1cclxufSgpKTtcclxuXHJcbmV4cG9ydHMuYWpheCA9IEZ1bi5hamF4O1xyXG5leHBvcnRzLmdldFRpbWVvdXQgPSBGdW4uZ2V0VGltdG91dDtcclxuZXhwb3J0cy5zZXRDaGVja2JveExpc3RlbmVyID0gRnVuLnNldENoZWNrYm94TGlzdGVuZXI7XHJcbmV4cG9ydHMudXJsID0gRnVuLnVybDtcclxuZXhwb3J0cy5mb3JtYXRJbWFnZSA9IEZ1bi5mb3JtYXRJbWFnZTtcclxuZXhwb3J0cy5mb3JtYXQgPSBGdW4uZm9ybWF0O1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNy8xLzIzLlxyXG4gKi9cclxuJ3VzZSBzdHJpY3QnO1xyXG52YXIgTW9kYWwgPSByZXF1aXJlKCcuL21vZGFsJyk7XHJcbnZhciBnZW5lcmFsID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/ml7bpl7TmoLzlvI/ljJZcclxuICAgICAgICBEYXRlLnByb3RvdHlwZS5Gb3JtYXQgPSBmdW5jdGlvbiAoZm10KSB7IC8vYXV0aG9yOiBKZXJlbXl5eVxyXG4gICAgICAgICAgICB2YXIgbyA9IHtcclxuICAgICAgICAgICAgICAgIFwiTStcIjogdGhpcy5nZXRNb250aCgpICsgMSwgLy/mnIjku71cclxuICAgICAgICAgICAgICAgIFwiZCtcIjogdGhpcy5nZXREYXRlKCksIC8v5pelXHJcbiAgICAgICAgICAgICAgICBcImgrXCI6IHRoaXMuZ2V0SG91cnMoKSwgLy/lsI/ml7ZcclxuICAgICAgICAgICAgICAgIFwibStcIjogdGhpcy5nZXRNaW51dGVzKCksIC8v5YiGXHJcbiAgICAgICAgICAgICAgICBcInMrXCI6IHRoaXMuZ2V0U2Vjb25kcygpLCAvL+enklxyXG4gICAgICAgICAgICAgICAgXCJxK1wiOiBNYXRoLmZsb29yKCh0aGlzLmdldE1vbnRoKCkgKyAzKSAvIDMpLCAvL+Wto+W6plxyXG4gICAgICAgICAgICAgICAgXCJTXCI6IHRoaXMuZ2V0TWlsbGlzZWNvbmRzKCkgLy/mr6vnp5JcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKC8oeSspLy50ZXN0KGZtdCkpIGZtdCA9IGZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKHRoaXMuZ2V0RnVsbFllYXIoKSArIFwiXCIpLnN1YnN0cig0IC0gUmVnRXhwLiQxLmxlbmd0aCkpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIG8pXHJcbiAgICAgICAgICAgICAgICBpZiAobmV3IFJlZ0V4cChcIihcIiArIGsgKyBcIilcIikudGVzdChmbXQpKSBmbXQgPSBmbXQucmVwbGFjZShSZWdFeHAuJDEsIChSZWdFeHAuJDEubGVuZ3RoID09IDEpID8gKG9ba10pIDogKChcIjAwXCIgKyBvW2tdKS5zdWJzdHIoKFwiXCIgKyBvW2tdKS5sZW5ndGgpKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmbXQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy/kv67mlLnlr4bnoIFcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2NoYW5nZS1wd2QnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJy5jaGFuZ2UtYmFjaycpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICQoJy5jaGFuZ2UtcHdkJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+WFs+mXreS/ruaUueWvhueggVxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuY2xvc2UtcHdkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuY2hhbmdlLWJhY2snKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAkKCcuY2hhbmdlLXB3ZCcpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNlbnN1cmUtcHdkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCgnI25ldy1wYXNzd29yZCcpLnZhbCgpICE9ICQoJyNlbnN1cmUtcGFzc3dvcmQnKS52YWwoKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnI2Vuc3VyZS1wYXNzd29yZCcpLmFkZENsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjZW5zdXJlLXBhc3N3b3JkJykucmVtb3ZlQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiYWdlbnRNZW1iZXJJZFwiOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIFwib2xkUHdkXCI6ICQoJyNwYXNzd29yZCcpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwicHdkXCI6ICQoJyNuZXctcGFzc3dvcmQnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcInB3ZENvbmZpcm1cIjogJCgnI2Vuc3VyZS1wYXNzd29yZCcpLnZhbCgpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL2FjY291bnQvY2hhbmdlUHdkJ1xyXG4gICAgICAgICAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn5L+u5pS55oiQ5Yqf77yBJywgbnVsbCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jaGFuZ2UtYmFjaycpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNoYW5nZS1wd2QnKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5L+u5pS55aSx6LSl77yM6K+36YeN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcnVuOiBydW5cclxuICAgIH1cclxufSgpKTtcclxubW9kdWxlLmV4cG9ydHMuZ2VuZXJhbCA9IGdlbmVyYWw7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgenJ6IG9uIDIwMTYvMi8yNC5cclxuICogQHZlcnNpb24gMS4wLjAgY3JlYXRlZFxyXG4gKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbi8v5p6E6YCg5L+h5oGv5qGG5Li75L2TXHJcbnZhciBNb2RhbCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAvL+aehOmAoOWOn+Wni+exu1xyXG4gICAgZnVuY3Rpb24gTShtKSB7XHJcbiAgICAgICAgdGhpcy5zID0gbS5zOy8v5piv5ZCm5pi+56S6XHJcbiAgICAgICAgdGhpcy5pZCA9IG0uaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy/mnoTpgKDmoIflh4ZzaG935pa55rOV77yM55So5LqO57un5om/XHJcbiAgICBNLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmlkKTtcclxuICAgICAgICBpZiAoZWxlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnMgJiYgIWlzU2hvdygpKSB7Ly/mmL7npLrlvZPliY3pmpDol49cclxuICAgICAgICAgICAgICAgIGVsZS5jbGFzc05hbWUgPSBlbGUuY2xhc3NOYW1lLnJlcGxhY2UoXCJkcC1uXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnMgJiYgaXNTaG93KCkpIHsvL+makOiXj+W9k+WJjeaYvuekulxyXG4gICAgICAgICAgICAgICAgZWxlLmNsYXNzTmFtZSArPSBcIiBkcC1uXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/ljrvpmaTkuKTovrnnmoTnqbrmoLxcclxuICAgICAgICAgICAgZWxlLmNsYXNzTmFtZSA9IFN0cmluZyhlbGUuY2xhc3NOYW1lKS50cmltKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGlzU2hvdygpIHsvL+aYr+WQpuW3suaYvuekuu+8jOaXoGNsYXNz5pe25pi+56S6XHJcbiAgICAgICAgICAgIHJldHVybiBlbGUuY2xhc3NOYW1lLnNwbGl0KFwiZHAtblwiKS5sZW5ndGggPT0gMTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8v5Yqg6L295L+h5oGv5qGGXHJcbiAgICB2YXIgbG9hZGluZyA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/liJ3lp4vljJbnlJ/miJDliqDovb3kv6Hmga/moYZcclxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYWRpbmdfbW9kYWxfZWxlbWVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImxvYWRpbmdfbW9kYWxfZWxlbWVudFwiIGNsYXNzPVwibG9hZGluZy1tb2RhbC1ib2R5IGRwLW5cIj48ZGl2IGNsYXNzPVwiY292ZXJfbW9kYWxfZWxlbWVudFwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibG9hZGluZy1tb2RhbC1pbWFnZVwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibG9hZGluZy1tb2RhbC10ZXh0XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxoMj7njqnlkb3liqDovb3kuK3igKbigKY8L2gyPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL+aYvuekuuOAgemakOiXj+S/oeaBr+ahhlxyXG4gICAgICAgIHZhciBzaG93ID0gZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICAgICAgcyA9IHR5cGVvZiBzID09IFwidW5kZWZpbmVkXCIgPyB0cnVlIDogczsvL+aXoOWPguaVsOaYvuekuuS/oeaBr+ahhlxyXG4gICAgICAgICAgICB2YXIgbSA9IG5ldyBNKHtpZDogXCJsb2FkaW5nX21vZGFsX2VsZW1lbnRcIiwgczogc30pO1xyXG4gICAgICAgICAgICBtLnNob3coKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluaXQ6IGluaXRcclxuICAgICAgICAgICAgLCBzaG93OiBzaG93XHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuICAgIC8v5by55Ye65L+h5oGv5qGGXHJcbiAgICB2YXIgYWxlcnQgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxlcnRfbW9kYWxfZWxlbWVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImFsZXJ0X21vZGFsX2VsZW1lbnRcIiBjbGFzcz1cImFsZXJ0LW1vZGFsLWVsZW1lbnQgZHAtblwiPjxkaXYgY2xhc3M9XCJjb3Zlcl9tb2RhbF9lbGVtZW50XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhbGVydC1tb2RhbC1jb250ZW50XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhbGVydC1tb2RhbC1ib2R5XCI+PHNwYW4gY2xhc3M9XCJhbGVydC1tb2RhbC10ZXh0XCI+PC9zcGFuPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxlcnQtbW9kYWwtZm9vdGVyXCI+PGJ1dHRvbiBpZD1cImFsZXJ0X21vZGFsX2Nsb3NlXCIgY2xhc3M9XCJhbGVydC1tb2RhbC1idXR0b25cIj7lhbPpl608L2J1dHRvbj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHNob3cgPSBmdW5jdGlvbiAocykge1xyXG4gICAgICAgICAgICBzID0gdHlwZW9mIHMgPT0gXCJ1bmRlZmluZWRcIiA/IHRydWUgOiBzO1xyXG4gICAgICAgICAgICB2YXIgbSA9IG5ldyBNKHtpZDogXCJhbGVydF9tb2RhbF9lbGVtZW50XCIsIHM6IHN9KTtcclxuICAgICAgICAgICAgbS5zaG93KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDorr7nva7lvLnlh7rkv6Hmga/moYZcclxuICAgICAgICAgKiBAcGFyYW0gbXNnICAgICAgIOaYvuekuueahOS/oeaBr++8jOaUr+aMgWh0bWxcclxuICAgICAgICAgKiBAcGFyYW0gc2VkICAgICAgIOWAkuiuoeaXtuWFs+mXreaXtumXtO+8jOWNleS9je+8mnNlY29uZFxyXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayAg5YWz6Zet6Kem5Y+R5Zue6LCD5Ye95pWwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIHNldCA9IGZ1bmN0aW9uIChtc2csIHNlZCwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxlcnRfbW9kYWxfZWxlbWVudFwiKTtcclxuICAgICAgICAgICAgaWYgKG1zZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtc2cgPT09ICdvYmplY3QnKSB7Ly/lupTlr7nlkI7nq6/ov5Tlm57mj5DnpLrml7bkvb/nlKhPYmplY3TlsIHoo4VcclxuICAgICAgICAgICAgICAgICAgICBtc2cgPSBKU09OLnN0cmluZ2lmeShtc2cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoZWxlKXtcclxuICAgICAgICAgICAgICAgICAgICBlbGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImFsZXJ0LW1vZGFsLXRleHRcIilbMF0uaW5uZXJIVE1MID0gbXNnO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYWxlcnQtbW9kYWwtdGV4dFwiKVswXS5pbm5lckhUTUwgPSBtc2c7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNlZCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3coZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCAqIHNlZCk7XHJcbiAgICAgICAgICAgIH0vL+aXoOWFs+mXreaXtumXtOaIluiAheWFs+mXreaXtumXtOS4ujDvvIzkuI3oh6rliqjlhbPpl61cclxuICAgICAgICAgICAgLy9maXhtZSDkuovku7bnm5HlkKznmoRpZeWFvOWuueaAp1xyXG4gICAgICAgICAgICAvL+WFs+mXreaMiemSrueahOS6i+S7tuS+puWQrFxyXG4gICAgICAgICAgICAkKFwiI2FsZXJ0X21vZGFsX2Nsb3NlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAvL+mYu+atouS6i+S7tue7p+e7reS8oOmAklxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluaXQ6IGluaXRcclxuICAgICAgICAgICAgLCBzaG93OiBzaG93XHJcbiAgICAgICAgICAgICwgc2V0OiBzZXRcclxuICAgICAgICB9XHJcbiAgICB9KCkpO1xyXG4gICAgLy/pgInmi6nkv6Hmga/moYZcclxuICAgIHZhciBjb25maXJtID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbmZpcm1fbW9kYWxfZWxlbWVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImNvbmZpcm1fbW9kYWxfZWxlbWVudFwiIGNsYXNzPVwiY29uZmlybS1tb2RhbC1lbGVtZW50IGRwLW5cIj48ZGl2IGNsYXNzPVwiY292ZXJfbW9kYWxfZWxlbWVudFwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29uZmlybS1tb2RhbC1jb250ZW50XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgaWQ9XCJjb25maXJtX21vZGFsX2hlYWRlclwiIGNsYXNzPVwiY29uZmlybS1tb2RhbC1oZWFkZXIgZHAtblwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29uZmlybS1tb2RhbC1ib2R5XCI+PHNwYW4gaWQ9XCJjb25maXJtX21vZGFsX3RleHRcIiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtdGV4dFwiPjwvc3Bhbj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtZm9vdGVyXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJmb290ZXItYnV0dG9uLXN1Y2Nlc3NcIj48YnV0dG9uIGNsYXNzPVwiY29uZmlybS1tb2RhbC1idXR0b24gIG1vZGFsLXN1Y2Nlc3NcIiBkYXRhLWNvbmZpcm09XCJzdWNjZXNzXCI+56Gu6K6kPC9idXR0b24+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJmb290ZXItYnV0dG9uLWZhbHNlXCI+PGJ1dHRvbiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtYnV0dG9uXCIgZGF0YS1jb25maXJtPVwiZXJyb3JcIj7lj5bmtog8L2J1dHRvbj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHNob3cgPSBmdW5jdGlvbiAocykge1xyXG4gICAgICAgICAgICBzID0gdHlwZW9mIHMgPT0gXCJ1bmRlZmluZWRcIiA/IHRydWUgOiBzO1xyXG4gICAgICAgICAgICB2YXIgbSA9IG5ldyBNKHtpZDogXCJjb25maXJtX21vZGFsX2VsZW1lbnRcIiwgczogc30pO1xyXG4gICAgICAgICAgICBtLnNob3coKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOiuvue9rumAieaLqeS/oeaBr+ahhueahOWGheWuuVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb24gICAg6YWN572uXHJcbiAgICAgICAgICoge1xyXG4gICAgICAgICAqICAgICAgdGl0bGU6XCLlpLTpg6jmmL7npLrnmoTkv6Hmga9cIlxyXG4gICAgICAgICAqICAgICAgLHRleHQ6XCLmmL7npLrnmoTmj5DnpLrkv6Hmga9cIlxyXG4gICAgICAgICAqICAgICAgLHN1Y2Nlc3M6XCLngrnlh7vmiJDlip/lkI7nmoTlm57osINcIlxyXG4gICAgICAgICAqICAgICAgLGVycm9yOlwi54K55Ye75aSx6LSl5ZCO55qE5Zue6LCDXCJcclxuICAgICAgICAgKiAgICAgICxjb21wbGV0ZTpcIueCueWHu+aMiemSruWQjueahOaVtOS9k+Wbnuiwg1wiXHJcbiAgICAgICAgICogfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBiYXIgPSAwO1xyXG4gICAgICAgIHZhciBzZXQgPSBmdW5jdGlvbiAob3B0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmICghb3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFwidGl0bGVcIiBpbiBvcHRpb24gJiYgb3B0aW9uLnRpdGxlLmxlbmd0aCA+IDApIHsvL+acieWktOmDqO+8jOWImeaYvuekuuWktOmDqFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maXJtX21vZGFsX2hlYWRlclwiKS5pbm5lckhUTUwgPSBvcHRpb24udGl0bGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFwidGV4dFwiIGluIG9wdGlvbiAmJiBvcHRpb24udGV4dC5sZW5ndGggPiAwKSB7Ly/mnInlhoXlrrnvvIzliJnmmL7npLrmlbTkuKrpgInmi6nkv6Hmga/moYZcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlybV9tb2RhbF90ZXh0XCIpLmlubmVySFRNTCA9IG9wdGlvbi50ZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vZml4bWUg5LqL5Lu255uR5ZCs55qEaWXlhbzlrrnmgKdcclxuICAgICAgICAgICAgLy/lhbPpl63mjInpkq7nmoTkuovku7bkvqblkKxcclxuICAgICAgICAgICAgJChcIiNjb25maXJtX21vZGFsX2VsZW1lbnRcIikuZmluZChcIi5jb25maXJtLW1vZGFsLWJ1dHRvblwiKS5vZmYoXCJjbGlja1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vZml4bWUgLm9mZihcImNsaWNrXCIp55So5LqO6Ziy5q2i5aSa5qyh6Kem5Y+RPC0t5b6I546E5a2m77yM5oiR5Lmf5LiN55+l6YGT5Li65LuA5LmI77yM5L2G5piv6K+35LiN6KaB5L+u5pS544CCXHJcbiAgICAgICAgICAgICAgICB2YXIgYXRyID0gJCh0aGlzKS5hdHRyKFwiZGF0YS1jb25maXJtXCIpOy8v6YCJ5oup55qE5oyJ6ZKuXHJcbiAgICAgICAgICAgICAgICBiYXIrKztcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb24gJiYgYXRyIGluIG9wdGlvbiAmJiBvcHRpb25bYXRyXSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uW2F0cl0oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb24gJiYgXCJjb21wbGV0ZVwiIGluIG9wdGlvbiAmJiBvcHRpb24uY29tcGxldGUgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5jb21wbGV0ZSgpOy8v6Iul5pyJ5a6M5oiQ5Ye95pWw77yM5YiZ5omn6KGMXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Ugey8v5ZCm5YiZ77yM5YWz6Zet6YCJ5oup5qGGXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL+mYu+atouS6i+S7tue7p+e7reS8oOmAklxyXG4gICAgICAgICAgICAgICAgLy9yZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICAsIHNob3c6IHNob3dcclxuICAgICAgICAgICAgLCBzZXQ6IHNldFxyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICAvL+imhuebluWxglxyXG4gICAgdmFyIGNvdmVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdmVyX21vZGFsX2VsZW1lbnRcIikpIHtcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJjb3Zlcl9tb2RhbF9lbGVtZW50XCIgY2xhc3M9XCJjb3Zlci1tb2RhbC1lbGVtZW50IGRwLW5cIj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgaGlkZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb3Zlcl9tb2RhbF9lbGVtZW50XCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzaG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdmVyX21vZGFsX2VsZW1lbnRcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluaXQ6IGluaXRcclxuICAgICAgICAgICAgLCBzaG93OiBzaG93XHJcbiAgICAgICAgICAgICwgaGlkZTogaGlkZVxyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGluaXRMb2FkaW5nOiBsb2FkaW5nLmluaXRcclxuICAgICAgICAsIHNob3dMb2FkaW5nOiBsb2FkaW5nLnNob3dcclxuXHJcbiAgICAgICAgLCBpbml0QWxlcnQ6IGFsZXJ0LmluaXRcclxuICAgICAgICAsIHNob3dBbGVydDogYWxlcnQuc2hvd1xyXG4gICAgICAgICwgc2V0QWxlcnQ6IGFsZXJ0LnNldFxyXG5cclxuICAgICAgICAsIGluaXRDb25maXJtOiBjb25maXJtLmluaXRcclxuICAgICAgICAsIHNldENvbmZpcm06IGNvbmZpcm0uc2V0XHJcbiAgICAgICAgLCBzaG93Q29uZmlybTogY29uZmlybS5zaG93XHJcbiAgICAgICAgLCBpbml0Q292ZXI6IGNvdmVyLmluaXRcclxuICAgIH1cclxufSgpKTtcclxuXHJcbi8v6aG16Z2i5Yqg6L295a6M5q+V5ZCO55Sf5oiQ5Zub5Liq6Ieq5a6a5LmJ5qih5oCB5qGGXHJcbnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgLy/pobXpnaLliqDovb3ml7bnlJ/miJDkuIDkuKropobnm5blsYJcclxuICAgIE1vZGFsLmluaXRDb3ZlcigpO1xyXG4gICAgLy/pobXpnaLliqDovb3ml7bnlJ/miJDkuIDkuKrliqDovb3kv6Hmga/moYZcclxuICAgIE1vZGFsLmluaXRMb2FkaW5nKCk7XHJcbiAgICAvL+mhtemdouWKoOi9veaXtueUn+aIkOS4gOS4quW8ueWHuuS/oeaBr+ahhlxyXG4gICAgTW9kYWwuaW5pdEFsZXJ0KCk7XHJcbiAgICAvL+mhtemdouWKoOi9veaXtueUn+aIkOS4gOS4qumAieaLqeS/oeaBr+ahhlxyXG4gICAgTW9kYWwuaW5pdENvbmZpcm0oKTtcclxufSwgMTAwKTtcclxuXHJcblxyXG4vL+aKm+WHuuS4iuWxguiwg+eUqFxyXG5leHBvcnRzLnNob3dMb2FkaW5nID0gTW9kYWwuc2hvd0xvYWRpbmc7XHJcbmV4cG9ydHMuc2V0QWxlcnQgPSBNb2RhbC5zZXRBbGVydDtcclxuZXhwb3J0cy5zaG93QWxlcnQgPSBNb2RhbC5zaG93QWxlcnQ7XHJcbmV4cG9ydHMuc2V0Q29uZmlybSA9IE1vZGFsLnNldENvbmZpcm07XHJcbmV4cG9ydHMuc2hvd0NvbmZpcm0gPSBNb2RhbC5zaG93Q29uZmlybTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBBdXNlciBvbiAyMDE2LzEyLzYuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxudmFyIERhdGEgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGxpc3QgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL3VuZGVyd2F5L2xpc3QnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGJnID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci91bmRlcndheS9iZydcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgY3kgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL3VuZGVyd2F5L2N5J1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciB5cyA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvdW5kZXJ3YXkveXMnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGFkZERhdGEgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL3BlbmRpbmcvYWRkRGF0YSdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgZW5zdXJlRGF0YSA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvcGVuZGluZy9lbnN1cmVEYXRhJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBzdG9yYWdlID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci9wZW5kaW5nL3N0b3JhZ2UnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGNhbmNlbCA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvcGVuZGluZy9jYW5jZWwnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHlkU2VhcmNoID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci9wZW5kaW5nL3lkU2VhcmNoJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciB5ZEV4aXN0ID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci9wZW5kaW5nL3lkRXhpc3QnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHlkTmV3ID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci9wZW5kaW5nL3lkTmV3J1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBwcmljZUxpc3QgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL2FpcmxpbmUvcHJpY2UvbGlzdCdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBjcmVhdGVDaGFyZ2UgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL2RvbmUvY3JlYXRlQ2hhcmdlJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBnZXROYW1lID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9haXJsaW5lL21hbmFnZS9nZXROYW1lJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBnZXRDb2RlID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9haXJsaW5lL21hbmFnZS9nZXRDb2RlJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBzZWFyY2ggPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL3BlbmRpbmcvYWlybGluZVNlYXJjaCdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgZ3AgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL3VuZGVyd2F5L2dwJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciB0cmFuc2ZlciA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvc3RhZmYvbGlzdC90cmFuc2ZlcidcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgb3BMaXN0ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9zdGFmZi9saXN0L29wTGlzdCdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBsb2cgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL3BlbmRpbmcvbG9nJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbGlzdDogbGlzdFxyXG4gICAgICAgICwgYmc6IGJnXHJcbiAgICAgICAgLCBjeTogY3lcclxuICAgICAgICAsIHlzOiB5c1xyXG4gICAgICAgICwgYWRkRGF0YTogYWRkRGF0YVxyXG4gICAgICAgICwgZW5zdXJlRGF0YTogZW5zdXJlRGF0YVxyXG4gICAgICAgICwgc3RvcmFnZTogc3RvcmFnZVxyXG4gICAgICAgICwgY2FuY2VsOiBjYW5jZWxcclxuICAgICAgICAsIHlkU2VhcmNoOiB5ZFNlYXJjaFxyXG4gICAgICAgICwgeWRFeGlzdDogeWRFeGlzdFxyXG4gICAgICAgICwgeWROZXc6IHlkTmV3XHJcbiAgICAgICAgLCBwcmljZUxpc3Q6IHByaWNlTGlzdFxyXG4gICAgICAgICwgY3JlYXRlQ2hhcmdlOiBjcmVhdGVDaGFyZ2VcclxuICAgICAgICAsIGdldE5hbWU6IGdldE5hbWVcclxuICAgICAgICAsIGdldENvZGU6IGdldENvZGVcclxuICAgICAgICAsIHNlYXJjaDogc2VhcmNoXHJcbiAgICAgICAgLCBncDogZ3BcclxuICAgICAgICAsIHRyYW5zZmVyOiB0cmFuc2ZlclxyXG4gICAgICAgICwgb3BMaXN0OiBvcExpc3RcclxuICAgICAgICAsIGxvZzogbG9nXHJcbiAgICB9XHJcbn0oKSk7XHJcbm1vZHVsZS5leHBvcnRzLkRhdGEgPSBEYXRhOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplcmVteSBvbiAyMDE3LzIvNi5cclxuICovXHJcbid1c2Ugc3RyaWN0JztcclxudmFyIHVybCA9IHJlcXVpcmUoJy4uLy4uL2dlbmVyYWwvZnVuY3Rpb24nKS51cmxcclxuICAgICxteWZvcm1hdCA9IHJlcXVpcmUoJy4uLy4uL2dlbmVyYWwvZnVuY3Rpb24nKS5mb3JtYXQ7XHJcbnZhciBEb20gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGxpc3QgPSBmdW5jdGlvbiAoanNvbiwgcGFyYW0pIHtcclxuICAgICAgICB2YXIgZHQgPSB7fTtcclxuICAgICAgICB2YXIgc3RyID0gJyc7XHJcbiAgICAgICAgdmFyIG9wZXJhdGUgPSAnJztcclxuICAgICAgICBzdHIgKz0gJzx0aGVhZD4gPHRyPiA8dGQ+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwiY2hlY2stYWxsXCI+PC90ZD48dGQ+5Li75Y2V5Y+3L+iuouWNleWPtzwvdGQ+IDx0ZCBjb2xzcGFuPVwiM1wiPuiuouWNleS/oeaBrzwvdGQ+IDx0ZCBjb2xzcGFuPVwiNFwiPuiIquePreS/oeaBrzwvdGQ+IDx0ZCBjb2xzcGFuPVwiN1wiPui0p+eJqeS/oeaBrzwvdGQ+PC90cj4gPC90aGVhZD4nO1xyXG4gICAgICAgIGlmIChqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwICYmICdyZXNCb2R5JyBpbiBqc29uICYmIGpzb24ucmVzQm9keSAmJiAnc0xpc3QnIGluIGpzb24ucmVzQm9keSAmJiBqc29uLnJlc0JvZHkuc0xpc3QgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICBpZiAoanNvbi5yZXNCb2R5LnNMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcnIgPSBqc29uLnJlc0JvZHkuc0xpc3Q7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBhIGluIGFycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcnIuaGFzT3duUHJvcGVydHkoYSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9IHJlbmRlcihhcnJbYV0sIGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkdFthcnJbYV0ub3JkZXIub3JkZXJJZF0gPSBhcnJbYV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJC5idXJzdGVyKCQoXCIub3V0ZXItcGFnZXNcIiksIHBhcmFtLm9mZnNldCB8fCAwLCBqc29uLnJlc0JvZHkudG90YWxDb3VudCB8fCAwLCA1LCBwYXJhbS5saW1pdCB8fCAyMCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubGlzdC1jb3V0JykuaHRtbCgn5YWx5Li65oKo5om+5YiwICcgKyBqc29uLnJlc0JvZHkudG90YWxDb3VudCArICcg5p2h57uT5p6cJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSAnPHRyIGNsYXNzPVwid3JvbmdcIj48dGQgY29sc3Bhbj1cIjlcIj7mmoLml6DorqLljZXkv6Hmga/vvIzor7fmt7vliqDvvIE8L3RkPjwvdHI+JztcclxuICAgICAgICAgICAgICAgICQoJy5vdXRlci1wYWdlcycpLmh0bWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxpc3QtY291dCcpLmh0bWwoJ+WFseS4uuaCqOaJvuWIsCAwIOadoee7k+aenCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3RyID0gJzx0ciBjbGFzcz1cIndyb25nXCI+PHRkIGNvbHNwYW49XCI5XCI+6K+35rGC5aSx6LSl77yMPGEgaHJlZj1cIlwiPuivt+mHjeivle+8gTwvYT48L3RkPjwvdHI+JztcclxuICAgICAgICAgICAgJCgnLm91dGVyLXBhZ2VzJykuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgICQoJy5saXN0LWNvdXQnKS5odG1sKCflhbHkuLrmgqjmib7liLAgMCDmnaHnu5PmnpwnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVuZGVyKGQsIGluZGV4KSB7XHJcbiAgICAgICAgICAgIHZhciBvU3RyID0gJycsIHR5cGUgPSB1cmwuZ2V0KCd0cCcpIHx8ICdib29rJztcclxuICAgICAgICAgICAgdmFyIG8gPSBkO1xyXG4gICAgICAgICAgICBvU3RyICs9ICc8dHI+IDx0ZD4nICsgKG8ub3JkZXIuYWlyd2F5QmlsbE51bSB8fCAnLycpICsgJzxicj48YSBocmVmPVwiL29yZGVyL2RldGFpbD90cD11bmRlcndheSZpZD0nICsgby5vcmRlci5vcmRlcklkICsgJ1wiPicgKyBvLm9yZGVyLm9yZGVyTnVtICsgJzwvYT48L3RkPiA8dGQ+JyArIG8uY29tcGFueS5jb21wYW55TmFtZSArICc8L3RkPiAnICtcclxuICAgICAgICAgICAgICAgICc8dGQ+JyArIChvLm1lbWJlci5uYW1lIHx8ICcvJykgKyAnIDxici8+ICcgKyAoby5tZW1iZXIubW9iaWxlIHx8ICcvJykgKyAnPC90ZD4nICtcclxuICAgICAgICAgICAgICAgICcgPHRkPicgKyBnZXRTdHIodHlwZSwgby5vcmRlcikgKyAnPC90ZD4gPHRkPicgKyAoby5vcmRlci5kZXB0Q29kZSB8fCAnLycpICsgJzwvdGQ+IDx0ZD4nICsgKG8ub3JkZXIuZGVzdENvZGUgfHwgJy8nKSArICc8L3RkPiA8dGQ+JyArIChvLm9yZGVyLmFpckNvbXBhbnlDb2RlIHx8ICcvJykgKyAnPC90ZD4gPHRkPicgKyAobmV3IERhdGUoby5vcmRlci5mbGlnaHREYXRlLnJlcGxhY2UoLy0vZywgXCIvXCIpKS5Gb3JtYXQoJ3l5eXktTU0tZGQnKSkgKyAnPC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAnPHRkPicgKyBvLm9yZGVyLmNhcmdvLmNhcmdvQ291bnQgKyAnPC90ZD4gPHRkPicgKyBvLm9yZGVyLmNhcmdvLmNhcmdvV2VpZ2h0ICsgJzwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzx0ZD4nICsgbXlmb3JtYXQuZm9ybWF0dm9sdW1lKG8ub3JkZXIuY2FyZ28uY2FyZ29TaXplKSArICc8L3RkPiA8dGQ+PGRpdiBjbGFzcz1cInR3XCIgdGl0bGU9XCInK28ub3JkZXIuY2FyZ28uY2FyZ29OYW1lKydcIj4nICsgby5vcmRlci5jYXJnby5jYXJnb05hbWUgKyAnPC9kaXY+PC90ZD4gPHRkPicgKyAoby5vcmRlci5jYXJnby5jYXJnb1R5cGUgPT0gMSA/ICfmma7otKcnIDogJ+i9rOWFsycpICsgJzwvdGQ+IDx0ZD4nICsgKG5ldyBEYXRlKG5ldyBEYXRlKG8ub3JkZXIuZmxpZ2h0RGF0ZS5yZXBsYWNlKC8tL2csIFwiL1wiKSkuZ2V0VGltZSgpIC0gMjQgKiA2MCAqIDYwICogMTAwMCkuRm9ybWF0KCd5eXl5LU1NLWRkJykpICsgJyAxMjowMDwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAnPC90cj4nO1xyXG4gICAgICAgICAgICBvcGVyYXRlID0gJzx0ZCBjbGFzcz1cIm9wdC10ZFwiIHJvd3NwYW49XCIyXCIgZGF0YS1qY2JoPVwiJyArIG8ub3JkZXIud2FyZWhvdXNlRW50cnlOdW0gKyAnXCIgZGF0YS1raG1jPVwiJyArIChvLmNvbXBhbnkuY29tcGFueU5hbWUgfHwgJy8nKSArICdcIiBkYXRhLWx4cj1cIicgKyAoby5jb21wYW55LmNvbXBhbnlDb250YWN0IHx8ICcvJykgKyAnXCI+JyArXHJcbiAgICAgICAgICAgICAgICAnIDxhIGNsYXNzPVwic2hvdy1vcHRcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPuaTjeS9nDxzcGFuIGNsYXNzPVwiY2FyZXRcIj48L3NwYW4+PC9hPiA8ZGl2IGNsYXNzPVwib3B0LXBhcnQgZHAtblwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj4nICtcclxuICAgICAgICAgICAgICAgICc8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwic2hvdy1jaGFuZ2VcIiBkYXRhLWlkPVwiJyArIG8ub3JkZXIub3JkZXJJZCArICdcIj7mlLnphY08L2E+JyArXHJcbiAgICAgICAgICAgICAgICAoby5vcmRlci5lbnRyeVN0YXRlID09IDAgP1xyXG4gICAgICAgICAgICAgICAgICAgICcnXHJcbiAgICAgICAgICAgICAgIC8vICc8YSBocmVmPVwiL29yZGVyL3N0b3JhZ2U/aWQ9JyArIG8ub3JkZXIub3JkZXJJZCArICcmbj0nICsgKG8uY29tcGFueS5jb21wYW55TmFtZSB8fCAnLycpICsgJyZjPScgKyAoby5jb21wYW55LmNvbXBhbnlDb250YWN0IHx8ICcvJykgKyAnXCIgZGF0YS1pZD1cIicgKyBvLm9yZGVyLm9yZGVySWQgKyAnXCI+6L+b5LuT5pWw5o2uPC9hPidcclxuICAgICAgICAgICAgICAgICAgICA6IChvLm9yZGVyLmVudHJ5U3RhdGUgPT0gMSA/XHJcbiAgICAgICAgICAgICAgICAgICAgLy8nPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBjbGFzcz1cImFkZC1kYXRhXCIgZGF0YS1pZD1cIicgKyBvLm9yZGVyLm9yZGVySWQgKyAnXCI+5b2V5YWl6L+b5LuT5pWw5o2uPC9hPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICcnXHJcbiAgICAgICAgICAgICAgIC8vICc8YSBocmVmPVwiL29yZGVyL3N0b3JhZ2U/aWQ9JyArIG8ub3JkZXIub3JkZXJJZCArICcmbj0nICsgKG8uY29tcGFueS5jb21wYW55TmFtZSB8fCAnLycpICsgJyZjPScgKyAoby5jb21wYW55LmNvbXBhbnlDb250YWN0IHx8ICcvJykgKyAnXCIgZGF0YS1pZD1cIicgKyBvLm9yZGVyLm9yZGVySWQgKyAnXCI+6L+b5LuT5pWw5o2uPC9hPidcclxuICAgICAgICAgICAgICAgICAgICA6ICc8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwic2hvdy1iZ1wiIGRhdGEtaWQ9XCInICsgby5vcmRlci5vcmRlcklkICsgJ1wiPuaKpeWFszwvYT4nKSkgK1xyXG4gICAgICAgICAgICAgICAgICAgIC8vKG8ub3JkZXIuZGVjbGFyZVN0YXRlID09IDIgPyAnPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBjbGFzcz1cInNob3ctY3lcIiBkYXRhLWlkPVwiJyArIG8ub3JkZXIub3JkZXJJZCArICdcIj7mn6Xpqow8L2E+JyA6ICcnKSArXHJcbiAgICAgICAgICAgICAgICAoby5vcmRlci5jaGVja1N0YXRlID09IDIgfHwgby5vcmRlci5jaGVja1N0YXRlID09IDMgP1xyXG4gICAgICAgICAgICAgICAgJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJzaG93LXpkXCIgZGF0YS1pZD1cIicgKyBvLm9yZGVyLm9yZGVySWQgKyAnXCI+5Yi25Y2VPC9hPicgOiAnJykgK1xyXG4gICAgICAgICAgICAgICAgJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJyZWZ1c2VcIiBkYXRhLWlkPVwiJyArIG8ub3JkZXIub3JkZXJJZCArICdcIj7lj5bmtog8L2E+JyArXHJcbiAgICAgICAgICAgICAgICAoby5vcmRlci5kZWNsYXJlU3RhdGUgPT0gNSA/ICc8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwic2hvdy15c1wiIGRhdGEtaWQ9XCInICsgby5vcmRlci5vcmRlcklkICsgJ1wiPui/kOi+kzwvYT4nIDogJycpICtcclxuICAgICAgICAgICAgICAgICc8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwic2hvdy1sb2dcIiBkYXRhLWlkPVwiJyArIG8ub3JkZXIub3JkZXJJZCArICdcIj7mk43kvZzml6Xlv5c8L2E+JyArXHJcbiAgICAgICAgICAgICAgICAnPC9kaXY+IDwvdGQ+JztcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAnPHRib2R5Pjx0cj48dGQgY2xhc3M9XCJzaG9ydC10ZFwiIGNvbHNwYW49XCIxNVwiPjwvdGQ+PC90cj48L3Rib2R5Pjx0Ym9keSBjbGFzcz1cImRhdGEtdGJkXCI+IDx0cj48dGQgcm93c3Bhbj1cIjJcIiBzdHlsZT1cInBhZGRpbmc6IDAgNXB4O1wiPjxpbnB1dCBkYXRhLWlkPVwiJyArIG8ub3JkZXIub3JkZXJJZCArICdcIiB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwibGlzdC1zZ1wiPjwvdGQ+IDx0ZCBjbGFzcz1cIicgKyAoby5vcmRlci5vcmRlclR5cGUgPT0gMSA/ICdiZy1wJyA6IChvLm9yZGVyLmFsbG93Q2xlYXJlbmNlID8gJ2JnLXEnIDogJ2JnLXknKSkgKyAnXCI+JyArIChvLm9yZGVyLm9yZGVyVHlwZSA9PSAxID8gJ+aciOe7kycgOiAn56Wo57uTJykgKyAoZC5hZ2VudCA/IChvLmFnZW50Lm5hbWUgPyAnJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7JyArIG8uYWdlbnQubmFtZSA6ICcmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsvJykgOiAnJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7LycpICsgJzwvdGQ+IDx0ZCBjbGFzcz1cImJnLWdcIj7lrqLmiLflhazlj7g8L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgJyA8dGQgY2xhc3M9XCJiZy1nXCI+6IGU57O75Lq6L+aWueW8jzwvdGQ+IDx0ZCBjbGFzcz1cImJnLWdcIj4nICsgZ2V0VHAodHlwZSkgKyAnPC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAnPHRkIGNsYXNzPVwiYmctZ1wiPui1t+Wni+a4rzwvdGQ+IDx0ZCBjbGFzcz1cImJnLWdcIj7nm67nmoTmuK88L3RkPiAnICtcclxuICAgICAgICAgICAgICAgICc8dGQgY2xhc3M9XCJiZy1nXCI+6Iiq56m65YWs5Y+4PC90ZD4gPHRkIGNsYXNzPVwiYmctZ1wiPuiIquePreaXpeacnzwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzx0ZCBjbGFzcz1cImJnLWdcIj7mlbDph4/vvIhQQ1PvvIk8L3RkPiA8dGQgY2xhc3M9XCJiZy1nXCI+6YeN6YeP77yIS0dT77yJPC90ZD4gPHRkIGNsYXNzPVwiYmctZ1wiPuS9k+enr++8iENCTe+8iTwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzx0ZCBjbGFzcz1cImJnLWdcIj7lk4HlkI08L3RkPiA8dGQgY2xhc3M9XCJiZy1nXCI+57G75Z6LPC90ZD4gPHRkIGNsYXNzPVwiYmctZ1wiPuacgOaZmui/m+S7kzwvdGQ+JyArIG9wZXJhdGUgK1xyXG4gICAgICAgICAgICAgICAgJzwvdHI+ICcgKyBvU3RyICsgJyA8L3Rib2R5PidcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFN0cih0eXBlLCBkKSB7XHJcbiAgICAgICAgICAgIHZhciBzdHIgPSAnJztcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2Jvb2snKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGQuYm9va2luZ1N0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5pyq6K6i6IixJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5bey6K6i6IixJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAtMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gJ+iuouiIseWksei0pSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gJ+W3suaUuemFjSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgLTI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICfmlLnphY3kuK0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdlbnRyeScpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoZC5lbnRyeVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5b6F6L+b5LuTJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5bey6L+b5LuT77yM5pyq56Gu6K6kJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5bey56Gu6K6kJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnZGVjbGFyZScpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoZC5kZWNsYXJlU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICfmnKrmiqXlhbMnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICfpooTlrqHkuK0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICfpooTlrqHpgJrov4cnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICflvIDlp4vmiqXlhbMnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICfmiqXlhbPkuK0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICfmiqXlhbPlrozmiJAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIC02OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5oql5YWz5aSx6LSlJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAtNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gJ+mAgOWFs+S4rSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgLTU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICfpgIDlhbPlrozmiJAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdjaGVjaycpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoZC5jaGVja1N0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5b6F5p+l6aqMJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5p+l6aqM5LitJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn55u05o6l5pS+6KGMJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5p+l6aqM5pS+6KGMJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5p+l6aqM5omj6LSnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAndHJhbnNmb3JtJykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChkLnRyYW5zU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICflvoXlh7rlupMnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICflt7Llh7rlupPvvIzlvoXotbfpo54nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICflt7Lotbfpo54nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICflt7LliLDovr4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0VHAodHlwZSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb2snOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAn6K6i6Iix54q25oCBJztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2VudHJ5JzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+i/m+S7k+eKtuaAgSc7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdkZWNsYXJlJzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+aKpeWFs+eKtuaAgSc7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdjaGVjayc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICfmn6XpqoznirbmgIEnO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndHJhbnNmb3JtJzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+i/kOi+k+eKtuaAgSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoJy5vdXRlci10YicpLmh0bWwoc3RyKTtcclxuICAgICAgICByZXR1cm4gZHQ7XHJcbiAgICB9O1xyXG4gICAgdmFyIHJlbmRlclRyID0gZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICB2YXIgc3RyID0gJyc7XHJcbiAgICAgICAgaWYgKGpzb24gJiYgJ2VudHJ5TGlzdCcgaW4ganNvbiAmJiBqc29uLmVudHJ5TGlzdCBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0ID0ganNvbi5lbnRyeUxpc3Q7XHJcbiAgICAgICAgICAgIGlmIChsaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGwgaW4gbGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaXN0Lmhhc093blByb3BlcnR5KGwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gbGlzdFtsXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9IHJlbmRlcihkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzdHIgKz0gJzx0cj48dGQ+5oC76K6hPC90ZD48dGQ+JyArIGpzb24udG90YWxDb3VudCArICc8L3RkPjx0ZD4nICsganNvbi50b3RhbFdlaWdodCArICc8L3RkPjx0ZD4nICsgIG15Zm9ybWF0LmZvcm1hdHZvbHVtZShqc29uLnRvdGFsU2l6ZSkgKyAnPC90ZD4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPHRkPi88L3RkPjx0ZD4vPC90ZD48dGQ+LzwvdGQ+PHRkPi88L3RkPjx0ZD4nICsganNvbi50b3RhbERhbWFnZSArICc8L3RkPjx0ZD4nICsganNvbi50b3RhbFRyYW5zZm9ybSArICc8L3RkPjx0ZD4nICsganNvbi50b3RhbERhbXAgKyAnPC90ZD48dGQ+JyArIGpzb24udG90YWxPdGhlciArICc8L3RkPjx0ZD4vPC90ZD48L3RyPidcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN0ciA9ICc8dHI+PHRkIGNvbHNwYW49XCIxM1wiIFwiPuaaguaXoOi/m+S7k+aVsOaNru+8jOivt+a3u+WKoO+8gTwvdGQ+PC90cj4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3RyID0gJzx0cj48dGQgY29sc3Bhbj1cIjEzXCIgXCI+6I635Y+W5pWw5o2u5aSx6LSl77yM6K+36YeN6K+V77yBPC90ZD48L3RyPic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKCcuZW5zdXJlLXRiJykuZmluZCgndGJvZHknKS5odG1sKHN0cik7XHJcbiAgICAgICAgZnVuY3Rpb24gcmVuZGVyKGQpIHtcclxuICAgICAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgICAgICB2YXIgYXJyID0gZC5lbnRyeURldGFpbCB8fCBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgYSBpbiBhcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhcnIuaGFzT3duUHJvcGVydHkoYSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZHQgPSBhcnJbYV07XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyICs9ICc8dHI+PHRkPicgKyAoYSA9PSAwID8gZC5lbnRyeU51bSA6ICcnKSArICc8L3RkPjx0ZD4nICsgZHQuaXRlbUNvdW50ICsgJzwvdGQ+PHRkPi88L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHRkPicgKyAgbXlmb3JtYXQuZm9ybWF0dm9sdW1lKChkdC5pdGVtQ291bnQgKiBkdC5pdGVtSGVpZ2h0ICogZHQuaXRlbUxlbmd0aCAqIGR0Lml0ZW1XaWR0aCkgLyAxMDAwMDAwKSArICc8L3RkPjx0ZD4nICsgZHQuaXRlbUxlbmd0aCArICc8L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHRkPicgKyBkdC5pdGVtV2lkdGggKyAnPC90ZD48dGQ+JyArIGR0Lml0ZW1IZWlnaHQgKyAnPC90ZD48dGQ+LzwvdGQ+PHRkPi88L3RkPjx0ZD4vPC90ZD48dGQ+LzwvdGQ+PHRkPi88L3RkPjx0ZD4nICsgKGEgPT0gMCA/IG5ldyBEYXRlKGQuc3RvcmFnZVRpbWUpLkZvcm1hdCgneXl5eS1NTS1kZCBoaDptbScpIDogJycpICsgJzwvdGQ+PC90cj4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0ciArPSAnPHRyPjx0ZD7lsI/orqE8L3RkPjx0ZD4nICsgZC5zdG9yYWdlQ291bnQgKyAnPC90ZD48dGQ+JyArIGQuc3RvcmFnZVdlaWdodCArICc8L3RkPjx0ZD4nICsgIG15Zm9ybWF0LmZvcm1hdHZvbHVtZShkLnN0b3JhZ2VTaXplKSArICc8L3RkPjx0ZD4vPC90ZD48dGQ+LzwvdGQ+PHRkPi88L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgJzx0ZD4nICsgZC5wYWNrYWdlVHlwZSArICc8L3RkPjx0ZD4nICsgZC5kYW1hZ2VDb3VudCArICc8L3RkPjx0ZD4nICsgZC50cmFuc2Zvcm1Db3VudCArICc8L3RkPjx0ZD4nICsgZC5kYW1wQ291bnQgKyAnPC90ZD48dGQ+JyArIGQub3RoZXJDb3VudCArICc8L3RkPjx0ZD48L3RkPjwvdHI+JztcclxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdmFyIGlubmVyTGlzdCA9IGZ1bmN0aW9uIChqc29uLCBwYXJhbSkge1xyXG4gICAgICAgIHZhciBzdHIgPSAnJztcclxuICAgICAgICBpZiAoanNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCAmJiAncmVzQm9keScgaW4ganNvbiAmJiBqc29uLnJlc0JvZHkgJiYgJ3NMaXN0JyBpbiBqc29uLnJlc0JvZHkgJiYganNvbi5yZXNCb2R5LnNMaXN0IGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgaWYgKGpzb24ucmVzQm9keS5zTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0ganNvbi5yZXNCb2R5LnNMaXN0O1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYSBpbiBhcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyLmhhc093blByb3BlcnR5KGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSByZW5kZXIoYXJyW2FdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkLmJ1cnN0ZXIoJChcIi5ncC1wYWdlc1wiKSwgcGFyYW0ub2Zmc2V0IHx8IDAsIGpzb24ucmVzQm9keS50b3RhbENvdW50IHx8IDAsIDUsIHBhcmFtLmxpbWl0IHx8IDIwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN0ciA9ICc8dHIgY2xhc3M9XCJ3cm9uZ1wiPjx0ZCBjb2xzcGFuPVwiOVwiPuaaguaXoOaQnOe0ouS/oeaBr++8gTwvdGQ+PC90cj4nO1xyXG4gICAgICAgICAgICAgICAgJCgnLmdwLXBhZ2VzJykuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdHIgPSAnPHRyIGNsYXNzPVwid3JvbmdcIj48dGQgY29sc3Bhbj1cIjlcIj7or7fmsYLlpLHotKXvvIw8YSBocmVmPVwiXCI+6K+36YeN6K+V77yBPC9hPjwvdGQ+PC90cj4nO1xyXG4gICAgICAgICAgICAkKCcuZ3AtcGFnZXMnKS5odG1sKCcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVuZGVyKGQpIHtcclxuICAgICAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgICAgICBmb3IgKHZhciB0IGluIGQudHJhbnNQb3J0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZC50cmFuc1BvcnQuaGFzT3duUHJvcGVydHkodCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGQudHJhbnNQb3J0W3RdO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0ciArPSBzLnBvcnRDb2RlICsgKHQgPT0gZC50cmFuc1BvcnQubGVuZ3RoIC0gMSA/ICcnIDogJyAtPiAnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJyA8dHI+IDx0ZD48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cImktc2dcIiBkYXRhLWlkPVwiJyArIGQuYWlyd2F5SWQgKyAnXCIvPjwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzx0ZD4nICsgZC5haXJDb21wYW55Q29kZSArICc8L3RkPiA8dGQ+JyArIHN0ciArICc8L3RkPiA8dGQ+JyArIGQuYWlyd2F5UHJpY2UucmF0ZVswXS5wb2xpY3lbJzQ1J10gKyAnPC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAnPHRkPicgKyBkLmFpcndheVByaWNlLnJhdGVbMF0ucG9saWN5WycxMDAnXSArICc8L3RkPiA8dGQ+JyArIGQuYWlyd2F5UHJpY2UucmF0ZVswXS5wb2xpY3lbJzMwMCddICsgJzwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAnIDx0ZD4nICsgZC5haXJ3YXlQcmljZS5yYXRlWzBdLnBvbGljeVsnNTAwJ10gKyAnPC90ZD4gPHRkPicgKyBkLmFpcndheVByaWNlLnJhdGVbMF0ucG9saWN5WycxMDAwJ10gKyAnPC90ZD4nXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnLmdwLXRiJykuZmluZCgndGJvZHknKS5odG1sKHN0cik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBsaXN0OiBsaXN0XHJcbiAgICAgICAgLCByZW5kZXJUcjogcmVuZGVyVHJcclxuICAgICAgICAsIGlubmVyTGlzdDogaW5uZXJMaXN0XHJcbiAgICB9XHJcbn0oKSk7XHJcbm1vZHVsZS5leHBvcnRzLkRvbSA9IERvbTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNy8yLzYuXHJcbiAqL1xyXG4ndXNlIHN0cmljdCc7XHJcbid1c2Ugc3RyaWN0JztcclxudmFyIExpc3RlbmVyID0gcmVxdWlyZSgnLi9saXN0ZW5lcicpLkxpc3RlbmVyO1xyXG52YXIgZ2VuZXJhbCA9IHJlcXVpcmUoJy4uLy4uL2dlbmVyYWwvZ2VuZXJhbCcpLmdlbmVyYWw7XHJcbmdlbmVyYWwucnVuKCk7XHJcbkxpc3RlbmVyLnJ1bigpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplcmVteSBvbiAyMDE3LzEvNS5cclxuICovXHJcbid1c2Ugc3RyaWN0JztcclxucmVxdWlyZSgnLi4vLi4vZ2VuZXJhbC9idXJzdGVyJyk7XHJcbnZhciB1cmwgPSByZXF1aXJlKCcuLi8uLi9nZW5lcmFsL2Z1bmN0aW9uJykudXJsXHJcbiAgICAsbXlmb3JtYXQgPSByZXF1aXJlKCcuLi8uLi9nZW5lcmFsL2Z1bmN0aW9uJykuZm9ybWF0XHJcbiAgICAsIE1vZGFsID0gcmVxdWlyZSgnLi4vLi4vZ2VuZXJhbC9tb2RhbCcpO1xyXG52YXIgRGF0YSA9IHJlcXVpcmUoJy4vZGF0YScpLkRhdGFcclxuICAgICwgRG9tID0gcmVxdWlyZSgnLi9kb20nKS5Eb207XHJcbnZhciBMaXN0ZW5lciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAvL+WtmOaUvum7mOiupOi0ueeUqOaooeadv1xyXG4gICAgdmFyIGRlZmF1bHRQcmljZSA9IHt9O1xyXG4gICAgdmFyIHN0b3BnYXAgPSB7fTtcclxuICAgIHZhciBwcm9jZXNzID0ge307XHJcbiAgICB2YXIgb3BlcmF0ZUlkLCB5ZElkO1xyXG4gICAgLy/lrZjmlL7ov5DljZXliJfooahcclxuICAgIHZhciB5ZExpc3QgPSB7fTtcclxuICAgIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNob3ctbG9nJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBEYXRhLmxvZyh7aWQ6ICQodGhpcykuZGF0YSgnaWQnKX0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQm9keScgaW4ganNvbiAmJiBqc29uLnJlc0JvZHkgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXJyID0ganNvbi5yZXNCb2R5O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcnIubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhIGluIGFycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyci5oYXNPd25Qcm9wZXJ0eShhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBhcnJbYV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChkLm9wZXJhdG9yVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ+WuouaItyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICfotKfku6MnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAn5oql5YWz6KGMJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzx0cj48dGQ+JyArIChuZXcgRGF0ZShkLmNyZWF0ZUR0KS5Gb3JtYXQoJ3l5eXktTU0tZGQgaGg6bW0nKSkgKyAnPC90ZD48dGQ+JyArIGQub3JkZXJOdW0gKyAnPC90ZD4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZD4nICsgdHlwZSArICc8L3RkPjx0ZD4nICsgZC5vcGVyYXRvcklkICsgJzwvdGQ+PHRkIGNsYXNzPVwibG9uZ1wiPicgKyBkLnJlbWFyayArICc8L3RkPjwvdHI+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gJzx0cj48dGQgY29sc3Bhbj1cIjVcIj7mmoLml6Dmk43kvZzml6Xlv5c8L3RkPjwvdHI+J1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkKCcubG9nLXBhcnQnKS5maW5kKCd0Ym9keScpLmh0bWwoc3RyKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubG9nLXBhcnQnKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+iOt+WPluWksei0pe+8jOivt+mHjeivlScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2NoZWNrLWFsbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdW25hbWU9XCJsaXN0LXNnXCJdJykucHJvcCgnY2hlY2tlZCcsICQodGhpcykucHJvcCgnY2hlY2tlZCcpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3NlYXJjaCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdXJsLnNldCgnb2Zmc2V0JywgMCk7XHJcbiAgICAgICAgICAgIGluaXQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignbW91c2VlbnRlcicsICcub3B0LXRkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcub3B0LXBhcnQnKS5mYWRlSW4oMjAwKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignbW91c2VsZWF2ZScsICcub3B0LXRkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcub3B0LXBhcnQnKS5mYWRlT3V0KDIwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zaG93LXpkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzdG9wZ2FwID0gcHJvY2Vzc1skKHRoaXMpLmRhdGEoJ2lkJyldIHx8IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChzdG9wZ2FwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gJCgnLnpkLXBhcnQnKVxyXG4gICAgICAgICAgICAgICAgICAgICwgYyA9IHN0b3BnYXAuY29tcGFueVxyXG4gICAgICAgICAgICAgICAgICAgICwgbyA9IHN0b3BnYXAub3JkZXI7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9ICcnLCBzdHIgPSAnJztcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoby5jYXJnby5jYXJnb1R5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAn57q4566xJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ+acqOeusSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICfljbcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAn5omY55uYJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKCcuZGRoJykuaHRtbChvLm9yZGVyTnVtIHx8ICcvJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcua2gnKS5odG1sKGMuY29tcGFueU5hbWUgfHwgJy8nKTtcclxuICAgICAgICAgICAgICAgICQoJy5xc2cnKS5odG1sKG8uZGVwdENvZGUgfHwgJy8nKTtcclxuICAgICAgICAgICAgICAgICQoJy5tZGcnKS5odG1sKG8uZGVzdENvZGUgfHwgJy8nKTtcclxuICAgICAgICAgICAgICAgICQoJy5oa2dzJykuaHRtbChvLmFpckNvbXBhbnlDb2RlIHx8ICcvJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcucWZycScpLmh0bWwoby5mbGlnaHREYXRlID8gbmV3IERhdGUoby5mbGlnaHREYXRlLnJlcGxhY2UoLy0vZywgXCIvXCIpKS5Gb3JtYXQoJ3l5eXktTU0tZGQnKSA6ICcvJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuaGJoJykuaHRtbChvLmFpcmxpbmVJbmZvIHx8ICcvJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcucG0nKS5odG1sKG8uY2FyZ28uY2FyZ29OYW1lIHx8ICcvJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubHgnKS5odG1sKHR5cGUgfHwgJy8nKTtcclxuICAgICAgICAgICAgICAgICQoJy53dGJnJykuaHRtbChvLmNhcmdvLmlzQnVsa3lDYXJnbyA/ICfmmK8nIDogJ+WQpicpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmpzJykuaHRtbChvLmNhcmdvLmNhcmdvQ291bnQgKyAnUENTJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcudGonKS5odG1sKG15Zm9ybWF0LmZvcm1hdHZvbHVtZShvLmNhcmdvLmNhcmdvU2l6ZSkgKyAnQ0JNJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuemwnKS5odG1sKG8uY2FyZ28uY2FyZ29XZWlnaHQgKyAnS0dT77yI6K6h6LS56YeN6YeP77yaJyArIG8uY2FyZ28uY2hhcmdpbmdXZWlnaHQgKyAnS0dT77yJJyk7XHJcbiAgICAgICAgICAgICAgICBzdHIgKz0gJzx0ciBjbGFzcz1cImRhdGFcIj4gPHRkPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZnltdFwiIHJlYWRvbmx5IHZhbHVlPVwi56m66L+Q6LS5XCIvPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L3RkPiA8dGQ+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJpcC1kalwiIHZhbHVlPVwiJyArIG8uY2hhcmdpbmdQcmljZSArICdcIi8+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvdGQ+IDx0ZD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImlwLXpsXCIgdmFsdWU9XCInICsgby5jaGFyZ2luZ1dlaWdodCArICdcIi8+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvdGQ+IDx0ZD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInR0cFwiIHJlYWRvbmx5IHZhbHVlPVwiJyArIG8uYWlyd2F5RmVlICsgJ1wiLz4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC90ZD4gPHRkPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIj48L3NwYW4+PC90ZD48L3RyPic7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzIGluIG8uc2VydmljZUZlZUxpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoby5zZXJ2aWNlRmVlTGlzdC5oYXNPd25Qcm9wZXJ0eShzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IG8uc2VydmljZUZlZUxpc3Rbc107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnPHRyIGNsYXNzPVwiZGF0YVwiPiA8dGQ+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmeW10XCIgcmVhZG9ubHkgdmFsdWU9XCInICsgZC5pdGVtTmFtZSArICdcIi8+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC90ZD4gPHRkPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaXAtZGpcIiB2YWx1ZT1cIicgKyBkLml0ZW1QcmljZSArICdcIi8+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC90ZD4gPHRkPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaXAtemxcIiB2YWx1ZT1cIicgKyBkLml0ZW1Vbml0ICsgJ1wiLz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L3RkPiA8dGQ+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJ0dHBcIiByZWFkb25seSB2YWx1ZT1cIicgKyBkLml0ZW1Ub3RhbCArICdcIi8+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC90ZD4gPHRkPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIj48L3NwYW4+PC90ZD48L3RyPic7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc3RyICs9ICc8dHIgY2xhc3M9XCJ0ci1hZGRcIj4gPHRkPjwvdGQ+IDx0ZD48L3RkPiA8dGQ+PC90ZD4gPHRkPjwvdGQ+IDx0ZD48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcGx1c1wiPjwvc3Bhbj48L3RkPiA8L3RyPic7XHJcbiAgICAgICAgICAgICAgICBlbGUuZmluZCgnLnpkLXRiJykuZmluZCgndGJvZHknKS5odG1sKHN0cik7XHJcbiAgICAgICAgICAgICAgICBlbGUucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcub3V0ZXItcGFnZXMgLnBhZ2VzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB1cmwuc2V0KCdvZmZzZXQnLCAkKHRoaXMpLmRhdGEoJ29mZnNldCcpKTtcclxuICAgICAgICAgICAgaW5pdCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuY2xvc2UtYnRuJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuYWxlcnQtcGFydCcpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNlbC1oZWFkIHAnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHVybC5zZXQoJ3RwJywgJCh0aGlzKS5kYXRhKCd0cCcpKTtcclxuICAgICAgICAgICAgdXJsLnNldCgnb2Zmc2V0JywgMCk7XHJcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zaG93LWJnJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBvcGVyYXRlSWQgPSAkKHRoaXMpLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgICAgIHZhciBkID0gcHJvY2Vzc1tvcGVyYXRlSWRdO1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gJCgnLmJnLXBhcnQnKTtcclxuICAgICAgICAgICAgdmFyIGpjenQgPSAnJywgZGN6dCA9ICcnO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGQub3JkZXIuYm9va2luZ1N0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgZGN6dCA9ICfmnKrorqLoiLEnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRjenQgPSAn5bey6K6i6IixJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgLTE6XHJcbiAgICAgICAgICAgICAgICAgICAgZGN6dCA9ICforqLoiLHlpLHotKUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGRjenQgPSAn5bey5pS56YWNJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzd2l0Y2ggKGQub3JkZXIuZW50cnlTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGpjenQgPSAn5b6F6L+b5LuTJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBqY3p0ID0gJ+W3sui/m+S7kyc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgamN6dCA9ICflt7Lnoa7orqQnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuZGRoJykuaHRtbChkLm9yZGVyLm9yZGVyTnVtKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5xc2cnKS5odG1sKGQub3JkZXIuZGVwdENvZGUpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLm1kZycpLmh0bWwoZC5vcmRlci5kZXN0Q29kZSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuaGtncycpLmh0bWwoZC5vcmRlci5haXJDb21wYW55Q29kZSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcucWZycScpLmh0bWwobmV3IERhdGUoZC5vcmRlci5mbGlnaHREYXRlLnJlcGxhY2UoLy0vZywgXCIvXCIpKS5Gb3JtYXQoJ3l5eXktTU0tZGQnKSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuamN6dCcpLmh0bWwoamN6dCk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuZGN6dCcpLmh0bWwoZGN6dCk7XHJcbiAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgZWxlLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zaG93LWN5JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBvcGVyYXRlSWQgPSAkKHRoaXMpLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgICAgIHZhciBkID0gcHJvY2Vzc1tvcGVyYXRlSWRdO1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gJCgnLmN5LXBhcnQnKTtcclxuICAgICAgICAgICAgdmFyIGpjenQgPSAnJywgZGN6dCA9ICcnO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGQub3JkZXIuYm9va2luZ1N0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgZGN6dCA9ICfmnKrorqLoiLEnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRjenQgPSAn5bey6K6i6IixJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgLTE6XHJcbiAgICAgICAgICAgICAgICAgICAgZGN6dCA9ICforqLoiLHlpLHotKUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGRjenQgPSAn5bey5pS56YWNJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzd2l0Y2ggKGQub3JkZXIuZW50cnlTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGpjenQgPSAn5b6F6L+b5LuTJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBqY3p0ID0gJ+W3sui/m+S7kyc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgamN6dCA9ICflt7Lnoa7orqQnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuZGRoJykuaHRtbChkLm9yZGVyLm9yZGVyTnVtKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5xc2cnKS5odG1sKGQub3JkZXIuZGVwdENvZGUpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLm1kZycpLmh0bWwoZC5vcmRlci5kZXN0Q29kZSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuaGtncycpLmh0bWwoZC5vcmRlci5haXJDb21wYW55Q29kZSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcucWZycScpLmh0bWwobmV3IERhdGUoZC5vcmRlci5mbGlnaHREYXRlLnJlcGxhY2UoLy0vZywgXCIvXCIpKS5Gb3JtYXQoJ3l5eXktTU0tZGQnKSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuamN6dCcpLmh0bWwoamN6dCk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuZGN6dCcpLmh0bWwoZGN6dCk7XHJcbiAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgZWxlLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zaG93LXlzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBvcGVyYXRlSWQgPSAkKHRoaXMpLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgICAgIHZhciBkID0gcHJvY2Vzc1tvcGVyYXRlSWRdO1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gJCgnLnlzLXBhcnQnKTtcclxuICAgICAgICAgICAgdmFyIGpjenQgPSAnJywgZGN6dCA9ICcnO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGQub3JkZXIuYm9va2luZ1N0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgZGN6dCA9ICfmnKrorqLoiLEnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRjenQgPSAn5bey6K6i6IixJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgLTE6XHJcbiAgICAgICAgICAgICAgICAgICAgZGN6dCA9ICforqLoiLHlpLHotKUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGRjenQgPSAn5bey5pS56YWNJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzd2l0Y2ggKGQub3JkZXIuZW50cnlTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGpjenQgPSAn5b6F6L+b5LuTJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBqY3p0ID0gJ+W3sui/m+S7kyc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgamN6dCA9ICflt7Lnoa7orqQnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuZGRoJykuaHRtbChkLm9yZGVyLm9yZGVyTnVtKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5xc2cnKS5odG1sKGQub3JkZXIuZGVwdENvZGUpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLm1kZycpLmh0bWwoZC5vcmRlci5kZXN0Q29kZSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuaGtncycpLmh0bWwoZC5vcmRlci5haXJDb21wYW55Q29kZSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcucWZycScpLmh0bWwobmV3IERhdGUoZC5vcmRlci5mbGlnaHREYXRlLnJlcGxhY2UoLy0vZywgXCIvXCIpKS5Gb3JtYXQoJ3l5eXktTU0tZGQnKSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuamN6dCcpLmh0bWwoamN6dCk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuZGN6dCcpLmh0bWwoZGN6dCk7XHJcbiAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgZWxlLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5hZGQtZGF0YScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGQgPSBwcm9jZXNzWyQodGhpcykuZGF0YSgnaWQnKV07XHJcbiAgICAgICAgICAgIHZhciBlbGUgPSAkKHRoaXMpLnBhcmVudHMoJ3RkJyk7XHJcbiAgICAgICAgICAgICQoJy5qY2JoJykuaHRtbChlbGUuZGF0YSgnamNiaCcpKTtcclxuICAgICAgICAgICAgJCgnLmtobWMnKS5odG1sKGVsZS5kYXRhKCdraG1jJykpO1xyXG4gICAgICAgICAgICAkKCcubHhyJykuaHRtbChlbGUuZGF0YSgnbHhyJykpO1xyXG4gICAgICAgICAgICAkKCcuYWRkLWRhdGEtcGFydCcpLmZpbmQoJy50YmQnKS5odG1sKCcgPGRpdiBjbGFzcz1cInR0ciBmaWxsIGRhdGFcIj4gJyArXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImJpZ1wiPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYS1kYXRlXCIgaWQ9XCJmaXJzdC1kYXRlXCI+PC9kaXY+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzxkaXY+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJhLW51bSBrdXAtbnVtXCIgdmFsdWU9XCIwXCI+IDwvZGl2PiA8ZGl2PjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYS1sb25nICBrdXAtbnVtXCIgdmFsdWU9XCIwXCI+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PiA8ZGl2PjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYS13aWR0aCAga3VwLW51bVwiIHZhbHVlPVwiMFwiPiA8L2Rpdj4gPGRpdj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImEtaGVpZ2h0ICBrdXAtbnVtXCIgdmFsdWU9XCIwXCI+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PiA8ZGl2IGNsYXNzPVwiYS1zaXplXCI+MDwvZGl2PiA8ZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PiA8ZGl2PjwvZGl2PiAnICtcclxuICAgICAgICAgICAgICAgICc8ZGl2PjwvZGl2PiA8ZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PiA8ZGl2PjwvZGl2PiA8ZGl2PjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJyA8ZGl2PjwvZGl2PiA8ZGl2PjwvZGl2PiA8L2Rpdj4gJykuY3NzKCdwYWRkaW5nLXJpZ2h0JywgJzIwcHgnKTtcclxuXHJcbiAgICAgICAgICAgICQoJy5hZGQtZGF0YS1wYXJ0JykuZmluZCgnLnRmdCcpLmh0bWwoJyA8ZGl2IGNsYXNzPVwiYmlnXCI+5oC76K6hPC9kaXY+IDxkaXYgY2xhc3M9XCJ0LWpzXCI+MDwvZGl2PiA8ZGl2IGNsYXNzPVwidC1jXCI+PC9kaXY+IDxkaXYgY2xhc3M9XCJ0LWtcIj48L2Rpdj4gPGRpdiBjbGFzcz1cInQtZ1wiPjwvZGl2PiA8ZGl2IGNsYXNzPVwidC1zXCI+MDwvZGl2PiA8ZGl2IGNsYXNzPVwidC13XCI+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJ0b3RhbC13ZWkga3VwLW51bVwiIHZhbHVlPVwiMFwiPjwvZGl2PiA8ZGl2PjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwidG90YWwtYnpcIj48L2Rpdj4gPGRpdiBjbGFzcz1cInQtcHNcIj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInRvdGFsLXBzIGt1cC1udW1cIiB2YWx1ZT1cIjBcIj48L2Rpdj4gPGRpdiBjbGFzcz1cInQtc2NcIj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInRvdGFsLXNjIGt1cC1udW1cIiB2YWx1ZT1cIjBcIj48L2Rpdj4gPGRpdiBjbGFzcz1cInQtYnhcIj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInRvdGFsLWJ4IGt1cC1udW1cIiB2YWx1ZT1cIjBcIj48L2Rpdj4gPGRpdiBjbGFzcz1cInQtcXRcIj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInRvdGFsLXF0IGt1cC1udW1cIiB2YWx1ZT1cIjBcIj48L2Rpdj4gPGRpdj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInRvdGFsLXJlbWFya1wiPjwvZGl2PiA8ZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICAkKCcjYWRkLWRhdGEnKS5kYXRhKCdpZCcsICQodGhpcykuZGF0YSgnaWQnKSk7XHJcbiAgICAgICAgICAgICQoJyNmaXJzdC1kYXRlJykuZGF0ZXRpbWVwaWNrZXIoe1xyXG4gICAgICAgICAgICAgICAgZm9ybWF0OiAneXl5eS1tbS1kZCBoaDppaTpzcycsLy/ml6XmnJ/nmoTmoLzlvI9cclxuICAgICAgICAgICAgICAgIGVuZERhdGU6IG5ldyBEYXRlKCksLy/pgInmi6nlmajnmoTlvIDlp4vml6XmnJ9cclxuICAgICAgICAgICAgICAgIGF1dG9jbG9zZTogdHJ1ZSwvL+aXpeacn+mAieaLqeWujOaIkOWQjuaYr+WQpuWFs+mXremAieaLqeahhlxyXG4gICAgICAgICAgICAgICAgYm9vdGNzc1ZlcjogMywvL+aYvuekuuWQkeW3puWQkeWPs+eahOeureWktFxyXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U6ICd6aC1DTicsLy/or63oqIBcclxuICAgICAgICAgICAgICAgIG1pblZpZXc6IFwibW9udGhcIi8v6KGo56S65pel5pyf6YCJ5oup55qE5pyA5bCP6IyD5Zu077yM6buY6K6k5pivaG91clxyXG4gICAgICAgICAgICB9KS5vbignY2hhbmdlRGF0ZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuY29weS1kYXRlJykuaHRtbChuZXcgRGF0ZShlLmRhdGUpLkZvcm1hdCgneXl5eS1NTS1kZCBoaDptbTpzcycpKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgb3B0aW9uID0gJyc7XHJcbiAgICAgICAgICAgIHZhciBhcnIgPSBkLm9yZGVyLndhcmVob3VzZUVudHJ5TnVtTGlzdCB8fCBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBhcnIubGVuZ3RoOyBhKyspIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbiArPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyBhcnJbYV0gKyAnXCI+JyArIGFyclthXSArICc8L29wdGlvbj4nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLmFkZC1kYXRhLXBhcnQnKS5maW5kKCcjYmhMaXN0JykuaHRtbChvcHRpb24pO1xyXG5cclxuICAgICAgICAgICAgJCgnLndoaXRlLWJhY2snKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAkKCcuYWRkLWRhdGEtcGFydCcpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5hZGQtZGF0YS1wYXJ0IC5nbHlwaGljb24tcGx1cycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQoJy5hZGQtZGF0YS1wYXJ0JykuZmluZCgnLnR0ci5kYXRhJykubGVuZ3RoID49IDYpIHtcclxuICAgICAgICAgICAgICAgICQoJy5hZGQtZGF0YS1wYXJ0JykuZmluZCgnLnRiZCcpLmNzcygncGFkZGluZy1yaWdodCcsICczcHgnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKCcuYWRkLWRhdGEtcGFydCcpLmZpbmQoJy50YmQnKS5hcHBlbmQoJyA8ZGl2IGNsYXNzPVwidHRyIGZpbGwgZGF0YVwiPiAnICtcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYmlnIGNvcHktZGF0ZVwiPicgKyAkKCcjZmlyc3QtZGF0ZScpLnZhbCgpICsgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJzxkaXY+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJhLW51bSBrdXAtbnVtXCIgdmFsdWU9XCIwXCI+IDwvZGl2PiA8ZGl2PjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYS1sb25nICBrdXAtbnVtXCIgdmFsdWU9XCIwXCI+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PiA8ZGl2PjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYS13aWR0aCAga3VwLW51bVwiIHZhbHVlPVwiMFwiPiA8L2Rpdj4gPGRpdj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImEtaGVpZ2h0ICBrdXAtbnVtXCIgdmFsdWU9XCIwXCI+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PiA8ZGl2IGNsYXNzPVwiYS1zaXplXCI+MDwvZGl2PiA8ZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PiA8ZGl2PiA8L2Rpdj4gJyArXHJcbiAgICAgICAgICAgICAgICAnPGRpdj48L2Rpdj4gPGRpdj4nICtcclxuICAgICAgICAgICAgICAgICc8L2Rpdj4gPGRpdj4gPC9kaXY+IDxkaXY+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAnIDxkaXY+PC9kaXY+IDxkaXY+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXJlbW92ZVwiPjwvc3Bhbj48L2Rpdj48L2Rpdj4gJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5hZGQtZGF0YS1wYXJ0IC5nbHlwaGljb24tcmVtb3ZlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy50dHInKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgZ2V0VG90YWwoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbigna2V5dXAnLCAnLmFkZC1kYXRhLXBhcnQgLmt1cC1udW0nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykudmFsKCQodGhpcykudmFsKCkucmVwbGFjZSgvW15cXC0/XFxkXS9nLCAnJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdibHVyJywgJy5hZGQtZGF0YS1wYXJ0IC5rdXAtbnVtJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoISQodGhpcykudmFsKCkpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykudmFsKDApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwocGFyc2VJbnQoJCh0aGlzKS52YWwoKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBlbGUgPSAkKHRoaXMpLnBhcmVudHMoJy50dHIuZGF0YScpO1xyXG4gICAgICAgICAgICB2YXIgYyA9IHBhcnNlRmxvYXQoZWxlLmZpbmQoJy5hLWxvbmcnKS52YWwoKSlcclxuICAgICAgICAgICAgICAgICwgayA9IHBhcnNlRmxvYXQoZWxlLmZpbmQoJy5hLXdpZHRoJykudmFsKCkpXHJcbiAgICAgICAgICAgICAgICAsIGcgPSBwYXJzZUZsb2F0KGVsZS5maW5kKCcuYS1oZWlnaHQnKS52YWwoKSlcclxuICAgICAgICAgICAgICAgICwganMgPSBwYXJzZUZsb2F0KGVsZS5maW5kKCcuYS1udW0nKS52YWwoKSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuYS1zaXplJykuaHRtbChteWZvcm1hdC5mb3JtYXR2b2x1bWUoYyAqIGsgKiBnICoganMgLyAxMDAwMDAwKSk7XHJcbiAgICAgICAgICAgIGdldFRvdGFsKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2tleXVwJywgJy5hZGQtZGF0YS1wYXJ0IC5rdXAtZm51bScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS52YWwoJCh0aGlzKS52YWwoKS5yZXBsYWNlKC9bXlxcLT9cXGQuXS9nLCAnJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdibHVyJywgJy5hZGQtZGF0YS1wYXJ0IC5rdXAtZm51bScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS52YWwoJCh0aGlzKS52YWwoKS5yZXBsYWNlKC9bXlxcLT9cXGQuXS9nLCAnJykpO1xyXG4gICAgICAgICAgICBpZiAoISQodGhpcykudmFsKCkpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykudmFsKDApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwocGFyc2VGbG9hdCgkKHRoaXMpLnZhbCgpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGVsZSA9ICQodGhpcykucGFyZW50cygnLnR0ci5kYXRhJyk7XHJcbiAgICAgICAgICAgIHZhciBjID0gcGFyc2VGbG9hdChlbGUuZmluZCgnLmEtbG9uZycpLnZhbCgpKVxyXG4gICAgICAgICAgICAgICAgLCBrID0gcGFyc2VGbG9hdChlbGUuZmluZCgnLmEtd2lkdGgnKS52YWwoKSlcclxuICAgICAgICAgICAgICAgICwgZyA9IHBhcnNlRmxvYXQoZWxlLmZpbmQoJy5hLWhlaWdodCcpLnZhbCgpKVxyXG4gICAgICAgICAgICAgICAgLCBqcyA9IHBhcnNlRmxvYXQoZWxlLmZpbmQoJy5hLW51bScpLnZhbCgpKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5hLXNpemUnKS5odG1sKG15Zm9ybWF0LmZvcm1hdHZvbHVtZShjICogayAqIGcgKiBqcykpO1xyXG4gICAgICAgICAgICBnZXRUb3RhbCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZW5zdXJlLWRhdGEnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGUgPSAkKHRoaXMpLnBhcmVudHMoJ3RkJyk7XHJcbiAgICAgICAgICAgICQoJy5qY2JoJykuaHRtbChlbGUuZGF0YSgnamNiaCcpKTtcclxuICAgICAgICAgICAgJCgnLmtobWMnKS5odG1sKGVsZS5kYXRhKCdraG1jJykpO1xyXG4gICAgICAgICAgICAkKCcubHhyJykuaHRtbChlbGUuZGF0YSgnbHhyJykpO1xyXG4gICAgICAgICAgICAkKCcjZW5zdXJlLWRhdGEnKS5kYXRhKCdpZCcsICQodGhpcykuZGF0YSgnaWQnKSk7XHJcbiAgICAgICAgICAgIERhdGEuc3RvcmFnZSh7aWQ6ICQodGhpcykuZGF0YSgnaWQnKX0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIERvbS5yZW5kZXJUcihqc29uLnJlc0JvZHkgfHwge30pO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZW5zdXJlLWRhdGEtcGFydCcpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfmt7vliqDlpLHotKXvvIzor7fph43or5XvvIEnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5yZWZ1c2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG9wZXJhdGVJZCA9ICQodGhpcykuZGF0YSgnaWQnKTtcclxuICAgICAgICAgICAgJCgnLndoaXRlLWJhY2snKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAkKCcucmVmdXNlLXBhcnQnKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuc2hvdy15ZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGlkID0gJCh0aGlzKS5kYXRhKCdpZCcpO1xyXG4gICAgICAgICAgICB5ZElkID0gaWQ7XHJcbiAgICAgICAgICAgIHZhciBkZCA9IHByb2Nlc3NbaWRdO1xyXG4gICAgICAgICAgICB2YXIgYyA9IGRkLmNvbXBhbnkgfHwge31cclxuICAgICAgICAgICAgICAgICwgbyA9IGRkLm9yZGVyIHx8IHt9O1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gJCgnLnlkLXBhcnQnKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5kZGgnKS5odG1sKG8ub3JkZXJOdW0pO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLnFzZycpLmh0bWwoby5kZXB0Q29kZSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcubWRnJykuaHRtbChvLmRlc3RDb2RlKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5oa2dzJykuaHRtbChvLmFpckNvbXBhbnlDb2RlKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5xZnJxJykuaHRtbChuZXcgRGF0ZShvLmZsaWdodERhdGUucmVwbGFjZSgvLS9nLCBcIi9cIikpLkZvcm1hdCgneXl5eS1NTS1kZCcpKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5qcycpLmh0bWwoby5jYXJnby5jYXJnb0NvdW50ICsgJ1BDUycpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLnRqJykuaHRtbChteWZvcm1hdC5mb3JtYXR2b2x1bWUoby5jYXJnby5jYXJnb1NpemUpICsgJ0NCTScpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLnpsJykuaHRtbChvLmNhcmdvLmNhcmdvV2VpZ2h0ICsgJ0tHUyDvvIjorqHotLnph43ph4/vvJonICsgZGQub3JkZXIuY2FyZ28uY2hhcmdpbmdXZWlnaHQgKyAnS0dT77yJJyk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuamN6dCcpLmh0bWwoby5lbnRyeVN0YXRlID09IDAgPyAn5b6F6L+b5LuTJyA6IChvLmVudHJ5U3RhdGUgPT0gMSA/ICflt7Lov5vku5PvvIzmnKrnoa7orqQnIDogJ+W3suehruiupCcpKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJyN5ZC1jJykudmFsKG8uY2FyZ28uY2FyZ29Db3VudCk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcjeWQtcycpLnZhbChvLmNhcmdvLmNhcmdvU2l6ZSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcjeWQtdycpLnZhbChvLmNhcmdvLmNhcmdvV2VpZ2h0KTtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBcImFnZW50Q29tcGFueUlkXCI6IDEwMDAwLFxyXG4gICAgICAgICAgICAgICAgXCJhaXJ3YXlJZFwiOiBvLmFpcndheUluZm8uYWlyd2F5SWQsXHJcbiAgICAgICAgICAgICAgICBcImZsaWdodERhdGVcIjogbmV3IERhdGUoby5mbGlnaHREYXRlLnJlcGxhY2UoLy0vZywgXCIvXCIpKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBEYXRhLnlkU2VhcmNoKGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RyID0gJyc7XHJcbiAgICAgICAgICAgICAgICB5ZExpc3QgPSB7fTtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNCb2R5JyBpbiBqc29uICYmIGpzb24ucmVzQm9keSBpbnN0YW5jZW9mIEFycmF5ICYmIGpzb24ucmVzQm9keS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYiBpbiBqc29uLnJlc0JvZHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24ucmVzQm9keS5oYXNPd25Qcm9wZXJ0eShiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGR0ID0ganNvbi5yZXNCb2R5W2JdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeWRMaXN0W2R0LmJpbGxJbmZvLmJpbGxJZF0gPSBkdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB5IGluIHlkTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeWRMaXN0Lmhhc093blByb3BlcnR5KHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzxwIGNsYXNzPVwieWQtcmRcIj4gPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJzLXlkXCIgZGF0YS1pZD1cIicgKyB5ICsgJ1wiPicgKyB5ICsgJzwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5maW5kKCcubGVmdCcpLmh0bWwoc3RyKTtcclxuICAgICAgICAgICAgICAgICAgICBlbGUuZmluZCgnLnJlc3VsdC1wYXJ0JykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICAgICBlbGUuZmluZCgnLmFkZC15ZCcpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI2dsLWVuc3VyZScpLmRhdGEoJ3RwJywgMSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5maW5kKCcucmVzdWx0LXBhcnQnKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5maW5kKCcuYWRkLXlkJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjZ2wtZW5zdXJlJykuZGF0YSgndHAnLCAyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgIGVsZS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnaW5wdXRbbmFtZT1cInMteWRcIl0nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhcnIgPSB5ZExpc3RbJCh0aGlzKS5kYXRhKCdpZCcpXS5vcmRlckxpc3Q7XHJcbiAgICAgICAgICAgIHZhciBzdHIgPSAnJztcclxuICAgICAgICAgICAgZm9yICh2YXIgYSBpbiBhcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhcnIuaGFzT3duUHJvcGVydHkoYSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGFyclthXTtcclxuICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzx0cj48dGQ+JyArIGQub3JkZXJJZCArICc8L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHRkPicgKyBkLmNhcmdvLmNhcmdvQ291bnQgKyAnUENTPC90ZD4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZD4nICsgZC5jYXJnby5jYXJnb1NpemUgKyAnQ0JNPC90ZD4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZD4nICsgZC5jYXJnby5jYXJnb1dlaWdodCArICdLR1M8L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHRkPicgKyAoZC5lbnRyeVN0YXRlID09IDAgPyAn5b6F6L+b5LuTJyA6IChkLmVudHJ5U3RhdGUgPT0gMSA/ICflt7Lov5vku5PvvIzmnKrnoa7orqQnIDogJ+W3sue7k+adnycpKSArICc8L3RkPjwvdHI+JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKCcueWQtdGInKS5maW5kKCd0Ym9keScpLmh0bWwoc3RyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3RyYW5zZmVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYXJyID0gW107XHJcbiAgICAgICAgICAgICQoJ2lucHV0W25hbWU9XCJsaXN0LXNnXCJdOmNoZWNrZWQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGFyci5wdXNoKCQodGhpcykuZGF0YSgnaWQnKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoYXJyLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICQoJy50cmFuc2Zlci1wYXJ0JykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjYWNjZXB0LXRyYW5zZmVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYXJyID0gW107XHJcbiAgICAgICAgICAgIHZhciBtSWQ7XHJcbiAgICAgICAgICAgICQoJ2lucHV0W25hbWU9XCJsaXN0LXNnXCJdOmNoZWNrZWQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGFyci5wdXNoKCQodGhpcykuZGF0YSgnaWQnKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtSWQgPSAkKCcjY3p5JykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmIChhcnIubGVuZ3RoID4gMCAmJiBtSWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFwib3JkZXJJZHNcIjogYXJyLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY29tcGFueUlkXCI6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtZW1iZXJGcm9tXCI6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtZW1iZXJUb1wiOiBtSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJyZXF1aXJlTWViZXJJZFwiOiAwXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgRGF0YS50cmFuc2ZlcihkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfovaznp7vmiJDlip/vvIEnLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+i9rOenu+Wksei0pe+8jOivt+mHjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIG9mZnNldDogdXJsLmdldCgnb2Zmc2V0JykgfHwgMCxcclxuICAgICAgICAgICAgbGltaXQ6IHVybC5nZXQoJ2xpbWl0JykgfHwgMTAsXHJcbiAgICAgICAgICAgIFwiZGVwdENvZGVcIjogJCgnI3N0YXJ0JykudmFsKCksXHJcbiAgICAgICAgICAgIFwiZGVzdENvZGVcIjogJCgnI2VuZCcpLnZhbCgpLFxyXG4gICAgICAgICAgICBcIm51bWJlclwiOiAkKCcjb3JkZXItbnVtJykudmFsKClcclxuICAgICAgICB9O1xyXG4gICAgICAgIERhdGEubGlzdChkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICBwcm9jZXNzID0gRG9tLmxpc3QoanNvbiwgZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHN1Ym1pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3pkLWVuc3VyZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGFyciA9IFtdLCB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgICQoJy56ZC10YicpLmZpbmQoJ3RyLmRhdGEnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiaXRlbU5hbWVcIjogJCh0aGlzKS5maW5kKCcuZnltdCcpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiaXRlbVByaWNlXCI6IHBhcnNlRmxvYXQoJCh0aGlzKS5maW5kKCcuaXAtZGonKS52YWwoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJpdGVtVW5pdFwiOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiaXRlbUNvdW50XCI6IHBhcnNlRmxvYXQoJCh0aGlzKS5maW5kKCcuaXAtemwnKS52YWwoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJpdGVtVG90YWxcIjogcGFyc2VGbG9hdCgkKHRoaXMpLmZpbmQoJy50dHAnKS52YWwoKSlcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBhcnIucHVzaChkYXRhKTtcclxuICAgICAgICAgICAgICAgIHRvdGFsICs9IHBhcnNlRmxvYXQoJCh0aGlzKS5maW5kKCcudHRwJykudmFsKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogc3RvcGdhcC5vcmRlci5vcmRlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic2VydmljZUZlZUxpc3RcIjogYXJyLFxyXG4gICAgICAgICAgICAgICAgICAgIFwib3JkZXJDaGFyZ2luZ1RvdGFsXCI6IHRvdGFsLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2hhcmdlU3RhdGVcIjogMFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIERhdGEuY3JlYXRlQ2hhcmdlKGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+WItuWNleaIkOWKn++8gScsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5Yi25Y2V5aSx6LSl77yM6K+36YeN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2JnLWVuc3VyZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogb3BlcmF0ZUlkLFxyXG4gICAgICAgICAgICAgICAgXCJzdGF0ZVwiOiAkKCcjYy1iZ3p0JykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgRGF0YS5iZyhkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5pu05paw5oiQ5Yqf77yBJywgbnVsbCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+abtOaWsOWksei0pe+8jOivt+mHjeivle+8gScpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjY3ktZW5zdXJlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFwib3JkZXJJZFwiOiBvcGVyYXRlSWQsXHJcbiAgICAgICAgICAgICAgICBcInN0YXRlXCI6ICQoJyNjLWN5enQnKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBEYXRhLmN5KGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnIHx8ICfmm7TmlrDmiJDlip/vvIEnLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5pu05paw5aSx6LSl77yM6K+36YeN6K+V77yBJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN5cy1lbnN1cmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgXCJvcmRlcklkXCI6IG9wZXJhdGVJZCxcclxuICAgICAgICAgICAgICAgIFwic3RhdGVcIjogJCgnI2MteXN6dCcpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLnZhbCgpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIERhdGEueXMoZGF0YSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+abtOaWsOaIkOWKn++8gScsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnIHx8ICfmm7TmlrDlpLHotKXvvIzor7fph43or5XvvIEnKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2FkZC1kYXRhJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSAkKHRoaXMpLCBhcnIgPSBbXTtcclxuICAgICAgICAgICAgdmFyIHRmID0gJCgnLmFkZC1kYXRhLXBhcnQnKS5maW5kKCcudGZ0Jyk7XHJcbiAgICAgICAgICAgIGlmICgkKCcjZmlyc3QtZGF0ZScpLnZhbCgpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWRkLWRhdGEtcGFydCcpLmZpbmQoJy50dHIuZGF0YScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0b3JhZ2VUaW1lXCI6ICQoJyNmaXJzdC1kYXRlJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwib3JkZXJJZFwiOiBfdGhpcy5kYXRhKCdpZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInBhY2thZ2VUeXBlXCI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInBhY2thZ2VNYXJrXCI6ICdzdHJpbmcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0b3JhZ2VDb3VudFwiOiAkKHRoaXMpLmZpbmQoJy5hLW51bScpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0b3JhZ2VXZWlnaHRcIjogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdG9yYWdlU2l6ZVwiOiAkKHRoaXMpLmZpbmQoJy5hLXNpemUnKS5odG1sKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZGFtYWdlQ291bnRcIjogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkYW1wQ291bnRcIjogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0cmFuc2Zvcm1Db3VudFwiOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm90aGVyQ291bnRcIjogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdG9yYWdlUmVtYXJrXCI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0b3JhZ2VMZW5ndGhcIjogJCh0aGlzKS5maW5kKCcuYS1sb25nJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3RvcmFnZVdpZHRoXCI6ICQodGhpcykuZmluZCgnLmEtd2lkdGgnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdG9yYWdlSGVpZ2h0XCI6ICQodGhpcykuZmluZCgnLmEtaGVpZ2h0JykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwid2FyZWhvdXNlbnRyeU51bVwiOiAkKCcjYmhMaXN0JykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKClcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKGQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhcnIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdG9yYWdlVGltZVwiOiAkKCcjZmlyc3QtZGF0ZScpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwib3JkZXJJZFwiOiBfdGhpcy5kYXRhKCdpZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwicGFja2FnZVR5cGVcIjogdGYuZmluZCgnLnRvdGFsLWJ6JykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJwYWNrYWdlTWFya1wiOiAnc3RyaW5nJyxcclxuICAgICAgICAgICAgICAgICAgICBcInN0b3JhZ2VDb3VudFwiOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic3RvcmFnZVdlaWdodFwiOiB0Zi5maW5kKCcudG90YWwtd2VpJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdG9yYWdlU2l6ZVwiOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZGFtYWdlQ291bnRcIjogdGYuZmluZCgnLnRvdGFsLXBzJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJkYW1wQ291bnRcIjogdGYuZmluZCgnLnRvdGFsLXNjJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0cmFuc2Zvcm1Db3VudFwiOiB0Zi5maW5kKCcudG90YWwtYngnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcIm90aGVyQ291bnRcIjogdGYuZmluZCgnLnRvdGFsLXF0JykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdG9yYWdlUmVtYXJrXCI6IHRmLmZpbmQoJy50b3RhbC1yZW1hcmsnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcInN0b3JhZ2VMZW5ndGhcIjogMCxcclxuICAgICAgICAgICAgICAgICAgICBcInN0b3JhZ2VXaWR0aFwiOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic3RvcmFnZUhlaWdodFwiOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIFwid2FyZWhvdXNlbnRyeU51bVwiOiAkKCcjYmhMaXN0JykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJJZDogX3RoaXMuZGF0YSgnaWQnKVxyXG4gICAgICAgICAgICAgICAgICAgICwgZW50cnlOdW06ICQoJyNiaExpc3QnKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgICAgICwgZW50cnlMaXN0OiBhcnJcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRmLmZpbmQoJy50b3RhbC1ieicpLnZhbCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGYuZmluZCgnLnRvdGFsLWJ6JykucmVtb3ZlQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQodGYuZmluZCgnLnRvdGFsLXdlaScpLnZhbCgpKSAmJiBwYXJzZUludCh0Zi5maW5kKCcudG90YWwtd2VpJykudmFsKCkpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0Zi5maW5kKCcudG90YWwtd2VpJykucmVtb3ZlQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRGF0YS5hZGREYXRhKGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnIHx8ICfmt7vliqDmiJDlip/vvIEnLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5re75Yqg5aSx6LSl77yM6K+36YeN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRmLmZpbmQoJy50b3RhbC13ZWknKS5hZGRDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGYuZmluZCgnLnRvdGFsLWJ6JykuYWRkQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfor7flvZXlhaXov5vku5Pml7bpl7TvvIEnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjZW5zdXJlLWRhdGEnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgb3JkZXJJZDogJCh0aGlzKS5kYXRhKCdpZCcpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIERhdGEuZW5zdXJlRGF0YShkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn56Gu6K6k5oiQ5Yqf77yBJywgbnVsbCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+ehruiupOWksei0pe+8gScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3JlZnVzZS1lbnN1cmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBpZCA9ICQoJ2lucHV0W25hbWU9XCJyZWFzb25cIl06Y2hlY2tlZCcpLnByb3AoJ2lkJyk7XHJcbiAgICAgICAgICAgIHZhciB0eHQgPSAnJztcclxuICAgICAgICAgICAgaWYgKGlkID09ICdyNScpIHtcclxuICAgICAgICAgICAgICAgIHR4dCA9ICQoJyN0ZXh0LXI0JykudmFsKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0eHQgPSAkKCcjJyArIGlkKS5zaWJsaW5ncygnbGFiZWwnKS5odG1sKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBcImFnZW50Q29tcGFueUlkXCI6IDEwMDAwLFxyXG4gICAgICAgICAgICAgICAgXCJzZXJ2aWNlRmVlXCI6ICQoJyNyNicpLnByb3AoJ2NoZWNrZWQnKSxcclxuICAgICAgICAgICAgICAgIFwiY29tbWVudFwiOiB0eHQsXHJcbiAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogb3BlcmF0ZUlkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIERhdGEuY2FuY2VsKGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnIHx8ICflj5bmtojmiJDlip/vvIEnLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5Y+W5raI5aSx6LSl77yM6K+36YeN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjZ2wtZW5zdXJlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5kYXRhKCd0cCcpID09IDIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdQYXNzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICQoJy55ZC1pcCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJCh0aGlzKS52YWwoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Bhc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3UGFzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJvb2tpbmdDb3VudFwiOiAkKCcjeWQtYycpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJvb2tpbmdTaXplXCI6ICQoJyN5ZC1zJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYm9va2luZ1dlaWdodFwiOiAkKCcjeWQtdycpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogeWRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJiaWxsSWRcIjogMFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgRGF0YS55ZE5ldyhkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+WFs+iBlOaIkOWKn++8gScsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+WFs+iBlOWksei0pSzor7fph43or5XvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy55ZC1ib2R5JykuZmluZCgnaW5wdXRbbmFtZT1cInMteWRcIl06Y2hlY2tlZCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwib3JkZXJJZFwiOiB5ZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJpbGxJZFwiOiAkKCcueWQtYm9keScpLmZpbmQoJ2lucHV0W25hbWU9XCJzLXlkXCJdOmNoZWNrZWQnKS5kYXRhKCdpZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBEYXRhLnlkRXhpc3QoZHQsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5YWz6IGU5oiQ5Yqf77yBJywgbnVsbCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5YWz6IGU5aSx6LSlLOivt+mHjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfor7fpgInmi6nkuIDmnaHoiKrnur/lhbPogZTvvIEnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBnZXRUb3RhbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIganMgPSAwLCBjID0gMCwgayA9IDAsIGcgPSAwLCB0aiA9IDAsIHpsID0gMCwgcHMgPSAwLCBzYyA9IDAsIGJ4ID0gMCwgcXQgPSAwO1xyXG4gICAgICAgIHZhciBlbGUgPSAkKCcuYWRkLWRhdGEtcGFydCcpO1xyXG4gICAgICAgIGVsZS5maW5kKCcuYS1udW0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAganMgKz0gcGFyc2VJbnQoJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZWxlLmZpbmQoJy5hLXNpemUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGogKz0gcGFyc2VGbG9hdCgkKHRoaXMpLmh0bWwoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZWxlLmZpbmQoJy5hLXdlaScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB6bCArPSBwYXJzZUZsb2F0KCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVsZS5maW5kKCcuYS1wcycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBwcyArPSBwYXJzZUludCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlbGUuZmluZCgnLmEtc2MnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2MgKz0gcGFyc2VJbnQoJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZWxlLmZpbmQoJy5hLWJ4JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGJ4ICs9IHBhcnNlSW50KCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVsZS5maW5kKCcuYS1xdCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBxdCArPSBwYXJzZUludCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlbGUuZmluZCgnLnQtanMnKS5odG1sKGpzKS5lbmQoKVxyXG4gICAgICAgICAgICAuZmluZCgnLnQtcycpLmh0bWwobXlmb3JtYXQuZm9ybWF0dm9sdW1lKHRqKSkuZW5kKCk7XHJcbiAgICAgICAgLy8uZmluZCgnLnQtdycpLmh0bWwoemwpLmVuZCgpXHJcbiAgICAgICAgLy8uZmluZCgnLnQtcHMnKS5odG1sKHBzKS5lbmQoKVxyXG4gICAgICAgIC8vLmZpbmQoJy50LXNjJykuaHRtbChzYykuZW5kKClcclxuICAgICAgICAvLy5maW5kKCcudC1ieCcpLmh0bWwoYngpLmVuZCgpXHJcbiAgICAgICAgLy8uZmluZCgnLnQtcXQnKS5odG1sKHF0KS5lbmQoKTtcclxuICAgIH07XHJcbiAgICB2YXIgemRUYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmZ5bXQuY2hvb3NlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuc2UtcGFydCcpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5zZS1wYXJ0JykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNlLXBhcnQgbGknLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkaiA9IHBhcnNlRmxvYXQoJCh0aGlzKS5kYXRhKCdkaicpKVxyXG4gICAgICAgICAgICAgICAgLCB6bCA9IHBhcnNlRmxvYXQoJCh0aGlzKS5kYXRhKCd6bCcpKVxyXG4gICAgICAgICAgICAgICAgLCBlbGUgPSAkKHRoaXMpLnBhcmVudHMoJ3RyLmRhdGEnKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5pcC1kaicpLnZhbChkaik7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuaXAtemwnKS52YWwoemwpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLnR0cCcpLnZhbChkaiAqIHpsKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCd1bCcpLnNpYmxpbmdzKCdpbnB1dCcpLnZhbCgkKHRoaXMpLmh0bWwoKSk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygndWwnKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLmZ5bXQnKS5yZW1vdmVDbGFzcygnY2hvb3NlJyk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuc2UtcGFydCcpLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuZnltdC5jaG9vc2UsLnNlLXBhcnQgbGknKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnNlLXBhcnQnKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2tleXVwJywgJy5pcC16bCwuaXAtZGonLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykudmFsKCQodGhpcykudmFsKCkucmVwbGFjZSgvW15cXGQuXS9nLCBcIlwiKSlcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignYmx1cicsICcuaXAtemwsLmlwLWRqJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdiA9ICQodGhpcykudmFsKCkgfHwgMDtcclxuICAgICAgICAgICAgJCh0aGlzKS52YWwocGFyc2VGbG9hdCh2KSk7XHJcbiAgICAgICAgICAgIHZhciBlbGUgPSAkKHRoaXMpLnBhcmVudHMoJ3RyLmRhdGEnKTtcclxuICAgICAgICAgICAgdmFyIGRqID0gcGFyc2VGbG9hdChlbGUuZmluZCgnLmlwLWRqJykudmFsKCkpXHJcbiAgICAgICAgICAgICAgICAsIHpsID0gcGFyc2VGbG9hdChlbGUuZmluZCgnLmlwLXpsJykudmFsKCkpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLnR0cCcpLnZhbChkaiAqIHpsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmdseXBoaWNvbi1yZW1vdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygndHIuZGF0YScpLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZ2x5cGhpY29uLXBsdXMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBleGlzdCA9IFtdLCBhcnIgPSBbXSwgc3RyID0gJycsIHVsID0gJyc7XHJcbiAgICAgICAgICAgIC8v6I635Y+W5bey5a2Y5Zyo55qE6aG555uuXHJcbiAgICAgICAgICAgICQoJy56ZC10YicpLmZpbmQoJy5meW10JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBleGlzdC5wdXNoKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy/orqHnrpflj6/mt7vliqDnmoTpobnnm65cclxuICAgICAgICAgICAgZm9yICh2YXIgZCBpbiBkZWZhdWx0UHJpY2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0UHJpY2UuaGFzT3duUHJvcGVydHkoZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3QuaW5kZXhPZihkKSA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goZGVmYXVsdFByaWNlW2RdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBhIGluIGFycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcnIuaGFzT3duUHJvcGVydHkoYSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNnID0gYXJyW2FdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bCArPSAnPGxpIGRhdGEtZGo9XCInICsgc2cuaXRlbVByaWNlICsgJ1wiIGRhdGEtemw9XCInICsgc2cuaXRlbVVuaXQgKyAnXCI+JyArIHNnLml0ZW1OYW1lICsgJzwvbGk+JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzdHIgKz0gJzx0ciBjbGFzcz1cImRhdGFcIj4gPHRkPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZnltdCBjaG9vc2VcIiByZWFkb25seSB2YWx1ZT1cIuivt+mAieaLqei0ueeUqOWQjeensFwiLz4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzx1bCBjbGFzcz1cInNlLXBhcnQgZHAtblwiPicgKyB1bCArICc8L3VsPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAnPC90ZD4gPHRkPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaXAtZGpcIiB2YWx1ZT1cIjBcIi8+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvdGQ+IDx0ZD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImlwLXpsXCIgdmFsdWU9XCIwXCIvPjwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8dGQ+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJ0dHBcIiByZWFkb25seSB2YWx1ZT1cIjBcIi8+PC90ZD4gPHRkPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIj48L3NwYW4+PC90ZD4gPC90cj4nO1xyXG4gICAgICAgICAgICAgICAgJCgnLnpkLXRiJykuZmluZCgnLnRyLWFkZCcpLmJlZm9yZShzdHIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHByaWNlSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBEYXRhLnByaWNlTGlzdChmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCAmJiBqc29uLnJlc0JvZHkgJiYganNvbi5yZXNCb2R5LnNMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0ganNvbi5yZXNCb2R5LnNMaXN0O1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYSBpbiBhcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyLmhhc093blByb3BlcnR5KGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gYXJyW2FdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZC5leHBlbnNlRGVmYXVsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSBpbiBkLmV4cGVuc2VUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLmV4cGVuc2VUZW1wbGF0ZS5oYXNPd25Qcm9wZXJ0eShlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHQgPSBkLmV4cGVuc2VUZW1wbGF0ZVtlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFByaWNlW2R0Lml0ZW1OYW1lXSA9IGR0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy/mlLnphY1cclxuICAgIHZhciBncCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZ0RhdGEgPSB7XHJcbiAgICAgICAgICAgIG9mZnNldDogMFxyXG4gICAgICAgICAgICAsIGxpbWl0OiA1XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNob3ctY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBnRGF0YS5vZmZzZXQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgZCA9IHByb2Nlc3NbJCh0aGlzKS5kYXRhKCdpZCcpXTtcclxuICAgICAgICAgICAgc3RvcGdhcCA9IHByb2Nlc3NbJCh0aGlzKS5kYXRhKCdpZCcpXTtcclxuICAgICAgICAgICAgdmFyIGMgPSBkLmNvbXBhbnkgfHwge31cclxuICAgICAgICAgICAgICAgICwgbyA9IGQub3JkZXIgfHwge307XHJcbiAgICAgICAgICAgIHZhciBxZCA9ICcnLCBkYyA9ICcnLCBqYyA9ICcnLCBsaiA9ICcnO1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gJCgnLmNoYW5nZS1wYXJ0Jyk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuZ3AteWRoJykuaHRtbChvLmFpcndheUJpbGxOdW0gfHwgJy8nKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5ncC1raCcpLmh0bWwoYy5jb21wYW55TmFtZSB8fCAnLycpO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG8ub3JkZXJDaGFubmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgcWQgPSAn6Ieq5Yqp6K6i6IixJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBxZCA9ICflv6vpgJ/orqLoiLEnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIHFkID0gJ+WQjuWPsOS4i+WNlSc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHFkID0gJ+iHquWKqeiuouiIsSc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5ncC1xZCcpLmh0bWwocWQgfHwgJy8nKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5ncC1wbScpLmh0bWwoby5jYXJnby5jYXJnb05hbWUgfHwgJy8nKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5ncC1seCcpLmh0bWwoby5jYXJnby5jYXJnb1R5cGUgPT0gMSA/ICfmma7otKcnIDogJ+i9rOWFsycpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLmdwLWJnJykuaHRtbChvLmNhcmdvLmlzQnVsa3lDYXJnbyA/ICfmmK8nIDogJ+WQpicpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLmdwLXBtJykuaHRtbChvLmNhcmdvLmNhcmdvTmFtZSB8fCAnLycpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLmdwLWpzJykuaHRtbCgoby5jYXJnby5jYXJnb0NvdW50IHx8IDApICsgJ1BDUycpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLmdwLXRqJykuaHRtbCgobXlmb3JtYXQuZm9ybWF0dm9sdW1lKG8uY2FyZ28uY2FyZ29TaXplKSB8fCAwKSArICdDQk0nKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5ncC16bCcpLmh0bWwoKG8uY2FyZ28uY2FyZ29XZWlnaHQgfHwgMCkgKyAnS0dTKOiuoei0uemHjemHj++8micgKyBvLmNhcmdvLmNoYXJnaW5nV2VpZ2h0ICsgJ0tHUyknKTtcclxuICAgICAgICAgICAgc3dpdGNoIChvLmJvb2tpbmdTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGRjID0gJ+acquiuouiIsSc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZGMgPSAn5bey6K6i6IixJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgLTE6XHJcbiAgICAgICAgICAgICAgICAgICAgZGMgPSAn6K6i6Iix5aSx6LSlJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBkYyA9ICflt7LmlLnphY0nO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuZ3AtZGMnKS5odG1sKGRjIHx8ICcvJyk7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoby5lbnRyeVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgamMgPSAn5b6F6L+b5LuTJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBqYyA9ICflt7Lov5vku5MnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGpjID0gJ+W3suehruiupCc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5ncC1qYycpLmh0bWwoamMgfHwgJy8nKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5ncC1zJykuaHRtbChvLmRlcHRDb2RlIHx8ICcvJyk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcjZ3AtZScpLnZhbChvLmRlc3RDb2RlIHx8ICcvJyk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcjZ3AtYycpLnZhbChvLmFpckNvbXBhbnlDb2RlIHx8ICcvJyk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcjZ3AtZCcpLnZhbChuZXcgRGF0ZShvLmZsaWdodERhdGUucmVwbGFjZSgvLS9nLCBcIi9cIikpLkZvcm1hdCgneXl5eS1NTS1kZCcpKTtcclxuICAgICAgICAgICAgaWYgKG8uYWlyd2F5SW5mbykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IG8uYWlyd2F5SW5mby50cmFuc1BvcnQ7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxqICs9IGFycltpXS5wb3J0Q29kZSArIChpID09IGFyci5sZW5ndGggLSAxID8gJycgOiAnIC0+ICcpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnI2dwLWQnKS5kYXRldGltZXBpY2tlcih7XHJcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICd5eXl5LW1tLWRkJywvL+aXpeacn+eahOagvOW8j1xyXG4gICAgICAgICAgICAgICAgc3RhcnREYXRlOiBuZXcgRGF0ZShvLmZsaWdodERhdGUucmVwbGFjZSgvLS9nLCBcIi9cIikpLC8v6YCJ5oup5Zmo55qE5byA5aeL5pel5pyfXHJcbiAgICAgICAgICAgICAgICBhdXRvY2xvc2U6IHRydWUsLy/ml6XmnJ/pgInmi6nlrozmiJDlkI7mmK/lkKblhbPpl63pgInmi6nmoYZcclxuICAgICAgICAgICAgICAgIGJvb3Rjc3NWZXI6IDMsLy/mmL7npLrlkJHlt6blkJHlj7PnmoTnrq3lpLRcclxuICAgICAgICAgICAgICAgIGxhbmd1YWdlOiAnemgtQ04nLC8v6K+t6KiAXHJcbiAgICAgICAgICAgICAgICBtaW5WaWV3OiBcIm1vbnRoXCIvL+ihqOekuuaXpeacn+mAieaLqeeahOacgOWwj+iMg+WbtO+8jOm7mOiupOaYr2hvdXJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuZ3AtbCcpLmh0bWwobGogfHwgJy8nKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5iZy1pcCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wcm9wKCdyZWFkb25seScsIEJvb2xlYW4oby5kZWNsYXJlU3RhdGUpKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkKCcuaHhsYicpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgZWxlLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5ncC1wYWdlcyAucGFnZXMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGdEYXRhLm9mZnNldCA9ICQodGhpcykuZGF0YSgnb2Zmc2V0Jyk7XHJcbiAgICAgICAgICAgIGludGkoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2dwLXNlYXJjaCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZ0RhdGEub2Zmc2V0ID0gMDtcclxuICAgICAgICAgICAgaW50aSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjY2hhbmdlLWVuc3VyZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGVsZSA9ICQoJ2lucHV0W25hbWU9XCJpLXNnXCJdOmNoZWNrZWQnKTtcclxuICAgICAgICAgICAgaWYgKGVsZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFzcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgZml4ID0gJCgnI2dwLWZpeCcpLnByb3AoJ2NoZWNrZWQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwcmljZSA9ICQoJyNncC1kaicpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpeCAmJiAhcHJpY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI2dwLWRqJykuY3NzKCdib3JkZXItY29sb3InLCAncmVkJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNncC1kaicpLmNzcygnYm9yZGVyLWNvbG9yJywgJyNkNGQ0ZDQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChwYXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwib3JkZXJJZFwiOiBzdG9wZ2FwLm9yZGVyLm9yZGVySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYWdlbnRDb21wYW55SWRcIjogMTAwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYWdlbnRJZFwiOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImFpcndheUlkXCI6IGVsZS5kYXRhKCdpZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImZsaWdodERhdGVcIjogJCgnI2dwLWQnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJQcmljZVwiOiBwcmljZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJmaXhQcmljZVwiOiBmaXhcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIERhdGEuZ3AoZGF0YSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfmlLnphY3miJDlip/vvIEnLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnIHx8ICfmlLnphY3lpLHotKXvvIzor7fph43or5XvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+ivt+mAieaLqeS4gOadoeiIque6vyEnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBpbnRpID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGFzcyA9IHRydWU7XHJcbiAgICAgICAgICAgICQoJy5zLXJlcScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKHRoaXMpLnZhbCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHBhc3MpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiZGVwdENvZGVcIjogJCgnI2dwLXMnKS5odG1sKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJkZXN0Q29kZVwiOiAkKCcjZ3AtZScpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZmxpZ2h0RGF0ZVwiOiBuZXcgRGF0ZSgkKCcjZ3AtZCcpLnZhbCgpLnJlcGxhY2UoLy0vZywgXCIvXCIpKSxcclxuICAgICAgICAgICAgICAgICAgICBcImFpckNvbXBhbnlDb2RlXCI6ICQoJyNncC1jJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0cmFuc0NvdW50XCI6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJvZmZzZXRcIjogZ0RhdGEub2Zmc2V0IHx8IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJsaW1pdFwiOiBnRGF0YS5saW1pdCB8fCA1XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgRGF0YS5zZWFyY2goZGF0YSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBEb20uaW5uZXJMaXN0KGpzb24sIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5oeGxiJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICB2YXIgYWlycG9ydHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/ojrflj5bmnLrlnLrlkI3np7BcclxuICAgICAgICAkKGRvY3VtZW50KS5vbigna2V5dXAnLCAnI2dwLWUnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSAkKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAsIHVsID0gX3RoaXMuc2libGluZ3MoJy5nZXQtbmFtZScpO1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB1bC5maW5kKCcuYWN0aXZlJykuaW5kZXgoKSB8fCAwXHJcbiAgICAgICAgICAgICAgICAsIGxlbiA9IHVsLmNoaWxkcmVuKCkubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7Ly/lm57ovabplK5cclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gdWwuY2hpbGRyZW4oJy5hY3RpdmUnKS5kYXRhKCd2YWwnKSB8fCB1bC5maW5kKCdsaTpmaXJzdC1jaGlsZCcpLmRhdGEoJ3ZhbCcpIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmRhdGEoJ3ZhbCcsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdWwuaGlkZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSAzOCkgey8v5LiK6ZSuXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGluZGV4ID09IDAgPyBsZW4gLSAxIDogaW5kZXggLSAxO1xyXG4gICAgICAgICAgICAgICAgdWwuZmluZCgnbGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB1bC5maW5kKCdsaScpLmVxKGluZGV4KS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDQwKSB7Ly/kuIvplK5cclxuICAgICAgICAgICAgICAgIGluZGV4ID0gaW5kZXggPT0gbGVuIC0gMSA/IDAgOiBpbmRleCArIDE7XHJcbiAgICAgICAgICAgICAgICB1bC5maW5kKCdsaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHVsLmZpbmQoJ2xpJykuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHsvL+ato+W4uOi+k+WFpVxyXG4gICAgICAgICAgICAgICAgRGF0YS5nZXROYW1lKHtrZXk6IF90aGlzLnZhbCgpfSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQm9keScgaW4ganNvbiAmJiBqc29uLnJlc0JvZHkgaW5zdGFuY2VvZiBBcnJheSAmJiBqc29uLnJlc0JvZHkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgYm9keSA9IGpzb24ucmVzQm9keTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYiBpbiBib2R5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYm9keS5oYXNPd25Qcm9wZXJ0eShiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gYm9keVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzxsaSBkYXRhLXZhbD1cIicgKyBkLmFpcnBvcnRDb2RlICsgJ1wiIGNsYXNzPVwiJyArIChiID09IDAgPyAnYWN0aXZlJyA6ICcnKSArICdcIj4nICsgZC5kaXNwbGF5TmFtZSArICc8L2xpPidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5odG1sKHN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vaW5wdXTlpLHljrvnhKbngrlcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignYmx1cicsICcjZ3AtZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCEkKHRoaXMpLnByb3AoJ3JlYWRvbmx5JykpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1bCA9ICQodGhpcykuc2libGluZ3MoJy5nZXQtbmFtZScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB1bC5jaGlsZHJlbignLmFjdGl2ZScpLmRhdGEoJ3ZhbCcpIHx8IHVsLmZpbmQoJ2xpOmZpcnN0LWNoaWxkJykuZGF0YSgndmFsJykgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbChkYXRhKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZGF0YSgndmFsJywgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB1bC5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvL2xp5YWD57Sg5oKs5rWu6I635b6X54Sm54K5XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ21vdXNlZW50ZXIgJywgJy5nZXQtbmFtZSBsaScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGNvbXBhbnkgPSBmdW5jdGlvbiAoKSB7XHJcbi8v6I635Y+W5py65Zy65ZCN56ewXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2tleXVwJywgJyNncC1jJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gJCh0aGlzKVxyXG4gICAgICAgICAgICAgICAgLCB1bCA9IF90aGlzLnNpYmxpbmdzKCcuZ2V0LW5hbWUnKTtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gdWwuZmluZCgnLmFjdGl2ZScpLmluZGV4KCkgfHwgMFxyXG4gICAgICAgICAgICAgICAgLCBsZW4gPSB1bC5jaGlsZHJlbigpLmxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykgey8v5Zue6L2m6ZSuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHVsLmNoaWxkcmVuKCcuYWN0aXZlJykuZGF0YSgndmFsJykgfHwgdWwuZmluZCgnbGk6Zmlyc3QtY2hpbGQnKS5kYXRhKCd2YWwnKSB8fCAnJztcclxuICAgICAgICAgICAgICAgICQodGhpcykudmFsKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5kYXRhKCd2YWwnLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgIHVsLmhpZGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gMzgpIHsvL+S4iumUrlxyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCA9PSAwID8gbGVuIC0gMSA6IGluZGV4IC0gMTtcclxuICAgICAgICAgICAgICAgIHVsLmZpbmQoJ2xpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdWwuZmluZCgnbGknKS5lcShpbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSA0MCkgey8v5LiL6ZSuXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGluZGV4ID09IGxlbiAtIDEgPyAwIDogaW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgdWwuZmluZCgnbGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB1bC5maW5kKCdsaScpLmVxKGluZGV4KS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7Ly/mraPluLjovpPlhaVcclxuICAgICAgICAgICAgICAgIERhdGEuZ2V0Q29kZSh7a2V5OiBfdGhpcy52YWwoKX0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0JvZHknIGluIGpzb24gJiYganNvbi5yZXNCb2R5IGluc3RhbmNlb2YgQXJyYXkgJiYganNvbi5yZXNCb2R5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGJvZHkgPSBqc29uLnJlc0JvZHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGIgaW4gYm9keSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJvZHkuaGFzT3duUHJvcGVydHkoYikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGJvZHlbYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICc8bGkgZGF0YS12YWw9XCInICsgZC5haXJsaW5lQ29kZSArICdcIiBjbGFzcz1cIicgKyAoYiA9PSAwID8gJ2FjdGl2ZScgOiAnJykgKyAnXCI+JyArIGQuY29tcGFueU5hbWUgKyAnPC9saT4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLmh0bWwoc3RyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWwuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy9pbnB1dOWkseWOu+eEpueCuVxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdibHVyJywgJyNncC1jJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoISQodGhpcykucHJvcCgncmVhZG9ubHknKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVsID0gJCh0aGlzKS5zaWJsaW5ncygnLmdldC1uYW1lJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHVsLmNoaWxkcmVuKCcuYWN0aXZlJykuZGF0YSgndmFsJykgfHwgdWwuZmluZCgnbGk6Zmlyc3QtY2hpbGQnKS5kYXRhKCd2YWwnKSB8fCAnJztcclxuICAgICAgICAgICAgICAgICQodGhpcykudmFsKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5kYXRhKCd2YWwnLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgIHVsLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBvcEluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgRGF0YS5vcExpc3QoZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgdmFyIG9wdGlvbiA9ICcnO1xyXG4gICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCAmJiBqc29uLnJlc0JvZHkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IGpzb24ucmVzQm9keSB8fCBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgYXJyLmxlbmd0aDsgYSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIGFyclthXS5tZW1iZXJJZCArICdcIj4nICsgYXJyW2FdLm5hbWUgKyAnPC9vcHRpb24+J1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCgnI2N6eScpLmh0bWwob3B0aW9uKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbiA9ICfmmoLml6Dmk43kvZzlkZjvvIzor7fmt7vliqDvvIEnO1xyXG4gICAgICAgICAgICAgICAgJCgnLnRyYW5zZmVyLXBhcnQnKS5maW5kKCcuZHAtdGInKS5odG1sKG9wdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgcnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxpc3RlbmVyKCk7XHJcbiAgICAgICAgaW5pdCgpO1xyXG4gICAgICAgIHN1Ym1pdCgpO1xyXG4gICAgICAgIHpkVGFibGUoKTtcclxuICAgICAgICBwcmljZUluaXQoKTtcclxuICAgICAgICBncCgpO1xyXG4gICAgICAgIGFpcnBvcnRzKCk7XHJcbiAgICAgICAgY29tcGFueSgpO1xyXG4gICAgICAgIG9wSW5pdCgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcnVuOiBydW5cclxuICAgIH1cclxufSgpKTtcclxubW9kdWxlLmV4cG9ydHMuTGlzdGVuZXIgPSBMaXN0ZW5lcjsiXX0=
