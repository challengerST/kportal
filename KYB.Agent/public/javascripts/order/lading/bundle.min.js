(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * Created by zrz on 2016/2/26.
 * @version 1.0.0 created 通用性功能方法
 */

'use strict';

var Fun = (function () {
    var _timeOut = 100000;//请求超时时间为10s
    /**
     * 封装ajax
     * @param option
     * {
     *      url:"请求的地址"
     *      ,method:"请求的方法"
     *      ,async:"是否并发"
     *      ,data:"发送的数据"
     *      ,success:"成功时回调"
     *      ,error:"失败/超时时回调"
     *      ,timeout:"超时时间"
     *      ,complete:"完成后的回调"
     * }
     */
    var ajax = function (option) {
        //ajax开始时应显示“加载信息框”
        Modal.showLoading();
        $.ajax({
            url: option.url
            , type: "type" in option && option.type || "GET"
            , timeout: option.timeout || _timeOut
            , data: "data" in option && option.data || {}
            , dataType: "json"
            , async: ("async" in option && option.async) ? true : false
            , success: function (json) {
                if ("status" in json && json.status > 0 && "data" in json) {
                    if ("success" in option) {
                        option.success(json.data);
                    } else {
                        Modal.setAlert("无success方法!");
                    }
                } else if ("error" in option && option.error instanceof Function) {
                    option.error(json);
                } else {
                    Modal.setAlert('操作失败!');
                }
            }, error: function (xhr) {//404或者超时
                if ("error" in option && option.error instanceof Function) {
                    //提示用户错误信息
                    Modal.showLoading(false);
                    Modal.setAlert("连接服务器失败，状态：" + (xhr.status || -1) + ",信息：" + (xhr.statusText || "-"));
                    option.error(xhr.status, xhr.statusText);//回调请求的状态和错误信息
                }
            }, complete: function (xhr, type) {
                //关闭“加载信息框”
                Modal.showLoading(false);
                if ("complete" in option && option.complete instanceof Function) {
                    option.complete(xhr, type);//回调请求的xhr信息和类型
                }
            }
        });
    };
    //全选和单选的绑定
    var setCheckboxListener = function (allCheck, radioChecks) {
        //筛选单选按钮组
        var radioValueEles = $(radioChecks);
        //点击全选时，同组按钮被同步
        $(document).delegate(allCheck, "click", function () {
            if (radioValueEles && radioValueEles.length > 0) {
                for (var _r = 0; _r < radioValueEles.length; _r++) {
                    radioValueEles[_r].checked = $(this).is(":checked");
                }
            }
        });
        //点击单选按钮时，
        $(document).delegate(radioChecks, "click", function () {
            $(allCheck)[0].checked = $(radioChecks + ":checked").length == $(radioChecks).length;
        });
    };
    var url = (function () {
        var get = function (name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return decodeURI(r[2]);
            return null;
        };
        /**
         * 根据参数列表长度进行判断，兼容IE9
         * @returns {string}
         */
        var set = function () {
            if (arguments.length === 1 && typeof arguments[0] === 'object') {//一个对象，使用key标记value
                var obj = arguments[0]
                    , search = location.search;
                for (var o in obj) {
                    if (obj.hasOwnProperty(o)) {
                        search = changeURLKeyValue(search, o, obj[o]);
                    }
                }
                if ('pushState' in history) {
                    history.pushState(null, document.title, search);
                } else if ('pushState' in History) {//ie9 不支持pushState方法,javascript.ejs中添加history.js完成html4对pushState的支持
                    History.pushState(null, null, search);//返回重新构造后search串
                }
            } else if (arguments.length === 2) {//key+value
                var key = arguments[0]
                    , value = arguments[1];
                if ('pushState' in history) {
                    history.pushState(null, document.title, changeURLKeyValue(location.toString(), key, value));
                } else if ('pushState' in History) {//ie9 不支持pushState方法,javascript.ejs中添加history.js完成html4对pushState的支持
                    History.pushState(null, null, changeURLKeyValue(location.search, key, value));//返回重新构造后search串
                }
            }
            function changeURLKeyValue(url, arg, arg_val) {
                var pattern = arg + '=([^&]*)';
                var replaceText = arg + '=' + arg_val;
                if (url.match(pattern)) {
                    var tmp = '/(' + arg + '=)([^&]*)/gi';
                    tmp = url.replace(eval(tmp), replaceText);
                    return tmp;
                } else {
                    if (url.match('[\?]')) {
                        return url + '&' + replaceText;
                    } else {
                        return url + '?' + replaceText;
                    }
                }
            }
        };
        return {
            get: get
            , set: set
        }
    }());

    var formatImage=function (path, size, ele) {
        if(path instanceof  Array && path.length>0){
            path = path[0];
        }
        var IMAGE_SIZE = {
            original: {
                path: "",
                size: ""
            },
            xlarge: {
                path: "_xlarge",
                size: "660*660"
            },
            large: {
                path: "_large",
                size: "420*420"
            },
            middle: {
                path: "_middle",
                size: "300*300"
            },
            small: {
                path: "_small",
                size: "240*240"
            },
            little: {
                path: "_little",
                size: "120*120"
            },
            micro: {
                path: "_micro",
                size: "60*60"
            }
        };
        size = IMAGE_SIZE[size || "middle"] || IMAGE_SIZE.middle;
        var pathTemp = /\.\w+?$/.exec(path);
        if (!pathTemp) {
            path += size.path;
        } else {
            path = (path.substr(0, pathTemp.index || path.length)) + size.path + pathTemp[0];
        }
        if (ele && ele.attr) {
            ele.attr("src", path);
        }
        return path;
    };
    //金额格式化小数点2位
    var format = (function () {
        var formatamount = function(_value){
            return parseFloat(_value).toFixed(2);
        };
        //体积格式化小数点2位
        var formatvolume = function(_value){
            return parseFloat(_value).toFixed(3);
        };
        //重量格式化小数点2位
        var formatweight = function(_value){
            return parseFloat(_value).toFixed(3);
        };
        return {
            formatamount: formatamount
            , formatvolume: formatvolume
            , formatweight: formatweight
        }
    }());
    return {
        ajax: ajax
        , getTimtout: _timeOut
        , setCheckboxListener: setCheckboxListener
        , url: url
        , formatImage: formatImage
        , format: format
    }
}());

exports.ajax = Fun.ajax;
exports.getTimeout = Fun.getTimtout;
exports.setCheckboxListener = Fun.setCheckboxListener;
exports.url = Fun.url;
exports.formatImage = Fun.formatImage;
exports.format = Fun.format;

},{}],2:[function(require,module,exports){
/**
 * Created by zrz on 2016/2/24.
 * @version 1.0.0 created
 */

'use strict';

//构造信息框主体
var Modal = (function () {
    //构造原始类
    function M(m) {
        this.s = m.s;//是否显示
        this.id = m.id;
    }

    //构造标准show方法，用于继承
    M.prototype.show = function () {
        var ele = document.getElementById(this.id);
        if (ele) {
            if (this.s && !isShow()) {//显示当前隐藏
                ele.className = ele.className.replace("dp-n", "");
            } else if (!this.s && isShow()) {//隐藏当前显示
                ele.className += " dp-n";
            }
            //去除两边的空格
            ele.className = String(ele.className).trim();
        }
        function isShow() {//是否已显示，无class时显示
            return ele.className.split("dp-n").length == 1;
        }
    };

    //加载信息框
    var loading = (function () {
        //初始化生成加载信息框
        var init = function () {
            if (!document.getElementById("loading_modal_element")) {
                $('body').append('<div id="loading_modal_element" class="loading-modal-body dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="loading-modal-image"></div>' +
                    '<div class="loading-modal-text">' +
                    '<h2>玩命加载中……</h2>' +
                    '</div></div>');
            }
            return false;
        };
        //显示、隐藏信息框
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;//无参数显示信息框
            var m = new M({id: "loading_modal_element", s: s});
            m.show();
        };
        return {
            init: init
            , show: show
        }
    }());
    //弹出信息框
    var alert = (function () {
        var init = function () {
            if (!document.getElementById("alert_modal_element")) {
                $('body').append('<div id="alert_modal_element" class="alert-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="alert-modal-content">' +
                    '<div class="alert-modal-body"><span class="alert-modal-text"></span></div>' +
                    '<div class="alert-modal-footer"><button id="alert_modal_close" class="alert-modal-button">关闭</button></div>' +
                    '</div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "alert_modal_element", s: s});
            m.show();
        };
        /**
         * 设置弹出信息框
         * @param msg       显示的信息，支持html
         * @param sed       倒计时关闭时间，单位：second
         * @param callback  关闭触发回调函数
         */
        var set = function (msg, sed, callback) {
            var ele = document.getElementById("alert_modal_element");
            if (msg) {
                if (typeof msg === 'object') {//应对后端返回提示时使用Object封装
                    msg = JSON.stringify(msg);
                }
                if(ele){
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }else{
                    init();
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }
                show();
            }
            if (sed > 0) {
                setTimeout(function () {
                    show(false);
                }, 1000 * sed);
            }//无关闭时间或者关闭时间为0，不自动关闭
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#alert_modal_close").on("click", function () {
                if (callback && callback instanceof Function) {
                    callback();
                }
                show(false);
                //阻止事件继续传递
                return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //选择信息框
    var confirm = (function () {
        var init = function () {
            if (!document.getElementById("confirm_modal_element")) {
                $('body').append('<div id="confirm_modal_element" class="confirm-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="confirm-modal-content">' +
                    '<div id="confirm_modal_header" class="confirm-modal-header dp-n"></div>' +
                    '<div class="confirm-modal-body"><span id="confirm_modal_text" class="confirm-modal-text"></span></div>' +
                    '<div class="confirm-modal-footer">' +
                    '<div class="footer-button-success"><button class="confirm-modal-button  modal-success" data-confirm="success">确认</button></div>' +
                    '<div class="footer-button-false"><button class="confirm-modal-button" data-confirm="error">取消</button></div>' +
                    '</div></div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "confirm_modal_element", s: s});
            m.show();
        };
        /**
         * 设置选择信息框的内容
         * @param option    配置
         * {
         *      title:"头部显示的信息"
         *      ,text:"显示的提示信息"
         *      ,success:"点击成功后的回调"
         *      ,error:"点击失败后的回调"
         *      ,complete:"点击按钮后的整体回调"
         * }
         */
        var bar = 0;
        var set = function (option) {
            if (!option) {
                return false;
            }
            if ("title" in option && option.title.length > 0) {//有头部，则显示头部
                document.getElementById("confirm_modal_header").innerHTML = option.title;
            }
            if ("text" in option && option.text.length > 0) {//有内容，则显示整个选择信息框
                document.getElementById("confirm_modal_text").innerHTML = option.text;
            }
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#confirm_modal_element").find(".confirm-modal-button").off("click").on("click", function () {
                //fixme .off("click")用于防止多次触发<--很玄学，我也不知道为什么，但是请不要修改。
                var atr = $(this).attr("data-confirm");//选择的按钮
                bar++;
                if (option && atr in option && option[atr] instanceof Function) {
                    option[atr]();
                }
                if (option && "complete" in option && option.complete instanceof Function) {
                    option.complete();//若有完成函数，则执行
                } else {//否则，关闭选择框
                    show(false);
                }
                //阻止事件继续传递
                //return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //覆盖层
    var cover = (function () {
        var init = function () {
            if (!document.getElementById("cover_modal_element")) {
                $('body').append('<div id="cover_modal_element" class="cover-modal-element dp-n"></div>');
            }
            return false;
        };
        var hide = function () {
            document.getElementById("cover_modal_element").style.display = "none";
        };
        var show = function () {
            document.getElementById("cover_modal_element").style.display = "block";
        };
        return {
            init: init
            , show: show
            , hide: hide
        }
    }());
    return {
        initLoading: loading.init
        , showLoading: loading.show

        , initAlert: alert.init
        , showAlert: alert.show
        , setAlert: alert.set

        , initConfirm: confirm.init
        , setConfirm: confirm.set
        , showConfirm: confirm.show
        , initCover: cover.init
    }
}());

//页面加载完毕后生成四个自定义模态框
setTimeout(function () {
    //页面加载时生成一个覆盖层
    Modal.initCover();
    //页面加载时生成一个加载信息框
    Modal.initLoading();
    //页面加载时生成一个弹出信息框
    Modal.initAlert();
    //页面加载时生成一个选择信息框
    Modal.initConfirm();
}, 100);


//抛出上层调用
exports.showLoading = Modal.showLoading;
exports.setAlert = Modal.setAlert;
exports.showAlert = Modal.showAlert;
exports.setConfirm = Modal.setConfirm;
exports.showConfirm = Modal.showConfirm;
},{}],3:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";

require('./listener').run();

},{"./listener":4}],4:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var Modal = require('../../general/modal')
    ,myformat = require('../../general/function').format;
var Listener = (function () {
    var listener = function () {
            $(document).on('keyup','.jiesuanma textarea',function(e){
             //   $('.sanzima1').html($(this).val());
                if (e.keyCode==32)  //回车键的键值为13,空格未32
                {
                   //$(this).val( $(this).val() + '\n')
                }
                $('.sanzima2').html($(this).val());
                //$('.sanzima2').html($(this).val().replace(/\n/ig,'<br/>'));
                $('.printshow').html($(this).val().replace(/\n/ig,'<br/>'));
            });
            //$(document).on('input','.guige',function(){
            //    var ss=$(this).html();
            //    if(($(this).height()/21)>16){
            //        var ss=$(this).html();
            //    }
            //});
        var htmlright='';
        var htmlleft='';
        var rows =1;
        var masRows = 17;
        var hasSub =$('.container').data('hassub');
        if(hasSub){
            htmlright = '<span>console</span><br>';
        }else{
            if($('.guige').data('pm')){
                var str;
                str=($('.guige').data('pm')).replace(/，/ig,',');
                var tt=str.split(',');
                for(var i=0;i<tt.length;i++){
                    rows++;
                    if (rows < masRows) {
                        htmlright+='<span>'+tt[i]+'</span><br>';
                    } else {
                        htmlleft += '<span>' + tt[i] + '</span><br>'
                    }
                }
            }
            if($('.guige').data('mt')){
                var str;
                str=($('.guige').data('mt')).replace(/，/ig,',');
                var tt=str.split(',');
                for(var i=0;i<tt.length;i++){
                    rows++;
                    if (rows < masRows) {
                        htmlright+='<span>'+tt[i]+'</span><br>'
                    } else {
                        htmlleft += '<span>' + tt[i] + '</span><br>'
                    }
                }
            }
        }
        if($('.guige').data('size')){
            var str;
            //str=($('.guige').data('size')).replace(/，/ig,',');
            var tt=$('.guige').data('size').split(',');
            for(var i=0;i<tt.length-1;i++) {
                rows++;
                if (rows < masRows) {
                    htmlright += '<span>' + tt[i] + '</span><br>'
                } else {
                    htmlleft += '<span>' + tt[i] + '</span><br>'
                }
            }
        }

        $('.guige').html(htmlright);
        $('.guigebuchong').html(htmlleft);
        $(document).on('click', '#pdf', function () {
            if( $("#save").data("status") ==0){
                Modal.setAlert('请先点击保存按钮！');
                return;
            }
            if($('.guigebuchong').css('border')!='none'){
                var code = '<!DOCTYPE html> <html lang="zh-CN"> <head> <meta charset="UTF-8"> ' +
                    '<meta name="Generator" content="Jeremy"> <meta name="Author" content="Jeremy"> ' +
                    '<meta name="Keywords" content=""> <meta name="Description" content="">' +
                    ' <title>提单确认</title> <style>' + $('style').html() + '</style></head> <body>' +
                    '<div class="container"><div class="td">' + $('.td').html() + '</div></div></body> </html>';

                $.ajax({
                    url: '/api/other/pdf'
                    , type: 'post'
                    , data: {code: code, name: '提单'}
                    , dataType: 'json'
                    , timeout: 100000
                    , success: function (json) {
                        if ('status' in json && json.status == 1) {
                            window.open("/download/pdf");
                        }
                    }
                });
            }
        });
        $(document).on('click', '#down', function () {
            //下载给航空公司
            if( $("#save").data("status") ==0){
                Modal.setAlert('请先点击保存按钮！');
                return;
            }
            //计费重量改为毛重，体积改为实际进仓数据
            var oldzl = $(".jfzl").html();
            var oldSize =  $('.pm').find('span').html();
            $(".jfzl").html($(".zl").html());
            $('.pm').find('span').html($('.pm').find('span').data('z'));
            if($('.guigebuchong').css('border')!='none'){
                var code = '<!DOCTYPE html> <html lang="zh-CN"> <head> <meta charset="UTF-8"> ' +
                    '<meta name="Generator" content="Jeremy"> <meta name="Author" content="Jeremy"> ' +
                    '<meta name="Keywords" content=""> <meta name="Description" content="">' +
                    ' <title>提单确认</title> <style>' + $('style').html() + '</style></head> <body>' +
                    '<div class="container"><div class="td">' + $('.td').html() + '</div></div></body> </html>';

                $.ajax({
                    url: '/api/other/pdf'
                    , type: 'post'
                    , data: {code: code, name: '提单'}
                    , dataType: 'json'
                    , timeout: 100000
                    , success: function (json) {
                        if ('status' in json && json.status == 1) {
                            window.open("/download/pdf");
                            $(".jfzl").html(oldzl);
                            $('.pm').find('span').html(oldSize);
                        }
                    }
                });
            }
        });
        $(document).on('click', '#print', function () {
            if( $("#save").data("status") ==0){
                Modal.setAlert('请先点击保存按钮！');
                return;
            }
            //打印，需要下移增加样式控制，适应纸质打印模板
            var printStyle='<style>p,span,div{font-size:22px}.air-company,.FP{font-size:22px}.wordremark,.jiesuanma textarea,.airlineInfo,.qfrq{font-size:20px}.info-start{top:528px}.to1{top:573px}.to2{top:573px}.info-zz1{top:573px}.info-zz2{top:573px}.info-zz3{top:573px}.info-zz1-cd{top:573px}.CNY{top:573px}.P1{top:573px}.P2{top:573px}.NVD{top:573px}.NVC{top:573px}.mdg{top:628px}.hbh{top:628px}.qfrq{top:628px}.airlineInfo{top:628px}.pm{left:830px}.js{top:831px}.zl{top:831px}.jfzl{top:831px}.dj{top:831px}.yf{top:831px}.unit{top:831px}.unit2{top:831px}.guige{top:824px;left:830px}.guigebuchong{top:858px}.wordremark{top:858px}.pm{top:1174px}.yf2{top:1180px}.zfmx{top:1180px}.sanzima2{top:1344px}.zf{top:1375px}.zj{top:1470px}.btm-info{top:1470px}.foot-yd{top:1550px}</style>'
            var code = '<!DOCTYPE html> <html lang="zh-CN"> <head> <meta charset="UTF-8"> ' +
                '<meta name="Generator" content="Jeremy"> <meta name="Author" content="Jeremy"> ' +
                '<meta name="Keywords" content=""> <meta name="Description" content="">' +
                ' <title>提单确认</title> <style>' + ($('style').html().replace('background: url("http://kybpublic.oss-cn-shanghai.aliyuncs.com/images/img/td.png") no-repeat;', '')) + '</style>'+printStyle+'</head> <body>' +
                '<div class="container"><div class="td">' + $('.td').html() + '</div></div></body> </html>';
            $.ajax({
                url: '/api/other/pdf'
                , type: 'post'
                , data: {code: code, name: '提单'}
                , dataType: 'json'
                , timeout: 100000
                , success: function (json) {
                    if ('status' in json && json.status == 1) {
                        window.open("/download/pdf");
                    }
                }
            });
        });
        $(document).on('click', '.dl-yld', function () {
            var code = '<!DOCTYPE html> <html lang="zh-CN"> <head> <meta charset="UTF-8"> ' +
                '<meta name="Generator" content="Jeremy"> <meta name="Author" content="Jeremy"> ' +
                '<meta name="Keywords" content=""> <meta name="Description" content="">' +
                ' <title>提单确认</title> <style>' + $('style').html() + '</style></head> <body>' +
                $('.container').html() + '</body> </html>';
            $.ajax({
                url: '/api/other/pdf'
                , type: 'post'
                , data: {code: code, name: '预录单'}
                , dataType: 'json'
                , timeout: 100000
                , success: function (json) {
                    if('status' in json && json.status == 1) {
                        window.open("/download/pdf");
                    }
                }
            });
        });
        $(document).on('click', '#ensure', function () {
            var data = {
                "memberId": 0,
                "orderId": $(this).data('id')
            };
            $.ajax({
                url: '/api/order/orderConfirm'
                , type: 'post'
                , data: data
                , dataType: 'json'
                , timeout: 100000
                , success: function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert('确认成功！', null, function () {
                            location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '确认失败，请重试！');
                    }
                }
            });
        });
        //保存提单
        $(document).on('click', '#save', function () {
            if( $(this).data("status") ==1){
                $('.sanzima1').addClass('tt');
                $('.wordremark').attr("style","");
                $('.wordremark').addClass('tt');
                $('.sanzima2').addClass('tt');
                $('.sanzima1').find('input').removeAttr("style");
               // $('.jiesuanma').addClass('tt');
                //$('.jiesuanma').find('texterea').removeAttr("style");
                $('.inputshow').show();
                $('.printshow').hide();

                $('.guige').addClass('tt');
                $('.guigebuchong').addClass('tt');
                $('.jfzl').addClass('tt');
                $(this).html("保存");
                $(this).data("status",0);
                return;
            }
            var _this = this;
            $('.sanzima1').removeClass('tt');
            $('.wordremark').removeClass('tt');
            $('.wordremark').css({'background':'rgba(0,0,0,0)','border':'none'});
            $('.sanzima2').removeClass('tt');
           // $('.jiesuanma').removeClass('tt');
          //  $('.jiesuanma').find('textarea').css({'background':'rgba(0,0,0,0)','border':'none'});
            $('.inputshow').hide();
            $('.printshow').show();
            $('.sanzima1').find('input').css({'background':'rgba(0,0,0,0)','border':'none'});

            $('.guige').removeClass('tt');
            $('.guigebuchong').removeClass('tt');
            $('.jfzl').removeClass('tt');
            var data = {
                "memberId": 0,
                "orderId": $(this).data('id'),
                "SettlementCode1": $('.sanzima1').find('input').val(),
                "SettlementCode2": $('.jiesuanma').find('textarea').val(),
                "SettlementCode3": $('.jiesuanma').find('textarea').val(),
                "BillRemark": $('.wordremark').val().trim(),
                "subNum": $('.zd-t').data('id')||'',
                "chargingWeight" :$('.jfzl').html()
            };
            $.ajax({
                url: '/api/order/detail/ladingSave'
                , type: 'post'
                , data: data
                , dataType: 'json'
                , timeout: 100000
                , success: function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert('保存成功！', null, function () {
                           $(_this).data("status",1);
                            $(_this).html("编辑");
                            //location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '确认失败，请重试！');
                    }
                }
            });
        });

    };
    var priceInit = function () {
        $.ajax({
            url: '/api/order/detail/tactPrice'
            , type: 'post'
            , data: {
                "orderId": $('.container').data('id')
            }
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                $(".zd-t").data('id');
                if (json && 'resCode' in json && json.resCode == 0) {
                    var data = json.resBody || {};
                    $('.dj').html($(".zd-t").data('id')==''?data.price.toFixed(2):'');
                    $('.yf').html($(".zd-t").data('id')==''?data.tactCharge.toFixed(2):'');
                    $('.yf2').html($(".zd-t").data('id')==''?data.tactCharge.toFixed(2):'');
                    $('.zj').html($(".zd-t").data('id')==''?data.totalCharge.toFixed(2):'');
                    $('.zfmx').data("awc",data.awc);
                    tactChange();
                }
            }
        });
    };
    var printInit = function () {

        if($("#save").data("status")==1){
            $('.sanzima1').removeClass('tt');
            $('.wordremark').removeClass('tt');
            $('.wordremark').css({'background':'rgba(0,0,0,0)','border':'none'});
            $('.sanzima2').removeClass('tt');

            //$('.jiesuanma').removeClass('tt');
            //$('.jiesuanma').find('textarea').css({'background':'rgba(0,0,0,0)','border':'none'});
            $('.inputshow').hide();
            $('.printshow').show();
            $('.sanzima1').find('input').css({'background':'rgba(0,0,0,0)','border':'none'});
            $('.guige').removeClass('tt');
            $('.guigebuchong').removeClass('tt');
            $('.jfzl').removeClass('tt');
            $("#save").html("编辑");
        }
        //小数点控制
        var size = myformat.formatvolume($('.pm').find('span').data('z'));
        $('.pm').find('span').data('z',size);
        $('.pm').find('span').html(size);
        $('.zl').html(myformat.formatweight($('.zl').html()));
        $('.jfzl').html(myformat.formatweight($('.jfzl').html()));
    };
    var tactChange = function() {
        var Awc, Myc, Scc;
        Awc = $(".zd-t").data('id') == '' ? 'AWC：' + parseFloat($('.zfmx').data("awc")).toFixed(2) : '';
        //myc计费重量
        Myc = $(".zd-t").data('id') == '' ? 'MYC：' + parseFloat($('.jfzl').html()).toFixed(2) : '';
        //MSC 计费重量乘以0.8
        Scc = $(".zd-t").data('id') == '' ? 'MSC：' + (parseFloat($('.jfzl').html()) * 0.8).toFixed(2) : '';
        $('.zfmx').html(
            (1 ? Awc + '<br/>' : '') +
            (1 ? Myc + '<br/>' : '') +
            (1 ? Scc : '')
        );

        var xx = (parseFloat($('.zfmx').data("awc")) + parseFloat($('.jfzl').html()) + parseFloat($('.jfzl').html()) * 0.8).toFixed(2);
        $('.zf').html($(".zd-t").data('id') == '' ? xx : '');
        if ($('.container').data("sid")) {
            $('.zj').html('');
        } else {
            $('.zj').html((parseFloat($('.yf2').html()) + parseFloat(xx)).toFixed(2));
        }

    }
    $(document).on('input','.jfzl',function(){
        //体积谁小取谁
        var calsize = parseFloat($('.jfzl').html())*0.006;
        $('.pm').find('span').html(calsize > parseFloat($('.pm').find('span').data('z'))?$('.pm').find('span').data('z'):myformat.formatvolume(calsize));
        tactChange();
    });
    var run = function () {
        listener();
        priceInit();
        printInit();
    };
    return {
        run: run
    }
}());
module.exports = Listener;
},{"../../general/function":1,"../../general/modal":2}]},{},[3])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL252bS92Ni4yLjAvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi4uLy4uL2dlbmVyYWwvZnVuY3Rpb24uanMiLCIuLi8uLi9nZW5lcmFsL21vZGFsLmpzIiwiaW5kZXguanMiLCJsaXN0ZW5lci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHpyeiBvbiAyMDE2LzIvMjYuXHJcbiAqIEB2ZXJzaW9uIDEuMC4wIGNyZWF0ZWQg6YCa55So5oCn5Yqf6IO95pa55rOVXHJcbiAqL1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIEZ1biA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgX3RpbWVPdXQgPSAxMDAwMDA7Ly/or7fmsYLotoXml7bml7bpl7TkuLoxMHNcclxuICAgIC8qKlxyXG4gICAgICog5bCB6KOFYWpheFxyXG4gICAgICogQHBhcmFtIG9wdGlvblxyXG4gICAgICoge1xyXG4gICAgICogICAgICB1cmw6XCLor7fmsYLnmoTlnLDlnYBcIlxyXG4gICAgICogICAgICAsbWV0aG9kOlwi6K+35rGC55qE5pa55rOVXCJcclxuICAgICAqICAgICAgLGFzeW5jOlwi5piv5ZCm5bm25Y+RXCJcclxuICAgICAqICAgICAgLGRhdGE6XCLlj5HpgIHnmoTmlbDmja5cIlxyXG4gICAgICogICAgICAsc3VjY2VzczpcIuaIkOWKn+aXtuWbnuiwg1wiXHJcbiAgICAgKiAgICAgICxlcnJvcjpcIuWksei0pS/otoXml7bml7blm57osINcIlxyXG4gICAgICogICAgICAsdGltZW91dDpcIui2heaXtuaXtumXtFwiXHJcbiAgICAgKiAgICAgICxjb21wbGV0ZTpcIuWujOaIkOWQjueahOWbnuiwg1wiXHJcbiAgICAgKiB9XHJcbiAgICAgKi9cclxuICAgIHZhciBhamF4ID0gZnVuY3Rpb24gKG9wdGlvbikge1xyXG4gICAgICAgIC8vYWpheOW8gOWni+aXtuW6lOaYvuekuuKAnOWKoOi9veS/oeaBr+ahhuKAnVxyXG4gICAgICAgIE1vZGFsLnNob3dMb2FkaW5nKCk7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBvcHRpb24udXJsXHJcbiAgICAgICAgICAgICwgdHlwZTogXCJ0eXBlXCIgaW4gb3B0aW9uICYmIG9wdGlvbi50eXBlIHx8IFwiR0VUXCJcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiBvcHRpb24udGltZW91dCB8fCBfdGltZU91dFxyXG4gICAgICAgICAgICAsIGRhdGE6IFwiZGF0YVwiIGluIG9wdGlvbiAmJiBvcHRpb24uZGF0YSB8fCB7fVxyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiBcImpzb25cIlxyXG4gICAgICAgICAgICAsIGFzeW5jOiAoXCJhc3luY1wiIGluIG9wdGlvbiAmJiBvcHRpb24uYXN5bmMpID8gdHJ1ZSA6IGZhbHNlXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChcInN0YXR1c1wiIGluIGpzb24gJiYganNvbi5zdGF0dXMgPiAwICYmIFwiZGF0YVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXCJzdWNjZXNzXCIgaW4gb3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zdWNjZXNzKGpzb24uZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoXCLml6BzdWNjZXNz5pa55rOVIVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwiZXJyb3JcIiBpbiBvcHRpb24gJiYgb3B0aW9uLmVycm9yIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24uZXJyb3IoanNvbik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfmk43kvZzlpLHotKUhJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGVycm9yOiBmdW5jdGlvbiAoeGhyKSB7Ly80MDTmiJbogIXotoXml7ZcclxuICAgICAgICAgICAgICAgIGlmIChcImVycm9yXCIgaW4gb3B0aW9uICYmIG9wdGlvbi5lcnJvciBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/mj5DnpLrnlKjmiLfplJnor6/kv6Hmga9cclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zaG93TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoXCLov57mjqXmnI3liqHlmajlpLHotKXvvIznirbmgIHvvJpcIiArICh4aHIuc3RhdHVzIHx8IC0xKSArIFwiLOS/oeaBr++8mlwiICsgKHhoci5zdGF0dXNUZXh0IHx8IFwiLVwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmVycm9yKHhoci5zdGF0dXMsIHhoci5zdGF0dXNUZXh0KTsvL+Wbnuiwg+ivt+axgueahOeKtuaAgeWSjOmUmeivr+S/oeaBr1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKHhociwgdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgLy/lhbPpl63igJzliqDovb3kv6Hmga/moYbigJ1cclxuICAgICAgICAgICAgICAgIE1vZGFsLnNob3dMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGlmIChcImNvbXBsZXRlXCIgaW4gb3B0aW9uICYmIG9wdGlvbi5jb21wbGV0ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmNvbXBsZXRlKHhociwgdHlwZSk7Ly/lm57osIPor7fmsYLnmoR4aHLkv6Hmga/lkoznsbvlnotcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8v5YWo6YCJ5ZKM5Y2V6YCJ55qE57uR5a6aXHJcbiAgICB2YXIgc2V0Q2hlY2tib3hMaXN0ZW5lciA9IGZ1bmN0aW9uIChhbGxDaGVjaywgcmFkaW9DaGVja3MpIHtcclxuICAgICAgICAvL+etm+mAieWNlemAieaMiemSrue7hFxyXG4gICAgICAgIHZhciByYWRpb1ZhbHVlRWxlcyA9ICQocmFkaW9DaGVja3MpO1xyXG4gICAgICAgIC8v54K55Ye75YWo6YCJ5pe277yM5ZCM57uE5oyJ6ZKu6KKr5ZCM5q2lXHJcbiAgICAgICAgJChkb2N1bWVudCkuZGVsZWdhdGUoYWxsQ2hlY2ssIFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAocmFkaW9WYWx1ZUVsZXMgJiYgcmFkaW9WYWx1ZUVsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX3IgPSAwOyBfciA8IHJhZGlvVmFsdWVFbGVzLmxlbmd0aDsgX3IrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhZGlvVmFsdWVFbGVzW19yXS5jaGVja2VkID0gJCh0aGlzKS5pcyhcIjpjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/ngrnlh7vljZXpgInmjInpkq7ml7bvvIxcclxuICAgICAgICAkKGRvY3VtZW50KS5kZWxlZ2F0ZShyYWRpb0NoZWNrcywgXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoYWxsQ2hlY2spWzBdLmNoZWNrZWQgPSAkKHJhZGlvQ2hlY2tzICsgXCI6Y2hlY2tlZFwiKS5sZW5ndGggPT0gJChyYWRpb0NoZWNrcykubGVuZ3RoO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciB1cmwgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBnZXQgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cChcIihefCYpXCIgKyBuYW1lICsgXCI9KFteJl0qKSgmfCQpXCIsIFwiaVwiKTtcclxuICAgICAgICAgICAgdmFyIHIgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKS5tYXRjaChyZWcpO1xyXG4gICAgICAgICAgICBpZiAociAhPSBudWxsKSByZXR1cm4gZGVjb2RlVVJJKHJbMl0pO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOagueaNruWPguaVsOWIl+ihqOmVv+W6pui/m+ihjOWIpOaWre+8jOWFvOWuuUlFOVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIHNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYgdHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ29iamVjdCcpIHsvL+S4gOS4quWvueixoe+8jOS9v+eUqGtleeagh+iusHZhbHVlXHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqID0gYXJndW1lbnRzWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgLCBzZWFyY2ggPSBsb2NhdGlvbi5zZWFyY2g7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBvIGluIG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkobykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoID0gY2hhbmdlVVJMS2V5VmFsdWUoc2VhcmNoLCBvLCBvYmpbb10pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgncHVzaFN0YXRlJyBpbiBoaXN0b3J5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgZG9jdW1lbnQudGl0bGUsIHNlYXJjaCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCdwdXNoU3RhdGUnIGluIEhpc3RvcnkpIHsvL2llOSDkuI3mlK/mjIFwdXNoU3RhdGXmlrnms5UsamF2YXNjcmlwdC5lanPkuK3mt7vliqBoaXN0b3J5Lmpz5a6M5oiQaHRtbDTlr7lwdXNoU3RhdGXnmoTmlK/mjIFcclxuICAgICAgICAgICAgICAgICAgICBIaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCBzZWFyY2gpOy8v6L+U5Zue6YeN5paw5p6E6YCg5ZCOc2VhcmNo5LiyXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgey8va2V5K3ZhbHVlXHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gYXJndW1lbnRzWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgLCB2YWx1ZSA9IGFyZ3VtZW50c1sxXTtcclxuICAgICAgICAgICAgICAgIGlmICgncHVzaFN0YXRlJyBpbiBoaXN0b3J5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgZG9jdW1lbnQudGl0bGUsIGNoYW5nZVVSTEtleVZhbHVlKGxvY2F0aW9uLnRvU3RyaW5nKCksIGtleSwgdmFsdWUpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJ3B1c2hTdGF0ZScgaW4gSGlzdG9yeSkgey8vaWU5IOS4jeaUr+aMgXB1c2hTdGF0ZeaWueazlSxqYXZhc2NyaXB0LmVqc+S4rea3u+WKoGhpc3RvcnkuanPlrozmiJBodG1sNOWvuXB1c2hTdGF0ZeeahOaUr+aMgVxyXG4gICAgICAgICAgICAgICAgICAgIEhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIGNoYW5nZVVSTEtleVZhbHVlKGxvY2F0aW9uLnNlYXJjaCwga2V5LCB2YWx1ZSkpOy8v6L+U5Zue6YeN5paw5p6E6YCg5ZCOc2VhcmNo5LiyXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2hhbmdlVVJMS2V5VmFsdWUodXJsLCBhcmcsIGFyZ192YWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXR0ZXJuID0gYXJnICsgJz0oW14mXSopJztcclxuICAgICAgICAgICAgICAgIHZhciByZXBsYWNlVGV4dCA9IGFyZyArICc9JyArIGFyZ192YWw7XHJcbiAgICAgICAgICAgICAgICBpZiAodXJsLm1hdGNoKHBhdHRlcm4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9ICcvKCcgKyBhcmcgKyAnPSkoW14mXSopL2dpJztcclxuICAgICAgICAgICAgICAgICAgICB0bXAgPSB1cmwucmVwbGFjZShldmFsKHRtcCksIHJlcGxhY2VUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG1wO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXJsLm1hdGNoKCdbXFw/XScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cmwgKyAnJicgKyByZXBsYWNlVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXJsICsgJz8nICsgcmVwbGFjZVRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBnZXQ6IGdldFxyXG4gICAgICAgICAgICAsIHNldDogc2V0XHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuXHJcbiAgICB2YXIgZm9ybWF0SW1hZ2U9ZnVuY3Rpb24gKHBhdGgsIHNpemUsIGVsZSkge1xyXG4gICAgICAgIGlmKHBhdGggaW5zdGFuY2VvZiAgQXJyYXkgJiYgcGF0aC5sZW5ndGg+MCl7XHJcbiAgICAgICAgICAgIHBhdGggPSBwYXRoWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgSU1BR0VfU0laRSA9IHtcclxuICAgICAgICAgICAgb3JpZ2luYWw6IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIlwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHhsYXJnZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfeGxhcmdlXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjY2MCo2NjBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsYXJnZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbGFyZ2VcIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiNDIwKjQyMFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1pZGRsZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbWlkZGxlXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjMwMCozMDBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzbWFsbDoge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfc21hbGxcIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiMjQwKjI0MFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxpdHRsZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbGl0dGxlXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjEyMCoxMjBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtaWNybzoge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbWljcm9cIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiNjAqNjBcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzaXplID0gSU1BR0VfU0laRVtzaXplIHx8IFwibWlkZGxlXCJdIHx8IElNQUdFX1NJWkUubWlkZGxlO1xyXG4gICAgICAgIHZhciBwYXRoVGVtcCA9IC9cXC5cXHcrPyQvLmV4ZWMocGF0aCk7XHJcbiAgICAgICAgaWYgKCFwYXRoVGVtcCkge1xyXG4gICAgICAgICAgICBwYXRoICs9IHNpemUucGF0aDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwYXRoID0gKHBhdGguc3Vic3RyKDAsIHBhdGhUZW1wLmluZGV4IHx8IHBhdGgubGVuZ3RoKSkgKyBzaXplLnBhdGggKyBwYXRoVGVtcFswXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVsZSAmJiBlbGUuYXR0cikge1xyXG4gICAgICAgICAgICBlbGUuYXR0cihcInNyY1wiLCBwYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9O1xyXG4gICAgLy/ph5Hpop3moLzlvI/ljJblsI/mlbDngrky5L2NXHJcbiAgICB2YXIgZm9ybWF0ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZm9ybWF0YW1vdW50ID0gZnVuY3Rpb24oX3ZhbHVlKXtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoX3ZhbHVlKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy/kvZPnp6/moLzlvI/ljJblsI/mlbDngrky5L2NXHJcbiAgICAgICAgdmFyIGZvcm1hdHZvbHVtZSA9IGZ1bmN0aW9uKF92YWx1ZSl7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KF92YWx1ZSkudG9GaXhlZCgzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8v6YeN6YeP5qC85byP5YyW5bCP5pWw54K5MuS9jVxyXG4gICAgICAgIHZhciBmb3JtYXR3ZWlnaHQgPSBmdW5jdGlvbihfdmFsdWUpe1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChfdmFsdWUpLnRvRml4ZWQoMyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmb3JtYXRhbW91bnQ6IGZvcm1hdGFtb3VudFxyXG4gICAgICAgICAgICAsIGZvcm1hdHZvbHVtZTogZm9ybWF0dm9sdW1lXHJcbiAgICAgICAgICAgICwgZm9ybWF0d2VpZ2h0OiBmb3JtYXR3ZWlnaHRcclxuICAgICAgICB9XHJcbiAgICB9KCkpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhamF4OiBhamF4XHJcbiAgICAgICAgLCBnZXRUaW10b3V0OiBfdGltZU91dFxyXG4gICAgICAgICwgc2V0Q2hlY2tib3hMaXN0ZW5lcjogc2V0Q2hlY2tib3hMaXN0ZW5lclxyXG4gICAgICAgICwgdXJsOiB1cmxcclxuICAgICAgICAsIGZvcm1hdEltYWdlOiBmb3JtYXRJbWFnZVxyXG4gICAgICAgICwgZm9ybWF0OiBmb3JtYXRcclxuICAgIH1cclxufSgpKTtcclxuXHJcbmV4cG9ydHMuYWpheCA9IEZ1bi5hamF4O1xyXG5leHBvcnRzLmdldFRpbWVvdXQgPSBGdW4uZ2V0VGltdG91dDtcclxuZXhwb3J0cy5zZXRDaGVja2JveExpc3RlbmVyID0gRnVuLnNldENoZWNrYm94TGlzdGVuZXI7XHJcbmV4cG9ydHMudXJsID0gRnVuLnVybDtcclxuZXhwb3J0cy5mb3JtYXRJbWFnZSA9IEZ1bi5mb3JtYXRJbWFnZTtcclxuZXhwb3J0cy5mb3JtYXQgPSBGdW4uZm9ybWF0O1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSB6cnogb24gMjAxNi8yLzI0LlxyXG4gKiBAdmVyc2lvbiAxLjAuMCBjcmVhdGVkXHJcbiAqL1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuLy/mnoTpgKDkv6Hmga/moYbkuLvkvZNcclxudmFyIE1vZGFsID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8v5p6E6YCg5Y6f5aeL57G7XHJcbiAgICBmdW5jdGlvbiBNKG0pIHtcclxuICAgICAgICB0aGlzLnMgPSBtLnM7Ly/mmK/lkKbmmL7npLpcclxuICAgICAgICB0aGlzLmlkID0gbS5pZDtcclxuICAgIH1cclxuXHJcbiAgICAvL+aehOmAoOagh+WHhnNob3fmlrnms5XvvIznlKjkuo7nu6fmib9cclxuICAgIE0ucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuaWQpO1xyXG4gICAgICAgIGlmIChlbGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucyAmJiAhaXNTaG93KCkpIHsvL+aYvuekuuW9k+WJjemakOiXj1xyXG4gICAgICAgICAgICAgICAgZWxlLmNsYXNzTmFtZSA9IGVsZS5jbGFzc05hbWUucmVwbGFjZShcImRwLW5cIiwgXCJcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMucyAmJiBpc1Nob3coKSkgey8v6ZqQ6JeP5b2T5YmN5pi+56S6XHJcbiAgICAgICAgICAgICAgICBlbGUuY2xhc3NOYW1lICs9IFwiIGRwLW5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+WOu+mZpOS4pOi+ueeahOepuuagvFxyXG4gICAgICAgICAgICBlbGUuY2xhc3NOYW1lID0gU3RyaW5nKGVsZS5jbGFzc05hbWUpLnRyaW0oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gaXNTaG93KCkgey8v5piv5ZCm5bey5pi+56S677yM5pegY2xhc3Pml7bmmL7npLpcclxuICAgICAgICAgICAgcmV0dXJuIGVsZS5jbGFzc05hbWUuc3BsaXQoXCJkcC1uXCIpLmxlbmd0aCA9PSAxO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy/liqDovb3kv6Hmga/moYZcclxuICAgIHZhciBsb2FkaW5nID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+WIneWni+WMlueUn+aIkOWKoOi9veS/oeaBr+ahhlxyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9hZGluZ19tb2RhbF9lbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwibG9hZGluZ19tb2RhbF9lbGVtZW50XCIgY2xhc3M9XCJsb2FkaW5nLW1vZGFsLWJvZHkgZHAtblwiPjxkaXYgY2xhc3M9XCJjb3Zlcl9tb2RhbF9lbGVtZW50XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJsb2FkaW5nLW1vZGFsLWltYWdlXCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJsb2FkaW5nLW1vZGFsLXRleHRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGgyPueOqeWRveWKoOi9veS4reKApuKApjwvaDI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8v5pi+56S644CB6ZqQ6JeP5L+h5oGv5qGGXHJcbiAgICAgICAgdmFyIHNob3cgPSBmdW5jdGlvbiAocykge1xyXG4gICAgICAgICAgICBzID0gdHlwZW9mIHMgPT0gXCJ1bmRlZmluZWRcIiA/IHRydWUgOiBzOy8v5peg5Y+C5pWw5pi+56S65L+h5oGv5qGGXHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE0oe2lkOiBcImxvYWRpbmdfbW9kYWxfZWxlbWVudFwiLCBzOiBzfSk7XHJcbiAgICAgICAgICAgIG0uc2hvdygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICAsIHNob3c6IHNob3dcclxuICAgICAgICB9XHJcbiAgICB9KCkpO1xyXG4gICAgLy/lvLnlh7rkv6Hmga/moYZcclxuICAgIHZhciBhbGVydCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGVydF9tb2RhbF9lbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwiYWxlcnRfbW9kYWxfZWxlbWVudFwiIGNsYXNzPVwiYWxlcnQtbW9kYWwtZWxlbWVudCBkcC1uXCI+PGRpdiBjbGFzcz1cImNvdmVyX21vZGFsX2VsZW1lbnRcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsZXJ0LW1vZGFsLWNvbnRlbnRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsZXJ0LW1vZGFsLWJvZHlcIj48c3BhbiBjbGFzcz1cImFsZXJ0LW1vZGFsLXRleHRcIj48L3NwYW4+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhbGVydC1tb2RhbC1mb290ZXJcIj48YnV0dG9uIGlkPVwiYWxlcnRfbW9kYWxfY2xvc2VcIiBjbGFzcz1cImFsZXJ0LW1vZGFsLWJ1dHRvblwiPuWFs+mXrTwvYnV0dG9uPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgc2hvdyA9IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgIHMgPSB0eXBlb2YgcyA9PSBcInVuZGVmaW5lZFwiID8gdHJ1ZSA6IHM7XHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE0oe2lkOiBcImFsZXJ0X21vZGFsX2VsZW1lbnRcIiwgczogc30pO1xyXG4gICAgICAgICAgICBtLnNob3coKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOiuvue9ruW8ueWHuuS/oeaBr+ahhlxyXG4gICAgICAgICAqIEBwYXJhbSBtc2cgICAgICAg5pi+56S655qE5L+h5oGv77yM5pSv5oyBaHRtbFxyXG4gICAgICAgICAqIEBwYXJhbSBzZWQgICAgICAg5YCS6K6h5pe25YWz6Zet5pe26Ze077yM5Y2V5L2N77yac2Vjb25kXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrICDlhbPpl63op6blj5Hlm57osIPlh73mlbBcclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgc2V0ID0gZnVuY3Rpb24gKG1zZywgc2VkLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGVydF9tb2RhbF9lbGVtZW50XCIpO1xyXG4gICAgICAgICAgICBpZiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1zZyA9PT0gJ29iamVjdCcpIHsvL+W6lOWvueWQjuerr+i/lOWbnuaPkOekuuaXtuS9v+eUqE9iamVjdOWwgeijhVxyXG4gICAgICAgICAgICAgICAgICAgIG1zZyA9IEpTT04uc3RyaW5naWZ5KG1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihlbGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYWxlcnQtbW9kYWwtdGV4dFwiKVswXS5pbm5lckhUTUwgPSBtc2c7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJhbGVydC1tb2RhbC10ZXh0XCIpWzBdLmlubmVySFRNTCA9IG1zZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2VkID4gMCkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDAwICogc2VkKTtcclxuICAgICAgICAgICAgfS8v5peg5YWz6Zet5pe26Ze05oiW6ICF5YWz6Zet5pe26Ze05Li6MO+8jOS4jeiHquWKqOWFs+mXrVxyXG4gICAgICAgICAgICAvL2ZpeG1lIOS6i+S7tuebkeWQrOeahGll5YW85a655oCnXHJcbiAgICAgICAgICAgIC8v5YWz6Zet5oyJ6ZKu55qE5LqL5Lu25L6m5ZCsXHJcbiAgICAgICAgICAgICQoXCIjYWxlcnRfbW9kYWxfY2xvc2VcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIC8v6Zi75q2i5LqL5Lu257un57ut5Lyg6YCSXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICAsIHNob3c6IHNob3dcclxuICAgICAgICAgICAgLCBzZXQ6IHNldFxyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICAvL+mAieaLqeS/oeaBr+ahhlxyXG4gICAgdmFyIGNvbmZpcm0gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlybV9tb2RhbF9lbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwiY29uZmlybV9tb2RhbF9lbGVtZW50XCIgY2xhc3M9XCJjb25maXJtLW1vZGFsLWVsZW1lbnQgZHAtblwiPjxkaXYgY2xhc3M9XCJjb3Zlcl9tb2RhbF9lbGVtZW50XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb25maXJtLW1vZGFsLWNvbnRlbnRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBpZD1cImNvbmZpcm1fbW9kYWxfaGVhZGVyXCIgY2xhc3M9XCJjb25maXJtLW1vZGFsLWhlYWRlciBkcC1uXCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb25maXJtLW1vZGFsLWJvZHlcIj48c3BhbiBpZD1cImNvbmZpcm1fbW9kYWxfdGV4dFwiIGNsYXNzPVwiY29uZmlybS1tb2RhbC10ZXh0XCI+PC9zcGFuPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29uZmlybS1tb2RhbC1mb290ZXJcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImZvb3Rlci1idXR0b24tc3VjY2Vzc1wiPjxidXR0b24gY2xhc3M9XCJjb25maXJtLW1vZGFsLWJ1dHRvbiAgbW9kYWwtc3VjY2Vzc1wiIGRhdGEtY29uZmlybT1cInN1Y2Nlc3NcIj7noa7orqQ8L2J1dHRvbj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImZvb3Rlci1idXR0b24tZmFsc2VcIj48YnV0dG9uIGNsYXNzPVwiY29uZmlybS1tb2RhbC1idXR0b25cIiBkYXRhLWNvbmZpcm09XCJlcnJvclwiPuWPlua2iDwvYnV0dG9uPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgc2hvdyA9IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgIHMgPSB0eXBlb2YgcyA9PSBcInVuZGVmaW5lZFwiID8gdHJ1ZSA6IHM7XHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE0oe2lkOiBcImNvbmZpcm1fbW9kYWxfZWxlbWVudFwiLCBzOiBzfSk7XHJcbiAgICAgICAgICAgIG0uc2hvdygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6K6+572u6YCJ5oup5L+h5oGv5qGG55qE5YaF5a65XHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbiAgICDphY3nva5cclxuICAgICAgICAgKiB7XHJcbiAgICAgICAgICogICAgICB0aXRsZTpcIuWktOmDqOaYvuekuueahOS/oeaBr1wiXHJcbiAgICAgICAgICogICAgICAsdGV4dDpcIuaYvuekuueahOaPkOekuuS/oeaBr1wiXHJcbiAgICAgICAgICogICAgICAsc3VjY2VzczpcIueCueWHu+aIkOWKn+WQjueahOWbnuiwg1wiXHJcbiAgICAgICAgICogICAgICAsZXJyb3I6XCLngrnlh7vlpLHotKXlkI7nmoTlm57osINcIlxyXG4gICAgICAgICAqICAgICAgLGNvbXBsZXRlOlwi54K55Ye75oyJ6ZKu5ZCO55qE5pW05L2T5Zue6LCDXCJcclxuICAgICAgICAgKiB9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGJhciA9IDA7XHJcbiAgICAgICAgdmFyIHNldCA9IGZ1bmN0aW9uIChvcHRpb24pIHtcclxuICAgICAgICAgICAgaWYgKCFvcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoXCJ0aXRsZVwiIGluIG9wdGlvbiAmJiBvcHRpb24udGl0bGUubGVuZ3RoID4gMCkgey8v5pyJ5aS06YOo77yM5YiZ5pi+56S65aS06YOoXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbmZpcm1fbW9kYWxfaGVhZGVyXCIpLmlubmVySFRNTCA9IG9wdGlvbi50aXRsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoXCJ0ZXh0XCIgaW4gb3B0aW9uICYmIG9wdGlvbi50ZXh0Lmxlbmd0aCA+IDApIHsvL+acieWGheWuue+8jOWImeaYvuekuuaVtOS4qumAieaLqeS/oeaBr+ahhlxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maXJtX21vZGFsX3RleHRcIikuaW5uZXJIVE1MID0gb3B0aW9uLnRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9maXhtZSDkuovku7bnm5HlkKznmoRpZeWFvOWuueaAp1xyXG4gICAgICAgICAgICAvL+WFs+mXreaMiemSrueahOS6i+S7tuS+puWQrFxyXG4gICAgICAgICAgICAkKFwiI2NvbmZpcm1fbW9kYWxfZWxlbWVudFwiKS5maW5kKFwiLmNvbmZpcm0tbW9kYWwtYnV0dG9uXCIpLm9mZihcImNsaWNrXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy9maXhtZSAub2ZmKFwiY2xpY2tcIinnlKjkuo7pmLLmraLlpJrmrKHop6blj5E8LS3lvojnjoTlrabvvIzmiJHkuZ/kuI3nn6XpgZPkuLrku4DkuYjvvIzkvYbmmK/or7fkuI3opoHkv67mlLnjgIJcclxuICAgICAgICAgICAgICAgIHZhciBhdHIgPSAkKHRoaXMpLmF0dHIoXCJkYXRhLWNvbmZpcm1cIik7Ly/pgInmi6nnmoTmjInpkq5cclxuICAgICAgICAgICAgICAgIGJhcisrO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbiAmJiBhdHIgaW4gb3B0aW9uICYmIG9wdGlvblthdHJdIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25bYXRyXSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbiAmJiBcImNvbXBsZXRlXCIgaW4gb3B0aW9uICYmIG9wdGlvbi5jb21wbGV0ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmNvbXBsZXRlKCk7Ly/oi6XmnInlrozmiJDlh73mlbDvvIzliJnmiafooYxcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7Ly/lkKbliJnvvIzlhbPpl63pgInmi6nmoYZcclxuICAgICAgICAgICAgICAgICAgICBzaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8v6Zi75q2i5LqL5Lu257un57ut5Lyg6YCSXHJcbiAgICAgICAgICAgICAgICAvL3JldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbml0OiBpbml0XHJcbiAgICAgICAgICAgICwgc2hvdzogc2hvd1xyXG4gICAgICAgICAgICAsIHNldDogc2V0XHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuICAgIC8v6KaG55uW5bGCXHJcbiAgICB2YXIgY292ZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY292ZXJfbW9kYWxfZWxlbWVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImNvdmVyX21vZGFsX2VsZW1lbnRcIiBjbGFzcz1cImNvdmVyLW1vZGFsLWVsZW1lbnQgZHAtblwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBoaWRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdmVyX21vZGFsX2VsZW1lbnRcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHNob3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY292ZXJfbW9kYWxfZWxlbWVudFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICAsIHNob3c6IHNob3dcclxuICAgICAgICAgICAgLCBoaWRlOiBoaWRlXHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5pdExvYWRpbmc6IGxvYWRpbmcuaW5pdFxyXG4gICAgICAgICwgc2hvd0xvYWRpbmc6IGxvYWRpbmcuc2hvd1xyXG5cclxuICAgICAgICAsIGluaXRBbGVydDogYWxlcnQuaW5pdFxyXG4gICAgICAgICwgc2hvd0FsZXJ0OiBhbGVydC5zaG93XHJcbiAgICAgICAgLCBzZXRBbGVydDogYWxlcnQuc2V0XHJcblxyXG4gICAgICAgICwgaW5pdENvbmZpcm06IGNvbmZpcm0uaW5pdFxyXG4gICAgICAgICwgc2V0Q29uZmlybTogY29uZmlybS5zZXRcclxuICAgICAgICAsIHNob3dDb25maXJtOiBjb25maXJtLnNob3dcclxuICAgICAgICAsIGluaXRDb3ZlcjogY292ZXIuaW5pdFxyXG4gICAgfVxyXG59KCkpO1xyXG5cclxuLy/pobXpnaLliqDovb3lrozmr5XlkI7nlJ/miJDlm5vkuKroh6rlrprkuYnmqKHmgIHmoYZcclxuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAvL+mhtemdouWKoOi9veaXtueUn+aIkOS4gOS4quimhuebluWxglxyXG4gICAgTW9kYWwuaW5pdENvdmVyKCk7XHJcbiAgICAvL+mhtemdouWKoOi9veaXtueUn+aIkOS4gOS4quWKoOi9veS/oeaBr+ahhlxyXG4gICAgTW9kYWwuaW5pdExvYWRpbmcoKTtcclxuICAgIC8v6aG16Z2i5Yqg6L295pe255Sf5oiQ5LiA5Liq5by55Ye65L+h5oGv5qGGXHJcbiAgICBNb2RhbC5pbml0QWxlcnQoKTtcclxuICAgIC8v6aG16Z2i5Yqg6L295pe255Sf5oiQ5LiA5Liq6YCJ5oup5L+h5oGv5qGGXHJcbiAgICBNb2RhbC5pbml0Q29uZmlybSgpO1xyXG59LCAxMDApO1xyXG5cclxuXHJcbi8v5oqb5Ye65LiK5bGC6LCD55SoXHJcbmV4cG9ydHMuc2hvd0xvYWRpbmcgPSBNb2RhbC5zaG93TG9hZGluZztcclxuZXhwb3J0cy5zZXRBbGVydCA9IE1vZGFsLnNldEFsZXJ0O1xyXG5leHBvcnRzLnNob3dBbGVydCA9IE1vZGFsLnNob3dBbGVydDtcclxuZXhwb3J0cy5zZXRDb25maXJtID0gTW9kYWwuc2V0Q29uZmlybTtcclxuZXhwb3J0cy5zaG93Q29uZmlybSA9IE1vZGFsLnNob3dDb25maXJtOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplcmVteSBvbiAyMDE2LzExLzIyLlxyXG4gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5yZXF1aXJlKCcuL2xpc3RlbmVyJykucnVuKCk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplcmVteSBvbiAyMDE2LzExLzIyLlxyXG4gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBNb2RhbCA9IHJlcXVpcmUoJy4uLy4uL2dlbmVyYWwvbW9kYWwnKVxyXG4gICAgLG15Zm9ybWF0ID0gcmVxdWlyZSgnLi4vLi4vZ2VuZXJhbC9mdW5jdGlvbicpLmZvcm1hdDtcclxudmFyIExpc3RlbmVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2tleXVwJywnLmppZXN1YW5tYSB0ZXh0YXJlYScsZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAvLyAgICQoJy5zYW56aW1hMScpLmh0bWwoJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlPT0zMikgIC8v5Zue6L2m6ZSu55qE6ZSu5YC85Li6MTMs56m65qC85pyqMzJcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgIC8vJCh0aGlzKS52YWwoICQodGhpcykudmFsKCkgKyAnXFxuJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQoJy5zYW56aW1hMicpLmh0bWwoJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAvLyQoJy5zYW56aW1hMicpLmh0bWwoJCh0aGlzKS52YWwoKS5yZXBsYWNlKC9cXG4vaWcsJzxici8+JykpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnByaW50c2hvdycpLmh0bWwoJCh0aGlzKS52YWwoKS5yZXBsYWNlKC9cXG4vaWcsJzxici8+JykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8kKGRvY3VtZW50KS5vbignaW5wdXQnLCcuZ3VpZ2UnLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIC8vICAgIHZhciBzcz0kKHRoaXMpLmh0bWwoKTtcclxuICAgICAgICAgICAgLy8gICAgaWYoKCQodGhpcykuaGVpZ2h0KCkvMjEpPjE2KXtcclxuICAgICAgICAgICAgLy8gICAgICAgIHZhciBzcz0kKHRoaXMpLmh0bWwoKTtcclxuICAgICAgICAgICAgLy8gICAgfVxyXG4gICAgICAgICAgICAvL30pO1xyXG4gICAgICAgIHZhciBodG1scmlnaHQ9Jyc7XHJcbiAgICAgICAgdmFyIGh0bWxsZWZ0PScnO1xyXG4gICAgICAgIHZhciByb3dzID0xO1xyXG4gICAgICAgIHZhciBtYXNSb3dzID0gMTc7XHJcbiAgICAgICAgdmFyIGhhc1N1YiA9JCgnLmNvbnRhaW5lcicpLmRhdGEoJ2hhc3N1YicpO1xyXG4gICAgICAgIGlmKGhhc1N1Yil7XHJcbiAgICAgICAgICAgIGh0bWxyaWdodCA9ICc8c3Bhbj5jb25zb2xlPC9zcGFuPjxicj4nO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBpZigkKCcuZ3VpZ2UnKS5kYXRhKCdwbScpKXtcclxuICAgICAgICAgICAgICAgIHZhciBzdHI7XHJcbiAgICAgICAgICAgICAgICBzdHI9KCQoJy5ndWlnZScpLmRhdGEoJ3BtJykpLnJlcGxhY2UoL++8jC9pZywnLCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHR0PXN0ci5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTx0dC5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgICAgICAgICByb3dzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3MgPCBtYXNSb3dzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxyaWdodCs9JzxzcGFuPicrdHRbaV0rJzwvc3Bhbj48YnI+JztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sbGVmdCArPSAnPHNwYW4+JyArIHR0W2ldICsgJzwvc3Bhbj48YnI+J1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZigkKCcuZ3VpZ2UnKS5kYXRhKCdtdCcpKXtcclxuICAgICAgICAgICAgICAgIHZhciBzdHI7XHJcbiAgICAgICAgICAgICAgICBzdHI9KCQoJy5ndWlnZScpLmRhdGEoJ210JykpLnJlcGxhY2UoL++8jC9pZywnLCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHR0PXN0ci5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTx0dC5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgICAgICAgICByb3dzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3MgPCBtYXNSb3dzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxyaWdodCs9JzxzcGFuPicrdHRbaV0rJzwvc3Bhbj48YnI+J1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxsZWZ0ICs9ICc8c3Bhbj4nICsgdHRbaV0gKyAnPC9zcGFuPjxicj4nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCQoJy5ndWlnZScpLmRhdGEoJ3NpemUnKSl7XHJcbiAgICAgICAgICAgIHZhciBzdHI7XHJcbiAgICAgICAgICAgIC8vc3RyPSgkKCcuZ3VpZ2UnKS5kYXRhKCdzaXplJykpLnJlcGxhY2UoL++8jC9pZywnLCcpO1xyXG4gICAgICAgICAgICB2YXIgdHQ9JCgnLmd1aWdlJykuZGF0YSgnc2l6ZScpLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8dHQubGVuZ3RoLTE7aSsrKSB7XHJcbiAgICAgICAgICAgICAgICByb3dzKys7XHJcbiAgICAgICAgICAgICAgICBpZiAocm93cyA8IG1hc1Jvd3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBodG1scmlnaHQgKz0gJzxzcGFuPicgKyB0dFtpXSArICc8L3NwYW4+PGJyPidcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbGxlZnQgKz0gJzxzcGFuPicgKyB0dFtpXSArICc8L3NwYW4+PGJyPidcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnLmd1aWdlJykuaHRtbChodG1scmlnaHQpO1xyXG4gICAgICAgICQoJy5ndWlnZWJ1Y2hvbmcnKS5odG1sKGh0bWxsZWZ0KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3BkZicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYoICQoXCIjc2F2ZVwiKS5kYXRhKFwic3RhdHVzXCIpID09MCl7XHJcbiAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn6K+35YWI54K55Ye75L+d5a2Y5oyJ6ZKu77yBJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoJCgnLmd1aWdlYnVjaG9uZycpLmNzcygnYm9yZGVyJykhPSdub25lJyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29kZSA9ICc8IURPQ1RZUEUgaHRtbD4gPGh0bWwgbGFuZz1cInpoLUNOXCI+IDxoZWFkPiA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIj4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxtZXRhIG5hbWU9XCJHZW5lcmF0b3JcIiBjb250ZW50PVwiSmVyZW15XCI+IDxtZXRhIG5hbWU9XCJBdXRob3JcIiBjb250ZW50PVwiSmVyZW15XCI+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8bWV0YSBuYW1lPVwiS2V5d29yZHNcIiBjb250ZW50PVwiXCI+IDxtZXRhIG5hbWU9XCJEZXNjcmlwdGlvblwiIGNvbnRlbnQ9XCJcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnIDx0aXRsZT7mj5DljZXnoa7orqQ8L3RpdGxlPiA8c3R5bGU+JyArICQoJ3N0eWxlJykuaHRtbCgpICsgJzwvc3R5bGU+PC9oZWFkPiA8Ym9keT4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPjxkaXYgY2xhc3M9XCJ0ZFwiPicgKyAkKCcudGQnKS5odG1sKCkgKyAnPC9kaXY+PC9kaXY+PC9ib2R5PiA8L2h0bWw+JztcclxuXHJcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcGkvb3RoZXIvcGRmJ1xyXG4gICAgICAgICAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICAgICAgICAgLCBkYXRhOiB7Y29kZTogY29kZSwgbmFtZTogJ+aPkOWNlSd9XHJcbiAgICAgICAgICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnc3RhdHVzJyBpbiBqc29uICYmIGpzb24uc3RhdHVzID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKFwiL2Rvd25sb2FkL3BkZlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNkb3duJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvL+S4i+i9vee7meiIquepuuWFrOWPuFxyXG4gICAgICAgICAgICBpZiggJChcIiNzYXZlXCIpLmRhdGEoXCJzdGF0dXNcIikgPT0wKXtcclxuICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfor7flhYjngrnlh7vkv53lrZjmjInpkq7vvIEnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+iuoei0uemHjemHj+aUueS4uuavm+mHje+8jOS9k+enr+aUueS4uuWunumZhei/m+S7k+aVsOaNrlxyXG4gICAgICAgICAgICB2YXIgb2xkemwgPSAkKFwiLmpmemxcIikuaHRtbCgpO1xyXG4gICAgICAgICAgICB2YXIgb2xkU2l6ZSA9ICAkKCcucG0nKS5maW5kKCdzcGFuJykuaHRtbCgpO1xyXG4gICAgICAgICAgICAkKFwiLmpmemxcIikuaHRtbCgkKFwiLnpsXCIpLmh0bWwoKSk7XHJcbiAgICAgICAgICAgICQoJy5wbScpLmZpbmQoJ3NwYW4nKS5odG1sKCQoJy5wbScpLmZpbmQoJ3NwYW4nKS5kYXRhKCd6JykpO1xyXG4gICAgICAgICAgICBpZigkKCcuZ3VpZ2VidWNob25nJykuY3NzKCdib3JkZXInKSE9J25vbmUnKXtcclxuICAgICAgICAgICAgICAgIHZhciBjb2RlID0gJzwhRE9DVFlQRSBodG1sPiA8aHRtbCBsYW5nPVwiemgtQ05cIj4gPGhlYWQ+IDxtZXRhIGNoYXJzZXQ9XCJVVEYtOFwiPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAnPG1ldGEgbmFtZT1cIkdlbmVyYXRvclwiIGNvbnRlbnQ9XCJKZXJlbXlcIj4gPG1ldGEgbmFtZT1cIkF1dGhvclwiIGNvbnRlbnQ9XCJKZXJlbXlcIj4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxtZXRhIG5hbWU9XCJLZXl3b3Jkc1wiIGNvbnRlbnQ9XCJcIj4gPG1ldGEgbmFtZT1cIkRlc2NyaXB0aW9uXCIgY29udGVudD1cIlwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICcgPHRpdGxlPuaPkOWNleehruiupDwvdGl0bGU+IDxzdHlsZT4nICsgJCgnc3R5bGUnKS5odG1sKCkgKyAnPC9zdHlsZT48L2hlYWQ+IDxib2R5PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cInRkXCI+JyArICQoJy50ZCcpLmh0bWwoKSArICc8L2Rpdj48L2Rpdj48L2JvZHk+IDwvaHRtbD4nO1xyXG5cclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS9vdGhlci9wZGYnXHJcbiAgICAgICAgICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgICAgICAgICAsIGRhdGE6IHtjb2RlOiBjb2RlLCBuYW1lOiAn5o+Q5Y2VJ31cclxuICAgICAgICAgICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdzdGF0dXMnIGluIGpzb24gJiYganNvbi5zdGF0dXMgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oXCIvZG93bmxvYWQvcGRmXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5qZnpsXCIpLmh0bWwob2xkemwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnBtJykuZmluZCgnc3BhbicpLmh0bWwob2xkU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjcHJpbnQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKCAkKFwiI3NhdmVcIikuZGF0YShcInN0YXR1c1wiKSA9PTApe1xyXG4gICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+ivt+WFiOeCueWHu+S/neWtmOaMiemSru+8gScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5omT5Y2w77yM6ZyA6KaB5LiL56e75aKe5Yqg5qC35byP5o6n5Yi277yM6YCC5bqU57q46LSo5omT5Y2w5qih5p2/XHJcbiAgICAgICAgICAgIHZhciBwcmludFN0eWxlPSc8c3R5bGU+cCxzcGFuLGRpdntmb250LXNpemU6MjJweH0uYWlyLWNvbXBhbnksLkZQe2ZvbnQtc2l6ZToyMnB4fS53b3JkcmVtYXJrLC5qaWVzdWFubWEgdGV4dGFyZWEsLmFpcmxpbmVJbmZvLC5xZnJxe2ZvbnQtc2l6ZToyMHB4fS5pbmZvLXN0YXJ0e3RvcDo1MjhweH0udG8xe3RvcDo1NzNweH0udG8ye3RvcDo1NzNweH0uaW5mby16ejF7dG9wOjU3M3B4fS5pbmZvLXp6Mnt0b3A6NTczcHh9LmluZm8tenoze3RvcDo1NzNweH0uaW5mby16ejEtY2R7dG9wOjU3M3B4fS5DTll7dG9wOjU3M3B4fS5QMXt0b3A6NTczcHh9LlAye3RvcDo1NzNweH0uTlZEe3RvcDo1NzNweH0uTlZDe3RvcDo1NzNweH0ubWRne3RvcDo2MjhweH0uaGJoe3RvcDo2MjhweH0ucWZycXt0b3A6NjI4cHh9LmFpcmxpbmVJbmZve3RvcDo2MjhweH0ucG17bGVmdDo4MzBweH0uanN7dG9wOjgzMXB4fS56bHt0b3A6ODMxcHh9Lmpmemx7dG9wOjgzMXB4fS5kant0b3A6ODMxcHh9Lnlme3RvcDo4MzFweH0udW5pdHt0b3A6ODMxcHh9LnVuaXQye3RvcDo4MzFweH0uZ3VpZ2V7dG9wOjgyNHB4O2xlZnQ6ODMwcHh9Lmd1aWdlYnVjaG9uZ3t0b3A6ODU4cHh9LndvcmRyZW1hcmt7dG9wOjg1OHB4fS5wbXt0b3A6MTE3NHB4fS55ZjJ7dG9wOjExODBweH0uemZteHt0b3A6MTE4MHB4fS5zYW56aW1hMnt0b3A6MTM0NHB4fS56Znt0b3A6MTM3NXB4fS56ant0b3A6MTQ3MHB4fS5idG0taW5mb3t0b3A6MTQ3MHB4fS5mb290LXlke3RvcDoxNTUwcHh9PC9zdHlsZT4nXHJcbiAgICAgICAgICAgIHZhciBjb2RlID0gJzwhRE9DVFlQRSBodG1sPiA8aHRtbCBsYW5nPVwiemgtQ05cIj4gPGhlYWQ+IDxtZXRhIGNoYXJzZXQ9XCJVVEYtOFwiPiAnICtcclxuICAgICAgICAgICAgICAgICc8bWV0YSBuYW1lPVwiR2VuZXJhdG9yXCIgY29udGVudD1cIkplcmVteVwiPiA8bWV0YSBuYW1lPVwiQXV0aG9yXCIgY29udGVudD1cIkplcmVteVwiPiAnICtcclxuICAgICAgICAgICAgICAgICc8bWV0YSBuYW1lPVwiS2V5d29yZHNcIiBjb250ZW50PVwiXCI+IDxtZXRhIG5hbWU9XCJEZXNjcmlwdGlvblwiIGNvbnRlbnQ9XCJcIj4nICtcclxuICAgICAgICAgICAgICAgICcgPHRpdGxlPuaPkOWNleehruiupDwvdGl0bGU+IDxzdHlsZT4nICsgKCQoJ3N0eWxlJykuaHRtbCgpLnJlcGxhY2UoJ2JhY2tncm91bmQ6IHVybChcImh0dHA6Ly9reWJwdWJsaWMub3NzLWNuLXNoYW5naGFpLmFsaXl1bmNzLmNvbS9pbWFnZXMvaW1nL3RkLnBuZ1wiKSBuby1yZXBlYXQ7JywgJycpKSArICc8L3N0eWxlPicrcHJpbnRTdHlsZSsnPC9oZWFkPiA8Ym9keT4nICtcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cInRkXCI+JyArICQoJy50ZCcpLmh0bWwoKSArICc8L2Rpdj48L2Rpdj48L2JvZHk+IDwvaHRtbD4nO1xyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2FwaS9vdGhlci9wZGYnXHJcbiAgICAgICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAgICAgLCBkYXRhOiB7Y29kZTogY29kZSwgbmFtZTogJ+aPkOWNlSd9XHJcbiAgICAgICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCdzdGF0dXMnIGluIGpzb24gJiYganNvbi5zdGF0dXMgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihcIi9kb3dubG9hZC9wZGZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmRsLXlsZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNvZGUgPSAnPCFET0NUWVBFIGh0bWw+IDxodG1sIGxhbmc9XCJ6aC1DTlwiPiA8aGVhZD4gPG1ldGEgY2hhcnNldD1cIlVURi04XCI+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzxtZXRhIG5hbWU9XCJHZW5lcmF0b3JcIiBjb250ZW50PVwiSmVyZW15XCI+IDxtZXRhIG5hbWU9XCJBdXRob3JcIiBjb250ZW50PVwiSmVyZW15XCI+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzxtZXRhIG5hbWU9XCJLZXl3b3Jkc1wiIGNvbnRlbnQ9XCJcIj4gPG1ldGEgbmFtZT1cIkRlc2NyaXB0aW9uXCIgY29udGVudD1cIlwiPicgK1xyXG4gICAgICAgICAgICAgICAgJyA8dGl0bGU+5o+Q5Y2V56Gu6K6kPC90aXRsZT4gPHN0eWxlPicgKyAkKCdzdHlsZScpLmh0bWwoKSArICc8L3N0eWxlPjwvaGVhZD4gPGJvZHk+JyArXHJcbiAgICAgICAgICAgICAgICAkKCcuY29udGFpbmVyJykuaHRtbCgpICsgJzwvYm9keT4gPC9odG1sPic7XHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL290aGVyL3BkZidcclxuICAgICAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICAgICAsIGRhdGE6IHtjb2RlOiBjb2RlLCBuYW1lOiAn6aKE5b2V5Y2VJ31cclxuICAgICAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZignc3RhdHVzJyBpbiBqc29uICYmIGpzb24uc3RhdHVzID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oXCIvZG93bmxvYWQvcGRmXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNlbnN1cmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgXCJtZW1iZXJJZFwiOiAwLFxyXG4gICAgICAgICAgICAgICAgXCJvcmRlcklkXCI6ICQodGhpcykuZGF0YSgnaWQnKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci9vcmRlckNvbmZpcm0nXHJcbiAgICAgICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+ehruiupOaIkOWKn++8gScsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn56Gu6K6k5aSx6LSl77yM6K+36YeN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+S/neWtmOaPkOWNlVxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjc2F2ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYoICQodGhpcykuZGF0YShcInN0YXR1c1wiKSA9PTEpe1xyXG4gICAgICAgICAgICAgICAgJCgnLnNhbnppbWExJykuYWRkQ2xhc3MoJ3R0Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCcud29yZHJlbWFyaycpLmF0dHIoXCJzdHlsZVwiLFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgJCgnLndvcmRyZW1hcmsnKS5hZGRDbGFzcygndHQnKTtcclxuICAgICAgICAgICAgICAgICQoJy5zYW56aW1hMicpLmFkZENsYXNzKCd0dCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnNhbnppbWExJykuZmluZCgnaW5wdXQnKS5yZW1vdmVBdHRyKFwic3R5bGVcIik7XHJcbiAgICAgICAgICAgICAgIC8vICQoJy5qaWVzdWFubWEnKS5hZGRDbGFzcygndHQnKTtcclxuICAgICAgICAgICAgICAgIC8vJCgnLmppZXN1YW5tYScpLmZpbmQoJ3RleHRlcmVhJykucmVtb3ZlQXR0cihcInN0eWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmlucHV0c2hvdycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQoJy5wcmludHNob3cnKS5oaWRlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgJCgnLmd1aWdlJykuYWRkQ2xhc3MoJ3R0Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuZ3VpZ2VidWNob25nJykuYWRkQ2xhc3MoJ3R0Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuamZ6bCcpLmFkZENsYXNzKCd0dCcpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5odG1sKFwi5L+d5a2YXCIpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5kYXRhKFwic3RhdHVzXCIsMCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgJCgnLnNhbnppbWExJykucmVtb3ZlQ2xhc3MoJ3R0Jyk7XHJcbiAgICAgICAgICAgICQoJy53b3JkcmVtYXJrJykucmVtb3ZlQ2xhc3MoJ3R0Jyk7XHJcbiAgICAgICAgICAgICQoJy53b3JkcmVtYXJrJykuY3NzKHsnYmFja2dyb3VuZCc6J3JnYmEoMCwwLDAsMCknLCdib3JkZXInOidub25lJ30pO1xyXG4gICAgICAgICAgICAkKCcuc2FuemltYTInKS5yZW1vdmVDbGFzcygndHQnKTtcclxuICAgICAgICAgICAvLyAkKCcuamllc3Vhbm1hJykucmVtb3ZlQ2xhc3MoJ3R0Jyk7XHJcbiAgICAgICAgICAvLyAgJCgnLmppZXN1YW5tYScpLmZpbmQoJ3RleHRhcmVhJykuY3NzKHsnYmFja2dyb3VuZCc6J3JnYmEoMCwwLDAsMCknLCdib3JkZXInOidub25lJ30pO1xyXG4gICAgICAgICAgICAkKCcuaW5wdXRzaG93JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcucHJpbnRzaG93Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcuc2FuemltYTEnKS5maW5kKCdpbnB1dCcpLmNzcyh7J2JhY2tncm91bmQnOidyZ2JhKDAsMCwwLDApJywnYm9yZGVyJzonbm9uZSd9KTtcclxuXHJcbiAgICAgICAgICAgICQoJy5ndWlnZScpLnJlbW92ZUNsYXNzKCd0dCcpO1xyXG4gICAgICAgICAgICAkKCcuZ3VpZ2VidWNob25nJykucmVtb3ZlQ2xhc3MoJ3R0Jyk7XHJcbiAgICAgICAgICAgICQoJy5qZnpsJykucmVtb3ZlQ2xhc3MoJ3R0Jyk7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgXCJtZW1iZXJJZFwiOiAwLFxyXG4gICAgICAgICAgICAgICAgXCJvcmRlcklkXCI6ICQodGhpcykuZGF0YSgnaWQnKSxcclxuICAgICAgICAgICAgICAgIFwiU2V0dGxlbWVudENvZGUxXCI6ICQoJy5zYW56aW1hMScpLmZpbmQoJ2lucHV0JykudmFsKCksXHJcbiAgICAgICAgICAgICAgICBcIlNldHRsZW1lbnRDb2RlMlwiOiAkKCcuamllc3Vhbm1hJykuZmluZCgndGV4dGFyZWEnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgIFwiU2V0dGxlbWVudENvZGUzXCI6ICQoJy5qaWVzdWFubWEnKS5maW5kKCd0ZXh0YXJlYScpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgXCJCaWxsUmVtYXJrXCI6ICQoJy53b3JkcmVtYXJrJykudmFsKCkudHJpbSgpLFxyXG4gICAgICAgICAgICAgICAgXCJzdWJOdW1cIjogJCgnLnpkLXQnKS5kYXRhKCdpZCcpfHwnJyxcclxuICAgICAgICAgICAgICAgIFwiY2hhcmdpbmdXZWlnaHRcIiA6JCgnLmpmemwnKS5odG1sKClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvZGV0YWlsL2xhZGluZ1NhdmUnXHJcbiAgICAgICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+S/neWtmOaIkOWKn++8gScsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJChfdGhpcykuZGF0YShcInN0YXR1c1wiLDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChfdGhpcykuaHRtbChcIue8lui+kVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnIHx8ICfnoa7orqTlpLHotKXvvIzor7fph43or5XvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcbiAgICB2YXIgcHJpY2VJbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvZGV0YWlsL3RhY3RQcmljZSdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogJCgnLmNvbnRhaW5lcicpLmRhdGEoJ2lkJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgJChcIi56ZC10XCIpLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ganNvbi5yZXNCb2R5IHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5kaicpLmh0bWwoJChcIi56ZC10XCIpLmRhdGEoJ2lkJyk9PScnP2RhdGEucHJpY2UudG9GaXhlZCgyKTonJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnlmJykuaHRtbCgkKFwiLnpkLXRcIikuZGF0YSgnaWQnKT09Jyc/ZGF0YS50YWN0Q2hhcmdlLnRvRml4ZWQoMik6JycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy55ZjInKS5odG1sKCQoXCIuemQtdFwiKS5kYXRhKCdpZCcpPT0nJz9kYXRhLnRhY3RDaGFyZ2UudG9GaXhlZCgyKTonJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnpqJykuaHRtbCgkKFwiLnpkLXRcIikuZGF0YSgnaWQnKT09Jyc/ZGF0YS50b3RhbENoYXJnZS50b0ZpeGVkKDIpOicnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuemZteCcpLmRhdGEoXCJhd2NcIixkYXRhLmF3Yyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFjdENoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHByaW50SW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgaWYoJChcIiNzYXZlXCIpLmRhdGEoXCJzdGF0dXNcIik9PTEpe1xyXG4gICAgICAgICAgICAkKCcuc2FuemltYTEnKS5yZW1vdmVDbGFzcygndHQnKTtcclxuICAgICAgICAgICAgJCgnLndvcmRyZW1hcmsnKS5yZW1vdmVDbGFzcygndHQnKTtcclxuICAgICAgICAgICAgJCgnLndvcmRyZW1hcmsnKS5jc3MoeydiYWNrZ3JvdW5kJzoncmdiYSgwLDAsMCwwKScsJ2JvcmRlcic6J25vbmUnfSk7XHJcbiAgICAgICAgICAgICQoJy5zYW56aW1hMicpLnJlbW92ZUNsYXNzKCd0dCcpO1xyXG5cclxuICAgICAgICAgICAgLy8kKCcuamllc3Vhbm1hJykucmVtb3ZlQ2xhc3MoJ3R0Jyk7XHJcbiAgICAgICAgICAgIC8vJCgnLmppZXN1YW5tYScpLmZpbmQoJ3RleHRhcmVhJykuY3NzKHsnYmFja2dyb3VuZCc6J3JnYmEoMCwwLDAsMCknLCdib3JkZXInOidub25lJ30pO1xyXG4gICAgICAgICAgICAkKCcuaW5wdXRzaG93JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcucHJpbnRzaG93Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcuc2FuemltYTEnKS5maW5kKCdpbnB1dCcpLmNzcyh7J2JhY2tncm91bmQnOidyZ2JhKDAsMCwwLDApJywnYm9yZGVyJzonbm9uZSd9KTtcclxuICAgICAgICAgICAgJCgnLmd1aWdlJykucmVtb3ZlQ2xhc3MoJ3R0Jyk7XHJcbiAgICAgICAgICAgICQoJy5ndWlnZWJ1Y2hvbmcnKS5yZW1vdmVDbGFzcygndHQnKTtcclxuICAgICAgICAgICAgJCgnLmpmemwnKS5yZW1vdmVDbGFzcygndHQnKTtcclxuICAgICAgICAgICAgJChcIiNzYXZlXCIpLmh0bWwoXCLnvJbovpFcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5bCP5pWw54K55o6n5Yi2XHJcbiAgICAgICAgdmFyIHNpemUgPSBteWZvcm1hdC5mb3JtYXR2b2x1bWUoJCgnLnBtJykuZmluZCgnc3BhbicpLmRhdGEoJ3onKSk7XHJcbiAgICAgICAgJCgnLnBtJykuZmluZCgnc3BhbicpLmRhdGEoJ3onLHNpemUpO1xyXG4gICAgICAgICQoJy5wbScpLmZpbmQoJ3NwYW4nKS5odG1sKHNpemUpO1xyXG4gICAgICAgICQoJy56bCcpLmh0bWwobXlmb3JtYXQuZm9ybWF0d2VpZ2h0KCQoJy56bCcpLmh0bWwoKSkpO1xyXG4gICAgICAgICQoJy5qZnpsJykuaHRtbChteWZvcm1hdC5mb3JtYXR3ZWlnaHQoJCgnLmpmemwnKS5odG1sKCkpKTtcclxuICAgIH07XHJcbiAgICB2YXIgdGFjdENoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBBd2MsIE15YywgU2NjO1xyXG4gICAgICAgIEF3YyA9ICQoXCIuemQtdFwiKS5kYXRhKCdpZCcpID09ICcnID8gJ0FXQ++8micgKyBwYXJzZUZsb2F0KCQoJy56Zm14JykuZGF0YShcImF3Y1wiKSkudG9GaXhlZCgyKSA6ICcnO1xyXG4gICAgICAgIC8vbXlj6K6h6LS56YeN6YePXHJcbiAgICAgICAgTXljID0gJChcIi56ZC10XCIpLmRhdGEoJ2lkJykgPT0gJycgPyAnTVlD77yaJyArIHBhcnNlRmxvYXQoJCgnLmpmemwnKS5odG1sKCkpLnRvRml4ZWQoMikgOiAnJztcclxuICAgICAgICAvL01TQyDorqHotLnph43ph4/kuZjku6UwLjhcclxuICAgICAgICBTY2MgPSAkKFwiLnpkLXRcIikuZGF0YSgnaWQnKSA9PSAnJyA/ICdNU0PvvJonICsgKHBhcnNlRmxvYXQoJCgnLmpmemwnKS5odG1sKCkpICogMC44KS50b0ZpeGVkKDIpIDogJyc7XHJcbiAgICAgICAgJCgnLnpmbXgnKS5odG1sKFxyXG4gICAgICAgICAgICAoMSA/IEF3YyArICc8YnIvPicgOiAnJykgK1xyXG4gICAgICAgICAgICAoMSA/IE15YyArICc8YnIvPicgOiAnJykgK1xyXG4gICAgICAgICAgICAoMSA/IFNjYyA6ICcnKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHZhciB4eCA9IChwYXJzZUZsb2F0KCQoJy56Zm14JykuZGF0YShcImF3Y1wiKSkgKyBwYXJzZUZsb2F0KCQoJy5qZnpsJykuaHRtbCgpKSArIHBhcnNlRmxvYXQoJCgnLmpmemwnKS5odG1sKCkpICogMC44KS50b0ZpeGVkKDIpO1xyXG4gICAgICAgICQoJy56ZicpLmh0bWwoJChcIi56ZC10XCIpLmRhdGEoJ2lkJykgPT0gJycgPyB4eCA6ICcnKTtcclxuICAgICAgICBpZiAoJCgnLmNvbnRhaW5lcicpLmRhdGEoXCJzaWRcIikpIHtcclxuICAgICAgICAgICAgJCgnLnpqJykuaHRtbCgnJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnLnpqJykuaHRtbCgocGFyc2VGbG9hdCgkKCcueWYyJykuaHRtbCgpKSArIHBhcnNlRmxvYXQoeHgpKS50b0ZpeGVkKDIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgJChkb2N1bWVudCkub24oJ2lucHV0JywnLmpmemwnLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgLy/kvZPnp6/osIHlsI/lj5bosIFcclxuICAgICAgICB2YXIgY2Fsc2l6ZSA9IHBhcnNlRmxvYXQoJCgnLmpmemwnKS5odG1sKCkpKjAuMDA2O1xyXG4gICAgICAgICQoJy5wbScpLmZpbmQoJ3NwYW4nKS5odG1sKGNhbHNpemUgPiBwYXJzZUZsb2F0KCQoJy5wbScpLmZpbmQoJ3NwYW4nKS5kYXRhKCd6JykpPyQoJy5wbScpLmZpbmQoJ3NwYW4nKS5kYXRhKCd6Jyk6bXlmb3JtYXQuZm9ybWF0dm9sdW1lKGNhbHNpemUpKTtcclxuICAgICAgICB0YWN0Q2hhbmdlKCk7XHJcbiAgICB9KTtcclxuICAgIHZhciBydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGlzdGVuZXIoKTtcclxuICAgICAgICBwcmljZUluaXQoKTtcclxuICAgICAgICBwcmludEluaXQoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJ1bjogcnVuXHJcbiAgICB9XHJcbn0oKSk7XHJcbm1vZHVsZS5leHBvcnRzID0gTGlzdGVuZXI7Il19
