(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/24.
 */
"use strict";

(function ($) {
  /**
   * 生成分页器
   * @param ele 需要添加分页器的元素
   * @param offset 偏移量，即从第data-offset开始
   * @param length 总记录条数
   * @param showPages 分页器显示的页数，超过则隐藏多余的页
   * @param rows 每页显示的记录条数
   */
  $.burster = function (ele, offset, length, showPages, rows) {
    offset = offset ? parseInt(offset) : 0;
    //将分页器装入table中
    if (length && length > offset) {
      var pageHtml = ""
        , ass = ""//清空需要装入的html
        , beforePages = Math.ceil(offset / rows)//需要显示的前页数/当前页
        , afterPages = Math.ceil((length - offset ) / rows)//需要显示的后页数
        , pages = Math.ceil(length / rows) //总页数
        , k = 0;
      //alert("总页数" + pages + " 前页数 " + beforePages + " 后页数 " + afterPages);
      //若页数小于showPages页，则全部显示
      if (pages >= 0 && pages <= showPages) {
        for (k = 0; k < pages; k++) {
          if (k == beforePages) {
            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
          } else {
            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
          }
        }
      } else if (pages > showPages) {//总页数大于showPages页
        if (beforePages <= Math.ceil(showPages / 2) && afterPages > showPages + 1) {
          for (k = 0; k < showPages; k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages <= Math.ceil(showPages / 2) && afterPages == showPages + 1) {
          for (k = 0; k < showPages - 1; k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages <= Math.ceil(showPages / 2) && afterPages <= showPages) {
          for (k = 0; k < showPages - 1; k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages > Math.ceil(showPages / 2) && beforePages <= showPages && afterPages > showPages) {
          pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
          for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages > showPages && afterPages > showPages) {
          pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
          for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages > Math.ceil(showPages / 2) && beforePages <= pages && afterPages <= showPages && afterPages > Math.ceil(showPages / 2) + 1) {
          pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
          for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages > pages && afterPages <= showPages && afterPages > Math.ceil(showPages / 2) + 1) {
          pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
          for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
          pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
        } else if (beforePages > Math.ceil(showPages / 2) && afterPages <= Math.ceil(showPages / 2) + 1) {
          pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
          for (k = beforePages - Math.ceil(showPages / 2) + 1; k < pages; k++) {
            if (k == beforePages) {
              pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
            } else {
              pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
            }
          }
        }
      }
      //判断"首页"和"末页"是否可点击
      var firstPage, lastPage;
      if (offset == 0) {//此时首页无法点击
        firstPage = '<li class="disabled"><a class="pages" data-offset="0">首页</a></li>';
        lastPage = '<li><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '" >末页</a></li>';
      } else if ((offset + rows) >= length) {//此时末页无法点击
        firstPage = '<li><a class="pages" data-offset="0">首页</a></li>';
        lastPage = '<li class="disabled"><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '">末页</a></li>';
      } else {
        firstPage = '<li><a class="pages" data-offset="0">首页</a></li>';
        lastPage = '<li><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '">末页</a></li>';
      }
      //判断"上一页"和"下一页"是否存在
      var upPage, downPage;
      if (offset == 0 || (offset < rows && (offset % rows != 0))) {
        upPage = "<li class='disabled'><a class='pages' func='previous' data-offset='" + parseInt(offset) + "' >上页</a></li>"
      } else {
        upPage = "<li><a class='pages' func='previous' data-offset='" + (parseInt(offset) - parseInt(rows)) + "' >上页</a></li>";
      }
      if (offset >= (length - rows)) {
        downPage = "<li class='disabled'><a class='pages' func='next' data-offset='" + parseInt(offset) + "'>下页</a></li>"
      } else {
        downPage = "<li><a class='pages' func='next' data-offset='" + parseInt(parseInt(offset) + parseInt(rows)) + "'>下页</a></li>"
      }
      if (pages != 1) {
        //分页部分
        ass += "<div id='pager' class='pager-info'>" +
        "<h6 id='result' class='pager-record'>共有<span>" + length + "</span>条记录</h6>" +
        "<ul class='pagination'>" + firstPage + upPage + pageHtml + downPage + lastPage + "</ul></div>";
        //table中注入拼装的记录
        ele.html(ass);
      } else {
        ele.html('');
      }
    }
  }
}(jQuery));
},{}],2:[function(require,module,exports){
/**
 * Created by zrz on 2016/2/26.
 * @version 1.0.0 created 通用性功能方法
 */

'use strict';

var Fun = (function () {
    var _timeOut = 100000;//请求超时时间为10s
    /**
     * 封装ajax
     * @param option
     * {
     *      url:"请求的地址"
     *      ,method:"请求的方法"
     *      ,async:"是否并发"
     *      ,data:"发送的数据"
     *      ,success:"成功时回调"
     *      ,error:"失败/超时时回调"
     *      ,timeout:"超时时间"
     *      ,complete:"完成后的回调"
     * }
     */
    var ajax = function (option) {
        //ajax开始时应显示“加载信息框”
        Modal.showLoading();
        $.ajax({
            url: option.url
            , type: "type" in option && option.type || "GET"
            , timeout: option.timeout || _timeOut
            , data: "data" in option && option.data || {}
            , dataType: "json"
            , async: ("async" in option && option.async) ? true : false
            , success: function (json) {
                if ("status" in json && json.status > 0 && "data" in json) {
                    if ("success" in option) {
                        option.success(json.data);
                    } else {
                        Modal.setAlert("无success方法!");
                    }
                } else if ("error" in option && option.error instanceof Function) {
                    option.error(json);
                } else {
                    Modal.setAlert('操作失败!');
                }
            }, error: function (xhr) {//404或者超时
                if ("error" in option && option.error instanceof Function) {
                    //提示用户错误信息
                    Modal.showLoading(false);
                    Modal.setAlert("连接服务器失败，状态：" + (xhr.status || -1) + ",信息：" + (xhr.statusText || "-"));
                    option.error(xhr.status, xhr.statusText);//回调请求的状态和错误信息
                }
            }, complete: function (xhr, type) {
                //关闭“加载信息框”
                Modal.showLoading(false);
                if ("complete" in option && option.complete instanceof Function) {
                    option.complete(xhr, type);//回调请求的xhr信息和类型
                }
            }
        });
    };
    //全选和单选的绑定
    var setCheckboxListener = function (allCheck, radioChecks) {
        //筛选单选按钮组
        var radioValueEles = $(radioChecks);
        //点击全选时，同组按钮被同步
        $(document).delegate(allCheck, "click", function () {
            if (radioValueEles && radioValueEles.length > 0) {
                for (var _r = 0; _r < radioValueEles.length; _r++) {
                    radioValueEles[_r].checked = $(this).is(":checked");
                }
            }
        });
        //点击单选按钮时，
        $(document).delegate(radioChecks, "click", function () {
            $(allCheck)[0].checked = $(radioChecks + ":checked").length == $(radioChecks).length;
        });
    };
    var url = (function () {
        var get = function (name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return decodeURI(r[2]);
            return null;
        };
        /**
         * 根据参数列表长度进行判断，兼容IE9
         * @returns {string}
         */
        var set = function () {
            if (arguments.length === 1 && typeof arguments[0] === 'object') {//一个对象，使用key标记value
                var obj = arguments[0]
                    , search = location.search;
                for (var o in obj) {
                    if (obj.hasOwnProperty(o)) {
                        search = changeURLKeyValue(search, o, obj[o]);
                    }
                }
                if ('pushState' in history) {
                    history.pushState(null, document.title, search);
                } else if ('pushState' in History) {//ie9 不支持pushState方法,javascript.ejs中添加history.js完成html4对pushState的支持
                    History.pushState(null, null, search);//返回重新构造后search串
                }
            } else if (arguments.length === 2) {//key+value
                var key = arguments[0]
                    , value = arguments[1];
                if ('pushState' in history) {
                    history.pushState(null, document.title, changeURLKeyValue(location.toString(), key, value));
                } else if ('pushState' in History) {//ie9 不支持pushState方法,javascript.ejs中添加history.js完成html4对pushState的支持
                    History.pushState(null, null, changeURLKeyValue(location.search, key, value));//返回重新构造后search串
                }
            }
            function changeURLKeyValue(url, arg, arg_val) {
                var pattern = arg + '=([^&]*)';
                var replaceText = arg + '=' + arg_val;
                if (url.match(pattern)) {
                    var tmp = '/(' + arg + '=)([^&]*)/gi';
                    tmp = url.replace(eval(tmp), replaceText);
                    return tmp;
                } else {
                    if (url.match('[\?]')) {
                        return url + '&' + replaceText;
                    } else {
                        return url + '?' + replaceText;
                    }
                }
            }
        };
        return {
            get: get
            , set: set
        }
    }());

    var formatImage=function (path, size, ele) {
        if(path instanceof  Array && path.length>0){
            path = path[0];
        }
        var IMAGE_SIZE = {
            original: {
                path: "",
                size: ""
            },
            xlarge: {
                path: "_xlarge",
                size: "660*660"
            },
            large: {
                path: "_large",
                size: "420*420"
            },
            middle: {
                path: "_middle",
                size: "300*300"
            },
            small: {
                path: "_small",
                size: "240*240"
            },
            little: {
                path: "_little",
                size: "120*120"
            },
            micro: {
                path: "_micro",
                size: "60*60"
            }
        };
        size = IMAGE_SIZE[size || "middle"] || IMAGE_SIZE.middle;
        var pathTemp = /\.\w+?$/.exec(path);
        if (!pathTemp) {
            path += size.path;
        } else {
            path = (path.substr(0, pathTemp.index || path.length)) + size.path + pathTemp[0];
        }
        if (ele && ele.attr) {
            ele.attr("src", path);
        }
        return path;
    };
    //金额格式化小数点2位
    var format = (function () {
        var formatamount = function(_value){
            return parseFloat(_value).toFixed(2);
        };
        //体积格式化小数点2位
        var formatvolume = function(_value){
            return parseFloat(_value).toFixed(3);
        };
        //重量格式化小数点2位
        var formatweight = function(_value){
            return parseFloat(_value).toFixed(3);
        };
        return {
            formatamount: formatamount
            , formatvolume: formatvolume
            , formatweight: formatweight
        }
    }());
    return {
        ajax: ajax
        , getTimtout: _timeOut
        , setCheckboxListener: setCheckboxListener
        , url: url
        , formatImage: formatImage
        , format: format
    }
}());

exports.ajax = Fun.ajax;
exports.getTimeout = Fun.getTimtout;
exports.setCheckboxListener = Fun.setCheckboxListener;
exports.url = Fun.url;
exports.formatImage = Fun.formatImage;
exports.format = Fun.format;

},{}],3:[function(require,module,exports){
/**
 * Created by Jeremy on 2017/1/23.
 */
'use strict';
var Modal = require('./modal');
var general = (function () {
    var run = function () {
        //时间格式化
        Date.prototype.Format = function (fmt) { //author: Jeremyyy
            var o = {
                "M+": this.getMonth() + 1, //月份
                "d+": this.getDate(), //日
                "h+": this.getHours(), //小时
                "m+": this.getMinutes(), //分
                "s+": this.getSeconds(), //秒
                "q+": Math.floor((this.getMonth() + 3) / 3), //季度
                "S": this.getMilliseconds() //毫秒
            };
            if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
            for (var k in o)
                if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
            return fmt;
        };

        //修改密码
        $(document).on('click', '#change-pwd', function () {
            $('.change-back').removeClass('dp-n');
            $('.change-pwd').removeClass('dp-n');
        });
        //关闭修改密码
        $(document).on('click', '.close-pwd', function () {
            $('.change-back').addClass('dp-n');
            $('.change-pwd').addClass('dp-n');
        });
        $(document).on('click', '#ensure-pwd', function () {
            if ($('#new-password').val() != $('#ensure-password').val()) {
                $('#ensure-password').addClass('warm');
            } else {
                $('#ensure-password').removeClass('warm');
                var data = {
                    "agentMemberId": 0,
                    "oldPwd": $('#password').val(),
                    "pwd": $('#new-password').val(),
                    "pwdConfirm": $('#ensure-password').val()
                };
                $.ajax({
                    url: '/api/account/changePwd'
                    , type: 'post'
                    , data: data
                    , dataType: 'json'
                    , timeout: 100000
                    , success: function (json) {
                        if (json && 'resCode' in json && json.resCode == 0) {
                            Modal.setAlert('修改成功！', null, function () {
                                $('.change-back').addClass('dp-n');
                                $('.change-pwd').addClass('dp-n');
                            });
                        } else {
                            Modal.setAlert(json.resMsg || '修改失败，请重试！');
                        }
                    }
                });
            }
        });
    };
    return {
        run: run
    }
}());
module.exports.general = general;
},{"./modal":4}],4:[function(require,module,exports){
/**
 * Created by zrz on 2016/2/24.
 * @version 1.0.0 created
 */

'use strict';

//构造信息框主体
var Modal = (function () {
    //构造原始类
    function M(m) {
        this.s = m.s;//是否显示
        this.id = m.id;
    }

    //构造标准show方法，用于继承
    M.prototype.show = function () {
        var ele = document.getElementById(this.id);
        if (ele) {
            if (this.s && !isShow()) {//显示当前隐藏
                ele.className = ele.className.replace("dp-n", "");
            } else if (!this.s && isShow()) {//隐藏当前显示
                ele.className += " dp-n";
            }
            //去除两边的空格
            ele.className = String(ele.className).trim();
        }
        function isShow() {//是否已显示，无class时显示
            return ele.className.split("dp-n").length == 1;
        }
    };

    //加载信息框
    var loading = (function () {
        //初始化生成加载信息框
        var init = function () {
            if (!document.getElementById("loading_modal_element")) {
                $('body').append('<div id="loading_modal_element" class="loading-modal-body dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="loading-modal-image"></div>' +
                    '<div class="loading-modal-text">' +
                    '<h2>玩命加载中……</h2>' +
                    '</div></div>');
            }
            return false;
        };
        //显示、隐藏信息框
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;//无参数显示信息框
            var m = new M({id: "loading_modal_element", s: s});
            m.show();
        };
        return {
            init: init
            , show: show
        }
    }());
    //弹出信息框
    var alert = (function () {
        var init = function () {
            if (!document.getElementById("alert_modal_element")) {
                $('body').append('<div id="alert_modal_element" class="alert-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="alert-modal-content">' +
                    '<div class="alert-modal-body"><span class="alert-modal-text"></span></div>' +
                    '<div class="alert-modal-footer"><button id="alert_modal_close" class="alert-modal-button">关闭</button></div>' +
                    '</div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "alert_modal_element", s: s});
            m.show();
        };
        /**
         * 设置弹出信息框
         * @param msg       显示的信息，支持html
         * @param sed       倒计时关闭时间，单位：second
         * @param callback  关闭触发回调函数
         */
        var set = function (msg, sed, callback) {
            var ele = document.getElementById("alert_modal_element");
            if (msg) {
                if (typeof msg === 'object') {//应对后端返回提示时使用Object封装
                    msg = JSON.stringify(msg);
                }
                if(ele){
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }else{
                    init();
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }
                show();
            }
            if (sed > 0) {
                setTimeout(function () {
                    show(false);
                }, 1000 * sed);
            }//无关闭时间或者关闭时间为0，不自动关闭
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#alert_modal_close").on("click", function () {
                if (callback && callback instanceof Function) {
                    callback();
                }
                show(false);
                //阻止事件继续传递
                return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //选择信息框
    var confirm = (function () {
        var init = function () {
            if (!document.getElementById("confirm_modal_element")) {
                $('body').append('<div id="confirm_modal_element" class="confirm-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="confirm-modal-content">' +
                    '<div id="confirm_modal_header" class="confirm-modal-header dp-n"></div>' +
                    '<div class="confirm-modal-body"><span id="confirm_modal_text" class="confirm-modal-text"></span></div>' +
                    '<div class="confirm-modal-footer">' +
                    '<div class="footer-button-success"><button class="confirm-modal-button  modal-success" data-confirm="success">确认</button></div>' +
                    '<div class="footer-button-false"><button class="confirm-modal-button" data-confirm="error">取消</button></div>' +
                    '</div></div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "confirm_modal_element", s: s});
            m.show();
        };
        /**
         * 设置选择信息框的内容
         * @param option    配置
         * {
         *      title:"头部显示的信息"
         *      ,text:"显示的提示信息"
         *      ,success:"点击成功后的回调"
         *      ,error:"点击失败后的回调"
         *      ,complete:"点击按钮后的整体回调"
         * }
         */
        var bar = 0;
        var set = function (option) {
            if (!option) {
                return false;
            }
            if ("title" in option && option.title.length > 0) {//有头部，则显示头部
                document.getElementById("confirm_modal_header").innerHTML = option.title;
            }
            if ("text" in option && option.text.length > 0) {//有内容，则显示整个选择信息框
                document.getElementById("confirm_modal_text").innerHTML = option.text;
            }
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#confirm_modal_element").find(".confirm-modal-button").off("click").on("click", function () {
                //fixme .off("click")用于防止多次触发<--很玄学，我也不知道为什么，但是请不要修改。
                var atr = $(this).attr("data-confirm");//选择的按钮
                bar++;
                if (option && atr in option && option[atr] instanceof Function) {
                    option[atr]();
                }
                if (option && "complete" in option && option.complete instanceof Function) {
                    option.complete();//若有完成函数，则执行
                } else {//否则，关闭选择框
                    show(false);
                }
                //阻止事件继续传递
                //return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //覆盖层
    var cover = (function () {
        var init = function () {
            if (!document.getElementById("cover_modal_element")) {
                $('body').append('<div id="cover_modal_element" class="cover-modal-element dp-n"></div>');
            }
            return false;
        };
        var hide = function () {
            document.getElementById("cover_modal_element").style.display = "none";
        };
        var show = function () {
            document.getElementById("cover_modal_element").style.display = "block";
        };
        return {
            init: init
            , show: show
            , hide: hide
        }
    }());
    return {
        initLoading: loading.init
        , showLoading: loading.show

        , initAlert: alert.init
        , showAlert: alert.show
        , setAlert: alert.set

        , initConfirm: confirm.init
        , setConfirm: confirm.set
        , showConfirm: confirm.show
        , initCover: cover.init
    }
}());

//页面加载完毕后生成四个自定义模态框
setTimeout(function () {
    //页面加载时生成一个覆盖层
    Modal.initCover();
    //页面加载时生成一个加载信息框
    Modal.initLoading();
    //页面加载时生成一个弹出信息框
    Modal.initAlert();
    //页面加载时生成一个选择信息框
    Modal.initConfirm();
}, 100);


//抛出上层调用
exports.showLoading = Modal.showLoading;
exports.setAlert = Modal.setAlert;
exports.showAlert = Modal.showAlert;
exports.setConfirm = Modal.setConfirm;
exports.showConfirm = Modal.showConfirm;
},{}],5:[function(require,module,exports){
/**
 * Created by Auser on 2016/12/6.
 */
"use strict";
var Data = (function () {
    var list = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/list'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var log = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/log'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var getName = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/airline/manage/getName'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var getCode = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/airline/manage/getCode'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var storage = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/storage'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var addData = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/addData'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var ensureData = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/ensureData'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var bgUpdate = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/bgUpdate'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var warehouse = function (callback) {
        var _data = {};
        $.ajax({
            url: '/api/warehouse/list'
            , type: 'post'
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var priceList = function (callback) {
        var _data = {};
        $.ajax({
            url: '/api/airline/price/list'
            , type: 'post'
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var calculate = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/calculate'
            , type: 'post'
            , dataType: 'json'
            , timeout: 100000
            , data: data
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var search = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/airlineSearch'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var order = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/order'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var customer = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/customer'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var cancel = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/cancel'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var confirm = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/confirm'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var createCharge = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/done/createCharge'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var ydSearch = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/ydSearch'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var ydExist = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/ydExist'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var ydNew = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/order/pending/ydNew'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var transfer = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/staff/list/transfer'
            , type: 'post'
            , dataType: 'json'
            , data: data
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var opList = function (callback) {
        var _data = {};
        $.ajax({
            url: '/api/staff/list/opList'
            , type: 'post'
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    return {
        list: list
        , getName: getName
        , getCode: getCode
        , storage: storage
        , addData: addData
        , ensureData: ensureData
        , bgUpdate: bgUpdate
        , warehouse: warehouse
        , priceList: priceList
        , calculate: calculate
        , search: search
        , order: order
        , customer: customer
        , cancel: cancel
        , createCharge: createCharge
        , confirm: confirm
        , ydSearch: ydSearch
        , ydExist: ydExist
        , ydNew: ydNew
        , opList: opList
        , transfer: transfer
        , log: log
    }
}());
module.exports.Data = Data;
},{}],6:[function(require,module,exports){
/**
 * Created by Jeremy on 2017/2/6.
 */
'use strict';
var myformat = require('../../general/function').format;
var Dom = (function () {
    var list = function (json, param) {
        var str = '';
        str += '<thead> <tr> <td><input type="checkbox" id="check-all"></td><td>订单号</td> <td colspan="2">订单信息</td> <td colspan="4">航线信息</td> <td colspan="5">货物信息</td> <td colspan="2">价格（CNY）</td> </tr> </thead>';
        if (json && json.resCode == 0 && 'resBody' in json && json.resBody && 'sList' in json.resBody && json.resBody.sList instanceof Array) {
            if (json.resBody.sList.length > 0) {
                var arr = json.resBody.sList;
                for (var a in arr) {
                    if (arr.hasOwnProperty(a)) {
                        str += render(arr[a]);
                    }
                }
                $.burster($(".outer-page"), param.offset || 0, json.resBody.totalCount || 0, 5, param.limit || 20);
                $('.list-cout').html('共为您找到 ' + json.resBody.totalCount + ' 条结果');
            } else {
                str = '<tr class="wrong"><td colspan="14">暂无订单信息，请添加！</td></tr>';
                $('.outer-page').html('');
                $('.list-cout').html('共为您找到 0 条结果');
            }
        } else {
            str = '<tr class="wrong"><td colspan="14">请求失败，<a href="">请重试！</a></td></tr>';
            $('.outer-page').html('');
            $('.list-cout').html('共为您找到 0 条结果');
        }
        function render(d) {
            var c = d.company || {}
                , o = d.order || {}
                , m = d.member || {}
                , type;
            switch (o.orderChannel) {
                case 1:
                    type = '自助订舱';
                    break;
                case 2:
                    type = '快速订舱';
                    break;
                case 3:
                    type = '后台下单';
                    break;
                case 6:
                    type = '拼货订单';
                    break;
                default:
                    type = '自助订舱';
                    break;
            }

            return '<tbody><tr><td class="short-td" colspan="14"></td></tr></tbody><tbody class="data-tbd"> <tr>' +
                ' <td rowspan="2" style="padding: 0 10px;"><input data-id="' + o.orderId + '" type="checkbox" name="list-sg">' +
                '</td><td class="' + (o.orderType == 1 ? 'bg-p' : (o.allowClearence ? 'bg-q' : 'bg-y')) + '">' + (o.orderType == 1 ? '月结' : '票结') + (d.agent ? (d.agent.name ? '&nbsp;&nbsp;&nbsp;&nbsp;' + d.agent.name : '&nbsp;&nbsp;&nbsp;&nbsp;/') : '&nbsp;&nbsp;&nbsp;&nbsp;/') + '</td>' +
                ' <td class="bg-g">客户公司</td> ' +
                '<td class="bg-g">委托时间/方式</td> <td class="bg-g">起始港</td>' +
                ' <td class="bg-g">目的港</td> <td class="bg-g">航空公司</td> ' +
                '<td class="bg-g">起飞时间</td> <td class="bg-g">数量（PCS）</td> <td class="bg-g">重量（KGS）</td>' +
                ' <td class="bg-g">体积（CBM）</td> <td class="bg-g">品名</td> <td class="bg-g">单价（CNY）</td> ' +
                '<td rowspan="2" class="font-r">' + o.declareChargingTotal + '</td> <td class="opt-td" rowspan="2" data-jcbh="' + o.warehouseEntryNum + '" data-khmc="' + (c.companyName || '/') + '" data-lxr="' + (m.memberName || '/') + '">' +
                '<a class="show-opt" href="javascript:void(0);">操作 <span class="caret"></span></a><div class="opt-part dp-n">' +

                (o.orderState == 0 ?
                '<a href="javascript:void(0);" class="show-jd" data-id="' + o.orderId + '">确认订单</a>' +
                '<a href="javascript:void(0);" class="refuse" data-id="' + o.orderId + '">取消</a>'
                    :
                '<a href="javascript:void(0);" class="show-yd" data-id="' + o.orderId + '">关联运单</a> ' +
                '<a href="javascript:void(0);" class="refuse" data-id="' + o.orderId + '">取消</a>' ) +
                '<a href="javascript:void(0);" class="show-log" data-id="' + o.orderId + '">操作日志</a>' +
                '</div></td> </tr> ' +
                '<tr> <td><a href="/order/detail?tp=pending&id=' + o.orderId + '">' + o.orderNum + '</a></td><td>' + (c.companyName || '/') + '</td> <td>' + new Date(o.createDt.replace(/-/g, "/")).Format('yyyy-MM-dd hh:mm') + ' <br/> ' + type + '</td> <td>' + (o.deptCode || '/') + '</td>' +
                ' <td>' + (o.destCode || '/') + '</td> <td>' + (o.airCompanyCode || '/') + '</td> <td>' + new Date(o.flightDate.replace(/-/g, "/")).Format('yyyy-MM-dd') + '</td> <td>' + (o['declareCargo'].cargoCount || '/') + '</td> <td>' + (o['declareCargo'].cargoWeight || '/') + '</td> <td>' + (myformat.formatvolume(o['declareCargo'].cargoSize) || '/') + '</td>' +
                ' <td><div class="tw" title="'+o['cargo'].cargoName+'">' + (o['declareCargo'].cargoName || '/') + '</div></td> <td>' + o.chargingPrice + '</td> </tr> </tbody>'

        }

        $('.outer-tb').html(str);
    };
    var renderTr = function (json) {
        var n = 0;//计算是否会出现滚动条
        var str = '';
        var tft = '';
        if (json && 'storageBatch' in json && json.storageBatch instanceof Array) {
            var list = json.storageBatch;
            if (list.length > 0) {
                for (var l in list) {
                    if (list.hasOwnProperty(l)) {
                        var d = list[l];
                        str += render(d, parseInt(l) + 1);
                    }
                }
                tft += '<div></div> <div class="big">总计</div> ' +
                    '<div>' + json.totalCount + '</div> <div></div> <div></div> ' +
                    '<div></div> <div>' + json.totalSize + '</div> <div>' + json.totalWeight + '</div> <div></div>' +
                    ' <div>' + json.totalDamage + '</div> <div>' + json.totalDamp + '</div> <div>' + json.totalTransform + '</div> <div>' + json.totalOther + '</div>' +
                    ' <div></div>';
            } else {
                str = '<div class="wrong">暂无进仓数据，请添加！</div>';
            }
        } else {
            str = '<div class="wrong">请求数据出错，请重试！</div>';
        }
        if (n > 6) {
            $('.ensure-data-part').find('.tbd').css('padding-right', '3px')
        }
        $('.ensure-data-part').find('.tbd').html(str);
        $('.ensure-data-part').find('.tft').html(tft);
        function render(d, index) {
            n += 1;
            var str = '';
            str += '<div class="ttr fill"> <div>' + index + '</div> <div class="big">批次小计</div> ' +
                '<div>' + d.batchCount + '</div> <div></div> <div></div> ' +
                '<div></div> <div>' + d.batchSize + '</div> <div>' + d.batchWeight + '</div> <div></div>' +
                ' <div>' + d.batchDamage + '</div> <div>' + d.batchDamp + '</div> <div>' + d.batchTransform + '</div> <div>' + d.batchOther + '</div>' +
                ' <div></div> </div>';
            for (var i in d.batchList) {
                if (d.batchList.hasOwnProperty(i)) {
                    n += 1;
                    var dt = d.batchList[i];
                    var type;
                    switch (dt.packageType) {
                        case 1:
                            type = '纸箱';
                            break;
                        case 2:
                            type = '木箱';
                            break;
                        case 3:
                            type = '卷';
                            break;
                        case 4:
                            type = '托盘';
                            break;
                        default:
                            type = '纸箱';
                            break;
                    }
                    str += '<div class="ttr fill"> <div></div> <div class="big">' + new Date(dt.storageTime.replace(/-/g, "/")).Format('yyyy-MM-dd hh:mm') + '</div> ' +
                        '<div>' + dt.storageCount + '</div> <div>' + dt.storageLength + '</div> <div>' + dt.storageWidth + '</div> ' +
                        '<div>' + dt.storageHeight + '</div> <div>' + dt.storageSize + '</div> <div>' + dt.storageWeight + '</div> <div>' + type + '</div>' +
                        ' <div>' + dt.damageCount + '</div> <div>' + dt.dampCount + '</div> <div>' + dt.transformCount + '</div> <div>' + dt.otherCount + '</div>' +
                        ' <div>' + dt.storageRemark + '</div> </div>';
                }
            }
            return str;
        }
    };
    var innerList = function (json, param) {
        var str = '';
        console.log(json);
        if (json && json.resCode == 0 && 'resBody' in json && json.resBody && 'sList' in json.resBody && json.resBody.sList instanceof Array) {
            console.log(1);
            if (json.resBody.sList.length > 0) {
                var arr = json.resBody.sList;
                for (var a in arr) {
                    if (arr.hasOwnProperty(a)) {
                        str += render(arr[a]);
                    }
                }
                $.burster($(".inner-page"), param.offset || 0, json.resBody.totalCount || 0, 5, param.limit || 20);
            } else {
                str = '<tr class="wrong"><td colspan="9">暂无搜索信息！</td></tr>';
                $('.inner-page').html('');
            }
        } else {
            console.log(2);
            str = '<tr class="wrong"><td colspan="9">请求失败，<a href="">请重试！</a></td></tr>';
            $('.inner-page').html('');
        }
        function render(d) {
            var str = '';
            for (var t in d.transPort) {
                if (d.transPort.hasOwnProperty(t)) {
                    var s = d.transPort[t];
                    str += s.portCode + (t == d.transPort.length - 1 ? '' : ' -> ');
                }
            }
            return ' <tr> <td><input type="radio" name="i-sg" data-id="' + d.airwayId + '"/></td> ' +
                '<td>' + d.airCompanyCode + '</td> <td>' + str + '</td> <td>' + d.airwayPrice.rate[0].policy['45'] + '</td> ' +
                '<td>' + d.airwayPrice.rate[0].policy['100'] + '</td> <td>' + d.airwayPrice.rate[0].policy['300'] + '</td>' +
                ' <td>' + d.airwayPrice.rate[0].policy['500'] + '</td> <td>' + d.airwayPrice.rate[0].policy['1000'] + '</td>'

        }

        $('.search-tb').find('tbody').html(str);
    };
    return {
        list: list
        , renderTr: renderTr
        , innerList: innerList
    }
}());
module.exports.Dom = Dom;
},{"../../general/function":2}],7:[function(require,module,exports){
/**
 * Created by Jeremy on 2017/2/6.
 */
'use strict';
'use strict';
var Listener = require('./listener').Listener;
var general = require('../../general/general').general;
general.run();
Listener.run();
},{"../../general/general":3,"./listener":8}],8:[function(require,module,exports){
/**
 * Created by Jeremy on 2017/1/5.
 */
'use strict';
require('../../general/burster');
var url = require('../../general/function').url
    ,myformat = require('../../general/function').format
    , Modal = require('../../general/modal');
var Data = require('./data').Data
    , Dom = require('./dom').Dom;
var Listener = (function () {
    var modalPage = {
        offset: 0
        , limit: 5
    };
    //选择的客户
    var memberId;
    var cancelId, jdId, ydId;
    //缓存待处理列表数据
    var pendingList = {};
    //临时存放数据
    var stopgap = {};
    //存放默认费用模板
    var defaultPrice = {};
    //存放运单列表
    var ydList = {};
    var listener = function () {
        $(document).on('click', '#save-ydh', function () {
           // $('#jd-jcbh').prop('readonly', $(this).prop('checked'));
            $('#set-jcbh').toggle();
            if ($(this).prop('checked')) {
                $('#jd-jcbh').val('');
            }
        });
        $(document).on('click', '#set-jcbh', function () {
            $('.set-part').addClass('dp-b');
            $('.yd-part').addClass('dp-n');
        });

        $(document).on('click', '#set-ensure', function () {
            var arr = $('#multi-set').val().split('\n');
            $('#jd-jcbh').val(arr.join(','));
            $('.set-part').addClass('dp-n');
        });
        $(document).on('click', '#check-all', function () {
            $('input[type="checkbox"][name="list-sg"]').prop('checked', $(this).prop('checked'));
        });
        $(document).on('mouseenter', '.opt-td', function () {
            $(this).children('.opt-part').fadeIn(200);
        });
        $(document).on('mouseleave', '.opt-td', function () {
            $(this).children('.opt-part').fadeOut(200);
        });
        $('#add-date').datetimepicker({
            format: 'yyyy-mm-dd',//日期的格式
            startDate: new Date(),//选择器的开始日期
            autoclose: true,//日期选择完成后是否关闭选择框
            bootcssVer: 3,//显示向左向右的箭头
            language: 'zh-CN',//语言
            minView: "month"//表示日期选择的最小范围，默认是hour
        });
        $(document).on('click', '.glyphicon-calendar', function () {
            $('#add-date').focus();
        });
        $(document).on('click', '.outer-page .pages', function () {
            url.set('offset', $(this).data('offset'));
            init();
        });
        $(document).on('click', '#search', function () {
            url.set('offset', 0);
            init();
        });
        //$(document).on('click', '.close-btn', function () {
        //    $('.alert-part').addClass('dp-n');
        //    $('.white-back').addClass('dp-n');
        //});
        $(document).on('click', '.accept', function () {
            $('.white-back').removeClass('dp-n');
            $('.accept-part').removeClass('dp-n');
        });
        $(document).on('click', '.refuse', function () {
            cancelId = $(this).data('id');
            $('.white-back').removeClass('dp-n');
            $('.refuse-part').removeClass('dp-n');
        });
        $(document).on('click', '#add', function () {
            modalPage['offset'] = 0;
            $('.white-back').removeClass('dp-n');
            $('.add-part').removeClass('dp-n');
        });
        $(document).on('click', '.add-data', function () {
            var ele = $(this).parent();
            $('.jcbh').html(ele.data('jcbh'));
            $('.khmc').html(ele.data('khmc'));
            $('.lxr').html(ele.data('lxr'));
            $('.add-data-part').find('.tbd').html(' <div class="ttr fill data"> ' +
                '<div class="big"><input type="text" class="a-date" id="first-date"></div> ' +
                '<div><input type="text" class="a-num kup-num" value="0"> </div> <div><input type="text" class="a-long  kup-fnum" value="0"> ' +
                '</div> <div><input type="text" class="a-width  kup-fnum" value="0"> </div> <div><input type="text" class="a-height  kup-fnum" value="0"> ' +
                '</div> <div class="a-size">0</div> <div><input type="text" class="a-wei kup-fnum" value="0"> ' +
                '</div> <div> <select class="a-package"> <option value="1">纸箱</option> <option value="2">木箱</option> <option value="3">卷</option> <option value="4">托盘</option> </select> </div> ' +
                '<div><input type="text" class="a-ps kup-num" value="0"> </div> <div><input type="text" class="a-sc kup-num" value="0"> ' +
                '</div> <div><input type="text" class="a-bx kup-num" value="0"> </div> <div><input type="text" class="a-qt kup-num" value="0"> </div>' +
                ' <div><input type="text" class="a-bz"> </div> <div></div> </div> ');

            $('.add-data-part').find('.tft').html(' <div class="big">总计</div> <div class="t-js">0</div> <div class="t-c"></div> <div class="t-k"></div> <div class="t-g"></div> <div class="t-s">0</div> <div class="t-w">0</div> <div></div> <div class="t-ps">0</div> <div class="t-sc">0</div> <div class="t-bx">0</div> <div class="t-qt">0</div> <div></div> <div></div>');
            $('#add-data').data('id', $(this).data('id'));
            $('#first-date').datetimepicker({
                format: 'yyyy-mm-dd hh:ii:ss',//日期的格式
                endDate: new Date(),//选择器的开始日期
                autoclose: true,//日期选择完成后是否关闭选择框
                bootcssVer: 3,//显示向左向右的箭头
                language: 'zh-CN',//语言
                minView: "month"//表示日期选择的最小范围，默认是hour
            }).on('changeDate', function (e) {
                $('.copy-date').html(new Date(e.date).Format('yyyy-MM-dd hh:mm:ss'));
            });
            $('.white-back').removeClass('dp-n');
            $('.add-data-part').removeClass('dp-n');
        });
        $(document).on('click', '.add-data-part .glyphicon-plus', function () {
            if ($('.add-data-part').find('.ttr.data').length >= 6) {
                $('.add-data-part').find('.tbd').css('padding-right', '3px');
            }
            $('.add-data-part').find('.tbd').append(' <div class="ttr fill data"> ' +
                '<div class="big copy-date">' + $('#first-date').val() + '</div>' +
                '<div><input type="text" class="a-num kup-num" value="0"> </div> <div><input type="text" class="a-long  kup-fnum" value="0"> ' +
                '</div> <div><input type="text" class="a-width  kup-fnum" value="0"> </div> <div><input type="text" class="a-height  kup-fnum" value="0"> ' +
                '</div> <div class="a-size">0</div> <div><input type="text" class="a-wei kup-fnum" value="0"> ' +
                '</div> <div> <select class="a-package"> <option value="1">纸箱</option> <option value="2">木箱</option> <option value="3">卷</option> <option value="4">托盘</option> </select> </div> ' +
                '<div><input type="text" class="a-ps kup-num" value="0"> </div> <div><input type="text" class="a-sc kup-num" value="0"> ' +
                '</div> <div><input type="text" class="a-bx kup-num" value="0"> </div> <div><input type="text" class="a-qt kup-num" value="0"> </div>' +
                ' <div><input type="text" class="a-bz"> </div> <div><span class="glyphicon glyphicon-remove"></span></div></div> ');
        });
        $(document).on('click', '.add-data-part .glyphicon-remove', function () {
            $(this).parents('.ttr').remove();
            getTotal();
        });
        $(document).on('keyup', '.add-data-part .kup-num', function () {
            $(this).val($(this).val().replace(/[^\-?\d]/g, ''));
        });
        $(document).on('blur', '.add-data-part .kup-num', function () {
            if (!$(this).val()) {
                $(this).val(0);
            } else {
                $(this).val(parseInt($(this).val()));
            }
            var ele = $(this).parents('.ttr.data');
            var c = parseFloat(ele.find('.a-long').val())
                , k = parseFloat(ele.find('.a-width').val())
                , g = parseFloat(ele.find('.a-height').val())
                , js = parseFloat(ele.find('.a-num').val());
            ele.find('.a-size').html(myformat.formatvolume(c * k * g * js));
            getTotal();
            getTotal();
        });
        $(document).on('keyup', '.add-data-part .kup-fnum', function () {
            $(this).val($(this).val().replace(/[^\-?\d.]/g, ''));
        });
        $(document).on('blur', '.add-data-part .kup-fnum', function () {
            $(this).val($(this).val().replace(/[^\-?\d.]/g, ''));
            if (!$(this).val()) {
                $(this).val(0);
            } else {
                $(this).val(parseFloat($(this).val()));
            }
            var ele = $(this).parents('.ttr.data');
            var c = parseFloat(ele.find('.a-long').val())
                , k = parseFloat(ele.find('.a-width').val())
                , g = parseFloat(ele.find('.a-height').val())
                , js = parseFloat(ele.find('.a-num').val());
            ele.find('.a-size').html(myformat.formatvolume(c * k * g * js));
            getTotal();
        });
        $(document).on('click', '.ensure-data', function () {
            var ele = $(this).parent();
            $('.jcbh').html(ele.data('jcbh'));
            $('.khmc').html(ele.data('khmc'));
            $('.lxr').html(ele.data('lxr'));
            $('#ensure-data').data('id', $(this).data('id'));
            Data.storage({id: $(this).data('id')}, function (json) {
                if (json && 'resCode' in json && json.resCode == 0) {
                    Dom.renderTr(json.resBody || {});
                    $('.white-back').removeClass('dp-n');
                    $('.ensure-data-part').removeClass('dp-n');
                } else {
                    Modal.setAlert(json.resMsg || '添加失败，请重试！');
                }
            });
        });
        $(document).on('click', '.show-bg', function () {
            var id = $(this).data('id');
            $('#bg-ensure').data('id', id);
            var d = pendingList[id];
            $('.ddh').html(id);
            $('.qsg').html(d.order.deptCode || '/');
            $('.mdg').html(d.order.destCode || '/');
            $('.hkgs').html(d.order.airCompanyCode || '/');
            $('.qfrq').html(d.order.flightDate ? new Date(d.order.flightDate).Format('yyyy-MM-dd') : '/');
            var jczt, dczt;
            switch (d.order.entryState) {
                case 0:
                    jczt = '待进仓';
                    break;
                case 1:
                    jczt = '已进仓（未确认）';
                    break;
                case 2:
                    jczt = '已确认';
                    break;
                default:
                    jczt = '待进仓';
                    break;
            }
            switch (d.order.bookingState) {
                case 0:
                    dczt = '未订舱';
                    break;
                case 1:
                    dczt = '已订舱';
                    break;
                case -1:
                    dczt = '订舱失败';
                    break;
                case 2:
                    dczt = '已改配';
                    break;
                default:
                    dczt = '未订舱';
                    break;
            }
            $('.jczt').html(jczt);
            $('.dczt').html(dczt);
            $('.white-back').removeClass('dp-n');
            $('.bg-part').removeClass('dp-n');
        });
        $(document).on('blur', '#info-name', function () {
            var val = $(this).val();
            if (val == '' || new RegExp("^[ ]+$").test(val)) {
                $(this).val('consol');
            }
        });
        $(document).on('click', '.show-zd', function () {
            stopgap = pendingList[$(this).data('id')] || null;
            if (stopgap) {
                var ele = $('.zd-part')
                    , c = stopgap.company
                    , o = stopgap.order;
                var type = '', str = '';
                switch (o.cargo.cargoType) {
                    case 1:
                        type = '普货';
                        break;
                    case 2:
                        type = '木箱';
                        break;
                    case 3:
                        type = '卷';
                        break;
                    case 4:
                        type = '托盘';
                        break;
                }
                $('.ddh').html(o.orderNum || '/');
                $('.kh').html(c.companyName || '/');
                $('.qsg').html(o.deptCode || '/');
                $('.mdg').html(o.destCode || '/');
                $('.hkgs').html(o.airCompanyCode || '/');
                $('.qfrq').html(o.flightDate ? new Date(o.flightDate).Format('yyyy-MM-dd') : '/');
                $('.hbh').html(o.airlineInfo || '/');
                $('.pm').html(o.cargo.cargoName || '/');
                $('.pm').attr("title",o.cargo.cargoName);
                $('.lx').html(type || '/');
                $('.wtbg').html(o.cargo.isBulkyCargo ? '是' : '否');
                $('.js').html(o.cargo.cargoCount + 'PCS');
                $('.tj').html(myformat.formatvolume(o.cargo.cargoSize) + 'CBM');
                $('.zl').html(o.cargo.cargoWeight + 'KGS（计费重量：' + o.cargo.chargingWeight + 'KGS）');
                str += '<tr class="data"> <td><input type="text" class="fymt" readonly value="空运费"/>' +
                    '</td> <td><input type="text" class="ip-dj" value="' + o.chargingPrice + '"/>' +
                    '</td> <td><input type="text" class="ip-zl" value="' + o.chargingWeight + '"/>' +
                    '</td> <td><input type="text" class="ttp" readonly value="' + o.declareAirwayFee + '"/>' +
                    '</td> <td><span class="glyphicon glyphicon-remove"></span></td></tr>';
                for (var s in o.serviceFeeList) {
                    if (o.serviceFeeList.hasOwnProperty(s)) {
                        var d = o.serviceFeeList[s];
                        str += '<tr class="data"> <td><input type="text" class="fymt" readonly value="' + d.itemName + '"/>' +
                            '</td> <td><input type="text" class="ip-dj" value="' + d.itemPrice + '"/>' +
                            '</td> <td><input type="text" class="ip-zl" value="' + d.itemUnit + '"/>' +
                            '</td> <td><input type="text" class="ttp" readonly value="' + d.itemTotal + '"/>' +
                            '</td> <td><span class="glyphicon glyphicon-remove"></span></td></tr>';
                    }
                }
                str += '<tr class="tr-add"> <td></td> <td></td> <td></td> <td></td> <td><span class="glyphicon glyphicon-plus"></span></td> </tr>';
                ele.find('.zd-tb').find('tbody').html(str);
                ele.removeClass('dp-n');
                $('.white-back').removeClass('dp-n');
            }
        });
        //确认订单
        $(document).on('click', '.show-jd', function () {

            modalPage['offset'] = 0;
            var id = $(this).data('id');
            var d = pendingList[id];
            var ele = $('.jd-part');
            var str = '';
            if (d.order.airwayInfo) {
                for (var i in d.order.airwayInfo.transPort) {
                    if (d.order.airwayInfo.transPort.hasOwnProperty(i)) {
                        var dt = d.order.airwayInfo.transPort[i];
                        str += dt.portCode + (i == d.order.airwayInfo.transPort.length - 1 ? '' : ' -> ');
                    }
                }
            }
            jdId = id;
            ele.find('.ddh').html(d.order.orderNum);
            ele.find('.kh').html(d.company.companyName);
            ele.find('.ddqd').html(d.order.orderChannel == 1 ? '自助订舱' : '快速订舱');
            ele.find('.pm').html(d.order.cargo.cargoName);
            ele.find('.pm').attr("title",d.order.cargo.cargoName);

            ele.find('.lx').html(d.order.cargo.cargoType == 1 ? '普货' : '转关');
            ele.find('.wtbg').html(d.order.customDeclare ? '是' : '否');
            ele.find('.js').html(d.order.cargo.cargoCount + 'PCS');
            ele.find('.tj').html(myformat.formatvolume(d.order.cargo.cargoSize) + 'CBM');
            ele.find('.zl').html(d.order.cargo.cargoWeight + 'KGS （计费重量：' + d.order.cargo.chargingWeight + 'KGS）');
            ele.find('.qsg').html(d.order.deptCode);
            ele.find('.mdg').html(d.order.destCode);
            ele.find('.hkgs').html(d.order.airCompanyCode);
            ele.find('.hxlg').html(d.order.airwayInfo ? str : '/');
            ele.find('.qfrq').html(new Date(d.order.flightDate).Format('yyyy-MM-dd'));
            ele.find('#jd-price').val(d.order.chargingPrice);
            ele.find('#fixed-jcbh').prop('checked', true);
            ele.find('#jd-jcbh').prop('readonly', true);
            ele.find('#zdck').val(d.order.warehouseId);
            if (!d.order.airwayInfo) {
                jdInit(ele);
                $('.result-part').show();
                $('#jd-ensure').data('tp', 0);
                $('#jd-ensure').data('aid', 0);
            } else {
                $('.result-part').hide();
                $('#jd-ensure').data('tp', 1);
                $('#jd-ensure').data('aid', d.order.airwayInfo.airwayId);
            }
            console.log(ele.html());
            ele.removeClass('dp-n');
            $('.white-back').removeClass('dp-n');

            //如果之前有设置进仓编号，保持复选框不选中
            if($("#jd-jcbh").val() !=""){
                $("#fixed-jcbh").attr("checked",false);
                $('#set-jcbh').show();
            }
        });
        $(document).on('click', '.jd-part .pages', function () {
            modalPage.offset = $(this).data('offset');
            jdInit($('.jd-part'));
        });
        $(document).on('change', '#save-ydh', function () {
            var c = $(this).prop('checked');
            $('#yd-ydh').prop('readonly', c);
            if (c) {
                $('#yd-ydh').val('');
            }
        });
        //关联运单
        $(document).on('click', '.show-yd', function () {

            var id = $(this).data('id');
            ydId = id;
            var dd = pendingList[id];
            var c = dd.company || {}
                , o = dd.order || {};
            var ele = $('.yd-part');
            ele.find('#save-ydh').prop('checked', true);
            ele.find('#yd-ydh').val('').prop('readonly', true);
            ele.find('.ddh').html(o.orderNum);
            ele.find('.qsg').html(o.deptCode);
            ele.find('.mdg').html(o.destCode);
            ele.find('.hkgs').html(o.airCompanyCode);
            ele.find('.qfrq').html(new Date(o.flightDate).Format('yyyy-MM-dd'));
            ele.find('.js').html(o.cargo.cargoCount + 'PCS');
            ele.find('.tj').html(myformat.formatvolume(o.cargo.cargoSize) + 'CBM');
            ele.find('.zl').html(o.cargo.cargoWeight + 'KGS （计费重量：' + dd.order.cargo.chargingWeight + 'KGS）');
            ele.find('.jczt').html(o.entryState == 0 ? '待进仓' : (o.entryState == 1 ? '已进仓，未确认' : '已确认'));
            ele.find('#yd-c').val(o.cargo.cargoCount);
            ele.find('#yd-s').val(o.cargo.cargoSize);
            ele.find('#yd-w').val(o.cargo.cargoWeight);
            var data = {
                "agentCompanyId": 10000,
                "airwayId": o.airwayInfo.airwayId,
                "flightDate": new Date(o.flightDate)
            };
            Data.ydSearch(data, function (json) {
                var str = '';
                ydList = {};
                if (json && 'resBody' in json && json.resBody instanceof Array && json.resBody.length > 0 && false) {//本次判断取消，故而最后加了false
                    for (var b in json.resBody) {
                        if (json.resBody.hasOwnProperty(b)) {
                            var dt = json.resBody[b];
                            ydList[dt.billInfo.billId] = dt;
                        }
                    }
                    for (var y in ydList) {
                        if (ydList.hasOwnProperty(y)) {
                            str += '<p class="yd-rd"> <input type="radio" name="s-yd" data-id="' + y + '">' + y + '</p>';
                        }
                    }
                    ele.find('.left').html(str);
                    ele.find('.result-part').removeClass('dp-n');
                    ele.find('.add-yd').addClass('dp-n');
                    $('#gl-ensure').data('tp', 1);
                } else {
                    ele.find('.result-part').addClass('dp-n');
                    ele.find('.add-yd').removeClass('dp-n');
                    $('#gl-ensure').data('tp', 2);
                }
                ele.removeClass('dp-n');
                $('.white-back').removeClass('dp-n');
                console.log('关联运单');

            });
        });
        $(document).on('click', '#set-jcbh', function () {
            $('.set-part').removeClass('dp-n');

        });
        $(document).on('click', '.close-btn', function () {
            if($(this).hasClass('setJc')){
                $('.set-part').addClass('dp-n');
                //$('.jd-part').addClass('dp-b');
            }else{
                $('.alert-part').addClass('dp-n');
                $('.white-back').addClass('dp-n');

            }
        });
        $(document).on('click', '#set-ensure', function () {
            var arr = $('#multi-set').val().split('\n');
            $('#ip-jcbh').val(arr.join(','));
            if($(this).hasClass('setJc')){
                $('.set-part').addClass('dp-n');
                $('.jd-part').addClass('dp-b');
            }else{
                $('.white-back').addClass('dp-n');
                $('.alert-back').addClass('dp-n');
            }
        });
        $(document).on('click', '#fixed-jcbh', function () {
            $('#set-jcbh').toggle();
            if ($(this).prop('checked')) {
                $('#ip-jcbh').val('');
            }
        });
        $(document).on('click', 'input[name="s-yd"]', function () {
            var arr = ydList[$(this).data('id')].orderList;
            var str = '';
            for (var a in arr) {
                if (arr.hasOwnProperty(a)) {
                    var d = arr[a];
                    str += '<tr><td>' + d.orderId + '</td>' +
                        '<td>' + d.cargo.cargoCount + 'PCS</td>' +
                        '<td>' + d.cargo.cargoSize + 'CBM</td>' +
                        '<td>' + d.cargo.cargoWeight + 'KGS</td>' +
                        '<td>' + (d.entryState == 0 ? '待进仓' : (d.entryState == 1 ? '已进仓，未确认' : '已结束')) + '</td></tr>';
                }
            }
            $('.yd-tb').find('tbody').html(str);
        });
        $(document).on('click', '#transfer', function () {
            var arr = [];
            $('input[name="list-sg"]:checked').each(function () {
                arr.push($(this).data('id'));
            });
            if (arr.length > 0) {
                $('.white-back').removeClass('dp-n');
                $('.transfer-part').removeClass('dp-n');
            }
        });
        $(document).on('click', '#accept-transfer', function () {
            var arr = [];
            var mId;
            $('input[name="list-sg"]:checked').each(function () {
                arr.push($(this).data('id'));
            });
            mId = $('#czy').find('option:selected').val();
            if (arr.length > 0 && mId) {
                var data = {
                    "orderIds": arr,
                    "companyId": 0,
                    "memberFrom": 0,
                    "memberTo": mId,
                    "requireMeberId": 0
                };
                Data.transfer(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert('转移成功！', null, function () {
                            location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '转移失败，请重试！');
                    }
                });
            }
        });
        $(document).on('click', '.show-log', function () {
            Data.log({id: $(this).data('id')}, function (json) {
                if (json && 'resBody' in json && json.resBody instanceof Array) {
                    var str = '';
                    var arr = json.resBody;
                    if (arr.length > 0) {
                        for (var a in arr) {
                            if (arr.hasOwnProperty(a)) {
                                var type = '';
                                var d = arr[a];
                                switch (d.operatorType) {
                                    case 1:
                                        type = '客户';
                                        break;
                                    case 2:
                                        type = '货代';
                                        break;
                                    case 3:
                                        type = '报关行';
                                        break;
                                }
                                str += '<tr><td>' + (new Date(d.createDt).Format('yyyy-MM-dd hh:mm')) + '</td><td>' + d.orderNum + '</td>' +
                                    '<td>' + type + '</td><td>' + d.operatorId + '</td><td class="long">' + d.remark + '</td></tr>'
                            }
                        }
                    } else {
                        str = '<tr><td colspan="5">暂无操作日志</td></tr>'
                    }
                    $('.log-part').find('tbody').html(str);
                    $('.log-part').removeClass('dp-n');
                    $('.white-back').removeClass('dp-n');
                } else {
                    Modal.setAlert(json.resMsg || '获取失败，请重试');
                }
            });
        });
    };
    var airports = function () {
        //获取机场名称
        $(document).on('keyup', 'input.name', function (e) {
            var _this = $(this)
                , ul = _this.siblings('.get-name');
            var index = ul.find('.active').index() || 0
                , len = ul.children().length;
            if (e.keyCode == 13) {//回车键
                var data = ul.children('.active').data('val') || ul.find('li:first-child').data('val') || '';
                $(this).val(data);
                $(this).data('val', data);
                ul.hide();
            } else if (e.keyCode == 38) {//上键
                index = index == 0 ? len - 1 : index - 1;
                ul.find('li').removeClass('active');
                ul.find('li').eq(index).addClass('active');
            } else if (e.keyCode == 40) {//下键
                index = index == len - 1 ? 0 : index + 1;
                ul.find('li').removeClass('active');
                ul.find('li').eq(index).addClass('active');
            } else {//正常输入
                Data.getName({key: _this.val()}, function (json) {
                    if (json && 'resBody' in json && json.resBody instanceof Array && json.resBody.length > 0) {
                        var str = ''
                            , body = json.resBody;
                        for (var b in body) {
                            if (body.hasOwnProperty(b)) {
                                var d = body[b];
                                str += '<li data-val="' + d.airportCode + '" class="' + (b == 0 ? 'active' : '') + '">' + d.displayName + '</li>'
                            }
                        }
                        ul.html(str);
                        ul.show();
                    }
                });
            }
        });
        //input失去焦点
        $(document).on('blur', 'input.name', function () {
            var ul = $(this).siblings('.get-name');
            var data = ul.children('.active').data('val') || ul.find('li:first-child').data('val') || '';
            $(this).val(data);
            $(this).data('val', data);
            ul.hide();
        });
        //li元素悬浮获得焦点
        $(document).on('mouseenter ', '.get-name li', function () {
            $(this).addClass('active');
            $(this).siblings().removeClass('active');
        });
    };
    var company = function () {
//获取机场名称
        $(document).on('keyup', 'input.get-company', function (e) {
            var _this = $(this)
                , ul = _this.siblings('.get-name');
            var index = ul.find('.active').index() || 0
                , len = ul.children().length;
            if (e.keyCode == 13) {//回车键
                var data = ul.children('.active').data('val') || ul.find('li:first-child').data('val') || '';
                $(this).val(data);
                $(this).data('val', data);
                ul.hide();
            } else if (e.keyCode == 38) {//上键
                index = index == 0 ? len - 1 : index - 1;
                ul.find('li').removeClass('active');
                ul.find('li').eq(index).addClass('active');
            } else if (e.keyCode == 40) {//下键
                index = index == len - 1 ? 0 : index + 1;
                ul.find('li').removeClass('active');
                ul.find('li').eq(index).addClass('active');
            } else {//正常输入
                Data.getCode({key: _this.val()}, function (json) {
                    if (json && 'resBody' in json && json.resBody instanceof Array && json.resBody.length > 0) {
                        var str = ''
                            , body = json.resBody;
                        for (var b in body) {
                            if (body.hasOwnProperty(b)) {
                                var d = body[b];
                                str += '<li data-val="' + d.airlineCode + '" class="' + (b == 0 ? 'active' : '') + '">' + d.companyName + '</li>';
                            }
                        }
                        ul.html(str);
                        ul.show();
                    }
                });
            }
        });
        //input失去焦点
        $(document).on('blur', 'input.get-company', function () {
            var ul = $(this).siblings('.get-name');
            var data = ul.children('.active').data('val') || ul.find('li:first-child').data('val') || '';
            $(this).val(data);
            $(this).data('val', data);
            ul.hide();
        });
    };
    var customer = function () {
        //获取客户名称
        $(document).on('keyup', '#info-member', function (e) {
            var _this = $(this)
                , ul = _this.siblings('.get-name');
            var index = ul.find('.active').index() || 0
                , len = ul.children().length;
            if (e.keyCode == 13) {//回车键
                var mID = ul.children('.active').data('val') || ul.find('li:first-child').data('val') || '';
                var data = ul.children('.active').html() || ul.find('li:first-child').html() || '';
                memberId = mID;
                $(this).val(data);
                $(this).data('val', data);
                ul.hide();
            } else if (e.keyCode == 38) {//上键
                index = index == 0 ? len - 1 : index - 1;
                ul.find('li').removeClass('active');
                ul.find('li').eq(index).addClass('active');
            } else if (e.keyCode == 40) {//下键
                index = index == len - 1 ? 0 : index + 1;
                ul.find('li').removeClass('active');
                ul.find('li').eq(index).addClass('active');
            } else {//正常输入
                Data.customer({"agentCompanyId": 10000, "keyword": $(this).val()}, function (json) {
                    if (json && 'resBody' in json && json.resBody instanceof Array && json.resBody.length > 0) {
                        var str = ''
                            , body = json.resBody;
                        for (var b in body) {
                            if (body.hasOwnProperty(b)) {
                                var d = body[b];
                                str += '<li data-val="' + d.companyId + '" class="' + (b == 0 ? 'active' : '') + '">' + d.companyName + '</li>';
                            }
                        }
                        ul.html(str);
                        ul.show();
                    }
                });
            }
        });
        //input失去焦点
        $(document).on('blur', '#info-member', function () {
            var ul = $(this).siblings('.get-name');
            var mID = ul.children('.active').data('val') || ul.find('li:first-child').data('val') || '';
            var data = ul.children('.active').html() || ul.find('li:first-child').html() || '';
            memberId = mID;
            $(this).val(data);
            $(this).data('val', data);
            ul.hide();
        });
    };
    var init = function () {
        var data = {
            offset: url.get('offset') || 0,
            limit: url.get('limit') || 10,
            "deptCode": $('#start').val(),
            "destCode": $('#end').val(),
            "number": $('#order-num').val()
        };
        Data.list(data, function (json) {
            Dom.list(json, data);
            var dt = {};
            if (json && 'resCode' in json && json.resCode == 0 && json.resBody && json.resBody.sList.length > 0) {
                var list = json.resBody.sList;
                for (var l in list) {
                    if (list.hasOwnProperty(l)) {
                        var d = list[l];
                        dt[d.order.orderId] = d;
                    }
                }
            }
            pendingList = dt;
        });
    };
    var submit = function () {
        $(document).on('click', '#add-data', function () {
            var _this = $(this), arr = [];
            if ($('#first-date').val()) {
                $('.add-data-part').find('.ttr.data').each(function () {
                    var d = {
                        "storageTime": $('#first-date').val(),
                        "packageType": $(this).find('.a-package').find('option:selected').val(),
                        "packageMark": 'string',
                        "storageCount": $(this).find('.a-num').val(),
                        "storageWeight": $(this).find('.a-wei').val(),
                        "storageSize": $(this).find('.a-size').html(),
                        "damageCount": $(this).find('.a-ps').val(),
                        "dampCount": $(this).find('.a-sc').val(),
                        "transformCount": $(this).find('.a-bx').val(),
                        "otherCount": $(this).find('.a-qt').val(),
                        "storageRemark": $(this).find('.a-bz').val(),
                        "storageLength": $(this).find('.a-long').val(),
                        "storageWidth": $(this).find('.a-width').val(),
                        "storageHeight": $(this).find('.a-height').val()
                    };
                    arr.push(d);
                });
                var data = {
                    orderId: _this.data('id')
                    , entryList: arr
                };
                Data.addData(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert(json.resMsg || '添加成功！', null, function () {
                            location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '添加失败，请重试！');
                    }
                });
            } else {
                Modal.setAlert('请录入进仓时间！');
            }
        });
        $(document).on('click', '#ensure-data', function () {
            var data = {
                orderId: $(this).data('id')
            };
            Data.ensureData(data, function (json) {
                if (json && 'resCode' in json && json.resCode == 0) {
                    Modal.setAlert(json.resMsg || '确认成功！', null, function () {
                        location.reload();
                    });
                } else {
                    Modal.setAlert(json.resMsg || '确认失败！');
                }
            });
        });
        $(document).on('click', '#bg-ensure', function () {
            var data = {
                orderId: $(this).data('id')
                , state: $('#c-jczt').find('option:selected').val()
            };
            Data.bgUpdate(data, function (json) {
                if (json && 'resCode' in json && json.resCode == 0) {
                    Modal.setAlert(json.resMsg || '确认成功！', null, function () {
                        location.reload();
                    });
                } else {
                    Modal.setAlert(json.resMsg || '确认失败！');
                }
            });
        });
        $(document).on('click', '#add-ensure', function () {
            var pass = true;
            var id = $('.add-part').find('input[name="i-sg"]:checked').data('id') || null;
            if (!id) {
                pass = false;
            }
            $('.a-require').each(function () {
                if (!$(this).val()) {
                    $(this).addClass('warm');
                    pass = false;
                } else {
                    $(this).removeClass('warm');
                }
            });
            if (pass) {
                var data = {
                    "companyId": memberId,
                    "agentCompanyId": 10000,
                    "fixedPrice": $('#gddj').prop('checked'),
                    "orderPrice": $('#send-price').val(),
                    "airwayId": id,
                    "flightDate": $('#add-date').val() + ' 00:00:00',
                    "warehouseId": $('#warehouse').find('option:selected').val(),
                    "cargoName": $('#info-name').val(),
                    "cargoType": $('#info-type').find('option:selected').val(),
                    "cargoCount": $('#info-num').val(),
                    "cargoWeight": $('#info-wei').val(),
                    "cargoSize": $('#info-size').val(),
                    "bulkyRate": $('#fpbl').find('option:selected').val(),
                    "customDeclare": $('#info-custom').find('option:selected').val() == 1
                };
                Data.order(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert(json.resMsg || '添加成功！', null, function () {
                            location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '添加失败，请重试！');
                    }
                });
            }
        });
        $(document).on('click', '#refuse-ensure', function () {
            var id = $('input[name="reason"]:checked').prop('id');
            var txt = '';
            if (id == 'r5') {
                txt = $('#text-r4').val();
            } else {
                txt = $('#' + id).siblings('label').html();
            }
            var data = {
                "agentCompanyId": 10000,
                "serviceFee": $('#r6').prop('checked'),
                "comment": txt,
                "orderId": cancelId
            };
            Data.cancel(data, function (json) {
                if (json && 'resCode' in json && json.resCode == 0) {
                    Modal.setAlert(json.resMsg || '取消成功！', null, function () {
                        location.reload();
                    });
                } else {
                    Modal.setAlert(json.resMsg || '取消失败，请重试！');
                }
            });
        });
        $(document).on('click', '#zd-ensure', function () {
            var arr = [], total = 0;
            $('.zd-tb').find('tr.data').each(function () {
                var data = {
                    "itemName": $(this).find('.fymt').val(),
                    "itemPrice": parseFloat($(this).find('.ip-dj').val()),
                    "itemUnit": 1,
                    "itemCount": parseFloat($(this).find('.ip-zl').val()),
                    "itemTotal": parseFloat($(this).find('.ttp').val())
                };
                arr.push(data);
                total += parseFloat($(this).find('.ttp').val());
            });
            if (arr.length > 0) {
                var data = {
                    "orderId": stopgap.order.orderId,
                    "serviceFeeList": arr,
                    "orderChargingTotal": total,
                    "chargeState": 0
                };
                Data.createCharge(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert(json.resMsg || '制单成功！', null, function () {
                            location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '制单失败，请重试！');
                    }
                });
            }
        });
        $(document).on('click', '#jd-ensure', function () {
            var tp = $(this).data('tp');
            var aid = $(this).data('aid') != 0 ? $(this).data('aid') : ($('.jd-part').find('input[name="i-sg"]:checked').data('id') || null);
            if (aid) {
                var data = {
                    "orderId": jdId,
                    "airwayId": aid,
                    "fixedPrice": $('#fixed-price').prop('checked'),
                    "orderPrice": $('#jd-price').val(),
                    "warehouseId": $('#zdck').find('option:selected').val(),
                    "autoEntryNum": $('#fixed-jcbh').prop('checked'),
                    "entryNum": $('#jd-jcbh').val()
                };
                Data.confirm(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        Modal.setAlert(json.resMsg || '接单成功！', null, function () {
                            location.reload();
                        });
                    } else {
                        Modal.setAlert(json.resMsg || '接单失败,请重试！');
                    }
                });
            } else {
                Modal.setAlert('请选择一条航线！');
            }
        });
        $(document).on('click', '#gl-ensure', function () {
            if ($(this).data('tp') == 2) {
                var newPass = true;
                $('.yd-ip').each(function () {
                    if (!$(this).val()) {
                        $(this).addClass('warm');
                        newPass = false;
                    } else {
                        $(this).removeClass('warm');
                    }
                });
                if (!$('#save-ydh').prop('checked')) {
                    if (!/^\d{11}$/.test($('#yd-ydh').val())) {
                        Modal.setAlert('运单号必须为11位数字！');
                        return false;
                    }
                }
                if (newPass) {
                    var data = {
                        "bookingCount": $('#yd-c').val(),
                        "autoAssign": $('#save-ydh').prop('checked'),
                        "billNum": $('#yd-ydh').val(),
                        "bookingSize": $('#yd-s').val(),
                        "bookingWeight": $('#yd-w').val(),
                        "orderId": ydId,
                        "billId": 0
                    };
                    Data.ydNew(data, function (json) {
                        if (json && 'resCode' in json && json.resCode == 0) {
                            Modal.setAlert(json.resMsg || '关联成功！', null, function () {
                                location.reload();
                            });
                        } else {
                            Modal.setAlert(json.resMsg || '关联失败,请重试！');
                        }
                    });
                }
            } else {
                if ($('.yd-body').find('input[name="s-yd"]:checked').length > 0) {
                    var dt = {
                        "orderId": ydId,
                        "billId": $('.yd-body').find('input[name="s-yd"]:checked').data('id')
                    };
                    Data.ydExist(dt, function (json) {
                        if (json && 'resCode' in json && json.resCode == 0) {
                            Modal.setAlert(json.resMsg || '关联成功！', null, function () {
                                location.reload();
                            });
                        } else {
                            Modal.setAlert(json.resMsg || '关联失败,请重试！');
                        }
                    });
                } else {
                    Modal.setAlert('请选择一条航线关联！');
                }
            }
        });
    };
    var warehouseInit = function () {
        Data.warehouse(function (json) {
            var str = '';
            var body = json.resBody || {};
            var o = 'order' in body && body.order || {};
            if (json && 'resCode' in json && json.resCode == 0 && 'sList' in json.resBody && json.resBody.sList) {
                var arr = json.resBody.sList;
                for (var a in arr) {
                    if (arr.hasOwnProperty(a)) {
                        var d = arr[a];
                        str += '<option value="' + d.warehouseId + '">' + d.warehouseName + '</option>';
                    }
                }
                $('#warehouse').html(str);
                $('#zdck').html(str);

            }
        });
    };
    var priceInit = function () {
        Data.priceList(function (json) {
            if (json && 'resCode' in json && json.resCode == 0 && json.resBody && json.resBody.sList) {
                var arr = json.resBody.sList;
                for (var a in arr) {
                    if (arr.hasOwnProperty(a)) {
                        var d = arr[a];
                        if (d.expenseDefault) {
                            for (var e in d.expenseTemplate) {
                                if (d.expenseTemplate.hasOwnProperty(e)) {
                                    var dt = d.expenseTemplate[e];
                                    defaultPrice[dt.itemName] = dt;
                                }
                            }
                            break;
                        }
                    }
                }
            }
        });
    };
    var changeType = function () {
        $(document).on('click', '#gddj', function () {
            $('#send-price').prop('readonly', !$(this).prop('checked'));
        });
    };
    var zdTable = function () {
        $(document).on('click', '.fymt.choose', function () {
            $('.se-part').addClass('dp-n');
            $(this).siblings('.se-part').removeClass('dp-n');
        });
        $(document).on('click', '.se-part li', function () {
            var dj = parseFloat($(this).data('dj'))
                , zl = parseFloat($(this).data('zl'))
                , ele = $(this).parents('tr.data');
            ele.find('.ip-dj').val(dj);
            ele.find('.ip-zl').val(zl);
            ele.find('.ttp').val(dj * zl);
            $(this).parents('ul').siblings('input').val($(this).html());
            $(this).parents('ul').addClass('dp-n');
            ele.find('.fymt').removeClass('choose');
            ele.find('.se-part').remove();
        });
        $(document).on('click', function (e) {
            var target = $(e.target);
            if (target.closest('.fymt.choose,.se-part li').length == 0) {
                $('.se-part').addClass('dp-n');
            }
        });
        $(document).on('keyup', '.ip-zl,.ip-dj', function () {
            $(this).val($(this).val().replace(/[^\d.]/g, ""))
        });
        $(document).on('blur', '.ip-zl,.ip-dj', function () {
            var v = $(this).val() || 0;
            $(this).val(parseFloat(v));
            var ele = $(this).parents('tr.data');
            var dj = parseFloat(ele.find('.ip-dj').val())
                , zl = parseFloat(ele.find('.ip-zl').val());
            ele.find('.ttp').val(dj * zl);
        });
        $(document).on('click', '.glyphicon-remove', function () {
            $(this).parents('tr.data').remove();
        });
        $(document).on('click', '.glyphicon-plus', function () {
            var exist = [], arr = [], str = '', ul = '';
            //获取已存在的项目
            $('.zd-tb').find('.fymt').each(function () {
                exist.push($(this).val());
            });
            //计算可添加的项目
            for (var d in defaultPrice) {
                if (defaultPrice.hasOwnProperty(d)) {
                    if (exist.indexOf(d) < 0) {
                        arr.push(defaultPrice[d]);
                    }
                }
            }
            if (arr.length > 0) {
                for (var a in arr) {
                    if (arr.hasOwnProperty(a)) {
                        var sg = arr[a];
                        ul += '<li data-dj="' + sg.itemPrice + '" data-zl="' + sg.itemUnit + '">' + sg.itemName + '</li>';
                    }
                }
                str += '<tr class="data"> <td><input type="text" class="fymt choose" readonly value="请选择费用名称"/> ' +
                    '<ul class="se-part dp-n">' + ul + '</ul> ' +
                    '</td> <td><input type="text" class="ip-dj" value="0"/>' +
                    '</td> <td><input type="text" class="ip-zl" value="0"/></td> ' +
                    '<td><input type="text" class="ttp" readonly value="0"/></td> <td><span class="glyphicon glyphicon-remove"></span></td> </tr>';
                $('.zd-tb').find('.tr-add').before(str);
            }
        });
    };
    var searchLine = function () {
        var innerInit = function () {
            var pass = true;
            $('.s-require').each(function () {
                if (!$(this).val()) {
                    $(this).addClass('warm');
                    pass = false;
                } else {
                    $(this).removeClass('warm');
                }
            });
            if (pass) {
                var data = {
                    "deptCode": $('#add-start').val(),
                    "destCode": $('#add-end').val(),
                    "flightDate": new Date($('#add-date').val()),
                    "airCompanyCode": $('#add-com').val(),
                    "transCount": 1,
                    "offset": modalPage.offset || 0,
                    "limit": modalPage.limit || 5
                };
                Data.search(data, function (json) {
                    Dom.innerList(json, data)
                });
            }
        };
        var cPrice = function () {
            var pass = true
                , id = $('input[name="i-sg"]:checked').data('id') || null;
            if (!id) {
                pass = false;
            }
            $('.p-require').each(function () {
                if (!$(this).val()) {
                    $(this).addClass('warm');
                    pass = false;
                } else {
                    $(this).removeClass('warm');
                }
            });
            if (pass) {
                var data = {
                    "cargoCount": $('#info-num').val(),
                    "cargoSize": $('#info-size').val(),
                    "cargoWeight": $('#info-wei').val(),
                    "airwayId": id,
                    "customDeclare": $('#info-custom').find('option:selected').val() == 1
                };
                Data.calculate(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0 && json.resBody) {
                        var d = json.resBody;
                        var data = json.resBody.airwayFee;
                        $('.yg-price').html(d.totalFee);
                        $('.right-price').find('td').removeClass('active');
                        $('.c-' + data.chargingLevel).addClass('active');
                        $('#send-price').val(data.chargingUnitPrice);
                        $('.c-price').find('.c-45').html(data['policy']['policy']['45']);
                        $('.c-price').find('.c-100').html(data['policy']['policy']['100']);
                        $('.c-price').find('.c-300').html(data['policy']['policy']['300']);
                        $('.c-price').find('.c-500').html(data['policy']['policy']['500']);
                        $('.c-price').find('.c-1000').html(data['policy']['policy']['1000']);
                    }
                });
            }
        };
        $(document).on('click', '#inner-search', function () {
            innerInit();
        });
        $(document).on('click', '.add-part .pages', function () {
            modalPage.offset = $(this).data('offset');
            innerInit();
        });
        $(document).on('blur', '.p-require', function () {
            cPrice();
        });
        $(document).on('change', '#info-custom', function () {
            cPrice();
        });
        $(document).on('click', 'input[name="i-sg"]', function () {
            cPrice();
        });
    };
    var jdInit = function (ele) {
        var data = {
            "deptCode": ele.find('.qsg').html(),
            "destCode": ele.find('.mdg').html(),
            "flightDate": new Date(ele.find('.qfsj').html()),
            "airCompanyCode": ele.find('.hkgs').html(),
            "transCount": 1,
            "offset": modalPage.offset || 0,
            "limit": modalPage.limit || 5
        };
        Data.search(data, function (json) {
            Dom.innerList(json, data);
        });
    };
    var getTotal = function () {
        var js = 0, c = 0, k = 0, g = 0, tj = 0, zl = 0, ps = 0, sc = 0, bx = 0, qt = 0;
        var ele = $('.add-data-part');
        ele.find('.a-num').each(function () {
            js += parseInt($(this).val());
        });
        ele.find('.a-size').each(function () {
            tj += parseFloat($(this).html());
        });
        ele.find('.a-wei').each(function () {
            zl += parseFloat($(this).val());
        });
        ele.find('.a-ps').each(function () {
            ps += parseInt($(this).val());
        });
        ele.find('.a-sc').each(function () {
            sc += parseInt($(this).val());
        });
        ele.find('.a-bx').each(function () {
            bx += parseInt($(this).val());
        });
        ele.find('.a-qt').each(function () {
            qt += parseInt($(this).val());
        });
        ele.find('.t-js').html(js).end()
            .find('.t-s').html(tj).end()
            .find('.t-w').html(zl).end()
            .find('.t-ps').html(ps).end()
            .find('.t-sc').html(sc).end()
            .find('.t-bx').html(bx).end()
            .find('.t-qt').html(qt).end();
    };
    var opInit = function () {
        Data.opList(function (json) {
            var option = '';
            if (json && 'resCode' in json && json.resCode == 0 && json.resBody.length > 0) {
                var arr = json.resBody || [];
                for (var a = 0; a < arr.length; a++) {
                    option += '<option value="' + arr[a].memberId + '">' + arr[a].name + '</option>'
                }
                $('#czy').html(option);
            } else {
                option = '暂无操作员，请添加！';
                $('.transfer-part').find('.dp-tb').html(option);
            }
        });
    };
    var run = function () {
        airports();
        listener();
        init();
        company();
        submit();
        warehouseInit();
        changeType();
        zdTable();
        priceInit();
        searchLine();
        customer();
        opInit();
    };
    return {
        run: run
    }
}());
module.exports.Listener = Listener;
},{"../../general/burster":1,"../../general/function":2,"../../general/modal":4,"./data":5,"./dom":6}]},{},[7])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL252bS92Ni4yLjAvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi4uLy4uL2dlbmVyYWwvYnVyc3Rlci5qcyIsIi4uLy4uL2dlbmVyYWwvZnVuY3Rpb24uanMiLCIuLi8uLi9nZW5lcmFsL2dlbmVyYWwuanMiLCIuLi8uLi9nZW5lcmFsL21vZGFsLmpzIiwiZGF0YS5qcyIsImRvbS5qcyIsImluZGV4LmpzIiwibGlzdGVuZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6ZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplcmVteSBvbiAyMDE2LzExLzI0LlxyXG4gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4oZnVuY3Rpb24gKCQpIHtcclxuICAvKipcclxuICAgKiDnlJ/miJDliIbpobXlmahcclxuICAgKiBAcGFyYW0gZWxlIOmcgOimgea3u+WKoOWIhumhteWZqOeahOWFg+e0oFxyXG4gICAqIEBwYXJhbSBvZmZzZXQg5YGP56e76YeP77yM5Y2z5LuO56ysZGF0YS1vZmZzZXTlvIDlp4tcclxuICAgKiBAcGFyYW0gbGVuZ3RoIOaAu+iusOW9leadoeaVsFxyXG4gICAqIEBwYXJhbSBzaG93UGFnZXMg5YiG6aG15Zmo5pi+56S655qE6aG15pWw77yM6LaF6L+H5YiZ6ZqQ6JeP5aSa5L2Z55qE6aG1XHJcbiAgICogQHBhcmFtIHJvd3Mg5q+P6aG15pi+56S655qE6K6w5b2V5p2h5pWwXHJcbiAgICovXHJcbiAgJC5idXJzdGVyID0gZnVuY3Rpb24gKGVsZSwgb2Zmc2V0LCBsZW5ndGgsIHNob3dQYWdlcywgcm93cykge1xyXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ID8gcGFyc2VJbnQob2Zmc2V0KSA6IDA7XHJcbiAgICAvL+WwhuWIhumhteWZqOijheWFpXRhYmxl5LitXHJcbiAgICBpZiAobGVuZ3RoICYmIGxlbmd0aCA+IG9mZnNldCkge1xyXG4gICAgICB2YXIgcGFnZUh0bWwgPSBcIlwiXHJcbiAgICAgICAgLCBhc3MgPSBcIlwiLy/muIXnqbrpnIDopoHoo4XlhaXnmoRodG1sXHJcbiAgICAgICAgLCBiZWZvcmVQYWdlcyA9IE1hdGguY2VpbChvZmZzZXQgLyByb3dzKS8v6ZyA6KaB5pi+56S655qE5YmN6aG15pWwL+W9k+WJjemhtVxyXG4gICAgICAgICwgYWZ0ZXJQYWdlcyA9IE1hdGguY2VpbCgobGVuZ3RoIC0gb2Zmc2V0ICkgLyByb3dzKS8v6ZyA6KaB5pi+56S655qE5ZCO6aG15pWwXHJcbiAgICAgICAgLCBwYWdlcyA9IE1hdGguY2VpbChsZW5ndGggLyByb3dzKSAvL+aAu+mhteaVsFxyXG4gICAgICAgICwgayA9IDA7XHJcbiAgICAgIC8vYWxlcnQoXCLmgLvpobXmlbBcIiArIHBhZ2VzICsgXCIg5YmN6aG15pWwIFwiICsgYmVmb3JlUGFnZXMgKyBcIiDlkI7pobXmlbAgXCIgKyBhZnRlclBhZ2VzKTtcclxuICAgICAgLy/oi6XpobXmlbDlsI/kuo5zaG93UGFnZXPpobXvvIzliJnlhajpg6jmmL7npLpcclxuICAgICAgaWYgKHBhZ2VzID49IDAgJiYgcGFnZXMgPD0gc2hvd1BhZ2VzKSB7XHJcbiAgICAgICAgZm9yIChrID0gMDsgayA8IHBhZ2VzOyBrKyspIHtcclxuICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKHBhZ2VzID4gc2hvd1BhZ2VzKSB7Ly/mgLvpobXmlbDlpKfkuo5zaG93UGFnZXPpobVcclxuICAgICAgICBpZiAoYmVmb3JlUGFnZXMgPD0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICYmIGFmdGVyUGFnZXMgPiBzaG93UGFnZXMgKyAxKSB7XHJcbiAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgc2hvd1BhZ2VzOyBrKyspIHtcclxuICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoKHBhZ2VzIC0gMSkgKiByb3dzKSArIFwiJz4uLi5cIiArIHBhZ2VzICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZVBhZ2VzIDw9IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSAmJiBhZnRlclBhZ2VzID09IHNob3dQYWdlcyArIDEpIHtcclxuICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBzaG93UGFnZXMgLSAxOyBrKyspIHtcclxuICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoKHBhZ2VzIC0gMSkgKiByb3dzKSArIFwiJz4uLi5cIiArIHBhZ2VzICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZVBhZ2VzIDw9IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSAmJiBhZnRlclBhZ2VzIDw9IHNob3dQYWdlcykge1xyXG4gICAgICAgICAgZm9yIChrID0gMDsgayA8IHNob3dQYWdlcyAtIDE7IGsrKykge1xyXG4gICAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArICgocGFnZXMgLSAxKSAqIHJvd3MpICsgXCInPi4uLlwiICsgcGFnZXMgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlUGFnZXMgPiBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgJiYgYmVmb3JlUGFnZXMgPD0gc2hvd1BhZ2VzICYmIGFmdGVyUGFnZXMgPiBzaG93UGFnZXMpIHtcclxuICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9JzAnPjEuLi48L2E+PC9saT5cIjtcclxuICAgICAgICAgIGZvciAoayA9IGJlZm9yZVBhZ2VzIC0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMTsgayA8IGJlZm9yZVBhZ2VzICsgTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpOyBrKyspIHtcclxuICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoKHBhZ2VzIC0gMSkgKiByb3dzKSArIFwiJz4uLi5cIiArIHBhZ2VzICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZVBhZ2VzID4gc2hvd1BhZ2VzICYmIGFmdGVyUGFnZXMgPiBzaG93UGFnZXMpIHtcclxuICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9JzAnPjEuLi48L2E+PC9saT5cIjtcclxuICAgICAgICAgIGZvciAoayA9IGJlZm9yZVBhZ2VzIC0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMTsgayA8IGJlZm9yZVBhZ2VzICsgTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpOyBrKyspIHtcclxuICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoKHBhZ2VzIC0gMSkgKiByb3dzKSArIFwiJz4uLi5cIiArIHBhZ2VzICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZVBhZ2VzID4gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICYmIGJlZm9yZVBhZ2VzIDw9IHBhZ2VzICYmIGFmdGVyUGFnZXMgPD0gc2hvd1BhZ2VzICYmIGFmdGVyUGFnZXMgPiBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxKSB7XHJcbiAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PScwJz4xLi4uPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICBmb3IgKGsgPSBiZWZvcmVQYWdlcyAtIE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSArIDE7IGsgPCBiZWZvcmVQYWdlcyArIE1hdGguY2VpbChzaG93UGFnZXMgLyAyKTsgaysrKSB7XHJcbiAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGkgY2xhc3M9J2FjdGl2ZScgPjxhPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKChwYWdlcyAtIDEpICogcm93cykgKyBcIic+Li4uXCIgKyBwYWdlcyArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChiZWZvcmVQYWdlcyA+IHBhZ2VzICYmIGFmdGVyUGFnZXMgPD0gc2hvd1BhZ2VzICYmIGFmdGVyUGFnZXMgPiBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxKSB7XHJcbiAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PScwJz4xLi4uPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICBmb3IgKGsgPSBiZWZvcmVQYWdlcyAtIE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSArIDE7IGsgPCBiZWZvcmVQYWdlcyArIE1hdGguY2VpbChzaG93UGFnZXMgLyAyKTsgaysrKSB7XHJcbiAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGkgY2xhc3M9J2FjdGl2ZScgPjxhPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKChwYWdlcyAtIDEpICogcm93cykgKyBcIic+Li4uXCIgKyBwYWdlcyArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChiZWZvcmVQYWdlcyA+IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSAmJiBhZnRlclBhZ2VzIDw9IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSArIDEpIHtcclxuICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9JzAnPjEuLi48L2E+PC9saT5cIjtcclxuICAgICAgICAgIGZvciAoayA9IGJlZm9yZVBhZ2VzIC0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMTsgayA8IHBhZ2VzOyBrKyspIHtcclxuICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvL+WIpOaWrVwi6aaW6aG1XCLlkoxcIuacq+mhtVwi5piv5ZCm5Y+v54K55Ye7XHJcbiAgICAgIHZhciBmaXJzdFBhZ2UsIGxhc3RQYWdlO1xyXG4gICAgICBpZiAob2Zmc2V0ID09IDApIHsvL+atpOaXtummlumhteaXoOazleeCueWHu1xyXG4gICAgICAgIGZpcnN0UGFnZSA9ICc8bGkgY2xhc3M9XCJkaXNhYmxlZFwiPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIjBcIj7pppbpobU8L2E+PC9saT4nO1xyXG4gICAgICAgIGxhc3RQYWdlID0gJzxsaT48YSBjbGFzcz1cInBhZ2VzXCIgZGF0YS1vZmZzZXQ9XCInICsgcGFyc2VJbnQocGFyc2VJbnQoKGxlbmd0aCAlIHJvd3MgPT0gMCA/IChsZW5ndGggLSAxKSA6IGxlbmd0aCkgLyByb3dzKSAqIHJvd3MpICsgJ1wiID7mnKvpobU8L2E+PC9saT4nO1xyXG4gICAgICB9IGVsc2UgaWYgKChvZmZzZXQgKyByb3dzKSA+PSBsZW5ndGgpIHsvL+atpOaXtuacq+mhteaXoOazleeCueWHu1xyXG4gICAgICAgIGZpcnN0UGFnZSA9ICc8bGk+PGEgY2xhc3M9XCJwYWdlc1wiIGRhdGEtb2Zmc2V0PVwiMFwiPummlumhtTwvYT48L2xpPic7XHJcbiAgICAgICAgbGFzdFBhZ2UgPSAnPGxpIGNsYXNzPVwiZGlzYWJsZWRcIj48YSBjbGFzcz1cInBhZ2VzXCIgZGF0YS1vZmZzZXQ9XCInICsgcGFyc2VJbnQocGFyc2VJbnQoKGxlbmd0aCAlIHJvd3MgPT0gMCA/IChsZW5ndGggLSAxKSA6IGxlbmd0aCkgLyByb3dzKSAqIHJvd3MpICsgJ1wiPuacq+mhtTwvYT48L2xpPic7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmlyc3RQYWdlID0gJzxsaT48YSBjbGFzcz1cInBhZ2VzXCIgZGF0YS1vZmZzZXQ9XCIwXCI+6aaW6aG1PC9hPjwvbGk+JztcclxuICAgICAgICBsYXN0UGFnZSA9ICc8bGk+PGEgY2xhc3M9XCJwYWdlc1wiIGRhdGEtb2Zmc2V0PVwiJyArIHBhcnNlSW50KHBhcnNlSW50KChsZW5ndGggJSByb3dzID09IDAgPyAobGVuZ3RoIC0gMSkgOiBsZW5ndGgpIC8gcm93cykgKiByb3dzKSArICdcIj7mnKvpobU8L2E+PC9saT4nO1xyXG4gICAgICB9XHJcbiAgICAgIC8v5Yik5patXCLkuIrkuIDpobVcIuWSjFwi5LiL5LiA6aG1XCLmmK/lkKblrZjlnKhcclxuICAgICAgdmFyIHVwUGFnZSwgZG93blBhZ2U7XHJcbiAgICAgIGlmIChvZmZzZXQgPT0gMCB8fCAob2Zmc2V0IDwgcm93cyAmJiAob2Zmc2V0ICUgcm93cyAhPSAwKSkpIHtcclxuICAgICAgICB1cFBhZ2UgPSBcIjxsaSBjbGFzcz0nZGlzYWJsZWQnPjxhIGNsYXNzPSdwYWdlcycgZnVuYz0ncHJldmlvdXMnIGRhdGEtb2Zmc2V0PSdcIiArIHBhcnNlSW50KG9mZnNldCkgKyBcIicgPuS4iumhtTwvYT48L2xpPlwiXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdXBQYWdlID0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBmdW5jPSdwcmV2aW91cycgZGF0YS1vZmZzZXQ9J1wiICsgKHBhcnNlSW50KG9mZnNldCkgLSBwYXJzZUludChyb3dzKSkgKyBcIicgPuS4iumhtTwvYT48L2xpPlwiO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChvZmZzZXQgPj0gKGxlbmd0aCAtIHJvd3MpKSB7XHJcbiAgICAgICAgZG93blBhZ2UgPSBcIjxsaSBjbGFzcz0nZGlzYWJsZWQnPjxhIGNsYXNzPSdwYWdlcycgZnVuYz0nbmV4dCcgZGF0YS1vZmZzZXQ9J1wiICsgcGFyc2VJbnQob2Zmc2V0KSArIFwiJz7kuIvpobU8L2E+PC9saT5cIlxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRvd25QYWdlID0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBmdW5jPSduZXh0JyBkYXRhLW9mZnNldD0nXCIgKyBwYXJzZUludChwYXJzZUludChvZmZzZXQpICsgcGFyc2VJbnQocm93cykpICsgXCInPuS4i+mhtTwvYT48L2xpPlwiXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHBhZ2VzICE9IDEpIHtcclxuICAgICAgICAvL+WIhumhtemDqOWIhlxyXG4gICAgICAgIGFzcyArPSBcIjxkaXYgaWQ9J3BhZ2VyJyBjbGFzcz0ncGFnZXItaW5mbyc+XCIgK1xyXG4gICAgICAgIFwiPGg2IGlkPSdyZXN1bHQnIGNsYXNzPSdwYWdlci1yZWNvcmQnPuWFseaciTxzcGFuPlwiICsgbGVuZ3RoICsgXCI8L3NwYW4+5p2h6K6w5b2VPC9oNj5cIiArXHJcbiAgICAgICAgXCI8dWwgY2xhc3M9J3BhZ2luYXRpb24nPlwiICsgZmlyc3RQYWdlICsgdXBQYWdlICsgcGFnZUh0bWwgKyBkb3duUGFnZSArIGxhc3RQYWdlICsgXCI8L3VsPjwvZGl2PlwiO1xyXG4gICAgICAgIC8vdGFibGXkuK3ms6jlhaXmi7zoo4XnmoTorrDlvZVcclxuICAgICAgICBlbGUuaHRtbChhc3MpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVsZS5odG1sKCcnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufShqUXVlcnkpKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB6cnogb24gMjAxNi8yLzI2LlxyXG4gKiBAdmVyc2lvbiAxLjAuMCBjcmVhdGVkIOmAmueUqOaAp+WKn+iDveaWueazlVxyXG4gKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBGdW4gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIF90aW1lT3V0ID0gMTAwMDAwOy8v6K+35rGC6LaF5pe25pe26Ze05Li6MTBzXHJcbiAgICAvKipcclxuICAgICAqIOWwgeijhWFqYXhcclxuICAgICAqIEBwYXJhbSBvcHRpb25cclxuICAgICAqIHtcclxuICAgICAqICAgICAgdXJsOlwi6K+35rGC55qE5Zyw5Z2AXCJcclxuICAgICAqICAgICAgLG1ldGhvZDpcIuivt+axgueahOaWueazlVwiXHJcbiAgICAgKiAgICAgICxhc3luYzpcIuaYr+WQpuW5tuWPkVwiXHJcbiAgICAgKiAgICAgICxkYXRhOlwi5Y+R6YCB55qE5pWw5o2uXCJcclxuICAgICAqICAgICAgLHN1Y2Nlc3M6XCLmiJDlip/ml7blm57osINcIlxyXG4gICAgICogICAgICAsZXJyb3I6XCLlpLHotKUv6LaF5pe25pe25Zue6LCDXCJcclxuICAgICAqICAgICAgLHRpbWVvdXQ6XCLotoXml7bml7bpl7RcIlxyXG4gICAgICogICAgICAsY29tcGxldGU6XCLlrozmiJDlkI7nmoTlm57osINcIlxyXG4gICAgICogfVxyXG4gICAgICovXHJcbiAgICB2YXIgYWpheCA9IGZ1bmN0aW9uIChvcHRpb24pIHtcclxuICAgICAgICAvL2FqYXjlvIDlp4vml7blupTmmL7npLrigJzliqDovb3kv6Hmga/moYbigJ1cclxuICAgICAgICBNb2RhbC5zaG93TG9hZGluZygpO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogb3B0aW9uLnVybFxyXG4gICAgICAgICAgICAsIHR5cGU6IFwidHlwZVwiIGluIG9wdGlvbiAmJiBvcHRpb24udHlwZSB8fCBcIkdFVFwiXHJcbiAgICAgICAgICAgICwgdGltZW91dDogb3B0aW9uLnRpbWVvdXQgfHwgX3RpbWVPdXRcclxuICAgICAgICAgICAgLCBkYXRhOiBcImRhdGFcIiBpbiBvcHRpb24gJiYgb3B0aW9uLmRhdGEgfHwge31cclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogXCJqc29uXCJcclxuICAgICAgICAgICAgLCBhc3luYzogKFwiYXN5bmNcIiBpbiBvcHRpb24gJiYgb3B0aW9uLmFzeW5jKSA/IHRydWUgOiBmYWxzZVxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJzdGF0dXNcIiBpbiBqc29uICYmIGpzb24uc3RhdHVzID4gMCAmJiBcImRhdGFcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwic3VjY2Vzc1wiIGluIG9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24uc3VjY2Vzcyhqc29uLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KFwi5pegc3VjY2Vzc+aWueazlSFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcImVycm9yXCIgaW4gb3B0aW9uICYmIG9wdGlvbi5lcnJvciBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmVycm9yKGpzb24pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn5pON5L2c5aSx6LSlIScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBlcnJvcjogZnVuY3Rpb24gKHhocikgey8vNDA05oiW6ICF6LaF5pe2XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJlcnJvclwiIGluIG9wdGlvbiAmJiBvcHRpb24uZXJyb3IgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5o+Q56S655So5oi36ZSZ6K+v5L+h5oGvXHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2hvd0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KFwi6L+e5o6l5pyN5Yqh5Zmo5aSx6LSl77yM54q25oCB77yaXCIgKyAoeGhyLnN0YXR1cyB8fCAtMSkgKyBcIizkv6Hmga/vvJpcIiArICh4aHIuc3RhdHVzVGV4dCB8fCBcIi1cIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5lcnJvcih4aHIuc3RhdHVzLCB4aHIuc3RhdHVzVGV4dCk7Ly/lm57osIPor7fmsYLnmoTnirbmgIHlkozplJnor6/kv6Hmga9cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICh4aHIsIHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIC8v5YWz6Zet4oCc5Yqg6L295L+h5oGv5qGG4oCdXHJcbiAgICAgICAgICAgICAgICBNb2RhbC5zaG93TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJjb21wbGV0ZVwiIGluIG9wdGlvbiAmJiBvcHRpb24uY29tcGxldGUgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5jb21wbGV0ZSh4aHIsIHR5cGUpOy8v5Zue6LCD6K+35rGC55qEeGhy5L+h5oGv5ZKM57G75Z6LXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvL+WFqOmAieWSjOWNlemAieeahOe7keWumlxyXG4gICAgdmFyIHNldENoZWNrYm94TGlzdGVuZXIgPSBmdW5jdGlvbiAoYWxsQ2hlY2ssIHJhZGlvQ2hlY2tzKSB7XHJcbiAgICAgICAgLy/nrZvpgInljZXpgInmjInpkq7nu4RcclxuICAgICAgICB2YXIgcmFkaW9WYWx1ZUVsZXMgPSAkKHJhZGlvQ2hlY2tzKTtcclxuICAgICAgICAvL+eCueWHu+WFqOmAieaXtu+8jOWQjOe7hOaMiemSruiiq+WQjOatpVxyXG4gICAgICAgICQoZG9jdW1lbnQpLmRlbGVnYXRlKGFsbENoZWNrLCBcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHJhZGlvVmFsdWVFbGVzICYmIHJhZGlvVmFsdWVFbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9yID0gMDsgX3IgPCByYWRpb1ZhbHVlRWxlcy5sZW5ndGg7IF9yKyspIHtcclxuICAgICAgICAgICAgICAgICAgICByYWRpb1ZhbHVlRWxlc1tfcl0uY2hlY2tlZCA9ICQodGhpcykuaXMoXCI6Y2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v54K55Ye75Y2V6YCJ5oyJ6ZKu5pe277yMXHJcbiAgICAgICAgJChkb2N1bWVudCkuZGVsZWdhdGUocmFkaW9DaGVja3MsIFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKGFsbENoZWNrKVswXS5jaGVja2VkID0gJChyYWRpb0NoZWNrcyArIFwiOmNoZWNrZWRcIikubGVuZ3RoID09ICQocmFkaW9DaGVja3MpLmxlbmd0aDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgdXJsID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZ2V0ID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoXCIoXnwmKVwiICsgbmFtZSArIFwiPShbXiZdKikoJnwkKVwiLCBcImlcIik7XHJcbiAgICAgICAgICAgIHZhciByID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSkubWF0Y2gocmVnKTtcclxuICAgICAgICAgICAgaWYgKHIgIT0gbnVsbCkgcmV0dXJuIGRlY29kZVVSSShyWzJdKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmoLnmja7lj4LmlbDliJfooajplb/luqbov5vooYzliKTmlq3vvIzlhbzlrrlJRTlcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxICYmIHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdvYmplY3QnKSB7Ly/kuIDkuKrlr7nosaHvvIzkvb/nlKhrZXnmoIforrB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IGFyZ3VtZW50c1swXVxyXG4gICAgICAgICAgICAgICAgICAgICwgc2VhcmNoID0gbG9jYXRpb24uc2VhcmNoO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbyBpbiBvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KG8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaCA9IGNoYW5nZVVSTEtleVZhbHVlKHNlYXJjaCwgbywgb2JqW29dKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJ3B1c2hTdGF0ZScgaW4gaGlzdG9yeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsIGRvY3VtZW50LnRpdGxlLCBzZWFyY2gpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgncHVzaFN0YXRlJyBpbiBIaXN0b3J5KSB7Ly9pZTkg5LiN5pSv5oyBcHVzaFN0YXRl5pa55rOVLGphdmFzY3JpcHQuZWpz5Lit5re75YqgaGlzdG9yeS5qc+WujOaIkGh0bWw05a+5cHVzaFN0YXRl55qE5pSv5oyBXHJcbiAgICAgICAgICAgICAgICAgICAgSGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgc2VhcmNoKTsvL+i/lOWbnumHjeaWsOaehOmAoOWQjnNlYXJjaOS4slxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHsvL2tleSt2YWx1ZVxyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGFyZ3VtZW50c1swXVxyXG4gICAgICAgICAgICAgICAgICAgICwgdmFsdWUgPSBhcmd1bWVudHNbMV07XHJcbiAgICAgICAgICAgICAgICBpZiAoJ3B1c2hTdGF0ZScgaW4gaGlzdG9yeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsIGRvY3VtZW50LnRpdGxlLCBjaGFuZ2VVUkxLZXlWYWx1ZShsb2NhdGlvbi50b1N0cmluZygpLCBrZXksIHZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCdwdXNoU3RhdGUnIGluIEhpc3RvcnkpIHsvL2llOSDkuI3mlK/mjIFwdXNoU3RhdGXmlrnms5UsamF2YXNjcmlwdC5lanPkuK3mt7vliqBoaXN0b3J5Lmpz5a6M5oiQaHRtbDTlr7lwdXNoU3RhdGXnmoTmlK/mjIFcclxuICAgICAgICAgICAgICAgICAgICBIaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCBjaGFuZ2VVUkxLZXlWYWx1ZShsb2NhdGlvbi5zZWFyY2gsIGtleSwgdmFsdWUpKTsvL+i/lOWbnumHjeaWsOaehOmAoOWQjnNlYXJjaOS4slxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoYW5nZVVSTEtleVZhbHVlKHVybCwgYXJnLCBhcmdfdmFsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGF0dGVybiA9IGFyZyArICc9KFteJl0qKSc7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVwbGFjZVRleHQgPSBhcmcgKyAnPScgKyBhcmdfdmFsO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVybC5tYXRjaChwYXR0ZXJuKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSAnLygnICsgYXJnICsgJz0pKFteJl0qKS9naSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wID0gdXJsLnJlcGxhY2UoZXZhbCh0bXApLCByZXBsYWNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRtcDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVybC5tYXRjaCgnW1xcP10nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXJsICsgJyYnICsgcmVwbGFjZVRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVybCArICc/JyArIHJlcGxhY2VUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZ2V0OiBnZXRcclxuICAgICAgICAgICAgLCBzZXQ6IHNldFxyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcblxyXG4gICAgdmFyIGZvcm1hdEltYWdlPWZ1bmN0aW9uIChwYXRoLCBzaXplLCBlbGUpIHtcclxuICAgICAgICBpZihwYXRoIGluc3RhbmNlb2YgIEFycmF5ICYmIHBhdGgubGVuZ3RoPjApe1xyXG4gICAgICAgICAgICBwYXRoID0gcGF0aFswXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIElNQUdFX1NJWkUgPSB7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsOiB7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogXCJcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB4bGFyZ2U6IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiX3hsYXJnZVwiLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogXCI2NjAqNjYwXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGFyZ2U6IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiX2xhcmdlXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjQyMCo0MjBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtaWRkbGU6IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiX21pZGRsZVwiLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogXCIzMDAqMzAwXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc21hbGw6IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiX3NtYWxsXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjI0MCoyNDBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaXR0bGU6IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiX2xpdHRsZVwiLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogXCIxMjAqMTIwXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWljcm86IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiX21pY3JvXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjYwKjYwXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2l6ZSA9IElNQUdFX1NJWkVbc2l6ZSB8fCBcIm1pZGRsZVwiXSB8fCBJTUFHRV9TSVpFLm1pZGRsZTtcclxuICAgICAgICB2YXIgcGF0aFRlbXAgPSAvXFwuXFx3Kz8kLy5leGVjKHBhdGgpO1xyXG4gICAgICAgIGlmICghcGF0aFRlbXApIHtcclxuICAgICAgICAgICAgcGF0aCArPSBzaXplLnBhdGg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGF0aCA9IChwYXRoLnN1YnN0cigwLCBwYXRoVGVtcC5pbmRleCB8fCBwYXRoLmxlbmd0aCkpICsgc2l6ZS5wYXRoICsgcGF0aFRlbXBbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbGUgJiYgZWxlLmF0dHIpIHtcclxuICAgICAgICAgICAgZWxlLmF0dHIoXCJzcmNcIiwgcGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwYXRoO1xyXG4gICAgfTtcclxuICAgIC8v6YeR6aKd5qC85byP5YyW5bCP5pWw54K5MuS9jVxyXG4gICAgdmFyIGZvcm1hdCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZvcm1hdGFtb3VudCA9IGZ1bmN0aW9uKF92YWx1ZSl7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KF92YWx1ZSkudG9GaXhlZCgyKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8v5L2T56ev5qC85byP5YyW5bCP5pWw54K5MuS9jVxyXG4gICAgICAgIHZhciBmb3JtYXR2b2x1bWUgPSBmdW5jdGlvbihfdmFsdWUpe1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChfdmFsdWUpLnRvRml4ZWQoMyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL+mHjemHj+agvOW8j+WMluWwj+aVsOeCuTLkvY1cclxuICAgICAgICB2YXIgZm9ybWF0d2VpZ2h0ID0gZnVuY3Rpb24oX3ZhbHVlKXtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoX3ZhbHVlKS50b0ZpeGVkKDMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZm9ybWF0YW1vdW50OiBmb3JtYXRhbW91bnRcclxuICAgICAgICAgICAgLCBmb3JtYXR2b2x1bWU6IGZvcm1hdHZvbHVtZVxyXG4gICAgICAgICAgICAsIGZvcm1hdHdlaWdodDogZm9ybWF0d2VpZ2h0XHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYWpheDogYWpheFxyXG4gICAgICAgICwgZ2V0VGltdG91dDogX3RpbWVPdXRcclxuICAgICAgICAsIHNldENoZWNrYm94TGlzdGVuZXI6IHNldENoZWNrYm94TGlzdGVuZXJcclxuICAgICAgICAsIHVybDogdXJsXHJcbiAgICAgICAgLCBmb3JtYXRJbWFnZTogZm9ybWF0SW1hZ2VcclxuICAgICAgICAsIGZvcm1hdDogZm9ybWF0XHJcbiAgICB9XHJcbn0oKSk7XHJcblxyXG5leHBvcnRzLmFqYXggPSBGdW4uYWpheDtcclxuZXhwb3J0cy5nZXRUaW1lb3V0ID0gRnVuLmdldFRpbXRvdXQ7XHJcbmV4cG9ydHMuc2V0Q2hlY2tib3hMaXN0ZW5lciA9IEZ1bi5zZXRDaGVja2JveExpc3RlbmVyO1xyXG5leHBvcnRzLnVybCA9IEZ1bi51cmw7XHJcbmV4cG9ydHMuZm9ybWF0SW1hZ2UgPSBGdW4uZm9ybWF0SW1hZ2U7XHJcbmV4cG9ydHMuZm9ybWF0ID0gRnVuLmZvcm1hdDtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTcvMS8yMy5cclxuICovXHJcbid1c2Ugc3RyaWN0JztcclxudmFyIE1vZGFsID0gcmVxdWlyZSgnLi9tb2RhbCcpO1xyXG52YXIgZ2VuZXJhbCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgcnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v5pe26Ze05qC85byP5YyWXHJcbiAgICAgICAgRGF0ZS5wcm90b3R5cGUuRm9ybWF0ID0gZnVuY3Rpb24gKGZtdCkgeyAvL2F1dGhvcjogSmVyZW15eXlcclxuICAgICAgICAgICAgdmFyIG8gPSB7XHJcbiAgICAgICAgICAgICAgICBcIk0rXCI6IHRoaXMuZ2V0TW9udGgoKSArIDEsIC8v5pyI5Lu9XHJcbiAgICAgICAgICAgICAgICBcImQrXCI6IHRoaXMuZ2V0RGF0ZSgpLCAvL+aXpVxyXG4gICAgICAgICAgICAgICAgXCJoK1wiOiB0aGlzLmdldEhvdXJzKCksIC8v5bCP5pe2XHJcbiAgICAgICAgICAgICAgICBcIm0rXCI6IHRoaXMuZ2V0TWludXRlcygpLCAvL+WIhlxyXG4gICAgICAgICAgICAgICAgXCJzK1wiOiB0aGlzLmdldFNlY29uZHMoKSwgLy/np5JcclxuICAgICAgICAgICAgICAgIFwicStcIjogTWF0aC5mbG9vcigodGhpcy5nZXRNb250aCgpICsgMykgLyAzKSwgLy/lraPluqZcclxuICAgICAgICAgICAgICAgIFwiU1wiOiB0aGlzLmdldE1pbGxpc2Vjb25kcygpIC8v5q+r56eSXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmICgvKHkrKS8udGVzdChmbXQpKSBmbXQgPSBmbXQucmVwbGFjZShSZWdFeHAuJDEsICh0aGlzLmdldEZ1bGxZZWFyKCkgKyBcIlwiKS5zdWJzdHIoNCAtIFJlZ0V4cC4kMS5sZW5ndGgpKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBvKVxyXG4gICAgICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoXCIoXCIgKyBrICsgXCIpXCIpLnRlc3QoZm10KSkgZm10ID0gZm10LnJlcGxhY2UoUmVnRXhwLiQxLCAoUmVnRXhwLiQxLmxlbmd0aCA9PSAxKSA/IChvW2tdKSA6ICgoXCIwMFwiICsgb1trXSkuc3Vic3RyKChcIlwiICsgb1trXSkubGVuZ3RoKSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gZm10O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8v5L+u5pS55a+G56CBXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNjaGFuZ2UtcHdkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuY2hhbmdlLWJhY2snKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAkKCcuY2hhbmdlLXB3ZCcpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/lhbPpl63kv67mlLnlr4bnoIFcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmNsb3NlLXB3ZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnLmNoYW5nZS1iYWNrJykuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgJCgnLmNoYW5nZS1wd2QnKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjZW5zdXJlLXB3ZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQoJyNuZXctcGFzc3dvcmQnKS52YWwoKSAhPSAkKCcjZW5zdXJlLXBhc3N3b3JkJykudmFsKCkpIHtcclxuICAgICAgICAgICAgICAgICQoJyNlbnN1cmUtcGFzc3dvcmQnKS5hZGRDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnI2Vuc3VyZS1wYXNzd29yZCcpLnJlbW92ZUNsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBcImFnZW50TWVtYmVySWRcIjogMCxcclxuICAgICAgICAgICAgICAgICAgICBcIm9sZFB3ZFwiOiAkKCcjcGFzc3dvcmQnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcInB3ZFwiOiAkKCcjbmV3LXBhc3N3b3JkJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJwd2RDb25maXJtXCI6ICQoJyNlbnN1cmUtcGFzc3dvcmQnKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS9hY2NvdW50L2NoYW5nZVB3ZCdcclxuICAgICAgICAgICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+S/ruaUueaIkOWKn++8gScsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuY2hhbmdlLWJhY2snKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jaGFuZ2UtcHdkJykuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+S/ruaUueWksei0pe+8jOivt+mHjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJ1bjogcnVuXHJcbiAgICB9XHJcbn0oKSk7XHJcbm1vZHVsZS5leHBvcnRzLmdlbmVyYWwgPSBnZW5lcmFsOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHpyeiBvbiAyMDE2LzIvMjQuXHJcbiAqIEB2ZXJzaW9uIDEuMC4wIGNyZWF0ZWRcclxuICovXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG4vL+aehOmAoOS/oeaBr+ahhuS4u+S9k1xyXG52YXIgTW9kYWwgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgLy/mnoTpgKDljp/lp4vnsbtcclxuICAgIGZ1bmN0aW9uIE0obSkge1xyXG4gICAgICAgIHRoaXMucyA9IG0uczsvL+aYr+WQpuaYvuekulxyXG4gICAgICAgIHRoaXMuaWQgPSBtLmlkO1xyXG4gICAgfVxyXG5cclxuICAgIC8v5p6E6YCg5qCH5YeGc2hvd+aWueazle+8jOeUqOS6jue7p+aJv1xyXG4gICAgTS5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pZCk7XHJcbiAgICAgICAgaWYgKGVsZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zICYmICFpc1Nob3coKSkgey8v5pi+56S65b2T5YmN6ZqQ6JePXHJcbiAgICAgICAgICAgICAgICBlbGUuY2xhc3NOYW1lID0gZWxlLmNsYXNzTmFtZS5yZXBsYWNlKFwiZHAtblwiLCBcIlwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5zICYmIGlzU2hvdygpKSB7Ly/pmpDol4/lvZPliY3mmL7npLpcclxuICAgICAgICAgICAgICAgIGVsZS5jbGFzc05hbWUgKz0gXCIgZHAtblwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5Y676Zmk5Lik6L6555qE56m65qC8XHJcbiAgICAgICAgICAgIGVsZS5jbGFzc05hbWUgPSBTdHJpbmcoZWxlLmNsYXNzTmFtZSkudHJpbSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBpc1Nob3coKSB7Ly/mmK/lkKblt7LmmL7npLrvvIzml6BjbGFzc+aXtuaYvuekulxyXG4gICAgICAgICAgICByZXR1cm4gZWxlLmNsYXNzTmFtZS5zcGxpdChcImRwLW5cIikubGVuZ3RoID09IDE7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvL+WKoOi9veS/oeaBr+ahhlxyXG4gICAgdmFyIGxvYWRpbmcgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v5Yid5aeL5YyW55Sf5oiQ5Yqg6L295L+h5oGv5qGGXHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2FkaW5nX21vZGFsX2VsZW1lbnRcIikpIHtcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJsb2FkaW5nX21vZGFsX2VsZW1lbnRcIiBjbGFzcz1cImxvYWRpbmctbW9kYWwtYm9keSBkcC1uXCI+PGRpdiBjbGFzcz1cImNvdmVyX21vZGFsX2VsZW1lbnRcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImxvYWRpbmctbW9kYWwtaW1hZ2VcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImxvYWRpbmctbW9kYWwtdGV4dFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8aDI+546p5ZG95Yqg6L295Lit4oCm4oCmPC9oMj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy/mmL7npLrjgIHpmpDol4/kv6Hmga/moYZcclxuICAgICAgICB2YXIgc2hvdyA9IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgIHMgPSB0eXBlb2YgcyA9PSBcInVuZGVmaW5lZFwiID8gdHJ1ZSA6IHM7Ly/ml6Dlj4LmlbDmmL7npLrkv6Hmga/moYZcclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgTSh7aWQ6IFwibG9hZGluZ19tb2RhbF9lbGVtZW50XCIsIHM6IHN9KTtcclxuICAgICAgICAgICAgbS5zaG93KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbml0OiBpbml0XHJcbiAgICAgICAgICAgICwgc2hvdzogc2hvd1xyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICAvL+W8ueWHuuS/oeaBr+ahhlxyXG4gICAgdmFyIGFsZXJ0ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsZXJ0X21vZGFsX2VsZW1lbnRcIikpIHtcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJhbGVydF9tb2RhbF9lbGVtZW50XCIgY2xhc3M9XCJhbGVydC1tb2RhbC1lbGVtZW50IGRwLW5cIj48ZGl2IGNsYXNzPVwiY292ZXJfbW9kYWxfZWxlbWVudFwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxlcnQtbW9kYWwtY29udGVudFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxlcnQtbW9kYWwtYm9keVwiPjxzcGFuIGNsYXNzPVwiYWxlcnQtbW9kYWwtdGV4dFwiPjwvc3Bhbj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsZXJ0LW1vZGFsLWZvb3RlclwiPjxidXR0b24gaWQ9XCJhbGVydF9tb2RhbF9jbG9zZVwiIGNsYXNzPVwiYWxlcnQtbW9kYWwtYnV0dG9uXCI+5YWz6ZetPC9idXR0b24+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzaG93ID0gZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICAgICAgcyA9IHR5cGVvZiBzID09IFwidW5kZWZpbmVkXCIgPyB0cnVlIDogcztcclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgTSh7aWQ6IFwiYWxlcnRfbW9kYWxfZWxlbWVudFwiLCBzOiBzfSk7XHJcbiAgICAgICAgICAgIG0uc2hvdygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6K6+572u5by55Ye65L+h5oGv5qGGXHJcbiAgICAgICAgICogQHBhcmFtIG1zZyAgICAgICDmmL7npLrnmoTkv6Hmga/vvIzmlK/mjIFodG1sXHJcbiAgICAgICAgICogQHBhcmFtIHNlZCAgICAgICDlgJLorqHml7blhbPpl63ml7bpl7TvvIzljZXkvY3vvJpzZWNvbmRcclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sgIOWFs+mXreinpuWPkeWbnuiwg+WHveaVsFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBzZXQgPSBmdW5jdGlvbiAobXNnLCBzZWQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsZXJ0X21vZGFsX2VsZW1lbnRcIik7XHJcbiAgICAgICAgICAgIGlmIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbXNnID09PSAnb2JqZWN0Jykgey8v5bqU5a+55ZCO56uv6L+U5Zue5o+Q56S65pe25L2/55SoT2JqZWN05bCB6KOFXHJcbiAgICAgICAgICAgICAgICAgICAgbXNnID0gSlNPTi5zdHJpbmdpZnkobXNnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGVsZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJhbGVydC1tb2RhbC10ZXh0XCIpWzBdLmlubmVySFRNTCA9IG1zZztcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImFsZXJ0LW1vZGFsLXRleHRcIilbMF0uaW5uZXJIVE1MID0gbXNnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzZWQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0sIDEwMDAgKiBzZWQpO1xyXG4gICAgICAgICAgICB9Ly/ml6DlhbPpl63ml7bpl7TmiJbogIXlhbPpl63ml7bpl7TkuLow77yM5LiN6Ieq5Yqo5YWz6ZetXHJcbiAgICAgICAgICAgIC8vZml4bWUg5LqL5Lu255uR5ZCs55qEaWXlhbzlrrnmgKdcclxuICAgICAgICAgICAgLy/lhbPpl63mjInpkq7nmoTkuovku7bkvqblkKxcclxuICAgICAgICAgICAgJChcIiNhbGVydF9tb2RhbF9jbG9zZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNob3coZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgLy/pmLvmraLkuovku7bnu6fnu63kvKDpgJJcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbml0OiBpbml0XHJcbiAgICAgICAgICAgICwgc2hvdzogc2hvd1xyXG4gICAgICAgICAgICAsIHNldDogc2V0XHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuICAgIC8v6YCJ5oup5L+h5oGv5qGGXHJcbiAgICB2YXIgY29uZmlybSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maXJtX21vZGFsX2VsZW1lbnRcIikpIHtcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJjb25maXJtX21vZGFsX2VsZW1lbnRcIiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtZWxlbWVudCBkcC1uXCI+PGRpdiBjbGFzcz1cImNvdmVyX21vZGFsX2VsZW1lbnRcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtY29udGVudFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGlkPVwiY29uZmlybV9tb2RhbF9oZWFkZXJcIiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtaGVhZGVyIGRwLW5cIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtYm9keVwiPjxzcGFuIGlkPVwiY29uZmlybV9tb2RhbF90ZXh0XCIgY2xhc3M9XCJjb25maXJtLW1vZGFsLXRleHRcIj48L3NwYW4+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb25maXJtLW1vZGFsLWZvb3RlclwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZm9vdGVyLWJ1dHRvbi1zdWNjZXNzXCI+PGJ1dHRvbiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtYnV0dG9uICBtb2RhbC1zdWNjZXNzXCIgZGF0YS1jb25maXJtPVwic3VjY2Vzc1wiPuehruiupDwvYnV0dG9uPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZm9vdGVyLWJ1dHRvbi1mYWxzZVwiPjxidXR0b24gY2xhc3M9XCJjb25maXJtLW1vZGFsLWJ1dHRvblwiIGRhdGEtY29uZmlybT1cImVycm9yXCI+5Y+W5raIPC9idXR0b24+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzaG93ID0gZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICAgICAgcyA9IHR5cGVvZiBzID09IFwidW5kZWZpbmVkXCIgPyB0cnVlIDogcztcclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgTSh7aWQ6IFwiY29uZmlybV9tb2RhbF9lbGVtZW50XCIsIHM6IHN9KTtcclxuICAgICAgICAgICAgbS5zaG93KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDorr7nva7pgInmi6nkv6Hmga/moYbnmoTlhoXlrrlcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9uICAgIOmFjee9rlxyXG4gICAgICAgICAqIHtcclxuICAgICAgICAgKiAgICAgIHRpdGxlOlwi5aS06YOo5pi+56S655qE5L+h5oGvXCJcclxuICAgICAgICAgKiAgICAgICx0ZXh0Olwi5pi+56S655qE5o+Q56S65L+h5oGvXCJcclxuICAgICAgICAgKiAgICAgICxzdWNjZXNzOlwi54K55Ye75oiQ5Yqf5ZCO55qE5Zue6LCDXCJcclxuICAgICAgICAgKiAgICAgICxlcnJvcjpcIueCueWHu+Wksei0peWQjueahOWbnuiwg1wiXHJcbiAgICAgICAgICogICAgICAsY29tcGxldGU6XCLngrnlh7vmjInpkq7lkI7nmoTmlbTkvZPlm57osINcIlxyXG4gICAgICAgICAqIH1cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgYmFyID0gMDtcclxuICAgICAgICB2YXIgc2V0ID0gZnVuY3Rpb24gKG9wdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoIW9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChcInRpdGxlXCIgaW4gb3B0aW9uICYmIG9wdGlvbi50aXRsZS5sZW5ndGggPiAwKSB7Ly/mnInlpLTpg6jvvIzliJnmmL7npLrlpLTpg6hcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlybV9tb2RhbF9oZWFkZXJcIikuaW5uZXJIVE1MID0gb3B0aW9uLnRpdGxlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChcInRleHRcIiBpbiBvcHRpb24gJiYgb3B0aW9uLnRleHQubGVuZ3RoID4gMCkgey8v5pyJ5YaF5a6577yM5YiZ5pi+56S65pW05Liq6YCJ5oup5L+h5oGv5qGGXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbmZpcm1fbW9kYWxfdGV4dFwiKS5pbm5lckhUTUwgPSBvcHRpb24udGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2ZpeG1lIOS6i+S7tuebkeWQrOeahGll5YW85a655oCnXHJcbiAgICAgICAgICAgIC8v5YWz6Zet5oyJ6ZKu55qE5LqL5Lu25L6m5ZCsXHJcbiAgICAgICAgICAgICQoXCIjY29uZmlybV9tb2RhbF9lbGVtZW50XCIpLmZpbmQoXCIuY29uZmlybS1tb2RhbC1idXR0b25cIikub2ZmKFwiY2xpY2tcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvL2ZpeG1lIC5vZmYoXCJjbGlja1wiKeeUqOS6jumYsuatouWkmuasoeinpuWPkTwtLeW+iOeOhOWtpu+8jOaIkeS5n+S4jeefpemBk+S4uuS7gOS5iO+8jOS9huaYr+ivt+S4jeimgeS/ruaUueOAglxyXG4gICAgICAgICAgICAgICAgdmFyIGF0ciA9ICQodGhpcykuYXR0cihcImRhdGEtY29uZmlybVwiKTsvL+mAieaLqeeahOaMiemSrlxyXG4gICAgICAgICAgICAgICAgYmFyKys7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uICYmIGF0ciBpbiBvcHRpb24gJiYgb3B0aW9uW2F0cl0gaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvblthdHJdKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uICYmIFwiY29tcGxldGVcIiBpbiBvcHRpb24gJiYgb3B0aW9uLmNvbXBsZXRlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24uY29tcGxldGUoKTsvL+iLpeacieWujOaIkOWHveaVsO+8jOWImeaJp+ihjFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsvL+WQpuWIme+8jOWFs+mXremAieaLqeahhlxyXG4gICAgICAgICAgICAgICAgICAgIHNob3coZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy/pmLvmraLkuovku7bnu6fnu63kvKDpgJJcclxuICAgICAgICAgICAgICAgIC8vcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluaXQ6IGluaXRcclxuICAgICAgICAgICAgLCBzaG93OiBzaG93XHJcbiAgICAgICAgICAgICwgc2V0OiBzZXRcclxuICAgICAgICB9XHJcbiAgICB9KCkpO1xyXG4gICAgLy/opobnm5blsYJcclxuICAgIHZhciBjb3ZlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb3Zlcl9tb2RhbF9lbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwiY292ZXJfbW9kYWxfZWxlbWVudFwiIGNsYXNzPVwiY292ZXItbW9kYWwtZWxlbWVudCBkcC1uXCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGhpZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY292ZXJfbW9kYWxfZWxlbWVudFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb3Zlcl9tb2RhbF9lbGVtZW50XCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbml0OiBpbml0XHJcbiAgICAgICAgICAgICwgc2hvdzogc2hvd1xyXG4gICAgICAgICAgICAsIGhpZGU6IGhpZGVcclxuICAgICAgICB9XHJcbiAgICB9KCkpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpbml0TG9hZGluZzogbG9hZGluZy5pbml0XHJcbiAgICAgICAgLCBzaG93TG9hZGluZzogbG9hZGluZy5zaG93XHJcblxyXG4gICAgICAgICwgaW5pdEFsZXJ0OiBhbGVydC5pbml0XHJcbiAgICAgICAgLCBzaG93QWxlcnQ6IGFsZXJ0LnNob3dcclxuICAgICAgICAsIHNldEFsZXJ0OiBhbGVydC5zZXRcclxuXHJcbiAgICAgICAgLCBpbml0Q29uZmlybTogY29uZmlybS5pbml0XHJcbiAgICAgICAgLCBzZXRDb25maXJtOiBjb25maXJtLnNldFxyXG4gICAgICAgICwgc2hvd0NvbmZpcm06IGNvbmZpcm0uc2hvd1xyXG4gICAgICAgICwgaW5pdENvdmVyOiBjb3Zlci5pbml0XHJcbiAgICB9XHJcbn0oKSk7XHJcblxyXG4vL+mhtemdouWKoOi9veWujOavleWQjueUn+aIkOWbm+S4quiHquWumuS5ieaooeaAgeahhlxyXG5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgIC8v6aG16Z2i5Yqg6L295pe255Sf5oiQ5LiA5Liq6KaG55uW5bGCXHJcbiAgICBNb2RhbC5pbml0Q292ZXIoKTtcclxuICAgIC8v6aG16Z2i5Yqg6L295pe255Sf5oiQ5LiA5Liq5Yqg6L295L+h5oGv5qGGXHJcbiAgICBNb2RhbC5pbml0TG9hZGluZygpO1xyXG4gICAgLy/pobXpnaLliqDovb3ml7bnlJ/miJDkuIDkuKrlvLnlh7rkv6Hmga/moYZcclxuICAgIE1vZGFsLmluaXRBbGVydCgpO1xyXG4gICAgLy/pobXpnaLliqDovb3ml7bnlJ/miJDkuIDkuKrpgInmi6nkv6Hmga/moYZcclxuICAgIE1vZGFsLmluaXRDb25maXJtKCk7XHJcbn0sIDEwMCk7XHJcblxyXG5cclxuLy/mipvlh7rkuIrlsYLosIPnlKhcclxuZXhwb3J0cy5zaG93TG9hZGluZyA9IE1vZGFsLnNob3dMb2FkaW5nO1xyXG5leHBvcnRzLnNldEFsZXJ0ID0gTW9kYWwuc2V0QWxlcnQ7XHJcbmV4cG9ydHMuc2hvd0FsZXJ0ID0gTW9kYWwuc2hvd0FsZXJ0O1xyXG5leHBvcnRzLnNldENvbmZpcm0gPSBNb2RhbC5zZXRDb25maXJtO1xyXG5leHBvcnRzLnNob3dDb25maXJtID0gTW9kYWwuc2hvd0NvbmZpcm07IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQXVzZXIgb24gMjAxNi8xMi82LlxyXG4gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBEYXRhID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBsaXN0ID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci9wZW5kaW5nL2xpc3QnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGxvZyA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvcGVuZGluZy9sb2cnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGdldE5hbWUgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL2FpcmxpbmUvbWFuYWdlL2dldE5hbWUnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGdldENvZGUgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL2FpcmxpbmUvbWFuYWdlL2dldENvZGUnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHN0b3JhZ2UgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL3BlbmRpbmcvc3RvcmFnZSdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgYWRkRGF0YSA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvcGVuZGluZy9hZGREYXRhJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBlbnN1cmVEYXRhID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci9wZW5kaW5nL2Vuc3VyZURhdGEnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGJnVXBkYXRlID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci9wZW5kaW5nL2JnVXBkYXRlJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciB3YXJlaG91c2UgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL3dhcmVob3VzZS9saXN0J1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHByaWNlTGlzdCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvYWlybGluZS9wcmljZS9saXN0J1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGNhbGN1bGF0ZSA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvcGVuZGluZy9jYWxjdWxhdGUnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHNlYXJjaCA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvcGVuZGluZy9haXJsaW5lU2VhcmNoJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBvcmRlciA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvcGVuZGluZy9vcmRlcidcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgY3VzdG9tZXIgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL3BlbmRpbmcvY3VzdG9tZXInXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGNhbmNlbCA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvb3JkZXIvcGVuZGluZy9jYW5jZWwnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGNvbmZpcm0gPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL3BlbmRpbmcvY29uZmlybSdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgY3JlYXRlQ2hhcmdlID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9vcmRlci9kb25lL2NyZWF0ZUNoYXJnZSdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgeWRTZWFyY2ggPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL3BlbmRpbmcveWRTZWFyY2gnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHlkRXhpc3QgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL3BlbmRpbmcveWRFeGlzdCdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgeWROZXcgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL29yZGVyL3BlbmRpbmcveWROZXcnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHRyYW5zZmVyID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9zdGFmZi9saXN0L3RyYW5zZmVyJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBvcExpc3QgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL3N0YWZmL2xpc3Qvb3BMaXN0J1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBsaXN0OiBsaXN0XHJcbiAgICAgICAgLCBnZXROYW1lOiBnZXROYW1lXHJcbiAgICAgICAgLCBnZXRDb2RlOiBnZXRDb2RlXHJcbiAgICAgICAgLCBzdG9yYWdlOiBzdG9yYWdlXHJcbiAgICAgICAgLCBhZGREYXRhOiBhZGREYXRhXHJcbiAgICAgICAgLCBlbnN1cmVEYXRhOiBlbnN1cmVEYXRhXHJcbiAgICAgICAgLCBiZ1VwZGF0ZTogYmdVcGRhdGVcclxuICAgICAgICAsIHdhcmVob3VzZTogd2FyZWhvdXNlXHJcbiAgICAgICAgLCBwcmljZUxpc3Q6IHByaWNlTGlzdFxyXG4gICAgICAgICwgY2FsY3VsYXRlOiBjYWxjdWxhdGVcclxuICAgICAgICAsIHNlYXJjaDogc2VhcmNoXHJcbiAgICAgICAgLCBvcmRlcjogb3JkZXJcclxuICAgICAgICAsIGN1c3RvbWVyOiBjdXN0b21lclxyXG4gICAgICAgICwgY2FuY2VsOiBjYW5jZWxcclxuICAgICAgICAsIGNyZWF0ZUNoYXJnZTogY3JlYXRlQ2hhcmdlXHJcbiAgICAgICAgLCBjb25maXJtOiBjb25maXJtXHJcbiAgICAgICAgLCB5ZFNlYXJjaDogeWRTZWFyY2hcclxuICAgICAgICAsIHlkRXhpc3Q6IHlkRXhpc3RcclxuICAgICAgICAsIHlkTmV3OiB5ZE5ld1xyXG4gICAgICAgICwgb3BMaXN0OiBvcExpc3RcclxuICAgICAgICAsIHRyYW5zZmVyOiB0cmFuc2ZlclxyXG4gICAgICAgICwgbG9nOiBsb2dcclxuICAgIH1cclxufSgpKTtcclxubW9kdWxlLmV4cG9ydHMuRGF0YSA9IERhdGE7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTcvMi82LlxyXG4gKi9cclxuJ3VzZSBzdHJpY3QnO1xyXG52YXIgbXlmb3JtYXQgPSByZXF1aXJlKCcuLi8uLi9nZW5lcmFsL2Z1bmN0aW9uJykuZm9ybWF0O1xyXG52YXIgRG9tID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBsaXN0ID0gZnVuY3Rpb24gKGpzb24sIHBhcmFtKSB7XHJcbiAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgIHN0ciArPSAnPHRoZWFkPiA8dHI+IDx0ZD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJjaGVjay1hbGxcIj48L3RkPjx0ZD7orqLljZXlj7c8L3RkPiA8dGQgY29sc3Bhbj1cIjJcIj7orqLljZXkv6Hmga88L3RkPiA8dGQgY29sc3Bhbj1cIjRcIj7oiKrnur/kv6Hmga88L3RkPiA8dGQgY29sc3Bhbj1cIjVcIj7otKfniankv6Hmga88L3RkPiA8dGQgY29sc3Bhbj1cIjJcIj7ku7fmoLzvvIhDTlnvvIk8L3RkPiA8L3RyPiA8L3RoZWFkPic7XHJcbiAgICAgICAgaWYgKGpzb24gJiYganNvbi5yZXNDb2RlID09IDAgJiYgJ3Jlc0JvZHknIGluIGpzb24gJiYganNvbi5yZXNCb2R5ICYmICdzTGlzdCcgaW4ganNvbi5yZXNCb2R5ICYmIGpzb24ucmVzQm9keS5zTGlzdCBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIGlmIChqc29uLnJlc0JvZHkuc0xpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IGpzb24ucmVzQm9keS5zTGlzdDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGEgaW4gYXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyci5oYXNPd25Qcm9wZXJ0eShhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gcmVuZGVyKGFyclthXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJC5idXJzdGVyKCQoXCIub3V0ZXItcGFnZVwiKSwgcGFyYW0ub2Zmc2V0IHx8IDAsIGpzb24ucmVzQm9keS50b3RhbENvdW50IHx8IDAsIDUsIHBhcmFtLmxpbWl0IHx8IDIwKTtcclxuICAgICAgICAgICAgICAgICQoJy5saXN0LWNvdXQnKS5odG1sKCflhbHkuLrmgqjmib7liLAgJyArIGpzb24ucmVzQm9keS50b3RhbENvdW50ICsgJyDmnaHnu5PmnpwnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN0ciA9ICc8dHIgY2xhc3M9XCJ3cm9uZ1wiPjx0ZCBjb2xzcGFuPVwiMTRcIj7mmoLml6DorqLljZXkv6Hmga/vvIzor7fmt7vliqDvvIE8L3RkPjwvdHI+JztcclxuICAgICAgICAgICAgICAgICQoJy5vdXRlci1wYWdlJykuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubGlzdC1jb3V0JykuaHRtbCgn5YWx5Li65oKo5om+5YiwIDAg5p2h57uT5p6cJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdHIgPSAnPHRyIGNsYXNzPVwid3JvbmdcIj48dGQgY29sc3Bhbj1cIjE0XCI+6K+35rGC5aSx6LSl77yMPGEgaHJlZj1cIlwiPuivt+mHjeivle+8gTwvYT48L3RkPjwvdHI+JztcclxuICAgICAgICAgICAgJCgnLm91dGVyLXBhZ2UnKS5odG1sKCcnKTtcclxuICAgICAgICAgICAgJCgnLmxpc3QtY291dCcpLmh0bWwoJ+WFseS4uuaCqOaJvuWIsCAwIOadoee7k+aenCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiByZW5kZXIoZCkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGQuY29tcGFueSB8fCB7fVxyXG4gICAgICAgICAgICAgICAgLCBvID0gZC5vcmRlciB8fCB7fVxyXG4gICAgICAgICAgICAgICAgLCBtID0gZC5tZW1iZXIgfHwge31cclxuICAgICAgICAgICAgICAgICwgdHlwZTtcclxuICAgICAgICAgICAgc3dpdGNoIChvLm9yZGVyQ2hhbm5lbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAn6Ieq5Yqp6K6i6IixJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ+W/q+mAn+iuouiIsSc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICflkI7lj7DkuIvljZUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAn5ou86LSn6K6i5Y2VJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICfoh6rliqnorqLoiLEnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gJzx0Ym9keT48dHI+PHRkIGNsYXNzPVwic2hvcnQtdGRcIiBjb2xzcGFuPVwiMTRcIj48L3RkPjwvdHI+PC90Ym9keT48dGJvZHkgY2xhc3M9XCJkYXRhLXRiZFwiPiA8dHI+JyArXHJcbiAgICAgICAgICAgICAgICAnIDx0ZCByb3dzcGFuPVwiMlwiIHN0eWxlPVwicGFkZGluZzogMCAxMHB4O1wiPjxpbnB1dCBkYXRhLWlkPVwiJyArIG8ub3JkZXJJZCArICdcIiB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwibGlzdC1zZ1wiPicgK1xyXG4gICAgICAgICAgICAgICAgJzwvdGQ+PHRkIGNsYXNzPVwiJyArIChvLm9yZGVyVHlwZSA9PSAxID8gJ2JnLXAnIDogKG8uYWxsb3dDbGVhcmVuY2UgPyAnYmctcScgOiAnYmcteScpKSArICdcIj4nICsgKG8ub3JkZXJUeXBlID09IDEgPyAn5pyI57uTJyA6ICfnpajnu5MnKSArIChkLmFnZW50ID8gKGQuYWdlbnQubmFtZSA/ICcmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsnICsgZC5hZ2VudC5uYW1lIDogJyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOy8nKSA6ICcmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsvJykgKyAnPC90ZD4nICtcclxuICAgICAgICAgICAgICAgICcgPHRkIGNsYXNzPVwiYmctZ1wiPuWuouaIt+WFrOWPuDwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzx0ZCBjbGFzcz1cImJnLWdcIj7lp5TmiZjml7bpl7Qv5pa55byPPC90ZD4gPHRkIGNsYXNzPVwiYmctZ1wiPui1t+Wni+a4rzwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAnIDx0ZCBjbGFzcz1cImJnLWdcIj7nm67nmoTmuK88L3RkPiA8dGQgY2xhc3M9XCJiZy1nXCI+6Iiq56m65YWs5Y+4PC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAnPHRkIGNsYXNzPVwiYmctZ1wiPui1t+mjnuaXtumXtDwvdGQ+IDx0ZCBjbGFzcz1cImJnLWdcIj7mlbDph4/vvIhQQ1PvvIk8L3RkPiA8dGQgY2xhc3M9XCJiZy1nXCI+6YeN6YeP77yIS0dT77yJPC90ZD4nICtcclxuICAgICAgICAgICAgICAgICcgPHRkIGNsYXNzPVwiYmctZ1wiPuS9k+enr++8iENCTe+8iTwvdGQ+IDx0ZCBjbGFzcz1cImJnLWdcIj7lk4HlkI08L3RkPiA8dGQgY2xhc3M9XCJiZy1nXCI+5Y2V5Lu377yIQ05Z77yJPC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAnPHRkIHJvd3NwYW49XCIyXCIgY2xhc3M9XCJmb250LXJcIj4nICsgby5kZWNsYXJlQ2hhcmdpbmdUb3RhbCArICc8L3RkPiA8dGQgY2xhc3M9XCJvcHQtdGRcIiByb3dzcGFuPVwiMlwiIGRhdGEtamNiaD1cIicgKyBvLndhcmVob3VzZUVudHJ5TnVtICsgJ1wiIGRhdGEta2htYz1cIicgKyAoYy5jb21wYW55TmFtZSB8fCAnLycpICsgJ1wiIGRhdGEtbHhyPVwiJyArIChtLm1lbWJlck5hbWUgfHwgJy8nKSArICdcIj4nICtcclxuICAgICAgICAgICAgICAgICc8YSBjbGFzcz1cInNob3ctb3B0XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj7mk43kvZwgPHNwYW4gY2xhc3M9XCJjYXJldFwiPjwvc3Bhbj48L2E+PGRpdiBjbGFzcz1cIm9wdC1wYXJ0IGRwLW5cIj4nICtcclxuXHJcbiAgICAgICAgICAgICAgICAoby5vcmRlclN0YXRlID09IDAgP1xyXG4gICAgICAgICAgICAgICAgJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJzaG93LWpkXCIgZGF0YS1pZD1cIicgKyBvLm9yZGVySWQgKyAnXCI+56Gu6K6k6K6i5Y2VPC9hPicgK1xyXG4gICAgICAgICAgICAgICAgJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJyZWZ1c2VcIiBkYXRhLWlkPVwiJyArIG8ub3JkZXJJZCArICdcIj7lj5bmtog8L2E+J1xyXG4gICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICc8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwic2hvdy15ZFwiIGRhdGEtaWQ9XCInICsgby5vcmRlcklkICsgJ1wiPuWFs+iBlOi/kOWNlTwvYT4gJyArXHJcbiAgICAgICAgICAgICAgICAnPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBjbGFzcz1cInJlZnVzZVwiIGRhdGEtaWQ9XCInICsgby5vcmRlcklkICsgJ1wiPuWPlua2iDwvYT4nICkgK1xyXG4gICAgICAgICAgICAgICAgJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJzaG93LWxvZ1wiIGRhdGEtaWQ9XCInICsgby5vcmRlcklkICsgJ1wiPuaTjeS9nOaXpeW/lzwvYT4nICtcclxuICAgICAgICAgICAgICAgICc8L2Rpdj48L3RkPiA8L3RyPiAnICtcclxuICAgICAgICAgICAgICAgICc8dHI+IDx0ZD48YSBocmVmPVwiL29yZGVyL2RldGFpbD90cD1wZW5kaW5nJmlkPScgKyBvLm9yZGVySWQgKyAnXCI+JyArIG8ub3JkZXJOdW0gKyAnPC9hPjwvdGQ+PHRkPicgKyAoYy5jb21wYW55TmFtZSB8fCAnLycpICsgJzwvdGQ+IDx0ZD4nICsgbmV3IERhdGUoby5jcmVhdGVEdC5yZXBsYWNlKC8tL2csIFwiL1wiKSkuRm9ybWF0KCd5eXl5LU1NLWRkIGhoOm1tJykgKyAnIDxici8+ICcgKyB0eXBlICsgJzwvdGQ+IDx0ZD4nICsgKG8uZGVwdENvZGUgfHwgJy8nKSArICc8L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgJyA8dGQ+JyArIChvLmRlc3RDb2RlIHx8ICcvJykgKyAnPC90ZD4gPHRkPicgKyAoby5haXJDb21wYW55Q29kZSB8fCAnLycpICsgJzwvdGQ+IDx0ZD4nICsgbmV3IERhdGUoby5mbGlnaHREYXRlLnJlcGxhY2UoLy0vZywgXCIvXCIpKS5Gb3JtYXQoJ3l5eXktTU0tZGQnKSArICc8L3RkPiA8dGQ+JyArIChvWydkZWNsYXJlQ2FyZ28nXS5jYXJnb0NvdW50IHx8ICcvJykgKyAnPC90ZD4gPHRkPicgKyAob1snZGVjbGFyZUNhcmdvJ10uY2FyZ29XZWlnaHQgfHwgJy8nKSArICc8L3RkPiA8dGQ+JyArIChteWZvcm1hdC5mb3JtYXR2b2x1bWUob1snZGVjbGFyZUNhcmdvJ10uY2FyZ29TaXplKSB8fCAnLycpICsgJzwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAnIDx0ZD48ZGl2IGNsYXNzPVwidHdcIiB0aXRsZT1cIicrb1snY2FyZ28nXS5jYXJnb05hbWUrJ1wiPicgKyAob1snZGVjbGFyZUNhcmdvJ10uY2FyZ29OYW1lIHx8ICcvJykgKyAnPC9kaXY+PC90ZD4gPHRkPicgKyBvLmNoYXJnaW5nUHJpY2UgKyAnPC90ZD4gPC90cj4gPC90Ym9keT4nXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnLm91dGVyLXRiJykuaHRtbChzdHIpO1xyXG4gICAgfTtcclxuICAgIHZhciByZW5kZXJUciA9IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgdmFyIG4gPSAwOy8v6K6h566X5piv5ZCm5Lya5Ye6546w5rua5Yqo5p2hXHJcbiAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgIHZhciB0ZnQgPSAnJztcclxuICAgICAgICBpZiAoanNvbiAmJiAnc3RvcmFnZUJhdGNoJyBpbiBqc29uICYmIGpzb24uc3RvcmFnZUJhdGNoIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgdmFyIGxpc3QgPSBqc29uLnN0b3JhZ2VCYXRjaDtcclxuICAgICAgICAgICAgaWYgKGxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbCBpbiBsaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3QuaGFzT3duUHJvcGVydHkobCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBsaXN0W2xdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gcmVuZGVyKGQsIHBhcnNlSW50KGwpICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGZ0ICs9ICc8ZGl2PjwvZGl2PiA8ZGl2IGNsYXNzPVwiYmlnXCI+5oC76K6hPC9kaXY+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2PicgKyBqc29uLnRvdGFsQ291bnQgKyAnPC9kaXY+IDxkaXY+PC9kaXY+IDxkaXY+PC9kaXY+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2PjwvZGl2PiA8ZGl2PicgKyBqc29uLnRvdGFsU2l6ZSArICc8L2Rpdj4gPGRpdj4nICsganNvbi50b3RhbFdlaWdodCArICc8L2Rpdj4gPGRpdj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnIDxkaXY+JyArIGpzb24udG90YWxEYW1hZ2UgKyAnPC9kaXY+IDxkaXY+JyArIGpzb24udG90YWxEYW1wICsgJzwvZGl2PiA8ZGl2PicgKyBqc29uLnRvdGFsVHJhbnNmb3JtICsgJzwvZGl2PiA8ZGl2PicgKyBqc29uLnRvdGFsT3RoZXIgKyAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyA8ZGl2PjwvZGl2Pic7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSAnPGRpdiBjbGFzcz1cIndyb25nXCI+5pqC5peg6L+b5LuT5pWw5o2u77yM6K+35re75Yqg77yBPC9kaXY+JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN0ciA9ICc8ZGl2IGNsYXNzPVwid3JvbmdcIj7or7fmsYLmlbDmja7lh7rplJnvvIzor7fph43or5XvvIE8L2Rpdj4nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobiA+IDYpIHtcclxuICAgICAgICAgICAgJCgnLmVuc3VyZS1kYXRhLXBhcnQnKS5maW5kKCcudGJkJykuY3NzKCdwYWRkaW5nLXJpZ2h0JywgJzNweCcpXHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJy5lbnN1cmUtZGF0YS1wYXJ0JykuZmluZCgnLnRiZCcpLmh0bWwoc3RyKTtcclxuICAgICAgICAkKCcuZW5zdXJlLWRhdGEtcGFydCcpLmZpbmQoJy50ZnQnKS5odG1sKHRmdCk7XHJcbiAgICAgICAgZnVuY3Rpb24gcmVuZGVyKGQsIGluZGV4KSB7XHJcbiAgICAgICAgICAgIG4gKz0gMTtcclxuICAgICAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9XCJ0dHIgZmlsbFwiPiA8ZGl2PicgKyBpbmRleCArICc8L2Rpdj4gPGRpdiBjbGFzcz1cImJpZ1wiPuaJueasoeWwj+iuoTwvZGl2PiAnICtcclxuICAgICAgICAgICAgICAgICc8ZGl2PicgKyBkLmJhdGNoQ291bnQgKyAnPC9kaXY+IDxkaXY+PC9kaXY+IDxkaXY+PC9kaXY+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzxkaXY+PC9kaXY+IDxkaXY+JyArIGQuYmF0Y2hTaXplICsgJzwvZGl2PiA8ZGl2PicgKyBkLmJhdGNoV2VpZ2h0ICsgJzwvZGl2PiA8ZGl2PjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJyA8ZGl2PicgKyBkLmJhdGNoRGFtYWdlICsgJzwvZGl2PiA8ZGl2PicgKyBkLmJhdGNoRGFtcCArICc8L2Rpdj4gPGRpdj4nICsgZC5iYXRjaFRyYW5zZm9ybSArICc8L2Rpdj4gPGRpdj4nICsgZC5iYXRjaE90aGVyICsgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJyA8ZGl2PjwvZGl2PiA8L2Rpdj4nO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIGQuYmF0Y2hMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZC5iYXRjaExpc3QuaGFzT3duUHJvcGVydHkoaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBuICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGR0ID0gZC5iYXRjaExpc3RbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChkdC5wYWNrYWdlVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ+e6uOeusSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICfmnKjnrrEnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAn5Y23JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ+aJmOebmCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAn57q4566xJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9XCJ0dHIgZmlsbFwiPiA8ZGl2PjwvZGl2PiA8ZGl2IGNsYXNzPVwiYmlnXCI+JyArIG5ldyBEYXRlKGR0LnN0b3JhZ2VUaW1lLnJlcGxhY2UoLy0vZywgXCIvXCIpKS5Gb3JtYXQoJ3l5eXktTU0tZGQgaGg6bW0nKSArICc8L2Rpdj4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2PicgKyBkdC5zdG9yYWdlQ291bnQgKyAnPC9kaXY+IDxkaXY+JyArIGR0LnN0b3JhZ2VMZW5ndGggKyAnPC9kaXY+IDxkaXY+JyArIGR0LnN0b3JhZ2VXaWR0aCArICc8L2Rpdj4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2PicgKyBkdC5zdG9yYWdlSGVpZ2h0ICsgJzwvZGl2PiA8ZGl2PicgKyBkdC5zdG9yYWdlU2l6ZSArICc8L2Rpdj4gPGRpdj4nICsgZHQuc3RvcmFnZVdlaWdodCArICc8L2Rpdj4gPGRpdj4nICsgdHlwZSArICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyA8ZGl2PicgKyBkdC5kYW1hZ2VDb3VudCArICc8L2Rpdj4gPGRpdj4nICsgZHQuZGFtcENvdW50ICsgJzwvZGl2PiA8ZGl2PicgKyBkdC50cmFuc2Zvcm1Db3VudCArICc8L2Rpdj4gPGRpdj4nICsgZHQub3RoZXJDb3VudCArICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyA8ZGl2PicgKyBkdC5zdG9yYWdlUmVtYXJrICsgJzwvZGl2PiA8L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzdHI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHZhciBpbm5lckxpc3QgPSBmdW5jdGlvbiAoanNvbiwgcGFyYW0pIHtcclxuICAgICAgICB2YXIgc3RyID0gJyc7XHJcbiAgICAgICAgY29uc29sZS5sb2coanNvbik7XHJcbiAgICAgICAgaWYgKGpzb24gJiYganNvbi5yZXNDb2RlID09IDAgJiYgJ3Jlc0JvZHknIGluIGpzb24gJiYganNvbi5yZXNCb2R5ICYmICdzTGlzdCcgaW4ganNvbi5yZXNCb2R5ICYmIGpzb24ucmVzQm9keS5zTGlzdCBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKDEpO1xyXG4gICAgICAgICAgICBpZiAoanNvbi5yZXNCb2R5LnNMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcnIgPSBqc29uLnJlc0JvZHkuc0xpc3Q7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBhIGluIGFycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcnIuaGFzT3duUHJvcGVydHkoYSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9IHJlbmRlcihhcnJbYV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQuYnVyc3RlcigkKFwiLmlubmVyLXBhZ2VcIiksIHBhcmFtLm9mZnNldCB8fCAwLCBqc29uLnJlc0JvZHkudG90YWxDb3VudCB8fCAwLCA1LCBwYXJhbS5saW1pdCB8fCAyMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSAnPHRyIGNsYXNzPVwid3JvbmdcIj48dGQgY29sc3Bhbj1cIjlcIj7mmoLml6DmkJzntKLkv6Hmga/vvIE8L3RkPjwvdHI+JztcclxuICAgICAgICAgICAgICAgICQoJy5pbm5lci1wYWdlJykuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygyKTtcclxuICAgICAgICAgICAgc3RyID0gJzx0ciBjbGFzcz1cIndyb25nXCI+PHRkIGNvbHNwYW49XCI5XCI+6K+35rGC5aSx6LSl77yMPGEgaHJlZj1cIlwiPuivt+mHjeivle+8gTwvYT48L3RkPjwvdHI+JztcclxuICAgICAgICAgICAgJCgnLmlubmVyLXBhZ2UnKS5odG1sKCcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVuZGVyKGQpIHtcclxuICAgICAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgICAgICBmb3IgKHZhciB0IGluIGQudHJhbnNQb3J0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZC50cmFuc1BvcnQuaGFzT3duUHJvcGVydHkodCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGQudHJhbnNQb3J0W3RdO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0ciArPSBzLnBvcnRDb2RlICsgKHQgPT0gZC50cmFuc1BvcnQubGVuZ3RoIC0gMSA/ICcnIDogJyAtPiAnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJyA8dHI+IDx0ZD48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cImktc2dcIiBkYXRhLWlkPVwiJyArIGQuYWlyd2F5SWQgKyAnXCIvPjwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzx0ZD4nICsgZC5haXJDb21wYW55Q29kZSArICc8L3RkPiA8dGQ+JyArIHN0ciArICc8L3RkPiA8dGQ+JyArIGQuYWlyd2F5UHJpY2UucmF0ZVswXS5wb2xpY3lbJzQ1J10gKyAnPC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAnPHRkPicgKyBkLmFpcndheVByaWNlLnJhdGVbMF0ucG9saWN5WycxMDAnXSArICc8L3RkPiA8dGQ+JyArIGQuYWlyd2F5UHJpY2UucmF0ZVswXS5wb2xpY3lbJzMwMCddICsgJzwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAnIDx0ZD4nICsgZC5haXJ3YXlQcmljZS5yYXRlWzBdLnBvbGljeVsnNTAwJ10gKyAnPC90ZD4gPHRkPicgKyBkLmFpcndheVByaWNlLnJhdGVbMF0ucG9saWN5WycxMDAwJ10gKyAnPC90ZD4nXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnLnNlYXJjaC10YicpLmZpbmQoJ3Rib2R5JykuaHRtbChzdHIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbGlzdDogbGlzdFxyXG4gICAgICAgICwgcmVuZGVyVHI6IHJlbmRlclRyXHJcbiAgICAgICAgLCBpbm5lckxpc3Q6IGlubmVyTGlzdFxyXG4gICAgfVxyXG59KCkpO1xyXG5tb2R1bGUuZXhwb3J0cy5Eb20gPSBEb207IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTcvMi82LlxyXG4gKi9cclxuJ3VzZSBzdHJpY3QnO1xyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBMaXN0ZW5lciA9IHJlcXVpcmUoJy4vbGlzdGVuZXInKS5MaXN0ZW5lcjtcclxudmFyIGdlbmVyYWwgPSByZXF1aXJlKCcuLi8uLi9nZW5lcmFsL2dlbmVyYWwnKS5nZW5lcmFsO1xyXG5nZW5lcmFsLnJ1bigpO1xyXG5MaXN0ZW5lci5ydW4oKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNy8xLzUuXHJcbiAqL1xyXG4ndXNlIHN0cmljdCc7XHJcbnJlcXVpcmUoJy4uLy4uL2dlbmVyYWwvYnVyc3RlcicpO1xyXG52YXIgdXJsID0gcmVxdWlyZSgnLi4vLi4vZ2VuZXJhbC9mdW5jdGlvbicpLnVybFxyXG4gICAgLG15Zm9ybWF0ID0gcmVxdWlyZSgnLi4vLi4vZ2VuZXJhbC9mdW5jdGlvbicpLmZvcm1hdFxyXG4gICAgLCBNb2RhbCA9IHJlcXVpcmUoJy4uLy4uL2dlbmVyYWwvbW9kYWwnKTtcclxudmFyIERhdGEgPSByZXF1aXJlKCcuL2RhdGEnKS5EYXRhXHJcbiAgICAsIERvbSA9IHJlcXVpcmUoJy4vZG9tJykuRG9tO1xyXG52YXIgTGlzdGVuZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZGFsUGFnZSA9IHtcclxuICAgICAgICBvZmZzZXQ6IDBcclxuICAgICAgICAsIGxpbWl0OiA1XHJcbiAgICB9O1xyXG4gICAgLy/pgInmi6nnmoTlrqLmiLdcclxuICAgIHZhciBtZW1iZXJJZDtcclxuICAgIHZhciBjYW5jZWxJZCwgamRJZCwgeWRJZDtcclxuICAgIC8v57yT5a2Y5b6F5aSE55CG5YiX6KGo5pWw5o2uXHJcbiAgICB2YXIgcGVuZGluZ0xpc3QgPSB7fTtcclxuICAgIC8v5Li05pe25a2Y5pS+5pWw5o2uXHJcbiAgICB2YXIgc3RvcGdhcCA9IHt9O1xyXG4gICAgLy/lrZjmlL7pu5jorqTotLnnlKjmqKHmnb9cclxuICAgIHZhciBkZWZhdWx0UHJpY2UgPSB7fTtcclxuICAgIC8v5a2Y5pS+6L+Q5Y2V5YiX6KGoXHJcbiAgICB2YXIgeWRMaXN0ID0ge307XHJcbiAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNzYXZlLXlkaCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAvLyAkKCcjamQtamNiaCcpLnByb3AoJ3JlYWRvbmx5JywgJCh0aGlzKS5wcm9wKCdjaGVja2VkJykpO1xyXG4gICAgICAgICAgICAkKCcjc2V0LWpjYmgnKS50b2dnbGUoKTtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykucHJvcCgnY2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjamQtamNiaCcpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3NldC1qY2JoJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuc2V0LXBhcnQnKS5hZGRDbGFzcygnZHAtYicpO1xyXG4gICAgICAgICAgICAkKCcueWQtcGFydCcpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjc2V0LWVuc3VyZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGFyciA9ICQoJyNtdWx0aS1zZXQnKS52YWwoKS5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICQoJyNqZC1qY2JoJykudmFsKGFyci5qb2luKCcsJykpO1xyXG4gICAgICAgICAgICAkKCcuc2V0LXBhcnQnKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjY2hlY2stYWxsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1bbmFtZT1cImxpc3Qtc2dcIl0nKS5wcm9wKCdjaGVja2VkJywgJCh0aGlzKS5wcm9wKCdjaGVja2VkJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWVudGVyJywgJy5vcHQtdGQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oJy5vcHQtcGFydCcpLmZhZGVJbigyMDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWxlYXZlJywgJy5vcHQtdGQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oJy5vcHQtcGFydCcpLmZhZGVPdXQoMjAwKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcjYWRkLWRhdGUnKS5kYXRldGltZXBpY2tlcih7XHJcbiAgICAgICAgICAgIGZvcm1hdDogJ3l5eXktbW0tZGQnLC8v5pel5pyf55qE5qC85byPXHJcbiAgICAgICAgICAgIHN0YXJ0RGF0ZTogbmV3IERhdGUoKSwvL+mAieaLqeWZqOeahOW8gOWni+aXpeacn1xyXG4gICAgICAgICAgICBhdXRvY2xvc2U6IHRydWUsLy/ml6XmnJ/pgInmi6nlrozmiJDlkI7mmK/lkKblhbPpl63pgInmi6nmoYZcclxuICAgICAgICAgICAgYm9vdGNzc1ZlcjogMywvL+aYvuekuuWQkeW3puWQkeWPs+eahOeureWktFxyXG4gICAgICAgICAgICBsYW5ndWFnZTogJ3poLUNOJywvL+ivreiogFxyXG4gICAgICAgICAgICBtaW5WaWV3OiBcIm1vbnRoXCIvL+ihqOekuuaXpeacn+mAieaLqeeahOacgOWwj+iMg+WbtO+8jOm7mOiupOaYr2hvdXJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmdseXBoaWNvbi1jYWxlbmRhcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnI2FkZC1kYXRlJykuZm9jdXMoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm91dGVyLXBhZ2UgLnBhZ2VzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB1cmwuc2V0KCdvZmZzZXQnLCAkKHRoaXMpLmRhdGEoJ29mZnNldCcpKTtcclxuICAgICAgICAgICAgaW5pdCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjc2VhcmNoJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB1cmwuc2V0KCdvZmZzZXQnLCAwKTtcclxuICAgICAgICAgICAgaW5pdCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jbG9zZS1idG4nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gICAgJCgnLmFsZXJ0LXBhcnQnKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgIC8vICAgICQoJy53aGl0ZS1iYWNrJykuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAvL30pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYWNjZXB0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcud2hpdGUtYmFjaycpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICQoJy5hY2NlcHQtcGFydCcpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5yZWZ1c2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNhbmNlbElkID0gJCh0aGlzKS5kYXRhKCdpZCcpO1xyXG4gICAgICAgICAgICAkKCcud2hpdGUtYmFjaycpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICQoJy5yZWZ1c2UtcGFydCcpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNhZGQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG1vZGFsUGFnZVsnb2Zmc2V0J10gPSAwO1xyXG4gICAgICAgICAgICAkKCcud2hpdGUtYmFjaycpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICQoJy5hZGQtcGFydCcpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5hZGQtZGF0YScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGVsZSA9ICQodGhpcykucGFyZW50KCk7XHJcbiAgICAgICAgICAgICQoJy5qY2JoJykuaHRtbChlbGUuZGF0YSgnamNiaCcpKTtcclxuICAgICAgICAgICAgJCgnLmtobWMnKS5odG1sKGVsZS5kYXRhKCdraG1jJykpO1xyXG4gICAgICAgICAgICAkKCcubHhyJykuaHRtbChlbGUuZGF0YSgnbHhyJykpO1xyXG4gICAgICAgICAgICAkKCcuYWRkLWRhdGEtcGFydCcpLmZpbmQoJy50YmQnKS5odG1sKCcgPGRpdiBjbGFzcz1cInR0ciBmaWxsIGRhdGFcIj4gJyArXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImJpZ1wiPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYS1kYXRlXCIgaWQ9XCJmaXJzdC1kYXRlXCI+PC9kaXY+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzxkaXY+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJhLW51bSBrdXAtbnVtXCIgdmFsdWU9XCIwXCI+IDwvZGl2PiA8ZGl2PjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYS1sb25nICBrdXAtZm51bVwiIHZhbHVlPVwiMFwiPiAnICtcclxuICAgICAgICAgICAgICAgICc8L2Rpdj4gPGRpdj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImEtd2lkdGggIGt1cC1mbnVtXCIgdmFsdWU9XCIwXCI+IDwvZGl2PiA8ZGl2PjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYS1oZWlnaHQgIGt1cC1mbnVtXCIgdmFsdWU9XCIwXCI+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PiA8ZGl2IGNsYXNzPVwiYS1zaXplXCI+MDwvZGl2PiA8ZGl2PjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYS13ZWkga3VwLWZudW1cIiB2YWx1ZT1cIjBcIj4gJyArXHJcbiAgICAgICAgICAgICAgICAnPC9kaXY+IDxkaXY+IDxzZWxlY3QgY2xhc3M9XCJhLXBhY2thZ2VcIj4gPG9wdGlvbiB2YWx1ZT1cIjFcIj7nurjnrrE8L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT1cIjJcIj7mnKjnrrE8L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT1cIjNcIj7ljbc8L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT1cIjRcIj7miZjnm5g8L29wdGlvbj4gPC9zZWxlY3Q+IDwvZGl2PiAnICtcclxuICAgICAgICAgICAgICAgICc8ZGl2PjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYS1wcyBrdXAtbnVtXCIgdmFsdWU9XCIwXCI+IDwvZGl2PiA8ZGl2PjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYS1zYyBrdXAtbnVtXCIgdmFsdWU9XCIwXCI+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PiA8ZGl2PjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYS1ieCBrdXAtbnVtXCIgdmFsdWU9XCIwXCI+IDwvZGl2PiA8ZGl2PjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYS1xdCBrdXAtbnVtXCIgdmFsdWU9XCIwXCI+IDwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJyA8ZGl2PjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYS1ielwiPiA8L2Rpdj4gPGRpdj48L2Rpdj4gPC9kaXY+ICcpO1xyXG5cclxuICAgICAgICAgICAgJCgnLmFkZC1kYXRhLXBhcnQnKS5maW5kKCcudGZ0JykuaHRtbCgnIDxkaXYgY2xhc3M9XCJiaWdcIj7mgLvorqE8L2Rpdj4gPGRpdiBjbGFzcz1cInQtanNcIj4wPC9kaXY+IDxkaXYgY2xhc3M9XCJ0LWNcIj48L2Rpdj4gPGRpdiBjbGFzcz1cInQta1wiPjwvZGl2PiA8ZGl2IGNsYXNzPVwidC1nXCI+PC9kaXY+IDxkaXYgY2xhc3M9XCJ0LXNcIj4wPC9kaXY+IDxkaXYgY2xhc3M9XCJ0LXdcIj4wPC9kaXY+IDxkaXY+PC9kaXY+IDxkaXYgY2xhc3M9XCJ0LXBzXCI+MDwvZGl2PiA8ZGl2IGNsYXNzPVwidC1zY1wiPjA8L2Rpdj4gPGRpdiBjbGFzcz1cInQtYnhcIj4wPC9kaXY+IDxkaXYgY2xhc3M9XCJ0LXF0XCI+MDwvZGl2PiA8ZGl2PjwvZGl2PiA8ZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICAkKCcjYWRkLWRhdGEnKS5kYXRhKCdpZCcsICQodGhpcykuZGF0YSgnaWQnKSk7XHJcbiAgICAgICAgICAgICQoJyNmaXJzdC1kYXRlJykuZGF0ZXRpbWVwaWNrZXIoe1xyXG4gICAgICAgICAgICAgICAgZm9ybWF0OiAneXl5eS1tbS1kZCBoaDppaTpzcycsLy/ml6XmnJ/nmoTmoLzlvI9cclxuICAgICAgICAgICAgICAgIGVuZERhdGU6IG5ldyBEYXRlKCksLy/pgInmi6nlmajnmoTlvIDlp4vml6XmnJ9cclxuICAgICAgICAgICAgICAgIGF1dG9jbG9zZTogdHJ1ZSwvL+aXpeacn+mAieaLqeWujOaIkOWQjuaYr+WQpuWFs+mXremAieaLqeahhlxyXG4gICAgICAgICAgICAgICAgYm9vdGNzc1ZlcjogMywvL+aYvuekuuWQkeW3puWQkeWPs+eahOeureWktFxyXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U6ICd6aC1DTicsLy/or63oqIBcclxuICAgICAgICAgICAgICAgIG1pblZpZXc6IFwibW9udGhcIi8v6KGo56S65pel5pyf6YCJ5oup55qE5pyA5bCP6IyD5Zu077yM6buY6K6k5pivaG91clxyXG4gICAgICAgICAgICB9KS5vbignY2hhbmdlRGF0ZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuY29weS1kYXRlJykuaHRtbChuZXcgRGF0ZShlLmRhdGUpLkZvcm1hdCgneXl5eS1NTS1kZCBoaDptbTpzcycpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgJCgnLmFkZC1kYXRhLXBhcnQnKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYWRkLWRhdGEtcGFydCAuZ2x5cGhpY29uLXBsdXMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKCcuYWRkLWRhdGEtcGFydCcpLmZpbmQoJy50dHIuZGF0YScpLmxlbmd0aCA+PSA2KSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWRkLWRhdGEtcGFydCcpLmZpbmQoJy50YmQnKS5jc3MoJ3BhZGRpbmctcmlnaHQnLCAnM3B4Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLmFkZC1kYXRhLXBhcnQnKS5maW5kKCcudGJkJykuYXBwZW5kKCcgPGRpdiBjbGFzcz1cInR0ciBmaWxsIGRhdGFcIj4gJyArXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImJpZyBjb3B5LWRhdGVcIj4nICsgJCgnI2ZpcnN0LWRhdGUnKS52YWwoKSArICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICc8ZGl2PjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYS1udW0ga3VwLW51bVwiIHZhbHVlPVwiMFwiPiA8L2Rpdj4gPGRpdj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImEtbG9uZyAga3VwLWZudW1cIiB2YWx1ZT1cIjBcIj4gJyArXHJcbiAgICAgICAgICAgICAgICAnPC9kaXY+IDxkaXY+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJhLXdpZHRoICBrdXAtZm51bVwiIHZhbHVlPVwiMFwiPiA8L2Rpdj4gPGRpdj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImEtaGVpZ2h0ICBrdXAtZm51bVwiIHZhbHVlPVwiMFwiPiAnICtcclxuICAgICAgICAgICAgICAgICc8L2Rpdj4gPGRpdiBjbGFzcz1cImEtc2l6ZVwiPjA8L2Rpdj4gPGRpdj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImEtd2VpIGt1cC1mbnVtXCIgdmFsdWU9XCIwXCI+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PiA8ZGl2PiA8c2VsZWN0IGNsYXNzPVwiYS1wYWNrYWdlXCI+IDxvcHRpb24gdmFsdWU9XCIxXCI+57q4566xPC9vcHRpb24+IDxvcHRpb24gdmFsdWU9XCIyXCI+5pyo566xPC9vcHRpb24+IDxvcHRpb24gdmFsdWU9XCIzXCI+5Y23PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9XCI0XCI+5omY55uYPC9vcHRpb24+IDwvc2VsZWN0PiA8L2Rpdj4gJyArXHJcbiAgICAgICAgICAgICAgICAnPGRpdj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImEtcHMga3VwLW51bVwiIHZhbHVlPVwiMFwiPiA8L2Rpdj4gPGRpdj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImEtc2Mga3VwLW51bVwiIHZhbHVlPVwiMFwiPiAnICtcclxuICAgICAgICAgICAgICAgICc8L2Rpdj4gPGRpdj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImEtYngga3VwLW51bVwiIHZhbHVlPVwiMFwiPiA8L2Rpdj4gPGRpdj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImEtcXQga3VwLW51bVwiIHZhbHVlPVwiMFwiPiA8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICcgPGRpdj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImEtYnpcIj4gPC9kaXY+IDxkaXY+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXJlbW92ZVwiPjwvc3Bhbj48L2Rpdj48L2Rpdj4gJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5hZGQtZGF0YS1wYXJ0IC5nbHlwaGljb24tcmVtb3ZlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy50dHInKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgZ2V0VG90YWwoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbigna2V5dXAnLCAnLmFkZC1kYXRhLXBhcnQgLmt1cC1udW0nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykudmFsKCQodGhpcykudmFsKCkucmVwbGFjZSgvW15cXC0/XFxkXS9nLCAnJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdibHVyJywgJy5hZGQtZGF0YS1wYXJ0IC5rdXAtbnVtJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoISQodGhpcykudmFsKCkpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykudmFsKDApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwocGFyc2VJbnQoJCh0aGlzKS52YWwoKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBlbGUgPSAkKHRoaXMpLnBhcmVudHMoJy50dHIuZGF0YScpO1xyXG4gICAgICAgICAgICB2YXIgYyA9IHBhcnNlRmxvYXQoZWxlLmZpbmQoJy5hLWxvbmcnKS52YWwoKSlcclxuICAgICAgICAgICAgICAgICwgayA9IHBhcnNlRmxvYXQoZWxlLmZpbmQoJy5hLXdpZHRoJykudmFsKCkpXHJcbiAgICAgICAgICAgICAgICAsIGcgPSBwYXJzZUZsb2F0KGVsZS5maW5kKCcuYS1oZWlnaHQnKS52YWwoKSlcclxuICAgICAgICAgICAgICAgICwganMgPSBwYXJzZUZsb2F0KGVsZS5maW5kKCcuYS1udW0nKS52YWwoKSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuYS1zaXplJykuaHRtbChteWZvcm1hdC5mb3JtYXR2b2x1bWUoYyAqIGsgKiBnICoganMpKTtcclxuICAgICAgICAgICAgZ2V0VG90YWwoKTtcclxuICAgICAgICAgICAgZ2V0VG90YWwoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbigna2V5dXAnLCAnLmFkZC1kYXRhLXBhcnQgLmt1cC1mbnVtJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnZhbCgkKHRoaXMpLnZhbCgpLnJlcGxhY2UoL1teXFwtP1xcZC5dL2csICcnKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2JsdXInLCAnLmFkZC1kYXRhLXBhcnQgLmt1cC1mbnVtJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnZhbCgkKHRoaXMpLnZhbCgpLnJlcGxhY2UoL1teXFwtP1xcZC5dL2csICcnKSk7XHJcbiAgICAgICAgICAgIGlmICghJCh0aGlzKS52YWwoKSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbChwYXJzZUZsb2F0KCQodGhpcykudmFsKCkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZWxlID0gJCh0aGlzKS5wYXJlbnRzKCcudHRyLmRhdGEnKTtcclxuICAgICAgICAgICAgdmFyIGMgPSBwYXJzZUZsb2F0KGVsZS5maW5kKCcuYS1sb25nJykudmFsKCkpXHJcbiAgICAgICAgICAgICAgICAsIGsgPSBwYXJzZUZsb2F0KGVsZS5maW5kKCcuYS13aWR0aCcpLnZhbCgpKVxyXG4gICAgICAgICAgICAgICAgLCBnID0gcGFyc2VGbG9hdChlbGUuZmluZCgnLmEtaGVpZ2h0JykudmFsKCkpXHJcbiAgICAgICAgICAgICAgICAsIGpzID0gcGFyc2VGbG9hdChlbGUuZmluZCgnLmEtbnVtJykudmFsKCkpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLmEtc2l6ZScpLmh0bWwobXlmb3JtYXQuZm9ybWF0dm9sdW1lKGMgKiBrICogZyAqIGpzKSk7XHJcbiAgICAgICAgICAgIGdldFRvdGFsKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5lbnN1cmUtZGF0YScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGVsZSA9ICQodGhpcykucGFyZW50KCk7XHJcbiAgICAgICAgICAgICQoJy5qY2JoJykuaHRtbChlbGUuZGF0YSgnamNiaCcpKTtcclxuICAgICAgICAgICAgJCgnLmtobWMnKS5odG1sKGVsZS5kYXRhKCdraG1jJykpO1xyXG4gICAgICAgICAgICAkKCcubHhyJykuaHRtbChlbGUuZGF0YSgnbHhyJykpO1xyXG4gICAgICAgICAgICAkKCcjZW5zdXJlLWRhdGEnKS5kYXRhKCdpZCcsICQodGhpcykuZGF0YSgnaWQnKSk7XHJcbiAgICAgICAgICAgIERhdGEuc3RvcmFnZSh7aWQ6ICQodGhpcykuZGF0YSgnaWQnKX0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIERvbS5yZW5kZXJUcihqc29uLnJlc0JvZHkgfHwge30pO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZW5zdXJlLWRhdGEtcGFydCcpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnIHx8ICfmt7vliqDlpLHotKXvvIzor7fph43or5XvvIEnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zaG93LWJnJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaWQgPSAkKHRoaXMpLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgICAgICQoJyNiZy1lbnN1cmUnKS5kYXRhKCdpZCcsIGlkKTtcclxuICAgICAgICAgICAgdmFyIGQgPSBwZW5kaW5nTGlzdFtpZF07XHJcbiAgICAgICAgICAgICQoJy5kZGgnKS5odG1sKGlkKTtcclxuICAgICAgICAgICAgJCgnLnFzZycpLmh0bWwoZC5vcmRlci5kZXB0Q29kZSB8fCAnLycpO1xyXG4gICAgICAgICAgICAkKCcubWRnJykuaHRtbChkLm9yZGVyLmRlc3RDb2RlIHx8ICcvJyk7XHJcbiAgICAgICAgICAgICQoJy5oa2dzJykuaHRtbChkLm9yZGVyLmFpckNvbXBhbnlDb2RlIHx8ICcvJyk7XHJcbiAgICAgICAgICAgICQoJy5xZnJxJykuaHRtbChkLm9yZGVyLmZsaWdodERhdGUgPyBuZXcgRGF0ZShkLm9yZGVyLmZsaWdodERhdGUpLkZvcm1hdCgneXl5eS1NTS1kZCcpIDogJy8nKTtcclxuICAgICAgICAgICAgdmFyIGpjenQsIGRjenQ7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZC5vcmRlci5lbnRyeVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgamN6dCA9ICflvoXov5vku5MnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGpjenQgPSAn5bey6L+b5LuT77yI5pyq56Gu6K6k77yJJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBqY3p0ID0gJ+W3suehruiupCc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGpjenQgPSAn5b6F6L+b5LuTJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzd2l0Y2ggKGQub3JkZXIuYm9va2luZ1N0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgZGN6dCA9ICfmnKrorqLoiLEnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRjenQgPSAn5bey6K6i6IixJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgLTE6XHJcbiAgICAgICAgICAgICAgICAgICAgZGN6dCA9ICforqLoiLHlpLHotKUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGRjenQgPSAn5bey5pS56YWNJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZGN6dCA9ICfmnKrorqLoiLEnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJy5qY3p0JykuaHRtbChqY3p0KTtcclxuICAgICAgICAgICAgJCgnLmRjenQnKS5odG1sKGRjenQpO1xyXG4gICAgICAgICAgICAkKCcud2hpdGUtYmFjaycpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICQoJy5iZy1wYXJ0JykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignYmx1cicsICcjaW5mby1uYW1lJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdmFsID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgaWYgKHZhbCA9PSAnJyB8fCBuZXcgUmVnRXhwKFwiXlsgXSskXCIpLnRlc3QodmFsKSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoJ2NvbnNvbCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zaG93LXpkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzdG9wZ2FwID0gcGVuZGluZ0xpc3RbJCh0aGlzKS5kYXRhKCdpZCcpXSB8fCBudWxsO1xyXG4gICAgICAgICAgICBpZiAoc3RvcGdhcCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9ICQoJy56ZC1wYXJ0JylcclxuICAgICAgICAgICAgICAgICAgICAsIGMgPSBzdG9wZ2FwLmNvbXBhbnlcclxuICAgICAgICAgICAgICAgICAgICAsIG8gPSBzdG9wZ2FwLm9yZGVyO1xyXG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSAnJywgc3RyID0gJyc7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG8uY2FyZ28uY2FyZ29UeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ+aZrui0pyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICfmnKjnrrEnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAn5Y23JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ+aJmOebmCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCgnLmRkaCcpLmh0bWwoby5vcmRlck51bSB8fCAnLycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmtoJykuaHRtbChjLmNvbXBhbnlOYW1lIHx8ICcvJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcucXNnJykuaHRtbChvLmRlcHRDb2RlIHx8ICcvJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWRnJykuaHRtbChvLmRlc3RDb2RlIHx8ICcvJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuaGtncycpLmh0bWwoby5haXJDb21wYW55Q29kZSB8fCAnLycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnFmcnEnKS5odG1sKG8uZmxpZ2h0RGF0ZSA/IG5ldyBEYXRlKG8uZmxpZ2h0RGF0ZSkuRm9ybWF0KCd5eXl5LU1NLWRkJykgOiAnLycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmhiaCcpLmh0bWwoby5haXJsaW5lSW5mbyB8fCAnLycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnBtJykuaHRtbChvLmNhcmdvLmNhcmdvTmFtZSB8fCAnLycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnBtJykuYXR0cihcInRpdGxlXCIsby5jYXJnby5jYXJnb05hbWUpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmx4JykuaHRtbCh0eXBlIHx8ICcvJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcud3RiZycpLmh0bWwoby5jYXJnby5pc0J1bGt5Q2FyZ28gPyAn5pivJyA6ICflkKYnKTtcclxuICAgICAgICAgICAgICAgICQoJy5qcycpLmh0bWwoby5jYXJnby5jYXJnb0NvdW50ICsgJ1BDUycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnRqJykuaHRtbChteWZvcm1hdC5mb3JtYXR2b2x1bWUoby5jYXJnby5jYXJnb1NpemUpICsgJ0NCTScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnpsJykuaHRtbChvLmNhcmdvLmNhcmdvV2VpZ2h0ICsgJ0tHU++8iOiuoei0uemHjemHj++8micgKyBvLmNhcmdvLmNoYXJnaW5nV2VpZ2h0ICsgJ0tHU++8iScpO1xyXG4gICAgICAgICAgICAgICAgc3RyICs9ICc8dHIgY2xhc3M9XCJkYXRhXCI+IDx0ZD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZ5bXRcIiByZWFkb25seSB2YWx1ZT1cIuepuui/kOi0uVwiLz4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC90ZD4gPHRkPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaXAtZGpcIiB2YWx1ZT1cIicgKyBvLmNoYXJnaW5nUHJpY2UgKyAnXCIvPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L3RkPiA8dGQ+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJpcC16bFwiIHZhbHVlPVwiJyArIG8uY2hhcmdpbmdXZWlnaHQgKyAnXCIvPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L3RkPiA8dGQ+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJ0dHBcIiByZWFkb25seSB2YWx1ZT1cIicgKyBvLmRlY2xhcmVBaXJ3YXlGZWUgKyAnXCIvPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L3RkPiA8dGQ+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXJlbW92ZVwiPjwvc3Bhbj48L3RkPjwvdHI+JztcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHMgaW4gby5zZXJ2aWNlRmVlTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvLnNlcnZpY2VGZWVMaXN0Lmhhc093blByb3BlcnR5KHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gby5zZXJ2aWNlRmVlTGlzdFtzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICc8dHIgY2xhc3M9XCJkYXRhXCI+IDx0ZD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZ5bXRcIiByZWFkb25seSB2YWx1ZT1cIicgKyBkLml0ZW1OYW1lICsgJ1wiLz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L3RkPiA8dGQ+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJpcC1kalwiIHZhbHVlPVwiJyArIGQuaXRlbVByaWNlICsgJ1wiLz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L3RkPiA8dGQ+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJpcC16bFwiIHZhbHVlPVwiJyArIGQuaXRlbVVuaXQgKyAnXCIvPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvdGQ+IDx0ZD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInR0cFwiIHJlYWRvbmx5IHZhbHVlPVwiJyArIGQuaXRlbVRvdGFsICsgJ1wiLz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L3RkPiA8dGQ+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXJlbW92ZVwiPjwvc3Bhbj48L3RkPjwvdHI+JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzdHIgKz0gJzx0ciBjbGFzcz1cInRyLWFkZFwiPiA8dGQ+PC90ZD4gPHRkPjwvdGQ+IDx0ZD48L3RkPiA8dGQ+PC90ZD4gPHRkPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVzXCI+PC9zcGFuPjwvdGQ+IDwvdHI+JztcclxuICAgICAgICAgICAgICAgIGVsZS5maW5kKCcuemQtdGInKS5maW5kKCd0Ym9keScpLmh0bWwoc3RyKTtcclxuICAgICAgICAgICAgICAgIGVsZS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgJCgnLndoaXRlLWJhY2snKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/noa7orqTorqLljZVcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNob3ctamQnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBtb2RhbFBhZ2VbJ29mZnNldCddID0gMDtcclxuICAgICAgICAgICAgdmFyIGlkID0gJCh0aGlzKS5kYXRhKCdpZCcpO1xyXG4gICAgICAgICAgICB2YXIgZCA9IHBlbmRpbmdMaXN0W2lkXTtcclxuICAgICAgICAgICAgdmFyIGVsZSA9ICQoJy5qZC1wYXJ0Jyk7XHJcbiAgICAgICAgICAgIHZhciBzdHIgPSAnJztcclxuICAgICAgICAgICAgaWYgKGQub3JkZXIuYWlyd2F5SW5mbykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBkLm9yZGVyLmFpcndheUluZm8udHJhbnNQb3J0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQub3JkZXIuYWlyd2F5SW5mby50cmFuc1BvcnQuaGFzT3duUHJvcGVydHkoaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGR0ID0gZC5vcmRlci5haXJ3YXlJbmZvLnRyYW5zUG9ydFtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9IGR0LnBvcnRDb2RlICsgKGkgPT0gZC5vcmRlci5haXJ3YXlJbmZvLnRyYW5zUG9ydC5sZW5ndGggLSAxID8gJycgOiAnIC0+ICcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBqZElkID0gaWQ7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuZGRoJykuaHRtbChkLm9yZGVyLm9yZGVyTnVtKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5raCcpLmh0bWwoZC5jb21wYW55LmNvbXBhbnlOYW1lKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5kZHFkJykuaHRtbChkLm9yZGVyLm9yZGVyQ2hhbm5lbCA9PSAxID8gJ+iHquWKqeiuouiIsScgOiAn5b+r6YCf6K6i6IixJyk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcucG0nKS5odG1sKGQub3JkZXIuY2FyZ28uY2FyZ29OYW1lKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5wbScpLmF0dHIoXCJ0aXRsZVwiLGQub3JkZXIuY2FyZ28uY2FyZ29OYW1lKTtcclxuXHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcubHgnKS5odG1sKGQub3JkZXIuY2FyZ28uY2FyZ29UeXBlID09IDEgPyAn5pmu6LSnJyA6ICfovazlhbMnKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy53dGJnJykuaHRtbChkLm9yZGVyLmN1c3RvbURlY2xhcmUgPyAn5pivJyA6ICflkKYnKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5qcycpLmh0bWwoZC5vcmRlci5jYXJnby5jYXJnb0NvdW50ICsgJ1BDUycpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLnRqJykuaHRtbChteWZvcm1hdC5mb3JtYXR2b2x1bWUoZC5vcmRlci5jYXJnby5jYXJnb1NpemUpICsgJ0NCTScpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLnpsJykuaHRtbChkLm9yZGVyLmNhcmdvLmNhcmdvV2VpZ2h0ICsgJ0tHUyDvvIjorqHotLnph43ph4/vvJonICsgZC5vcmRlci5jYXJnby5jaGFyZ2luZ1dlaWdodCArICdLR1PvvIknKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5xc2cnKS5odG1sKGQub3JkZXIuZGVwdENvZGUpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLm1kZycpLmh0bWwoZC5vcmRlci5kZXN0Q29kZSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuaGtncycpLmh0bWwoZC5vcmRlci5haXJDb21wYW55Q29kZSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuaHhsZycpLmh0bWwoZC5vcmRlci5haXJ3YXlJbmZvID8gc3RyIDogJy8nKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5xZnJxJykuaHRtbChuZXcgRGF0ZShkLm9yZGVyLmZsaWdodERhdGUpLkZvcm1hdCgneXl5eS1NTS1kZCcpKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJyNqZC1wcmljZScpLnZhbChkLm9yZGVyLmNoYXJnaW5nUHJpY2UpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnI2ZpeGVkLWpjYmgnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcjamQtamNiaCcpLnByb3AoJ3JlYWRvbmx5JywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcjemRjaycpLnZhbChkLm9yZGVyLndhcmVob3VzZUlkKTtcclxuICAgICAgICAgICAgaWYgKCFkLm9yZGVyLmFpcndheUluZm8pIHtcclxuICAgICAgICAgICAgICAgIGpkSW5pdChlbGUpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnJlc3VsdC1wYXJ0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2pkLWVuc3VyZScpLmRhdGEoJ3RwJywgMCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjamQtZW5zdXJlJykuZGF0YSgnYWlkJywgMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcucmVzdWx0LXBhcnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjamQtZW5zdXJlJykuZGF0YSgndHAnLCAxKTtcclxuICAgICAgICAgICAgICAgICQoJyNqZC1lbnN1cmUnKS5kYXRhKCdhaWQnLCBkLm9yZGVyLmFpcndheUluZm8uYWlyd2F5SWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVsZS5odG1sKCkpO1xyXG4gICAgICAgICAgICBlbGUucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgJCgnLndoaXRlLWJhY2snKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG5cclxuICAgICAgICAgICAgLy/lpoLmnpzkuYvliY3mnInorr7nva7ov5vku5PnvJblj7fvvIzkv53mjIHlpI3pgInmoYbkuI3pgInkuK1cclxuICAgICAgICAgICAgaWYoJChcIiNqZC1qY2JoXCIpLnZhbCgpICE9XCJcIil7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2ZpeGVkLWpjYmhcIikuYXR0cihcImNoZWNrZWRcIixmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAkKCcjc2V0LWpjYmgnKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmpkLXBhcnQgLnBhZ2VzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBtb2RhbFBhZ2Uub2Zmc2V0ID0gJCh0aGlzKS5kYXRhKCdvZmZzZXQnKTtcclxuICAgICAgICAgICAgamRJbml0KCQoJy5qZC1wYXJ0JykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnI3NhdmUteWRoJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYyA9ICQodGhpcykucHJvcCgnY2hlY2tlZCcpO1xyXG4gICAgICAgICAgICAkKCcjeWQteWRoJykucHJvcCgncmVhZG9ubHknLCBjKTtcclxuICAgICAgICAgICAgaWYgKGMpIHtcclxuICAgICAgICAgICAgICAgICQoJyN5ZC15ZGgnKS52YWwoJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/lhbPogZTov5DljZVcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNob3cteWQnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgaWQgPSAkKHRoaXMpLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgICAgIHlkSWQgPSBpZDtcclxuICAgICAgICAgICAgdmFyIGRkID0gcGVuZGluZ0xpc3RbaWRdO1xyXG4gICAgICAgICAgICB2YXIgYyA9IGRkLmNvbXBhbnkgfHwge31cclxuICAgICAgICAgICAgICAgICwgbyA9IGRkLm9yZGVyIHx8IHt9O1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gJCgnLnlkLXBhcnQnKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJyNzYXZlLXlkaCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJyN5ZC15ZGgnKS52YWwoJycpLnByb3AoJ3JlYWRvbmx5JywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuZGRoJykuaHRtbChvLm9yZGVyTnVtKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5xc2cnKS5odG1sKG8uZGVwdENvZGUpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLm1kZycpLmh0bWwoby5kZXN0Q29kZSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuaGtncycpLmh0bWwoby5haXJDb21wYW55Q29kZSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcucWZycScpLmh0bWwobmV3IERhdGUoby5mbGlnaHREYXRlKS5Gb3JtYXQoJ3l5eXktTU0tZGQnKSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuanMnKS5odG1sKG8uY2FyZ28uY2FyZ29Db3VudCArICdQQ1MnKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy50aicpLmh0bWwobXlmb3JtYXQuZm9ybWF0dm9sdW1lKG8uY2FyZ28uY2FyZ29TaXplKSArICdDQk0nKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy56bCcpLmh0bWwoby5jYXJnby5jYXJnb1dlaWdodCArICdLR1Mg77yI6K6h6LS56YeN6YeP77yaJyArIGRkLm9yZGVyLmNhcmdvLmNoYXJnaW5nV2VpZ2h0ICsgJ0tHU++8iScpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLmpjenQnKS5odG1sKG8uZW50cnlTdGF0ZSA9PSAwID8gJ+W+hei/m+S7kycgOiAoby5lbnRyeVN0YXRlID09IDEgPyAn5bey6L+b5LuT77yM5pyq56Gu6K6kJyA6ICflt7Lnoa7orqQnKSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcjeWQtYycpLnZhbChvLmNhcmdvLmNhcmdvQ291bnQpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnI3lkLXMnKS52YWwoby5jYXJnby5jYXJnb1NpemUpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnI3lkLXcnKS52YWwoby5jYXJnby5jYXJnb1dlaWdodCk7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgXCJhZ2VudENvbXBhbnlJZFwiOiAxMDAwMCxcclxuICAgICAgICAgICAgICAgIFwiYWlyd2F5SWRcIjogby5haXJ3YXlJbmZvLmFpcndheUlkLFxyXG4gICAgICAgICAgICAgICAgXCJmbGlnaHREYXRlXCI6IG5ldyBEYXRlKG8uZmxpZ2h0RGF0ZSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgRGF0YS55ZFNlYXJjaChkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgeWRMaXN0ID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQm9keScgaW4ganNvbiAmJiBqc29uLnJlc0JvZHkgaW5zdGFuY2VvZiBBcnJheSAmJiBqc29uLnJlc0JvZHkubGVuZ3RoID4gMCAmJiBmYWxzZSkgey8v5pys5qyh5Yik5pat5Y+W5raI77yM5pWF6ICM5pyA5ZCO5Yqg5LqGZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBiIGluIGpzb24ucmVzQm9keSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5yZXNCb2R5Lmhhc093blByb3BlcnR5KGIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHQgPSBqc29uLnJlc0JvZHlbYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZExpc3RbZHQuYmlsbEluZm8uYmlsbElkXSA9IGR0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHkgaW4geWRMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh5ZExpc3QuaGFzT3duUHJvcGVydHkoeSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnPHAgY2xhc3M9XCJ5ZC1yZFwiPiA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cInMteWRcIiBkYXRhLWlkPVwiJyArIHkgKyAnXCI+JyArIHkgKyAnPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlLmZpbmQoJy5sZWZ0JykuaHRtbChzdHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5maW5kKCcucmVzdWx0LXBhcnQnKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5maW5kKCcuYWRkLXlkJykuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjZ2wtZW5zdXJlJykuZGF0YSgndHAnLCAxKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlLmZpbmQoJy5yZXN1bHQtcGFydCcpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlLmZpbmQoJy5hZGQteWQnKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNnbC1lbnN1cmUnKS5kYXRhKCd0cCcsIDIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxlLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcud2hpdGUtYmFjaycpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5YWz6IGU6L+Q5Y2VJyk7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3NldC1qY2JoJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuc2V0LXBhcnQnKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmNsb3NlLWJ0bicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYoJCh0aGlzKS5oYXNDbGFzcygnc2V0SmMnKSl7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2V0LXBhcnQnKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgLy8kKCcuamQtcGFydCcpLmFkZENsYXNzKCdkcC1iJyk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgJCgnLmFsZXJ0LXBhcnQnKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgJCgnLndoaXRlLWJhY2snKS5hZGRDbGFzcygnZHAtbicpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjc2V0LWVuc3VyZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGFyciA9ICQoJyNtdWx0aS1zZXQnKS52YWwoKS5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICQoJyNpcC1qY2JoJykudmFsKGFyci5qb2luKCcsJykpO1xyXG4gICAgICAgICAgICBpZigkKHRoaXMpLmhhc0NsYXNzKCdzZXRKYycpKXtcclxuICAgICAgICAgICAgICAgICQoJy5zZXQtcGFydCcpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuamQtcGFydCcpLmFkZENsYXNzKCdkcC1iJyk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgJCgnLndoaXRlLWJhY2snKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmFsZXJ0LWJhY2snKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNmaXhlZC1qY2JoJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcjc2V0LWpjYmgnKS50b2dnbGUoKTtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykucHJvcCgnY2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjaXAtamNiaCcpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnaW5wdXRbbmFtZT1cInMteWRcIl0nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhcnIgPSB5ZExpc3RbJCh0aGlzKS5kYXRhKCdpZCcpXS5vcmRlckxpc3Q7XHJcbiAgICAgICAgICAgIHZhciBzdHIgPSAnJztcclxuICAgICAgICAgICAgZm9yICh2YXIgYSBpbiBhcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhcnIuaGFzT3duUHJvcGVydHkoYSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGFyclthXTtcclxuICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzx0cj48dGQ+JyArIGQub3JkZXJJZCArICc8L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHRkPicgKyBkLmNhcmdvLmNhcmdvQ291bnQgKyAnUENTPC90ZD4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZD4nICsgZC5jYXJnby5jYXJnb1NpemUgKyAnQ0JNPC90ZD4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZD4nICsgZC5jYXJnby5jYXJnb1dlaWdodCArICdLR1M8L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHRkPicgKyAoZC5lbnRyeVN0YXRlID09IDAgPyAn5b6F6L+b5LuTJyA6IChkLmVudHJ5U3RhdGUgPT0gMSA/ICflt7Lov5vku5PvvIzmnKrnoa7orqQnIDogJ+W3sue7k+adnycpKSArICc8L3RkPjwvdHI+JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKCcueWQtdGInKS5maW5kKCd0Ym9keScpLmh0bWwoc3RyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3RyYW5zZmVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYXJyID0gW107XHJcbiAgICAgICAgICAgICQoJ2lucHV0W25hbWU9XCJsaXN0LXNnXCJdOmNoZWNrZWQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGFyci5wdXNoKCQodGhpcykuZGF0YSgnaWQnKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoYXJyLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQoJy53aGl0ZS1iYWNrJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICQoJy50cmFuc2Zlci1wYXJ0JykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjYWNjZXB0LXRyYW5zZmVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYXJyID0gW107XHJcbiAgICAgICAgICAgIHZhciBtSWQ7XHJcbiAgICAgICAgICAgICQoJ2lucHV0W25hbWU9XCJsaXN0LXNnXCJdOmNoZWNrZWQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGFyci5wdXNoKCQodGhpcykuZGF0YSgnaWQnKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtSWQgPSAkKCcjY3p5JykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmIChhcnIubGVuZ3RoID4gMCAmJiBtSWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFwib3JkZXJJZHNcIjogYXJyLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY29tcGFueUlkXCI6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtZW1iZXJGcm9tXCI6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtZW1iZXJUb1wiOiBtSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJyZXF1aXJlTWViZXJJZFwiOiAwXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgRGF0YS50cmFuc2ZlcihkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfovaznp7vmiJDlip/vvIEnLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+i9rOenu+Wksei0pe+8jOivt+mHjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zaG93LWxvZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgRGF0YS5sb2coe2lkOiAkKHRoaXMpLmRhdGEoJ2lkJyl9LCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0JvZHknIGluIGpzb24gJiYganNvbi5yZXNCb2R5IGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IGpzb24ucmVzQm9keTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSBpbiBhcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcnIuaGFzT3duUHJvcGVydHkoYSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gYXJyW2FdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZC5vcGVyYXRvclR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICflrqLmiLcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAn6LSn5LujJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ+aKpeWFs+ihjCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICc8dHI+PHRkPicgKyAobmV3IERhdGUoZC5jcmVhdGVEdCkuRm9ybWF0KCd5eXl5LU1NLWRkIGhoOm1tJykpICsgJzwvdGQ+PHRkPicgKyBkLm9yZGVyTnVtICsgJzwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dGQ+JyArIHR5cGUgKyAnPC90ZD48dGQ+JyArIGQub3BlcmF0b3JJZCArICc8L3RkPjx0ZCBjbGFzcz1cImxvbmdcIj4nICsgZC5yZW1hcmsgKyAnPC90ZD48L3RyPidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICc8dHI+PHRkIGNvbHNwYW49XCI1XCI+5pqC5peg5pON5L2c5pel5b+XPC90ZD48L3RyPidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvZy1wYXJ0JykuZmluZCgndGJvZHknKS5odG1sKHN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvZy1wYXJ0JykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcud2hpdGUtYmFjaycpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnIHx8ICfojrflj5blpLHotKXvvIzor7fph43or5UnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGFpcnBvcnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v6I635Y+W5py65Zy65ZCN56ewXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2tleXVwJywgJ2lucHV0Lm5hbWUnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSAkKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAsIHVsID0gX3RoaXMuc2libGluZ3MoJy5nZXQtbmFtZScpO1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB1bC5maW5kKCcuYWN0aXZlJykuaW5kZXgoKSB8fCAwXHJcbiAgICAgICAgICAgICAgICAsIGxlbiA9IHVsLmNoaWxkcmVuKCkubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7Ly/lm57ovabplK5cclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gdWwuY2hpbGRyZW4oJy5hY3RpdmUnKS5kYXRhKCd2YWwnKSB8fCB1bC5maW5kKCdsaTpmaXJzdC1jaGlsZCcpLmRhdGEoJ3ZhbCcpIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmRhdGEoJ3ZhbCcsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdWwuaGlkZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSAzOCkgey8v5LiK6ZSuXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGluZGV4ID09IDAgPyBsZW4gLSAxIDogaW5kZXggLSAxO1xyXG4gICAgICAgICAgICAgICAgdWwuZmluZCgnbGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB1bC5maW5kKCdsaScpLmVxKGluZGV4KS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDQwKSB7Ly/kuIvplK5cclxuICAgICAgICAgICAgICAgIGluZGV4ID0gaW5kZXggPT0gbGVuIC0gMSA/IDAgOiBpbmRleCArIDE7XHJcbiAgICAgICAgICAgICAgICB1bC5maW5kKCdsaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHVsLmZpbmQoJ2xpJykuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHsvL+ato+W4uOi+k+WFpVxyXG4gICAgICAgICAgICAgICAgRGF0YS5nZXROYW1lKHtrZXk6IF90aGlzLnZhbCgpfSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQm9keScgaW4ganNvbiAmJiBqc29uLnJlc0JvZHkgaW5zdGFuY2VvZiBBcnJheSAmJiBqc29uLnJlc0JvZHkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgYm9keSA9IGpzb24ucmVzQm9keTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYiBpbiBib2R5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYm9keS5oYXNPd25Qcm9wZXJ0eShiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gYm9keVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzxsaSBkYXRhLXZhbD1cIicgKyBkLmFpcnBvcnRDb2RlICsgJ1wiIGNsYXNzPVwiJyArIChiID09IDAgPyAnYWN0aXZlJyA6ICcnKSArICdcIj4nICsgZC5kaXNwbGF5TmFtZSArICc8L2xpPidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5odG1sKHN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vaW5wdXTlpLHljrvnhKbngrlcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignYmx1cicsICdpbnB1dC5uYW1lJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdWwgPSAkKHRoaXMpLnNpYmxpbmdzKCcuZ2V0LW5hbWUnKTtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB1bC5jaGlsZHJlbignLmFjdGl2ZScpLmRhdGEoJ3ZhbCcpIHx8IHVsLmZpbmQoJ2xpOmZpcnN0LWNoaWxkJykuZGF0YSgndmFsJykgfHwgJyc7XHJcbiAgICAgICAgICAgICQodGhpcykudmFsKGRhdGEpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmRhdGEoJ3ZhbCcsIGRhdGEpO1xyXG4gICAgICAgICAgICB1bC5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy9saeWFg+e0oOaCrOa1ruiOt+W+l+eEpueCuVxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWVudGVyICcsICcuZ2V0LW5hbWUgbGknLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBjb21wYW55ID0gZnVuY3Rpb24gKCkge1xyXG4vL+iOt+WPluacuuWcuuWQjeensFxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsICdpbnB1dC5nZXQtY29tcGFueScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9ICQodGhpcylcclxuICAgICAgICAgICAgICAgICwgdWwgPSBfdGhpcy5zaWJsaW5ncygnLmdldC1uYW1lJyk7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHVsLmZpbmQoJy5hY3RpdmUnKS5pbmRleCgpIHx8IDBcclxuICAgICAgICAgICAgICAgICwgbGVuID0gdWwuY2hpbGRyZW4oKS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHsvL+Wbnui9pumUrlxyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB1bC5jaGlsZHJlbignLmFjdGl2ZScpLmRhdGEoJ3ZhbCcpIHx8IHVsLmZpbmQoJ2xpOmZpcnN0LWNoaWxkJykuZGF0YSgndmFsJykgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbChkYXRhKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZGF0YSgndmFsJywgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB1bC5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDM4KSB7Ly/kuIrplK5cclxuICAgICAgICAgICAgICAgIGluZGV4ID0gaW5kZXggPT0gMCA/IGxlbiAtIDEgOiBpbmRleCAtIDE7XHJcbiAgICAgICAgICAgICAgICB1bC5maW5kKCdsaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHVsLmZpbmQoJ2xpJykuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gNDApIHsvL+S4i+mUrlxyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCA9PSBsZW4gLSAxID8gMCA6IGluZGV4ICsgMTtcclxuICAgICAgICAgICAgICAgIHVsLmZpbmQoJ2xpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdWwuZmluZCgnbGknKS5lcShpbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9IGVsc2Ugey8v5q2j5bi46L6T5YWlXHJcbiAgICAgICAgICAgICAgICBEYXRhLmdldENvZGUoe2tleTogX3RoaXMudmFsKCl9LCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNCb2R5JyBpbiBqc29uICYmIGpzb24ucmVzQm9keSBpbnN0YW5jZW9mIEFycmF5ICYmIGpzb24ucmVzQm9keS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBib2R5ID0ganNvbi5yZXNCb2R5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBiIGluIGJvZHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChib2R5Lmhhc093blByb3BlcnR5KGIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBib2R5W2JdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnPGxpIGRhdGEtdmFsPVwiJyArIGQuYWlybGluZUNvZGUgKyAnXCIgY2xhc3M9XCInICsgKGIgPT0gMCA/ICdhY3RpdmUnIDogJycpICsgJ1wiPicgKyBkLmNvbXBhbnlOYW1lICsgJzwvbGk+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5odG1sKHN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vaW5wdXTlpLHljrvnhKbngrlcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignYmx1cicsICdpbnB1dC5nZXQtY29tcGFueScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHVsID0gJCh0aGlzKS5zaWJsaW5ncygnLmdldC1uYW1lJyk7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gdWwuY2hpbGRyZW4oJy5hY3RpdmUnKS5kYXRhKCd2YWwnKSB8fCB1bC5maW5kKCdsaTpmaXJzdC1jaGlsZCcpLmRhdGEoJ3ZhbCcpIHx8ICcnO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnZhbChkYXRhKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5kYXRhKCd2YWwnLCBkYXRhKTtcclxuICAgICAgICAgICAgdWwuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBjdXN0b21lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+iOt+WPluWuouaIt+WQjeensFxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsICcjaW5mby1tZW1iZXInLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSAkKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAsIHVsID0gX3RoaXMuc2libGluZ3MoJy5nZXQtbmFtZScpO1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB1bC5maW5kKCcuYWN0aXZlJykuaW5kZXgoKSB8fCAwXHJcbiAgICAgICAgICAgICAgICAsIGxlbiA9IHVsLmNoaWxkcmVuKCkubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7Ly/lm57ovabplK5cclxuICAgICAgICAgICAgICAgIHZhciBtSUQgPSB1bC5jaGlsZHJlbignLmFjdGl2ZScpLmRhdGEoJ3ZhbCcpIHx8IHVsLmZpbmQoJ2xpOmZpcnN0LWNoaWxkJykuZGF0YSgndmFsJykgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHVsLmNoaWxkcmVuKCcuYWN0aXZlJykuaHRtbCgpIHx8IHVsLmZpbmQoJ2xpOmZpcnN0LWNoaWxkJykuaHRtbCgpIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgbWVtYmVySWQgPSBtSUQ7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbChkYXRhKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZGF0YSgndmFsJywgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB1bC5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDM4KSB7Ly/kuIrplK5cclxuICAgICAgICAgICAgICAgIGluZGV4ID0gaW5kZXggPT0gMCA/IGxlbiAtIDEgOiBpbmRleCAtIDE7XHJcbiAgICAgICAgICAgICAgICB1bC5maW5kKCdsaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHVsLmZpbmQoJ2xpJykuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gNDApIHsvL+S4i+mUrlxyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCA9PSBsZW4gLSAxID8gMCA6IGluZGV4ICsgMTtcclxuICAgICAgICAgICAgICAgIHVsLmZpbmQoJ2xpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdWwuZmluZCgnbGknKS5lcShpbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9IGVsc2Ugey8v5q2j5bi46L6T5YWlXHJcbiAgICAgICAgICAgICAgICBEYXRhLmN1c3RvbWVyKHtcImFnZW50Q29tcGFueUlkXCI6IDEwMDAwLCBcImtleXdvcmRcIjogJCh0aGlzKS52YWwoKX0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0JvZHknIGluIGpzb24gJiYganNvbi5yZXNCb2R5IGluc3RhbmNlb2YgQXJyYXkgJiYganNvbi5yZXNCb2R5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGJvZHkgPSBqc29uLnJlc0JvZHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGIgaW4gYm9keSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJvZHkuaGFzT3duUHJvcGVydHkoYikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGJvZHlbYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICc8bGkgZGF0YS12YWw9XCInICsgZC5jb21wYW55SWQgKyAnXCIgY2xhc3M9XCInICsgKGIgPT0gMCA/ICdhY3RpdmUnIDogJycpICsgJ1wiPicgKyBkLmNvbXBhbnlOYW1lICsgJzwvbGk+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5odG1sKHN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vaW5wdXTlpLHljrvnhKbngrlcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignYmx1cicsICcjaW5mby1tZW1iZXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB1bCA9ICQodGhpcykuc2libGluZ3MoJy5nZXQtbmFtZScpO1xyXG4gICAgICAgICAgICB2YXIgbUlEID0gdWwuY2hpbGRyZW4oJy5hY3RpdmUnKS5kYXRhKCd2YWwnKSB8fCB1bC5maW5kKCdsaTpmaXJzdC1jaGlsZCcpLmRhdGEoJ3ZhbCcpIHx8ICcnO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHVsLmNoaWxkcmVuKCcuYWN0aXZlJykuaHRtbCgpIHx8IHVsLmZpbmQoJ2xpOmZpcnN0LWNoaWxkJykuaHRtbCgpIHx8ICcnO1xyXG4gICAgICAgICAgICBtZW1iZXJJZCA9IG1JRDtcclxuICAgICAgICAgICAgJCh0aGlzKS52YWwoZGF0YSk7XHJcbiAgICAgICAgICAgICQodGhpcykuZGF0YSgndmFsJywgZGF0YSk7XHJcbiAgICAgICAgICAgIHVsLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgb2Zmc2V0OiB1cmwuZ2V0KCdvZmZzZXQnKSB8fCAwLFxyXG4gICAgICAgICAgICBsaW1pdDogdXJsLmdldCgnbGltaXQnKSB8fCAxMCxcclxuICAgICAgICAgICAgXCJkZXB0Q29kZVwiOiAkKCcjc3RhcnQnKS52YWwoKSxcclxuICAgICAgICAgICAgXCJkZXN0Q29kZVwiOiAkKCcjZW5kJykudmFsKCksXHJcbiAgICAgICAgICAgIFwibnVtYmVyXCI6ICQoJyNvcmRlci1udW0nKS52YWwoKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgRGF0YS5saXN0KGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgIERvbS5saXN0KGpzb24sIGRhdGEpO1xyXG4gICAgICAgICAgICB2YXIgZHQgPSB7fTtcclxuICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDAgJiYganNvbi5yZXNCb2R5ICYmIGpzb24ucmVzQm9keS5zTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IGpzb24ucmVzQm9keS5zTGlzdDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGwgaW4gbGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaXN0Lmhhc093blByb3BlcnR5KGwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gbGlzdFtsXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHRbZC5vcmRlci5vcmRlcklkXSA9IGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBlbmRpbmdMaXN0ID0gZHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHN1Ym1pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2FkZC1kYXRhJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSAkKHRoaXMpLCBhcnIgPSBbXTtcclxuICAgICAgICAgICAgaWYgKCQoJyNmaXJzdC1kYXRlJykudmFsKCkpIHtcclxuICAgICAgICAgICAgICAgICQoJy5hZGQtZGF0YS1wYXJ0JykuZmluZCgnLnR0ci5kYXRhJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3RvcmFnZVRpbWVcIjogJCgnI2ZpcnN0LWRhdGUnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJwYWNrYWdlVHlwZVwiOiAkKHRoaXMpLmZpbmQoJy5hLXBhY2thZ2UnKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJwYWNrYWdlTWFya1wiOiAnc3RyaW5nJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdG9yYWdlQ291bnRcIjogJCh0aGlzKS5maW5kKCcuYS1udW0nKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdG9yYWdlV2VpZ2h0XCI6ICQodGhpcykuZmluZCgnLmEtd2VpJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3RvcmFnZVNpemVcIjogJCh0aGlzKS5maW5kKCcuYS1zaXplJykuaHRtbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImRhbWFnZUNvdW50XCI6ICQodGhpcykuZmluZCgnLmEtcHMnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkYW1wQ291bnRcIjogJCh0aGlzKS5maW5kKCcuYS1zYycpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRyYW5zZm9ybUNvdW50XCI6ICQodGhpcykuZmluZCgnLmEtYngnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJvdGhlckNvdW50XCI6ICQodGhpcykuZmluZCgnLmEtcXQnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdG9yYWdlUmVtYXJrXCI6ICQodGhpcykuZmluZCgnLmEtYnonKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdG9yYWdlTGVuZ3RoXCI6ICQodGhpcykuZmluZCgnLmEtbG9uZycpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0b3JhZ2VXaWR0aFwiOiAkKHRoaXMpLmZpbmQoJy5hLXdpZHRoJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3RvcmFnZUhlaWdodFwiOiAkKHRoaXMpLmZpbmQoJy5hLWhlaWdodCcpLnZhbCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJJZDogX3RoaXMuZGF0YSgnaWQnKVxyXG4gICAgICAgICAgICAgICAgICAgICwgZW50cnlMaXN0OiBhcnJcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBEYXRhLmFkZERhdGEoZGF0YSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5re75Yqg5oiQ5Yqf77yBJywgbnVsbCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnIHx8ICfmt7vliqDlpLHotKXvvIzor7fph43or5XvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfor7flvZXlhaXov5vku5Pml7bpl7TvvIEnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjZW5zdXJlLWRhdGEnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgb3JkZXJJZDogJCh0aGlzKS5kYXRhKCdpZCcpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIERhdGEuZW5zdXJlRGF0YShkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn56Gu6K6k5oiQ5Yqf77yBJywgbnVsbCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+ehruiupOWksei0pe+8gScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2JnLWVuc3VyZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBvcmRlcklkOiAkKHRoaXMpLmRhdGEoJ2lkJylcclxuICAgICAgICAgICAgICAgICwgc3RhdGU6ICQoJyNjLWpjenQnKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBEYXRhLmJnVXBkYXRlKGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnIHx8ICfnoa7orqTmiJDlip/vvIEnLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn56Gu6K6k5aSx6LSl77yBJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjYWRkLWVuc3VyZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBhc3MgPSB0cnVlO1xyXG4gICAgICAgICAgICB2YXIgaWQgPSAkKCcuYWRkLXBhcnQnKS5maW5kKCdpbnB1dFtuYW1lPVwiaS1zZ1wiXTpjaGVja2VkJykuZGF0YSgnaWQnKSB8fCBudWxsO1xyXG4gICAgICAgICAgICBpZiAoIWlkKSB7XHJcbiAgICAgICAgICAgICAgICBwYXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLmEtcmVxdWlyZScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKHRoaXMpLnZhbCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHBhc3MpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiY29tcGFueUlkXCI6IG1lbWJlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYWdlbnRDb21wYW55SWRcIjogMTAwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJmaXhlZFByaWNlXCI6ICQoJyNnZGRqJykucHJvcCgnY2hlY2tlZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwib3JkZXJQcmljZVwiOiAkKCcjc2VuZC1wcmljZScpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYWlyd2F5SWRcIjogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJmbGlnaHREYXRlXCI6ICQoJyNhZGQtZGF0ZScpLnZhbCgpICsgJyAwMDowMDowMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ3YXJlaG91c2VJZFwiOiAkKCcjd2FyZWhvdXNlJykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjYXJnb05hbWVcIjogJCgnI2luZm8tbmFtZScpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2FyZ29UeXBlXCI6ICQoJyNpbmZvLXR5cGUnKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcImNhcmdvQ291bnRcIjogJCgnI2luZm8tbnVtJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjYXJnb1dlaWdodFwiOiAkKCcjaW5mby13ZWknKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcImNhcmdvU2l6ZVwiOiAkKCcjaW5mby1zaXplJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJidWxreVJhdGVcIjogJCgnI2ZwYmwnKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcImN1c3RvbURlY2xhcmVcIjogJCgnI2luZm8tY3VzdG9tJykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKCkgPT0gMVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIERhdGEub3JkZXIoZGF0YSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5re75Yqg5oiQ5Yqf77yBJywgbnVsbCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnIHx8ICfmt7vliqDlpLHotKXvvIzor7fph43or5XvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjcmVmdXNlLWVuc3VyZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGlkID0gJCgnaW5wdXRbbmFtZT1cInJlYXNvblwiXTpjaGVja2VkJykucHJvcCgnaWQnKTtcclxuICAgICAgICAgICAgdmFyIHR4dCA9ICcnO1xyXG4gICAgICAgICAgICBpZiAoaWQgPT0gJ3I1Jykge1xyXG4gICAgICAgICAgICAgICAgdHh0ID0gJCgnI3RleHQtcjQnKS52YWwoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHR4dCA9ICQoJyMnICsgaWQpLnNpYmxpbmdzKCdsYWJlbCcpLmh0bWwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFwiYWdlbnRDb21wYW55SWRcIjogMTAwMDAsXHJcbiAgICAgICAgICAgICAgICBcInNlcnZpY2VGZWVcIjogJCgnI3I2JykucHJvcCgnY2hlY2tlZCcpLFxyXG4gICAgICAgICAgICAgICAgXCJjb21tZW50XCI6IHR4dCxcclxuICAgICAgICAgICAgICAgIFwib3JkZXJJZFwiOiBjYW5jZWxJZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBEYXRhLmNhbmNlbChkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5Y+W5raI5oiQ5Yqf77yBJywgbnVsbCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+WPlua2iOWksei0pe+8jOivt+mHjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3pkLWVuc3VyZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGFyciA9IFtdLCB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgICQoJy56ZC10YicpLmZpbmQoJ3RyLmRhdGEnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiaXRlbU5hbWVcIjogJCh0aGlzKS5maW5kKCcuZnltdCcpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiaXRlbVByaWNlXCI6IHBhcnNlRmxvYXQoJCh0aGlzKS5maW5kKCcuaXAtZGonKS52YWwoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJpdGVtVW5pdFwiOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiaXRlbUNvdW50XCI6IHBhcnNlRmxvYXQoJCh0aGlzKS5maW5kKCcuaXAtemwnKS52YWwoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJpdGVtVG90YWxcIjogcGFyc2VGbG9hdCgkKHRoaXMpLmZpbmQoJy50dHAnKS52YWwoKSlcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBhcnIucHVzaChkYXRhKTtcclxuICAgICAgICAgICAgICAgIHRvdGFsICs9IHBhcnNlRmxvYXQoJCh0aGlzKS5maW5kKCcudHRwJykudmFsKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogc3RvcGdhcC5vcmRlci5vcmRlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic2VydmljZUZlZUxpc3RcIjogYXJyLFxyXG4gICAgICAgICAgICAgICAgICAgIFwib3JkZXJDaGFyZ2luZ1RvdGFsXCI6IHRvdGFsLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2hhcmdlU3RhdGVcIjogMFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIERhdGEuY3JlYXRlQ2hhcmdlKGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+WItuWNleaIkOWKn++8gScsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5Yi25Y2V5aSx6LSl77yM6K+36YeN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2pkLWVuc3VyZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRwID0gJCh0aGlzKS5kYXRhKCd0cCcpO1xyXG4gICAgICAgICAgICB2YXIgYWlkID0gJCh0aGlzKS5kYXRhKCdhaWQnKSAhPSAwID8gJCh0aGlzKS5kYXRhKCdhaWQnKSA6ICgkKCcuamQtcGFydCcpLmZpbmQoJ2lucHV0W25hbWU9XCJpLXNnXCJdOmNoZWNrZWQnKS5kYXRhKCdpZCcpIHx8IG51bGwpO1xyXG4gICAgICAgICAgICBpZiAoYWlkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogamRJZCxcclxuICAgICAgICAgICAgICAgICAgICBcImFpcndheUlkXCI6IGFpZCxcclxuICAgICAgICAgICAgICAgICAgICBcImZpeGVkUHJpY2VcIjogJCgnI2ZpeGVkLXByaWNlJykucHJvcCgnY2hlY2tlZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwib3JkZXJQcmljZVwiOiAkKCcjamQtcHJpY2UnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcIndhcmVob3VzZUlkXCI6ICQoJyN6ZGNrJykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhdXRvRW50cnlOdW1cIjogJCgnI2ZpeGVkLWpjYmgnKS5wcm9wKCdjaGVja2VkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJlbnRyeU51bVwiOiAkKCcjamQtamNiaCcpLnZhbCgpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgRGF0YS5jb25maXJtKGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+aOpeWNleaIkOWKn++8gScsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5o6l5Y2V5aSx6LSlLOivt+mHjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+ivt+mAieaLqeS4gOadoeiIque6v++8gScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNnbC1lbnN1cmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ3RwJykgPT0gMikge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1Bhc3MgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJCgnLnlkLWlwJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkKHRoaXMpLnZhbCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UGFzcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmICghJCgnI3NhdmUteWRoJykucHJvcCgnY2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEvXlxcZHsxMX0kLy50ZXN0KCQoJyN5ZC15ZGgnKS52YWwoKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+i/kOWNleWPt+W/hemhu+S4ujEx5L2N5pWw5a2X77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3UGFzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJvb2tpbmdDb3VudFwiOiAkKCcjeWQtYycpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImF1dG9Bc3NpZ25cIjogJCgnI3NhdmUteWRoJykucHJvcCgnY2hlY2tlZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJpbGxOdW1cIjogJCgnI3lkLXlkaCcpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJvb2tpbmdTaXplXCI6ICQoJyN5ZC1zJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYm9va2luZ1dlaWdodFwiOiAkKCcjeWQtdycpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogeWRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJiaWxsSWRcIjogMFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgRGF0YS55ZE5ldyhkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+WFs+iBlOaIkOWKn++8gScsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cgfHwgJ+WFs+iBlOWksei0pSzor7fph43or5XvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy55ZC1ib2R5JykuZmluZCgnaW5wdXRbbmFtZT1cInMteWRcIl06Y2hlY2tlZCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwib3JkZXJJZFwiOiB5ZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJpbGxJZFwiOiAkKCcueWQtYm9keScpLmZpbmQoJ2lucHV0W25hbWU9XCJzLXlkXCJdOmNoZWNrZWQnKS5kYXRhKCdpZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBEYXRhLnlkRXhpc3QoZHQsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5YWz6IGU5oiQ5Yqf77yBJywgbnVsbCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5YWz6IGU5aSx6LSlLOivt+mHjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfor7fpgInmi6nkuIDmnaHoiKrnur/lhbPogZTvvIEnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciB3YXJlaG91c2VJbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIERhdGEud2FyZWhvdXNlKGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgIHZhciBzdHIgPSAnJztcclxuICAgICAgICAgICAgdmFyIGJvZHkgPSBqc29uLnJlc0JvZHkgfHwge307XHJcbiAgICAgICAgICAgIHZhciBvID0gJ29yZGVyJyBpbiBib2R5ICYmIGJvZHkub3JkZXIgfHwge307XHJcbiAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwICYmICdzTGlzdCcgaW4ganNvbi5yZXNCb2R5ICYmIGpzb24ucmVzQm9keS5zTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IGpzb24ucmVzQm9keS5zTGlzdDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGEgaW4gYXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyci5oYXNPd25Qcm9wZXJ0eShhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGFyclthXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIGQud2FyZWhvdXNlSWQgKyAnXCI+JyArIGQud2FyZWhvdXNlTmFtZSArICc8L29wdGlvbj4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQoJyN3YXJlaG91c2UnKS5odG1sKHN0cik7XHJcbiAgICAgICAgICAgICAgICAkKCcjemRjaycpLmh0bWwoc3RyKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgcHJpY2VJbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIERhdGEucHJpY2VMaXN0KGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwICYmIGpzb24ucmVzQm9keSAmJiBqc29uLnJlc0JvZHkuc0xpc3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcnIgPSBqc29uLnJlc0JvZHkuc0xpc3Q7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBhIGluIGFycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcnIuaGFzT3duUHJvcGVydHkoYSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBhcnJbYV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLmV4cGVuc2VEZWZhdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlIGluIGQuZXhwZW5zZVRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQuZXhwZW5zZVRlbXBsYXRlLmhhc093blByb3BlcnR5KGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkdCA9IGQuZXhwZW5zZVRlbXBsYXRlW2VdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UHJpY2VbZHQuaXRlbU5hbWVdID0gZHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgY2hhbmdlVHlwZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2dkZGonLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJyNzZW5kLXByaWNlJykucHJvcCgncmVhZG9ubHknLCAhJCh0aGlzKS5wcm9wKCdjaGVja2VkJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciB6ZFRhYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZnltdC5jaG9vc2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJy5zZS1wYXJ0JykuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLnNlLXBhcnQnKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuc2UtcGFydCBsaScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRqID0gcGFyc2VGbG9hdCgkKHRoaXMpLmRhdGEoJ2RqJykpXHJcbiAgICAgICAgICAgICAgICAsIHpsID0gcGFyc2VGbG9hdCgkKHRoaXMpLmRhdGEoJ3psJykpXHJcbiAgICAgICAgICAgICAgICAsIGVsZSA9ICQodGhpcykucGFyZW50cygndHIuZGF0YScpO1xyXG4gICAgICAgICAgICBlbGUuZmluZCgnLmlwLWRqJykudmFsKGRqKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5pcC16bCcpLnZhbCh6bCk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcudHRwJykudmFsKGRqICogemwpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ3VsJykuc2libGluZ3MoJ2lucHV0JykudmFsKCQodGhpcykuaHRtbCgpKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCd1bCcpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcuZnltdCcpLnJlbW92ZUNsYXNzKCdjaG9vc2UnKTtcclxuICAgICAgICAgICAgZWxlLmZpbmQoJy5zZS1wYXJ0JykucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQoZS50YXJnZXQpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5meW10LmNob29zZSwuc2UtcGFydCBsaScpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2UtcGFydCcpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbigna2V5dXAnLCAnLmlwLXpsLC5pcC1kaicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS52YWwoJCh0aGlzKS52YWwoKS5yZXBsYWNlKC9bXlxcZC5dL2csIFwiXCIpKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdibHVyJywgJy5pcC16bCwuaXAtZGonLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gJCh0aGlzKS52YWwoKSB8fCAwO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnZhbChwYXJzZUZsb2F0KHYpKTtcclxuICAgICAgICAgICAgdmFyIGVsZSA9ICQodGhpcykucGFyZW50cygndHIuZGF0YScpO1xyXG4gICAgICAgICAgICB2YXIgZGogPSBwYXJzZUZsb2F0KGVsZS5maW5kKCcuaXAtZGonKS52YWwoKSlcclxuICAgICAgICAgICAgICAgICwgemwgPSBwYXJzZUZsb2F0KGVsZS5maW5kKCcuaXAtemwnKS52YWwoKSk7XHJcbiAgICAgICAgICAgIGVsZS5maW5kKCcudHRwJykudmFsKGRqICogemwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZ2x5cGhpY29uLXJlbW92ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCd0ci5kYXRhJykucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5nbHlwaGljb24tcGx1cycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGV4aXN0ID0gW10sIGFyciA9IFtdLCBzdHIgPSAnJywgdWwgPSAnJztcclxuICAgICAgICAgICAgLy/ojrflj5blt7LlrZjlnKjnmoTpobnnm65cclxuICAgICAgICAgICAgJCgnLnpkLXRiJykuZmluZCgnLmZ5bXQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGV4aXN0LnB1c2goJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvL+iuoeeul+WPr+a3u+WKoOeahOmhueebrlxyXG4gICAgICAgICAgICBmb3IgKHZhciBkIGluIGRlZmF1bHRQcmljZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRQcmljZS5oYXNPd25Qcm9wZXJ0eShkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChleGlzdC5pbmRleE9mKGQpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChkZWZhdWx0UHJpY2VbZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYXJyLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGEgaW4gYXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyci5oYXNPd25Qcm9wZXJ0eShhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2cgPSBhcnJbYV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsICs9ICc8bGkgZGF0YS1kaj1cIicgKyBzZy5pdGVtUHJpY2UgKyAnXCIgZGF0YS16bD1cIicgKyBzZy5pdGVtVW5pdCArICdcIj4nICsgc2cuaXRlbU5hbWUgKyAnPC9saT4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHN0ciArPSAnPHRyIGNsYXNzPVwiZGF0YVwiPiA8dGQ+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmeW10IGNob29zZVwiIHJlYWRvbmx5IHZhbHVlPVwi6K+36YCJ5oup6LS555So5ZCN56ewXCIvPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAnPHVsIGNsYXNzPVwic2UtcGFydCBkcC1uXCI+JyArIHVsICsgJzwvdWw+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L3RkPiA8dGQ+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJpcC1kalwiIHZhbHVlPVwiMFwiLz4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC90ZD4gPHRkPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaXAtemxcIiB2YWx1ZT1cIjBcIi8+PC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzx0ZD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInR0cFwiIHJlYWRvbmx5IHZhbHVlPVwiMFwiLz48L3RkPiA8dGQ+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXJlbW92ZVwiPjwvc3Bhbj48L3RkPiA8L3RyPic7XHJcbiAgICAgICAgICAgICAgICAkKCcuemQtdGInKS5maW5kKCcudHItYWRkJykuYmVmb3JlKHN0cik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgc2VhcmNoTGluZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5uZXJJbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGFzcyA9IHRydWU7XHJcbiAgICAgICAgICAgICQoJy5zLXJlcXVpcmUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghJCh0aGlzKS52YWwoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICBwYXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChwYXNzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBcImRlcHRDb2RlXCI6ICQoJyNhZGQtc3RhcnQnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcImRlc3RDb2RlXCI6ICQoJyNhZGQtZW5kJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJmbGlnaHREYXRlXCI6IG5ldyBEYXRlKCQoJyNhZGQtZGF0ZScpLnZhbCgpKSxcclxuICAgICAgICAgICAgICAgICAgICBcImFpckNvbXBhbnlDb2RlXCI6ICQoJyNhZGQtY29tJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0cmFuc0NvdW50XCI6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJvZmZzZXRcIjogbW9kYWxQYWdlLm9mZnNldCB8fCAwLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibGltaXRcIjogbW9kYWxQYWdlLmxpbWl0IHx8IDVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBEYXRhLnNlYXJjaChkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIERvbS5pbm5lckxpc3QoanNvbiwgZGF0YSlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgY1ByaWNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGFzcyA9IHRydWVcclxuICAgICAgICAgICAgICAgICwgaWQgPSAkKCdpbnB1dFtuYW1lPVwiaS1zZ1wiXTpjaGVja2VkJykuZGF0YSgnaWQnKSB8fCBudWxsO1xyXG4gICAgICAgICAgICBpZiAoIWlkKSB7XHJcbiAgICAgICAgICAgICAgICBwYXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLnAtcmVxdWlyZScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKHRoaXMpLnZhbCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHBhc3MpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiY2FyZ29Db3VudFwiOiAkKCcjaW5mby1udW0nKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcImNhcmdvU2l6ZVwiOiAkKCcjaW5mby1zaXplJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjYXJnb1dlaWdodFwiOiAkKCcjaW5mby13ZWknKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcImFpcndheUlkXCI6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY3VzdG9tRGVjbGFyZVwiOiAkKCcjaW5mby1jdXN0b20nKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKSA9PSAxXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgRGF0YS5jYWxjdWxhdGUoZGF0YSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCAmJiBqc29uLnJlc0JvZHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBqc29uLnJlc0JvZHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ganNvbi5yZXNCb2R5LmFpcndheUZlZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnlnLXByaWNlJykuaHRtbChkLnRvdGFsRmVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnJpZ2h0LXByaWNlJykuZmluZCgndGQnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jLScgKyBkYXRhLmNoYXJnaW5nTGV2ZWwpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NlbmQtcHJpY2UnKS52YWwoZGF0YS5jaGFyZ2luZ1VuaXRQcmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jLXByaWNlJykuZmluZCgnLmMtNDUnKS5odG1sKGRhdGFbJ3BvbGljeSddWydwb2xpY3knXVsnNDUnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jLXByaWNlJykuZmluZCgnLmMtMTAwJykuaHRtbChkYXRhWydwb2xpY3knXVsncG9saWN5J11bJzEwMCddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmMtcHJpY2UnKS5maW5kKCcuYy0zMDAnKS5odG1sKGRhdGFbJ3BvbGljeSddWydwb2xpY3knXVsnMzAwJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYy1wcmljZScpLmZpbmQoJy5jLTUwMCcpLmh0bWwoZGF0YVsncG9saWN5J11bJ3BvbGljeSddWyc1MDAnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jLXByaWNlJykuZmluZCgnLmMtMTAwMCcpLmh0bWwoZGF0YVsncG9saWN5J11bJ3BvbGljeSddWycxMDAwJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2lubmVyLXNlYXJjaCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaW5uZXJJbml0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5hZGQtcGFydCAucGFnZXMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG1vZGFsUGFnZS5vZmZzZXQgPSAkKHRoaXMpLmRhdGEoJ29mZnNldCcpO1xyXG4gICAgICAgICAgICBpbm5lckluaXQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignYmx1cicsICcucC1yZXF1aXJlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjUHJpY2UoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJyNpbmZvLWN1c3RvbScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY1ByaWNlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ2lucHV0W25hbWU9XCJpLXNnXCJdJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjUHJpY2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgamRJbml0ID0gZnVuY3Rpb24gKGVsZSkge1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICBcImRlcHRDb2RlXCI6IGVsZS5maW5kKCcucXNnJykuaHRtbCgpLFxyXG4gICAgICAgICAgICBcImRlc3RDb2RlXCI6IGVsZS5maW5kKCcubWRnJykuaHRtbCgpLFxyXG4gICAgICAgICAgICBcImZsaWdodERhdGVcIjogbmV3IERhdGUoZWxlLmZpbmQoJy5xZnNqJykuaHRtbCgpKSxcclxuICAgICAgICAgICAgXCJhaXJDb21wYW55Q29kZVwiOiBlbGUuZmluZCgnLmhrZ3MnKS5odG1sKCksXHJcbiAgICAgICAgICAgIFwidHJhbnNDb3VudFwiOiAxLFxyXG4gICAgICAgICAgICBcIm9mZnNldFwiOiBtb2RhbFBhZ2Uub2Zmc2V0IHx8IDAsXHJcbiAgICAgICAgICAgIFwibGltaXRcIjogbW9kYWxQYWdlLmxpbWl0IHx8IDVcclxuICAgICAgICB9O1xyXG4gICAgICAgIERhdGEuc2VhcmNoKGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgIERvbS5pbm5lckxpc3QoanNvbiwgZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGdldFRvdGFsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBqcyA9IDAsIGMgPSAwLCBrID0gMCwgZyA9IDAsIHRqID0gMCwgemwgPSAwLCBwcyA9IDAsIHNjID0gMCwgYnggPSAwLCBxdCA9IDA7XHJcbiAgICAgICAgdmFyIGVsZSA9ICQoJy5hZGQtZGF0YS1wYXJ0Jyk7XHJcbiAgICAgICAgZWxlLmZpbmQoJy5hLW51bScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBqcyArPSBwYXJzZUludCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlbGUuZmluZCgnLmEtc2l6ZScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aiArPSBwYXJzZUZsb2F0KCQodGhpcykuaHRtbCgpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlbGUuZmluZCgnLmEtd2VpJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHpsICs9IHBhcnNlRmxvYXQoJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZWxlLmZpbmQoJy5hLXBzJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHBzICs9IHBhcnNlSW50KCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVsZS5maW5kKCcuYS1zYycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzYyArPSBwYXJzZUludCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlbGUuZmluZCgnLmEtYngnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYnggKz0gcGFyc2VJbnQoJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZWxlLmZpbmQoJy5hLXF0JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHF0ICs9IHBhcnNlSW50KCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVsZS5maW5kKCcudC1qcycpLmh0bWwoanMpLmVuZCgpXHJcbiAgICAgICAgICAgIC5maW5kKCcudC1zJykuaHRtbCh0aikuZW5kKClcclxuICAgICAgICAgICAgLmZpbmQoJy50LXcnKS5odG1sKHpsKS5lbmQoKVxyXG4gICAgICAgICAgICAuZmluZCgnLnQtcHMnKS5odG1sKHBzKS5lbmQoKVxyXG4gICAgICAgICAgICAuZmluZCgnLnQtc2MnKS5odG1sKHNjKS5lbmQoKVxyXG4gICAgICAgICAgICAuZmluZCgnLnQtYngnKS5odG1sKGJ4KS5lbmQoKVxyXG4gICAgICAgICAgICAuZmluZCgnLnQtcXQnKS5odG1sKHF0KS5lbmQoKTtcclxuICAgIH07XHJcbiAgICB2YXIgb3BJbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIERhdGEub3BMaXN0KGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSAnJztcclxuICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDAgJiYganNvbi5yZXNCb2R5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcnIgPSBqc29uLnJlc0JvZHkgfHwgW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IGFyci5sZW5ndGg7IGErKykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbiArPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyBhcnJbYV0ubWVtYmVySWQgKyAnXCI+JyArIGFyclthXS5uYW1lICsgJzwvb3B0aW9uPidcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQoJyNjenknKS5odG1sKG9wdGlvbik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24gPSAn5pqC5peg5pON5L2c5ZGY77yM6K+35re75Yqg77yBJztcclxuICAgICAgICAgICAgICAgICQoJy50cmFuc2Zlci1wYXJ0JykuZmluZCgnLmRwLXRiJykuaHRtbChvcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhaXJwb3J0cygpO1xyXG4gICAgICAgIGxpc3RlbmVyKCk7XHJcbiAgICAgICAgaW5pdCgpO1xyXG4gICAgICAgIGNvbXBhbnkoKTtcclxuICAgICAgICBzdWJtaXQoKTtcclxuICAgICAgICB3YXJlaG91c2VJbml0KCk7XHJcbiAgICAgICAgY2hhbmdlVHlwZSgpO1xyXG4gICAgICAgIHpkVGFibGUoKTtcclxuICAgICAgICBwcmljZUluaXQoKTtcclxuICAgICAgICBzZWFyY2hMaW5lKCk7XHJcbiAgICAgICAgY3VzdG9tZXIoKTtcclxuICAgICAgICBvcEluaXQoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJ1bjogcnVuXHJcbiAgICB9XHJcbn0oKSk7XHJcbm1vZHVsZS5leHBvcnRzLkxpc3RlbmVyID0gTGlzdGVuZXI7Il19
