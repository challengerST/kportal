(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var head = function () {
    //时间格式化
    Date.prototype.Format = function (fmt) { //author: Jeremyyy
        var o = {
            "M+": this.getMonth() + 1, //月份
            "d+": this.getDate(), //日
            "h+": this.getHours(), //小时
            "m+": this.getMinutes(), //分
            "s+": this.getSeconds(), //秒
            "q+": Math.floor((this.getMonth() + 3) / 3), //季度
            "S": this.getMilliseconds() //毫秒
        };
        if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        for (var k in o)
            if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
        return fmt;
    };
    //返回顶部
    $(document).on('click', '.back-top', function () {
        $("html,body").animate({scrollTop:0},100);
        return false;
    });
    $(document).on('mouseenter', '.vip-part', function () {
        $(this).children('.vip-select').stop(true);
        $(this).children('.vip-select').slideDown(100);
        return false;
    });
    $(document).on('mouseleave', '.vip-part', function () {
        $(this).children('.vip-select').stop(true);
        $(this).children('.vip-select').slideUp(100);
        return false;
    });
    $(document).on('mouseenter', '.wechat-logo', function () {
        $(this).children('.big-wechat').fadeIn(200);
        return false;
    });
    $(document).on('mouseleave', '.wechat-logo', function () {
        $(this).children('.big-wechat').fadeOut(200);
        return false;
    });
};
module.exports.head = head;
},{}],2:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var listener = (function () {
    var run = function () {
        //头部点击事件
        require('./head').head();
    };
    return {
        run: run
    }
}());
module.exports = listener;
},{"./head":1}],3:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/24.
 */
"use strict";
var Data = (function () {
    var airport = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/airline/airport'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var topF = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/news/topF'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    return {
        airport: airport
        , topF: topF
    }
}());
module.exports.Data = Data;
},{}],4:[function(require,module,exports){
/**
 * Created by Auser on 2016/11/29.
 */
"use strict";
var Dom = (function () {
  var renderLi = function (json, ele, sel) {
    var str = '';
    for (var j in json) {
      if (json.hasOwnProperty(j)) {
        var d = json[j]
          , innerStr
          , value;
        if (sel == 1) {
          innerStr = d.displayName;
          value = d.airportCode;
        } else {
          innerStr = (d.Name ? d.Name : '') + (d.Name ? '-' : '') + d.Code;
        }
        str += '<li data-val="' + value + '">' + innerStr + '</li>'
      }
    }
    ele.html(str);
  };
  var renderNews = function (data, type) {
    var str = '';
    if (data && 'resCode' in data && data.resCode == 0) {
      if ('resBody' in data && data.resBody && 'sList' in data.resBody && data.resBody.sList instanceof Array && data.resBody.sList.length > 0) {
        var body = data.resBody.sList;
        for (var b in body) {
          if (body.hasOwnProperty(b)) {
            var d = body[b];
            var sp = type == 10 ? new Date(d.modifyDt).Format('yyyy-MM-dd') : 0;//fixme 数据暂无阅读量  数据库增加字段
            var cl = type == 10 ? '' : 'qa-img';
            str += '<p class="sg-new"><a href="home/news/detail?id=' + d.Id + '">' + d.newsTitle + '</a><span class="' + cl + '">' + sp + '</span></p>'
          }
        }
      } else {
        str = type == 10 ? '<div class="wrong">暂无新闻！</div>' :'<div class="wrong">暂无常见问题！</div>' ;
      }
    } else {
      str = '<div class="wrong">获取出错，<a href="">请重试</a>！</div>';
    }
    $(type == 10 ? '.dynamic-body' : '.common-body').html(str);
  };
  return {
    renderLi: renderLi
    , renderNews: renderNews
  }
}());
module.exports.Dom = Dom;
},{}],5:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
require('../general').run();

require('./listener').run();

},{"../general":2,"./listener":6}],6:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var Listener = (function () {
    var Data = require('./data').Data
        , Dom = require('./dom').Dom;
    var timer = null;
    var listener = function () {
        $(document).on('click', '.location-open', function () {
            var targetEle = $('.select-part')
                , open = $(this).data('open');
            if (open == 0) {
                $(this).data('open', 1);
                targetEle.removeClass('dp-n');
                $(this).find('.arrow').removeClass('arrow-down');
                $(this).find('.arrow').addClass('arrow-up');
            } else {
                $(this).data('open', 0);
                targetEle.addClass('dp-n');
                $(this).find('.arrow').addClass('arrow-down');
                $(this).find('.arrow').removeClass('arrow-up');
            }
        });
        $(document).on('click', function (e) {
            var target = $(e.target);
            var targetEle = $('.select-part')
                , openEle = $('.location-open')
                , open = openEle.data('open');
            if (open == 1) {
                if (target.closest('.location-open').length == 0) {
                    openEle.data('open', 0);
                    targetEle.addClass('dp-n');
                    openEle.find('.arrow').addClass('arrow-down');
                    openEle.find('.arrow').removeClass('arrow-up');
                }
            }
        });
        $(document).on('click', '.select-port', function () {
            var input = $(this).parents('.location').find('input')
                , text = $(this).text();
            input.val(text);
            $(this).parent('ul').addClass('dp-n');
        });
        $(document).on('focus', '#start_location', function () {
            $(this).focus();
        });
        $(document).on('click', '#search-btn', function () {
            var s = $('#start_location').val()
                , e = $('#end_location').val();
            location.href = '/delivery?s=' + s + '&e=' + e;
        });
        $('.ajax-part').on('click', 'li', function () {
            $(this).parent().siblings('input').val($(this).html());
            $(this).parent().addClass('dp-n')
        });
        $(document).on('click', function (e) {
            var target = $(e.target);
            if (target.closest('.ajax-part,#end_location').length == 0) {
                $('.ajax-part').addClass('dp-n');
            }
        });
        $(document).on('blur', '#end_location,#start_location', function () {
            var _this = $(this)
                , ul = _this.siblings('.ajax-part');
            var data = ul.children('.active').html() || ul.find('li:first-child').html() || '';
            $(this).val(data);
            $(this).data('val', data);
            ul.hide();
        });
        $(document).on('keyup', '#end_location,#start_location', function (e) {
            var _this = $(this)
                , ul = _this.siblings('.ajax-part');
            var index = ul.find('.active').index() || 0
                , len = ul.children().length;
            if (e.keyCode == 13) {//回车键
                var data = ul.children('.active').html() || ul.find('li:first-child').html() || '';
                $(this).val(data);
                $(this).data('val', data);
                ul.hide();
            } else if (e.keyCode == 38) {//上键
                index = index == 0 ? len - 1 : index - 1;
                ul.find('li').removeClass('active');
                ul.find('li').eq(index).addClass('active');
            } else if (e.keyCode == 40) {//下键
                index = index == len - 1 ? 0 : index + 1;
                ul.find('li').removeClass('active');
                ul.find('li').eq(index).addClass('active');
            } else if (e.keyCode == 8) {
                e.preventDefault();
                _this.val('');
                _this.trigger('keyup');
            } else {//正常输入
                Data.airport({key: _this.val()}, function (json) {
                    var str = '';
                    if (json && 'resBody' in json && json.resBody instanceof Array && json.resBody.length > 0) {
                        var body = json.resBody;
                        for (var b in body) {
                            if (body.hasOwnProperty(b)) {
                                var d = body[b];
                                str += '<li data-val="' + d.airportCode + '" class="' + (b == 0 ? 'active' : '') + '">' + d.displayName + '</li>'
                            }
                        }
                    }
                    ul.html(str);
                    ul.show();
                });
            }
        });
        $(document).on('mouseover', '.ajax-part li', function () {
            $(this).addClass('active');
            $(this).siblings().removeClass('active');
        });
    };
    var news = function () {
        var load = '<div class="loading-box"><div class="spinner"> <div class="rect1"></div> <div class="rect2"></div> <div class="rect3"></div><div class="rect4"></div><div class="rect5"></div> </div></div>';
        $('.news-body').html(load);
        Data.topF({type: 10}, function (json) {
            Dom.renderNews(json, 10);
        });
        Data.topF({type: 20}, function (json) {
            Dom.renderNews(json, 20);
        });
    };
    var run = function () {
        listener();
        news();
    };
    return {
        run: run
    }
}());
module.exports = Listener;
},{"./data":3,"./dom":4}]},{},[5])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL252bS92Ni4yLjAvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi4uL2dlbmVyYWwvaGVhZC5qcyIsIi4uL2dlbmVyYWwvaW5kZXguanMiLCJkYXRhLmpzIiwiZG9tLmpzIiwiaW5kZXguanMiLCJsaXN0ZW5lci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTYvMTEvMjIuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxudmFyIGhlYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvL+aXtumXtOagvOW8j+WMllxyXG4gICAgRGF0ZS5wcm90b3R5cGUuRm9ybWF0ID0gZnVuY3Rpb24gKGZtdCkgeyAvL2F1dGhvcjogSmVyZW15eXlcclxuICAgICAgICB2YXIgbyA9IHtcclxuICAgICAgICAgICAgXCJNK1wiOiB0aGlzLmdldE1vbnRoKCkgKyAxLCAvL+aciOS7vVxyXG4gICAgICAgICAgICBcImQrXCI6IHRoaXMuZ2V0RGF0ZSgpLCAvL+aXpVxyXG4gICAgICAgICAgICBcImgrXCI6IHRoaXMuZ2V0SG91cnMoKSwgLy/lsI/ml7ZcclxuICAgICAgICAgICAgXCJtK1wiOiB0aGlzLmdldE1pbnV0ZXMoKSwgLy/liIZcclxuICAgICAgICAgICAgXCJzK1wiOiB0aGlzLmdldFNlY29uZHMoKSwgLy/np5JcclxuICAgICAgICAgICAgXCJxK1wiOiBNYXRoLmZsb29yKCh0aGlzLmdldE1vbnRoKCkgKyAzKSAvIDMpLCAvL+Wto+W6plxyXG4gICAgICAgICAgICBcIlNcIjogdGhpcy5nZXRNaWxsaXNlY29uZHMoKSAvL+avq+enklxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKC8oeSspLy50ZXN0KGZtdCkpIGZtdCA9IGZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKHRoaXMuZ2V0RnVsbFllYXIoKSArIFwiXCIpLnN1YnN0cig0IC0gUmVnRXhwLiQxLmxlbmd0aCkpO1xyXG4gICAgICAgIGZvciAodmFyIGsgaW4gbylcclxuICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoXCIoXCIgKyBrICsgXCIpXCIpLnRlc3QoZm10KSkgZm10ID0gZm10LnJlcGxhY2UoUmVnRXhwLiQxLCAoUmVnRXhwLiQxLmxlbmd0aCA9PSAxKSA/IChvW2tdKSA6ICgoXCIwMFwiICsgb1trXSkuc3Vic3RyKChcIlwiICsgb1trXSkubGVuZ3RoKSkpO1xyXG4gICAgICAgIHJldHVybiBmbXQ7XHJcbiAgICB9O1xyXG4gICAgLy/ov5Tlm57pobbpg6hcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYmFjay10b3AnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChcImh0bWwsYm9keVwiKS5hbmltYXRlKHtzY3JvbGxUb3A6MH0sMTAwKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWVudGVyJywgJy52aXAtcGFydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcudmlwLXNlbGVjdCcpLnN0b3AodHJ1ZSk7XHJcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLnZpcC1zZWxlY3QnKS5zbGlkZURvd24oMTAwKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWxlYXZlJywgJy52aXAtcGFydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcudmlwLXNlbGVjdCcpLnN0b3AodHJ1ZSk7XHJcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLnZpcC1zZWxlY3QnKS5zbGlkZVVwKDEwMCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgICAkKGRvY3VtZW50KS5vbignbW91c2VlbnRlcicsICcud2VjaGF0LWxvZ28nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLmJpZy13ZWNoYXQnKS5mYWRlSW4oMjAwKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWxlYXZlJywgJy53ZWNoYXQtbG9nbycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcuYmlnLXdlY2hhdCcpLmZhZGVPdXQoMjAwKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxufTtcclxubW9kdWxlLmV4cG9ydHMuaGVhZCA9IGhlYWQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTYvMTEvMjIuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxudmFyIGxpc3RlbmVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/lpLTpg6jngrnlh7vkuovku7ZcclxuICAgICAgICByZXF1aXJlKCcuL2hlYWQnKS5oZWFkKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBydW46IHJ1blxyXG4gICAgfVxyXG59KCkpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IGxpc3RlbmVyOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplcmVteSBvbiAyMDE2LzExLzI0LlxyXG4gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBEYXRhID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhaXJwb3J0ID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9haXJsaW5lL2FpcnBvcnQnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHRvcEYgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL25ld3MvdG9wRidcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGFpcnBvcnQ6IGFpcnBvcnRcclxuICAgICAgICAsIHRvcEY6IHRvcEZcclxuICAgIH1cclxufSgpKTtcclxubW9kdWxlLmV4cG9ydHMuRGF0YSA9IERhdGE7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQXVzZXIgb24gMjAxNi8xMS8yOS5cclxuICovXHJcblwidXNlIHN0cmljdFwiO1xyXG52YXIgRG9tID0gKGZ1bmN0aW9uICgpIHtcclxuICB2YXIgcmVuZGVyTGkgPSBmdW5jdGlvbiAoanNvbiwgZWxlLCBzZWwpIHtcclxuICAgIHZhciBzdHIgPSAnJztcclxuICAgIGZvciAodmFyIGogaW4ganNvbikge1xyXG4gICAgICBpZiAoanNvbi5oYXNPd25Qcm9wZXJ0eShqKSkge1xyXG4gICAgICAgIHZhciBkID0ganNvbltqXVxyXG4gICAgICAgICAgLCBpbm5lclN0clxyXG4gICAgICAgICAgLCB2YWx1ZTtcclxuICAgICAgICBpZiAoc2VsID09IDEpIHtcclxuICAgICAgICAgIGlubmVyU3RyID0gZC5kaXNwbGF5TmFtZTtcclxuICAgICAgICAgIHZhbHVlID0gZC5haXJwb3J0Q29kZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaW5uZXJTdHIgPSAoZC5OYW1lID8gZC5OYW1lIDogJycpICsgKGQuTmFtZSA/ICctJyA6ICcnKSArIGQuQ29kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3RyICs9ICc8bGkgZGF0YS12YWw9XCInICsgdmFsdWUgKyAnXCI+JyArIGlubmVyU3RyICsgJzwvbGk+J1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbGUuaHRtbChzdHIpO1xyXG4gIH07XHJcbiAgdmFyIHJlbmRlck5ld3MgPSBmdW5jdGlvbiAoZGF0YSwgdHlwZSkge1xyXG4gICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgaWYgKGRhdGEgJiYgJ3Jlc0NvZGUnIGluIGRhdGEgJiYgZGF0YS5yZXNDb2RlID09IDApIHtcclxuICAgICAgaWYgKCdyZXNCb2R5JyBpbiBkYXRhICYmIGRhdGEucmVzQm9keSAmJiAnc0xpc3QnIGluIGRhdGEucmVzQm9keSAmJiBkYXRhLnJlc0JvZHkuc0xpc3QgaW5zdGFuY2VvZiBBcnJheSAmJiBkYXRhLnJlc0JvZHkuc0xpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHZhciBib2R5ID0gZGF0YS5yZXNCb2R5LnNMaXN0O1xyXG4gICAgICAgIGZvciAodmFyIGIgaW4gYm9keSkge1xyXG4gICAgICAgICAgaWYgKGJvZHkuaGFzT3duUHJvcGVydHkoYikpIHtcclxuICAgICAgICAgICAgdmFyIGQgPSBib2R5W2JdO1xyXG4gICAgICAgICAgICB2YXIgc3AgPSB0eXBlID09IDEwID8gbmV3IERhdGUoZC5tb2RpZnlEdCkuRm9ybWF0KCd5eXl5LU1NLWRkJykgOiAwOy8vZml4bWUg5pWw5o2u5pqC5peg6ZiF6K+76YePICDmlbDmja7lupPlop7liqDlrZfmrrVcclxuICAgICAgICAgICAgdmFyIGNsID0gdHlwZSA9PSAxMCA/ICcnIDogJ3FhLWltZyc7XHJcbiAgICAgICAgICAgIHN0ciArPSAnPHAgY2xhc3M9XCJzZy1uZXdcIj48YSBocmVmPVwiaG9tZS9uZXdzL2RldGFpbD9pZD0nICsgZC5JZCArICdcIj4nICsgZC5uZXdzVGl0bGUgKyAnPC9hPjxzcGFuIGNsYXNzPVwiJyArIGNsICsgJ1wiPicgKyBzcCArICc8L3NwYW4+PC9wPidcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3RyID0gdHlwZSA9PSAxMCA/ICc8ZGl2IGNsYXNzPVwid3JvbmdcIj7mmoLml6DmlrDpl7vvvIE8L2Rpdj4nIDonPGRpdiBjbGFzcz1cIndyb25nXCI+5pqC5peg5bi46KeB6Zeu6aKY77yBPC9kaXY+JyA7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHN0ciA9ICc8ZGl2IGNsYXNzPVwid3JvbmdcIj7ojrflj5blh7rplJnvvIw8YSBocmVmPVwiXCI+6K+36YeN6K+VPC9hPu+8gTwvZGl2Pic7XHJcbiAgICB9XHJcbiAgICAkKHR5cGUgPT0gMTAgPyAnLmR5bmFtaWMtYm9keScgOiAnLmNvbW1vbi1ib2R5JykuaHRtbChzdHIpO1xyXG4gIH07XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlbmRlckxpOiByZW5kZXJMaVxyXG4gICAgLCByZW5kZXJOZXdzOiByZW5kZXJOZXdzXHJcbiAgfVxyXG59KCkpO1xyXG5tb2R1bGUuZXhwb3J0cy5Eb20gPSBEb207IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTYvMTEvMjIuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxucmVxdWlyZSgnLi4vZ2VuZXJhbCcpLnJ1bigpO1xyXG5cclxucmVxdWlyZSgnLi9saXN0ZW5lcicpLnJ1bigpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNi8xMS8yMi5cclxuICovXHJcblwidXNlIHN0cmljdFwiO1xyXG52YXIgTGlzdGVuZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIERhdGEgPSByZXF1aXJlKCcuL2RhdGEnKS5EYXRhXHJcbiAgICAgICAgLCBEb20gPSByZXF1aXJlKCcuL2RvbScpLkRvbTtcclxuICAgIHZhciB0aW1lciA9IG51bGw7XHJcbiAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5sb2NhdGlvbi1vcGVuJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0RWxlID0gJCgnLnNlbGVjdC1wYXJ0JylcclxuICAgICAgICAgICAgICAgICwgb3BlbiA9ICQodGhpcykuZGF0YSgnb3BlbicpO1xyXG4gICAgICAgICAgICBpZiAob3BlbiA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmRhdGEoJ29wZW4nLCAxKTtcclxuICAgICAgICAgICAgICAgIHRhcmdldEVsZS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuYXJyb3cnKS5yZW1vdmVDbGFzcygnYXJyb3ctZG93bicpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuYXJyb3cnKS5hZGRDbGFzcygnYXJyb3ctdXAnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZGF0YSgnb3BlbicsIDApO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0RWxlLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5hcnJvdycpLmFkZENsYXNzKCdhcnJvdy1kb3duJyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5hcnJvdycpLnJlbW92ZUNsYXNzKCdhcnJvdy11cCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQoZS50YXJnZXQpO1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0RWxlID0gJCgnLnNlbGVjdC1wYXJ0JylcclxuICAgICAgICAgICAgICAgICwgb3BlbkVsZSA9ICQoJy5sb2NhdGlvbi1vcGVuJylcclxuICAgICAgICAgICAgICAgICwgb3BlbiA9IG9wZW5FbGUuZGF0YSgnb3BlbicpO1xyXG4gICAgICAgICAgICBpZiAob3BlbiA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5sb2NhdGlvbi1vcGVuJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBvcGVuRWxlLmRhdGEoJ29wZW4nLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRFbGUuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICAgICBvcGVuRWxlLmZpbmQoJy5hcnJvdycpLmFkZENsYXNzKCdhcnJvdy1kb3duJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BlbkVsZS5maW5kKCcuYXJyb3cnKS5yZW1vdmVDbGFzcygnYXJyb3ctdXAnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuc2VsZWN0LXBvcnQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBpbnB1dCA9ICQodGhpcykucGFyZW50cygnLmxvY2F0aW9uJykuZmluZCgnaW5wdXQnKVxyXG4gICAgICAgICAgICAgICAgLCB0ZXh0ID0gJCh0aGlzKS50ZXh0KCk7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbCh0ZXh0KTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoJ3VsJykuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignZm9jdXMnLCAnI3N0YXJ0X2xvY2F0aW9uJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZvY3VzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNzZWFyY2gtYnRuJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcyA9ICQoJyNzdGFydF9sb2NhdGlvbicpLnZhbCgpXHJcbiAgICAgICAgICAgICAgICAsIGUgPSAkKCcjZW5kX2xvY2F0aW9uJykudmFsKCk7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnL2RlbGl2ZXJ5P3M9JyArIHMgKyAnJmU9JyArIGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnLmFqYXgtcGFydCcpLm9uKCdjbGljaycsICdsaScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnaW5wdXQnKS52YWwoJCh0aGlzKS5odG1sKCkpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCdkcC1uJylcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJChlLnRhcmdldCk7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmFqYXgtcGFydCwjZW5kX2xvY2F0aW9uJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICQoJy5hamF4LXBhcnQnKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2JsdXInLCAnI2VuZF9sb2NhdGlvbiwjc3RhcnRfbG9jYXRpb24nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9ICQodGhpcylcclxuICAgICAgICAgICAgICAgICwgdWwgPSBfdGhpcy5zaWJsaW5ncygnLmFqYXgtcGFydCcpO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHVsLmNoaWxkcmVuKCcuYWN0aXZlJykuaHRtbCgpIHx8IHVsLmZpbmQoJ2xpOmZpcnN0LWNoaWxkJykuaHRtbCgpIHx8ICcnO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnZhbChkYXRhKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5kYXRhKCd2YWwnLCBkYXRhKTtcclxuICAgICAgICAgICAgdWwuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsICcjZW5kX2xvY2F0aW9uLCNzdGFydF9sb2NhdGlvbicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9ICQodGhpcylcclxuICAgICAgICAgICAgICAgICwgdWwgPSBfdGhpcy5zaWJsaW5ncygnLmFqYXgtcGFydCcpO1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB1bC5maW5kKCcuYWN0aXZlJykuaW5kZXgoKSB8fCAwXHJcbiAgICAgICAgICAgICAgICAsIGxlbiA9IHVsLmNoaWxkcmVuKCkubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7Ly/lm57ovabplK5cclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gdWwuY2hpbGRyZW4oJy5hY3RpdmUnKS5odG1sKCkgfHwgdWwuZmluZCgnbGk6Zmlyc3QtY2hpbGQnKS5odG1sKCkgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbChkYXRhKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZGF0YSgndmFsJywgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB1bC5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDM4KSB7Ly/kuIrplK5cclxuICAgICAgICAgICAgICAgIGluZGV4ID0gaW5kZXggPT0gMCA/IGxlbiAtIDEgOiBpbmRleCAtIDE7XHJcbiAgICAgICAgICAgICAgICB1bC5maW5kKCdsaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHVsLmZpbmQoJ2xpJykuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gNDApIHsvL+S4i+mUrlxyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCA9PSBsZW4gLSAxID8gMCA6IGluZGV4ICsgMTtcclxuICAgICAgICAgICAgICAgIHVsLmZpbmQoJ2xpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdWwuZmluZCgnbGknKS5lcShpbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSA4KSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlcigna2V5dXAnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHsvL+ato+W4uOi+k+WFpVxyXG4gICAgICAgICAgICAgICAgRGF0YS5haXJwb3J0KHtrZXk6IF90aGlzLnZhbCgpfSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0JvZHknIGluIGpzb24gJiYganNvbi5yZXNCb2R5IGluc3RhbmNlb2YgQXJyYXkgJiYganNvbi5yZXNCb2R5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvZHkgPSBqc29uLnJlc0JvZHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGIgaW4gYm9keSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJvZHkuaGFzT3duUHJvcGVydHkoYikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGJvZHlbYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICc8bGkgZGF0YS12YWw9XCInICsgZC5haXJwb3J0Q29kZSArICdcIiBjbGFzcz1cIicgKyAoYiA9PSAwID8gJ2FjdGl2ZScgOiAnJykgKyAnXCI+JyArIGQuZGlzcGxheU5hbWUgKyAnPC9saT4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdWwuaHRtbChzdHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVsLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ21vdXNlb3ZlcicsICcuYWpheC1wYXJ0IGxpJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgbmV3cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbG9hZCA9ICc8ZGl2IGNsYXNzPVwibG9hZGluZy1ib3hcIj48ZGl2IGNsYXNzPVwic3Bpbm5lclwiPiA8ZGl2IGNsYXNzPVwicmVjdDFcIj48L2Rpdj4gPGRpdiBjbGFzcz1cInJlY3QyXCI+PC9kaXY+IDxkaXYgY2xhc3M9XCJyZWN0M1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJyZWN0NFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJyZWN0NVwiPjwvZGl2PiA8L2Rpdj48L2Rpdj4nO1xyXG4gICAgICAgICQoJy5uZXdzLWJvZHknKS5odG1sKGxvYWQpO1xyXG4gICAgICAgIERhdGEudG9wRih7dHlwZTogMTB9LCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICBEb20ucmVuZGVyTmV3cyhqc29uLCAxMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgRGF0YS50b3BGKHt0eXBlOiAyMH0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgIERvbS5yZW5kZXJOZXdzKGpzb24sIDIwKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgcnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxpc3RlbmVyKCk7XHJcbiAgICAgICAgbmV3cygpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcnVuOiBydW5cclxuICAgIH1cclxufSgpKTtcclxubW9kdWxlLmV4cG9ydHMgPSBMaXN0ZW5lcjsiXX0=
