(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/24.
 */
"use strict";
var Data = (function () {
  var list = function (data, callback) {
    var _data = {};
    $.ajax({
      url: '/api/order/list'
      , type: 'post'
      , data: data
      , dataType: 'json'
      , timeout: 100000
      , success: function (json) {
        if (json && "resCode" in json) {
          _data = json;
        } else {
          _data = {};
        }
      }, complete: function () {
        if (callback && callback instanceof Function) {
          callback(_data);
        }
      }
    });
  };
  var newList = function (data, callback) {
    var _data = {};
    $.ajax({
      url: '/api/order/newList'
      , type: 'post'
      , data: data
      , dataType: 'json'
      , timeout: 100000
      , success: function (json) {
        if (json && "resCode" in json) {
          _data = json;
        } else {
          _data = {};
        }
      }, complete: function () {
        if (callback && callback instanceof Function) {
          callback(_data);
        }
      }
    });
  };
  var commoncContact=function (data, callback) {
    var _data = {};
    $.ajax({
      url: '/api/order/commonConList'
      , type: 'post'
      , data: data
      , dataType: 'json'
      , timeout: 100000
      , success: function (json) {
        if (json && "resCode" in json) {
          _data = json;
        } else {
          _data = {};
        }
      }, complete: function () {
        if (callback && callback instanceof Function) {
          callback(_data);
        }
      }
    });
  };
  var airport = function (data, callback) {
    var _data = {};
    $.ajax({
      url: '/api/airline/airport'
      , type: 'post'
      , data: data
      , dataType: 'json'
      , timeout: 100000
      , success: function (json) {
        if (json && "resCode" in json) {
          _data = json;
        } else {
          _data = {};
        }
      }, complete: function () {
        if (callback && callback instanceof Function) {
          callback(_data);
        }
      }
    });
  };
  return {
    list: list
    ,newList: newList
    ,airport: airport
    ,commoncContact:commoncContact
  }
}());
module.exports.Data = Data;
},{}],2:[function(require,module,exports){
/**
 * Created by Auser on 2016/12/3.
 */
"use strict";
var Dom = (function () {
    var list = function (json, param, type) {
        changeStr(type);
        var str = '';
        if (json && json.resCode == 0 && 'resBody' in json && json.resBody && 'sList' in json.resBody && json.resBody.sList instanceof Array) {
            if (json.resBody.sList.length > 0) {
                var arr = json.resBody.sList;
                for (var a in arr) {
                    if (arr.hasOwnProperty(a)) {
                        str += render(arr[a], type);
                    }
                }
                $('.total-count').html(json.resBody.totalCount);
                $.burster($(".page-box"), param.offset || 0, json.resBody.totalCount, 5, param.limit || 10);
            } else {
                str = '<tr"><td colspan="10" class="wrong-msg">' +
                        '<p><em class="icon-astronaut-ingravity iconfont" style="font-size:72px;"></em></p>'+
                    '<span>暂时没有您搜索的订单信息</span>' +
                    '</td></tr>';
                $('.total-count').html(0);
                $('.page-box').html('');
            }
        } else {
            str = '<tr><td colspan="10" class="wrong-msg">您搜索的订单信息出错，<a href="javascript:void(0);" class="reload">请重试</a></td></tr>';
            $('.total-count').html(0);
            $('.page-box').html('');
        }
        $('tbody').html(str);
        if($('.total-count').html()>0){
            $('#curNo').html('1');
            $('tbody tr').click(function(){
                $('#curNo').html($(this).index()+1);
            });
        }else{
            $('#curNo').parent().html('0');
        }
        function render(d, type) {
            var str = '';
            if (type == 'all' || type == 'pending' || !type) {
                switch (d.orderState) {
                    case 0:
                        str = '新订单，未确认';
                        break;
                    case 1:
                        str = '已确认订单';
                        break;
                    case 2:
                        str = '进行中';
                        break;
                    case 3:
                        str = '已结束，正常结束';
                        break;
                    case 4:
                        str = '已制单，彻底结束';
                        break;
                    case -1:
                        str = '已取消，无费用';
                        break;
                    case -2:
                        str = '已取消，已产生费用';
                        break;
                }
            } else if (type == 'book') {
                switch (d.bookingState) {
                    case 0:
                        str = '未订舱';
                        break;
                    case 1:
                        str = '已订舱';
                        break;
                    case -1:
                        str = '订舱失败';
                        break;
                    case 2:
                        str = '已改配';
                        break;
                }
            } else if (type == 'entry') {
                switch (d.entryState) {
                    case 0:
                        str = '待进仓';
                        break;
                    case 1:
                        str = '已进仓，未确认';
                        break;
                    case 2:
                        str = '已确认';
                        break;
                }
            } else if (type == 'declare') {
                switch (d.declareState) {
                    case 0:
                        str = '未报关';
                        break;
                    case 1:
                        str = '预审中';
                        break;
                    case 2:
                        str = '预审通过';
                        break;
                    case 3:
                        str = '开始报关';
                        break;
                    case 4:
                        str = '报关中';
                        break;
                    case 5:
                        str = '报关完成';
                        break;
                    case -6:
                        str = '报关失败';
                        break;
                    case -4:
                        str = '退关中';
                        break;
                    case -5:
                        str = '退关完成';
                        break;
                }
            } else if (type == 'check') {
                switch (d.checkState) {
                    case 0:
                        str = '待查验';
                        break;
                    case 1:
                        str = '查验中';
                        break;
                    case 2:
                        str = '直接放行';
                        break;
                    case 3:
                        str = '查验放行';
                        break;
                    case 4:
                        str = '查验扣货';
                        break;
                }
            } else if (type == 'transform') {
                switch (d.transState) {
                    case 0:
                        str = '待出库';
                        break;
                    case 1:
                        str = '已出库，待起飞';
                        break;
                    case 2:
                        str = '已起飞';
                        break;
                    case 3:
                        str = '已到达';
                        break;
                }
            }
            var t = '';
            switch (d.orderChannel) {
                case 1:
                    t = '自助订舱';
                    break;
                case 2:
                    t = '快速订舱';
                    break;
                case 3:
                    t = '后台下单';
                    break;
                case 6:
                    t = '拼货订单';
                    break;
                default:
                    t = '自助订舱';
                    break;
            }
            var type = '';
            switch (d.contactType) {
                case 1:
                    type = '收货人';
                    break;
                case 2:
                    type = '发货人';
                    break;
                case 3:
                    type = '通知人';
                    break;
                default:
                    t = '/';
                    break;
            }
            return '<tr> <td><div class="tw" title="'+d.cargo.cargoName+'">' + d.contactCompanyName + '</div></td> <td>' + (d.contactPerson || '/') + '</td><td>' + d.contactTel + '</td>' +
                //' <td>' + (d.flightDate ? new Date(d.flightDate.replace(/-/g, "/")).Format('yyyy-MM-dd') : '/') + '</td> ' +
                '<td>' + (d.contactEmail || '/')+ '</td> ' +
                '<td>' + d.contactEmail + '</td> ' +
                '<td>' + type + '</td> ' +
                //'<td>' + d.destCode + '</td>' +
                //' <td><div class="tw" title="'+d.cargo.cargoName+'">' + d.cargo.cargoName + '</div></td> ' +
                //'<td>' + str + '</td> ' +
                '<td><a href="/vip/order/detail?id=' + d.orderId + '&sid=' + (d.subNum || '') + '">编辑</a><a href="/vip/order/detail?id=' + d.orderId + '&sid=' + (d.subNum || '') + '">删除</a></td> </tr>'
        }

        function changeStr(type) {
            var str = '';
            switch (type) {
                case 'all':
                case 'pending':
                    str = '订单状态';
                    break;
                case 'book':
                    str = '订舱状态';
                    break;
                case 'entry':
                    str = '进仓状态';
                    break;
                case 'declare':
                    str = '报关状态';
                    break;
                case 'check':
                    str = '查验状态';
                    break;
                case 'transform':
                    str = '运输状态';
                    break;
            }
            $('.change-str').html(str);
        }
    };
    return {
        list: list
    };
}());
module.exports.Dom = Dom;



},{}],3:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
require('../general').run();

require('./listener').run();

},{"../general":9,"./listener":4}],4:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
require('../frame/burster');
var Modal = require('../frame/modal');
var url = require('../frame/function').url;
var Data = require('./data').Data
    , Dom = require('./dom').Dom;
var Listener = (function () {
    var listener = function () {
        //close
        $(document).on('click', '.close-btn', function () {
            $('.white-back').hide();
            $('.alert-part').hide();
        });
        $('.user-info .dropdown-menu').find('li').click(function () {
            $('#buyCon').val($(this).find('a').html()||'全部');
            url.set('tp',$('#buyCon').val());
        });
        //fill contactType
        $('.newAdd-modal .dropdown-menu').find('li').click(function () {
            $('#addBuyCon').val($(this).find('a').html()||'收货人');
            url.set('tp',$('#addBuyCon').val());
        });
        $(document).on('click', '.search-btn', function () {
            init();
        });
        $(document).on('click', '.sel-title', function () {
            url.set('offset', 0);
            url.set('tp', $(this).data('tp'));
            $('.page-box').html('');
            $(this).addClass('active');
            $(this).siblings().removeClass('active');
            init();
        });
        $(document).on('click', '.pages', function () {
            url.set('offset', $(this).data('offset'));
            init();
        });
        $('#day-time').datetimepicker({
            format: 'yyyy-mm-dd',//日期的格式
            startDate: '1900-01-01',//选择器的开始日期
            autoclose: true,//日期选择完成后是否关闭选择框
            bootcssVer: 3,//显示向左向右的箭头
            language: 'zh-CN',//语言
            minView: "month"//表示日期选择的最小范围，默认是hour
        });
    };
    var airlines = function () {
        $(document).on('blur', '#start_location,#end_location', function () {
            var _this = $(this)
                , ul = _this.siblings('.ajax-part');
            var data = ul.children('.active').html() || ul.find('li:first-child').html() || '';
            var data2 = ul.children('.active').data('val') || ul.find('li:first-child').data('val') || '';
            $(this).val(data);
            $(this).data('val', data2);
            ul.hide();
        });
        $(document).on('keyup', '#start_location,#end_location', function (e) {
            var _this = $(this)
                , ul = _this.siblings('.ajax-part');
            var index = ul.find('.active').index() || 0
                , len = ul.children().length;
            if (e.keyCode == 13) {//回车键
                var data = ul.children('.active').html() || ul.find('li:first-child').html() || '';
                var data2 = ul.children('.active').data('val') || ul.find('li:first-child').data('val') || '';
                $(this).val(data);
                $(this).data('val', data2);
                ul.hide();
            } else if (e.keyCode == 38) {//上键
                index = index == 0 ? len - 1 : index - 1;
                ul.find('li').removeClass('active');
                ul.find('li').eq(index).addClass('active');
            } else if (e.keyCode == 40) {//下键
                index = index == len - 1 ? 0 : index + 1;
                ul.find('li').removeClass('active');
                ul.find('li').eq(index).addClass('active');
            } else if (e.keyCode == 8) {
                e.preventDefault();
                _this.val('');
                _this.trigger('keyup');
            } else {//正常输入
                Data.airport({key: _this.val()}, function (json) {
                    var str = '';
                    if (json && 'resBody' in json && json.resBody instanceof Array && json.resBody.length > 0) {
                        var body = json.resBody;
                        for (var b in body) {
                            if (body.hasOwnProperty(b)) {
                                var d = body[b];
                                str += '<li data-val="' + d.airportCode + '" class="' + (b == 0 ? 'active' : '') + '">' + d.displayName + '</li>'
                            }
                        }
                    }
                    ul.html(str);
                    ul.show();
                });
            }
        });
        $(document).on('mouseover', '.ajax-part li', function () {
            $(this).addClass('active');
            $(this).siblings().removeClass('active');
        });
        $('.ajax-part').on('click', 'li', function () {
            $(this).parent().siblings('input').val($(this).html());
            $(this).parent().addClass('dp-n')
        });
    };
    var init = function (req, res) {
        var newTp = 99;
        var tp = url.get('tp') || '全部';
        switch (tp) {
            case '全部':
                newTp = 99;
                break;
            case '收货人':
                newTp = 1;
                break;
            case '发货人':
                newTp = 2;
                break;
            case '通知人':
                newTp = 3;
                break;
        }
        var data = {
            "contactType": newTp,
            "companyName": $('#buyCompany').val() || '',
            "contactPerson": $('#buyName').val() || '',
            "contactTel":$('#buyPhone').val() || '',
            //"flightDate": $('#day-time').val() ? $('#day-time').val() + ' 00:00:00' : null,
            "offset": url.get('offset') || 0,
            "limit": url.get('limit') || 20
        };
        Data.commoncContact(data, function (json) {
            Dom.list(json, data, tp);
        });
    };
    var run = function () {
        $('#buyCon').val('全部');
        $('#addBuyCon').val('收货人');
        listener();
        init();
        airlines();
    };
    return {
        run: run
    }
}());
module.exports = Listener;
},{"../frame/burster":5,"../frame/function":6,"../frame/modal":7,"./data":1,"./dom":2}],5:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/24.
 */
"use strict";

(function ($) {
    /**
     * 生成分页器
     * @param ele 需要添加分页器的元素
     * @param offset 偏移量，即从第data-offset开始
     * @param length 总记录条数
     * @param showPages 分页器显示的页数，超过则隐藏多余的页
     * @param rows 每页显示的记录条数
     */
    $.burster = function (ele, offset, length, showPages, rows) {
        offset = offset ? parseInt(offset) : 0;
        //将分页器装入table中
        if (length && length > offset) {
            var pageHtml = ""
                , ass = ""//清空需要装入的html
                , beforePages = Math.ceil(offset / rows)//需要显示的前页数/当前页
                , afterPages = Math.ceil((length - offset ) / rows)//需要显示的后页数
                , pages = Math.ceil(length / rows) //总页数
                , k = 0;
            //alert("总页数" + pages + " 前页数 " + beforePages + " 后页数 " + afterPages);
            //若页数小于showPages页，则全部显示
            if (pages >= 0 && pages <= showPages) {
                for (k = 0; k < pages; k++) {
                    if (k == beforePages) {
                        pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                    } else {
                        pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                    }
                }
            } else if (pages > showPages) {//总页数大于showPages页
                if (beforePages <= Math.ceil(showPages / 2) && afterPages > showPages + 1) {
                    for (k = 0; k < showPages; k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages <= Math.ceil(showPages / 2) && afterPages == showPages + 1) {
                    for (k = 0; k < showPages - 1; k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages <= Math.ceil(showPages / 2) && afterPages <= showPages) {
                    for (k = 0; k < showPages - 1; k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages > Math.ceil(showPages / 2) && beforePages <= showPages && afterPages > showPages) {
                    pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
                    for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages > showPages && afterPages > showPages) {
                    pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
                    for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages > Math.ceil(showPages / 2) && beforePages <= pages && afterPages <= showPages && afterPages > Math.ceil(showPages / 2) + 1) {
                    pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
                    for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages > pages && afterPages <= showPages && afterPages > Math.ceil(showPages / 2) + 1) {
                    pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
                    for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages > Math.ceil(showPages / 2) && afterPages <= Math.ceil(showPages / 2) + 1) {
                    pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
                    for (k = beforePages - Math.ceil(showPages / 2) + 1; k < pages; k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                }
            }
            //判断"首页"和"末页"是否可点击
            var firstPage, lastPage;
            if (offset == 0) {//此时首页无法点击
                firstPage = '<li class="disabled"><a class="pages" data-offset="0">首页</a></li>';
                lastPage = '<li><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '" >末页</a></li>';
            } else if ((offset + rows) >= length) {//此时末页无法点击
                firstPage = '<li><a class="pages" data-offset="0">首页</a></li>';
                lastPage = '<li class="disabled"><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '">末页</a></li>';
            } else {
                firstPage = '<li><a class="pages" data-offset="0">首页</a></li>';
                lastPage = '<li><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '">末页</a></li>';
            }
            //判断"上一页"和"下一页"是否存在
            var upPage, downPage;
            if (offset == 0 || (offset < rows && (offset % rows != 0))) {
                upPage = "<li class='disabled'><a class='pages' func='previous' data-offset='" + parseInt(offset) + "' >上页</a></li>"
            } else {
                upPage = "<li><a class='pages' func='previous' data-offset='" + (parseInt(offset) - parseInt(rows)) + "' >上页</a></li>";
            }
            if (offset >= (length - rows)) {
                downPage = "<li class='disabled'><a class='pages' func='next' data-offset='" + parseInt(offset) + "'>下页</a></li>"
            } else {
                downPage = "<li><a class='pages' func='next' data-offset='" + parseInt(parseInt(offset) + parseInt(rows)) + "'>下页</a></li>"
            }
            if (pages != 1) {
                //分页部分
                ass += "<div id='pager' class='pager-info'>" +
                    "<h6 id='result' class='pager-record'>共有<span>" + length + "</span>条记录</h6>" +
                    "<ul class='pagination'>" + firstPage + upPage + pageHtml + downPage + lastPage + "</ul></div>";
                //table中注入拼装的记录
                ele.html(ass);
            } else {//无法分页清空分页器
                ele.html('');
            }
        }
    }
}(jQuery));
},{}],6:[function(require,module,exports){
/**
 * Created by jeremy on 2016/2/26.
 * @version 1.0.0 created 通用性功能方法
 */

'use strict';

var Fun = (function () {
    var _timeOut = 100000;//请求超时时间为10s
    /**
     * 封装ajax
     * @param option
     * {
     *      url:"请求的地址"
     *      ,method:"请求的方法"
     *      ,async:"是否并发"
     *      ,data:"发送的数据"
     *      ,success:"成功时回调"
     *      ,error:"失败/超时时回调"
     *      ,timeout:"超时时间"
     *      ,complete:"完成后的回调"
     * }
     */
    var ajax = function (option) {
        //ajax开始时应显示“加载信息框”
        Modal.showLoading();
        $.ajax({
            url: option.url
            , type: "type" in option && option.type || "GET"
            , timeout: option.timeout || _timeOut
            , data: "data" in option && option.data || {}
            , dataType: "json"
            , async: ("async" in option && option.async) ? true : false
            , success: function (json) {
                if ("status" in json && json.status > 0 && "data" in json) {
                    if ("success" in option) {
                        option.success(json.data);
                    } else {
                        Modal.setAlert("无success方法!");
                    }
                } else if ("error" in option && option.error instanceof Function) {
                    option.error(json);
                } else {
                    Modal.setAlert('操作失败!');
                }
            }, error: function (xhr) {//404或者超时
                if ("error" in option && option.error instanceof Function) {
                    //提示用户错误信息
                    Modal.showLoading(false);
                    Modal.setAlert("连接服务器失败，状态：" + (xhr.status || -1) + ",信息：" + (xhr.statusText || "-"));
                    option.error(xhr.status, xhr.statusText);//回调请求的状态和错误信息
                }
            }, complete: function (xhr, type) {
                //关闭“加载信息框”
                Modal.showLoading(false);
                if ("complete" in option && option.complete instanceof Function) {
                    option.complete(xhr, type);//回调请求的xhr信息和类型
                }
            }
        });
    };
    //全选和单选的绑定
    var setCheckboxListener = function (allCheck, radioChecks) {
        //筛选单选按钮组
        var radioValueEles = $(radioChecks);
        //点击全选时，同组按钮被同步
        $(document).delegate(allCheck, "click", function () {
            if (radioValueEles && radioValueEles.length > 0) {
                for (var _r = 0; _r < radioValueEles.length; _r++) {
                    radioValueEles[_r].checked = $(this).is(":checked");
                }
            }
        });
        //点击单选按钮时，
        $(document).delegate(radioChecks, "click", function () {
            $(allCheck)[0].checked = $(radioChecks + ":checked").length == $(radioChecks).length;
        });
    };
    var url = (function () {
        var get = function (name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return decodeURI(r[2]);
            return null;
        };
        /**
         * 根据参数列表长度进行判断，兼容IE9
         * @returns {string}
         */
        var set = function () {
            if (arguments.length === 1 && typeof arguments[0] === 'object') {//一个对象，使用key标记value
                var obj = arguments[0]
                    , search = location.search;
                for (var o in obj) {
                    if (obj.hasOwnProperty(o)) {
                        search = changeURLKeyValue(search, o, obj[o]);
                    }
                }
                if ('pushState' in history) {
                    history.pushState(null, document.title, search);
                } else if ('pushState' in History) {//ie9 不支持pushState方法,javascript.ejs中添加history.js完成html4对pushState的支持
                    History.pushState(null, null, search);//返回重新构造后search串
                }
            } else if (arguments.length === 2) {//key+value
                var key = arguments[0]
                    , value = arguments[1];
                if ('pushState' in history) {
                    history.pushState(null, document.title, changeURLKeyValue(location.toString(), key, value));
                } else if ('pushState' in History) {//ie9 不支持pushState方法,javascript.ejs中添加history.js完成html4对pushState的支持
                    History.pushState(null, null, changeURLKeyValue(location.search, key, value));//返回重新构造后search串
                }
            }
            function changeURLKeyValue(url, arg, arg_val) {
                var pattern = arg + '=([^&]*)';
                var replaceText = arg + '=' + arg_val;
                if (url.match(pattern)) {
                    var tmp = '/(' + arg + '=)([^&]*)/gi';
                    tmp = url.replace(eval(tmp), replaceText);
                    return tmp;
                } else {
                    if (url.match('[\?]')) {
                        return url + '&' + replaceText;
                    } else {
                        return url + '?' + replaceText;
                    }
                }
            }
        };
        return {
            get: get
            , set: set
        }
    }());
    var formatImage=function (path, size, ele) {
        if(path instanceof  Array && path.length>0){
            path = path[0];
        }
        var IMAGE_SIZE = {
            original: {
                path: "",
                size: ""
            },
            xlarge: {
                path: "_xlarge",
                size: "660*660"
            },
            large: {
                path: "_large",
                size: "420*420"
            },
            middle: {
                path: "_middle",
                size: "300*300"
            },
            small: {
                path: "_small",
                size: "240*240"
            },
            little: {
                path: "_little",
                size: "120*120"
            },
            micro: {
                path: "_micro",
                size: "60*60"
            }
        };
        size = IMAGE_SIZE[size || "middle"] || IMAGE_SIZE.middle;
        var pathTemp = /\.\w+?$/.exec(path);
        if (!pathTemp) {
            path += size.path;
        } else {
            path = (path.substr(0, pathTemp.index || path.length)) + size.path + pathTemp[0];
        }
        if (ele && ele.attr) {
            ele.attr("src", path);
        }
        return path;
    };

    var format = (function () {
        var formatamount = function(_value){
            return parseFloat(_value).toFixed(2);
        };
        //体积格式化小数点2位
        var formatvolume = function(_value){
            return parseFloat(_value).toFixed(3);
        };
        //重量格式化小数点2位
        var formatweight = function(_value){
            return parseFloat(_value).toFixed(3);
        };
        return {
            formatamount: formatamount
            , formatvolume: formatvolume
            , formatweight: formatweight
        }
    }());
    return {
        ajax: ajax
        , getTimtout: _timeOut
        , setCheckboxListener: setCheckboxListener
        , url: url
        , formatImage: formatImage
        , format: format
    }
}());

exports.ajax = Fun.ajax;
exports.getTimeout = Fun.getTimtout;
exports.setCheckboxListener = Fun.setCheckboxListener;
exports.url = Fun.url;
exports.format = Fun.format;
exports.formatImage = Fun.formatImage;

},{}],7:[function(require,module,exports){
/**
 * Created by jeremy on 2016/2/24.
 * @version 1.0.0 created
 */

'use strict';

//构造信息框主体
var Modal = (function () {
    //构造原始类
    function M(m) {
        this.s = m.s;//是否显示
        this.id = m.id;
    }

    //构造标准show方法，用于继承
    M.prototype.show = function () {
        var ele = document.getElementById(this.id);
        if (ele) {
            if (this.s && !isShow()) {//显示当前隐藏
                ele.className = ele.className.replace("dp-n", "");
            } else if (!this.s && isShow()) {//隐藏当前显示
                ele.className += " dp-n";
            }
            //去除两边的空格
            ele.className = String(ele.className).trim();
        }
        function isShow() {//是否已显示，无class时显示
            return ele.className.split("dp-n").length == 1;
        }
    };

    //加载信息框
    var loading = (function () {
        //初始化生成加载信息框
        var init = function () {
            if (!document.getElementById("loading_modal_element")) {
                $('body').append('<div id="loading_modal_element" class="loading-modal-body dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="loading-modal-image"></div>' +
                    '<div class="loading-modal-text">' +
                    '<h2>玩命加载中……</h2>' +
                    '</div></div>');
            }
            return false;
        };
        //显示、隐藏信息框
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;//无参数显示信息框
            var m = new M({id: "loading_modal_element", s: s});
            m.show();
        };
        return {
            init: init
            , show: show
        }
    }());
    //弹出信息框
    var alert = (function () {
        var init = function () {
            if (!document.getElementById("alert_modal_element")) {
                $('body').append('<div id="alert_modal_element" class="alert-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="alert-modal-content">' +
                    '<div class="alert-modal-body"><span class="alert-modal-text"></span></div>' +
                    '<div class="alert-modal-footer"><button id="alert_modal_close" class="alert-modal-button">关闭</button></div>' +
                    '</div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "alert_modal_element", s: s});
            m.show();
        };
        /**
         * 设置弹出信息框
         * @param msg       显示的信息，支持html
         * @param sed       倒计时关闭时间，单位：second
         * @param callback  关闭触发回调函数
         */
        var set = function (msg, sed, callback) {
            var ele = document.getElementById("alert_modal_element");
            if (msg) {
                if (typeof msg === 'object') {//应对后端返回提示时使用Object封装
                    msg = JSON.stringify(msg);
                }
                if(ele){
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }else{
                    init();
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }
                show();
            }
            if (sed > 0) {
                setTimeout(function () {
                    show(false);
                }, 1000 * sed);
            }//无关闭时间或者关闭时间为0，不自动关闭
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#alert_modal_close").on("click", function () {
                if (callback && callback instanceof Function) {
                    callback();
                }
                show(false);
                //阻止事件继续传递
                return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //选择信息框
    var confirm = (function () {
        var init = function () {
            if (!document.getElementById("confirm_modal_element")) {
                $('body').append('<div id="confirm_modal_element" class="confirm-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="confirm-modal-content">' +
                    '<div id="confirm_modal_header" class="confirm-modal-header dp-n"></div>' +
                    '<div class="confirm-modal-body"><span id="confirm_modal_text" class="confirm-modal-text"></span></div>' +
                    '<div class="confirm-modal-footer">' +
                    '<div class="footer-button-success"><button class="confirm-modal-button  modal-success" data-confirm="success">确认</button></div>' +
                    '<div class="footer-button-false"><button class="confirm-modal-button" data-confirm="error">取消</button></div>' +
                    '</div></div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "confirm_modal_element", s: s});
            m.show();
        };
        /**
         * 设置选择信息框的内容
         * @param option    配置
         * {
         *      title:"头部显示的信息"
         *      ,text:"显示的提示信息"
         *      ,success:"点击成功后的回调"
         *      ,error:"点击失败后的回调"
         *      ,complete:"点击按钮后的整体回调"
         * }
         */
        var bar = 0;
        var set = function (option) {
            if (!option) {
                return false;
            }
            if ("title" in option && option.title.length > 0) {//有头部，则显示头部
                document.getElementById("confirm_modal_header").innerHTML = option.title;
            }
            if ("text" in option && option.text.length > 0) {//有内容，则显示整个选择信息框
                document.getElementById("confirm_modal_text").innerHTML = option.text;
            }
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#confirm_modal_element").find(".confirm-modal-button").off("click").on("click", function () {
                //fixme .off("click")用于防止多次触发<--很玄学，我也不知道为什么，但是请不要修改。
                var atr = $(this).attr("data-confirm");//选择的按钮
                bar++;
                if (option && atr in option && option[atr] instanceof Function) {
                    option[atr]();
                }
                if (option && "complete" in option && option.complete instanceof Function) {
                    option.complete();//若有完成函数，则执行
                } else {//否则，关闭选择框
                    show(false);
                }
                //阻止事件继续传递
                //return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //覆盖层
    var cover = (function () {
        var init = function () {
            if (!document.getElementById("cover_modal_element")) {
                $('body').append('<div id="cover_modal_element" class="cover-modal-element dp-n"></div>');
            }
            return false;
        };
        var hide = function () {
            document.getElementById("cover_modal_element").style.display = "none";
        };
        var show = function () {
            document.getElementById("cover_modal_element").style.display = "block";
        };
        return {
            init: init
            , show: show
            , hide: hide
        }
    }());
    return {
        initLoading: loading.init
        , showLoading: loading.show

        , initAlert: alert.init
        , showAlert: alert.show
        , setAlert: alert.set

        , initConfirm: confirm.init
        , setConfirm: confirm.set
        , showConfirm: confirm.show
        , initCover: cover.init
    }
}());

//页面加载完毕后生成四个自定义模态框
setTimeout(function () {
    //页面加载时生成一个覆盖层
    Modal.initCover();
    //页面加载时生成一个加载信息框
    Modal.initLoading();
    //页面加载时生成一个弹出信息框
    Modal.initAlert();
    //页面加载时生成一个选择信息框
    Modal.initConfirm();
}, 100);


//抛出上层调用
exports.showLoading = Modal.showLoading;
exports.setAlert = Modal.setAlert;
exports.showAlert = Modal.showAlert;
exports.setConfirm = Modal.setConfirm;
exports.showConfirm = Modal.showConfirm;
},{}],8:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var head = function () {
    //时间格式化
    Date.prototype.Format = function (fmt) { //author: Jeremyyy
        var o = {
            "M+": this.getMonth() + 1, //月份
            "d+": this.getDate(), //日
            "h+": this.getHours(), //小时
            "m+": this.getMinutes(), //分
            "s+": this.getSeconds(), //秒
            "q+": Math.floor((this.getMonth() + 3) / 3), //季度
            "S": this.getMilliseconds() //毫秒
        };
        if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        for (var k in o)
            if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
        return fmt;
    };
    //返回顶部
    $(document).on('click', '.back-top', function () {
        $("html,body").animate({scrollTop:0},100);
        return false;
    });
    $(document).on('mouseenter', '.vip-part', function () {
        $(this).children('.vip-select').stop(true);
        $(this).children('.vip-select').slideDown(100);
        return false;
    });
    $(document).on('mouseleave', '.vip-part', function () {
        $(this).children('.vip-select').stop(true);
        $(this).children('.vip-select').slideUp(100);
        return false;
    });
    $(document).on('mouseenter', '.wechat-logo', function () {
        $(this).children('.big-wechat').fadeIn(200);
        return false;
    });
    $(document).on('mouseleave', '.wechat-logo', function () {
        $(this).children('.big-wechat').fadeOut(200);
        return false;
    });
};
module.exports.head = head;
},{}],9:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var listener = (function () {
    var run = function () {
        //头部点击事件
        require('./head').head();
    };
    return {
        run: run
    }
}());
module.exports = listener;
},{"./head":8}]},{},[3])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL252bS92Ni4yLjAvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsImRhdGEuanMiLCJkb20uanMiLCJpbmRleC5qcyIsImxpc3RlbmVyLmpzIiwiLi4vZnJhbWUvYnVyc3Rlci5qcyIsIi4uL2ZyYW1lL2Z1bmN0aW9uLmpzIiwiLi4vZnJhbWUvbW9kYWwuanMiLCIuLi9nZW5lcmFsL2hlYWQuanMiLCIuLi9nZW5lcmFsL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNySkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ROQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTYvMTEvMjQuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxudmFyIERhdGEgPSAoZnVuY3Rpb24gKCkge1xyXG4gIHZhciBsaXN0ID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgIHVybDogJy9hcGkvb3JkZXIvbGlzdCdcclxuICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuICB2YXIgbmV3TGlzdCA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICB1cmw6ICcvYXBpL29yZGVyL25ld0xpc3QnXHJcbiAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcbiAgdmFyIGNvbW1vbmNDb250YWN0PWZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICB1cmw6ICcvYXBpL29yZGVyL2NvbW1vbkNvbkxpc3QnXHJcbiAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcbiAgdmFyIGFpcnBvcnQgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgdXJsOiAnL2FwaS9haXJsaW5lL2FpcnBvcnQnXHJcbiAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcbiAgcmV0dXJuIHtcclxuICAgIGxpc3Q6IGxpc3RcclxuICAgICxuZXdMaXN0OiBuZXdMaXN0XHJcbiAgICAsYWlycG9ydDogYWlycG9ydFxyXG4gICAgLGNvbW1vbmNDb250YWN0OmNvbW1vbmNDb250YWN0XHJcbiAgfVxyXG59KCkpO1xyXG5tb2R1bGUuZXhwb3J0cy5EYXRhID0gRGF0YTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBBdXNlciBvbiAyMDE2LzEyLzMuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxudmFyIERvbSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbGlzdCA9IGZ1bmN0aW9uIChqc29uLCBwYXJhbSwgdHlwZSkge1xyXG4gICAgICAgIGNoYW5nZVN0cih0eXBlKTtcclxuICAgICAgICB2YXIgc3RyID0gJyc7XHJcbiAgICAgICAgaWYgKGpzb24gJiYganNvbi5yZXNDb2RlID09IDAgJiYgJ3Jlc0JvZHknIGluIGpzb24gJiYganNvbi5yZXNCb2R5ICYmICdzTGlzdCcgaW4ganNvbi5yZXNCb2R5ICYmIGpzb24ucmVzQm9keS5zTGlzdCBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIGlmIChqc29uLnJlc0JvZHkuc0xpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IGpzb24ucmVzQm9keS5zTGlzdDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGEgaW4gYXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyci5oYXNPd25Qcm9wZXJ0eShhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gcmVuZGVyKGFyclthXSwgdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCgnLnRvdGFsLWNvdW50JykuaHRtbChqc29uLnJlc0JvZHkudG90YWxDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAkLmJ1cnN0ZXIoJChcIi5wYWdlLWJveFwiKSwgcGFyYW0ub2Zmc2V0IHx8IDAsIGpzb24ucmVzQm9keS50b3RhbENvdW50LCA1LCBwYXJhbS5saW1pdCB8fCAxMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSAnPHRyXCI+PHRkIGNvbHNwYW49XCIxMFwiIGNsYXNzPVwid3JvbmctbXNnXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8cD48ZW0gY2xhc3M9XCJpY29uLWFzdHJvbmF1dC1pbmdyYXZpdHkgaWNvbmZvbnRcIiBzdHlsZT1cImZvbnQtc2l6ZTo3MnB4O1wiPjwvZW0+PC9wPicrXHJcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuPuaaguaXtuayoeacieaCqOaQnOe0oueahOiuouWNleS/oeaBrzwvc3Bhbj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC90ZD48L3RyPic7XHJcbiAgICAgICAgICAgICAgICAkKCcudG90YWwtY291bnQnKS5odG1sKDApO1xyXG4gICAgICAgICAgICAgICAgJCgnLnBhZ2UtYm94JykuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdHIgPSAnPHRyPjx0ZCBjb2xzcGFuPVwiMTBcIiBjbGFzcz1cIndyb25nLW1zZ1wiPuaCqOaQnOe0oueahOiuouWNleS/oeaBr+WHuumUme+8jDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJyZWxvYWRcIj7or7fph43or5U8L2E+PC90ZD48L3RyPic7XHJcbiAgICAgICAgICAgICQoJy50b3RhbC1jb3VudCcpLmh0bWwoMCk7XHJcbiAgICAgICAgICAgICQoJy5wYWdlLWJveCcpLmh0bWwoJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKCd0Ym9keScpLmh0bWwoc3RyKTtcclxuICAgICAgICBpZigkKCcudG90YWwtY291bnQnKS5odG1sKCk+MCl7XHJcbiAgICAgICAgICAgICQoJyNjdXJObycpLmh0bWwoJzEnKTtcclxuICAgICAgICAgICAgJCgndGJvZHkgdHInKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJCgnI2N1ck5vJykuaHRtbCgkKHRoaXMpLmluZGV4KCkrMSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAkKCcjY3VyTm8nKS5wYXJlbnQoKS5odG1sKCcwJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbmRlcihkLCB0eXBlKSB7XHJcbiAgICAgICAgICAgIHZhciBzdHIgPSAnJztcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2FsbCcgfHwgdHlwZSA9PSAncGVuZGluZycgfHwgIXR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoZC5vcmRlclN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5paw6K6i5Y2V77yM5pyq56Gu6K6kJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5bey56Gu6K6k6K6i5Y2VJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn6L+b6KGM5LitJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5bey57uT5p2f77yM5q2j5bi457uT5p2fJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5bey5Yi25Y2V77yM5b275bqV57uT5p2fJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAtMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gJ+W3suWPlua2iO+8jOaXoOi0ueeUqCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgLTI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICflt7Llj5bmtojvvIzlt7LkuqfnlJ/otLnnlKgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdib29rJykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChkLmJvb2tpbmdTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gJ+acquiuouiIsSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gJ+W3suiuouiIsSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgLTE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICforqLoiLHlpLHotKUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICflt7LmlLnphY0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdlbnRyeScpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoZC5lbnRyeVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5b6F6L+b5LuTJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5bey6L+b5LuT77yM5pyq56Gu6K6kJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5bey56Gu6K6kJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnZGVjbGFyZScpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoZC5kZWNsYXJlU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICfmnKrmiqXlhbMnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICfpooTlrqHkuK0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICfpooTlrqHpgJrov4cnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICflvIDlp4vmiqXlhbMnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICfmiqXlhbPkuK0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICfmiqXlhbPlrozmiJAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIC02OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5oql5YWz5aSx6LSlJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAtNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gJ+mAgOWFs+S4rSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgLTU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICfpgIDlhbPlrozmiJAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdjaGVjaycpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoZC5jaGVja1N0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5b6F5p+l6aqMJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5p+l6aqM5LitJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn55u05o6l5pS+6KGMJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5p+l6aqM5pS+6KGMJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAn5p+l6aqM5omj6LSnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAndHJhbnNmb3JtJykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChkLnRyYW5zU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICflvoXlh7rlupMnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICflt7Llh7rlupPvvIzlvoXotbfpo54nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICflt7Lotbfpo54nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9ICflt7LliLDovr4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdCA9ICcnO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGQub3JkZXJDaGFubmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgdCA9ICfoh6rliqnorqLoiLEnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHQgPSAn5b+r6YCf6K6i6IixJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICB0ID0gJ+WQjuWPsOS4i+WNlSc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgdCA9ICfmi7zotKforqLljZUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0ID0gJ+iHquWKqeiuouiIsSc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHR5cGUgPSAnJztcclxuICAgICAgICAgICAgc3dpdGNoIChkLmNvbnRhY3RUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICfmlLbotKfkuronO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAn5Y+R6LSn5Lq6JztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ+mAmuefpeS6uic7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHQgPSAnLyc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICc8dHI+IDx0ZD48ZGl2IGNsYXNzPVwidHdcIiB0aXRsZT1cIicrZC5jYXJnby5jYXJnb05hbWUrJ1wiPicgKyBkLmNvbnRhY3RDb21wYW55TmFtZSArICc8L2Rpdj48L3RkPiA8dGQ+JyArIChkLmNvbnRhY3RQZXJzb24gfHwgJy8nKSArICc8L3RkPjx0ZD4nICsgZC5jb250YWN0VGVsICsgJzwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAvLycgPHRkPicgKyAoZC5mbGlnaHREYXRlID8gbmV3IERhdGUoZC5mbGlnaHREYXRlLnJlcGxhY2UoLy0vZywgXCIvXCIpKS5Gb3JtYXQoJ3l5eXktTU0tZGQnKSA6ICcvJykgKyAnPC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAnPHRkPicgKyAoZC5jb250YWN0RW1haWwgfHwgJy8nKSsgJzwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgJzx0ZD4nICsgZC5jb250YWN0RW1haWwgKyAnPC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAnPHRkPicgKyB0eXBlICsgJzwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgLy8nPHRkPicgKyBkLmRlc3RDb2RlICsgJzwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAvLycgPHRkPjxkaXYgY2xhc3M9XCJ0d1wiIHRpdGxlPVwiJytkLmNhcmdvLmNhcmdvTmFtZSsnXCI+JyArIGQuY2FyZ28uY2FyZ29OYW1lICsgJzwvZGl2PjwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgLy8nPHRkPicgKyBzdHIgKyAnPC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAnPHRkPjxhIGhyZWY9XCIvdmlwL29yZGVyL2RldGFpbD9pZD0nICsgZC5vcmRlcklkICsgJyZzaWQ9JyArIChkLnN1Yk51bSB8fCAnJykgKyAnXCI+57yW6L6RPC9hPjxhIGhyZWY9XCIvdmlwL29yZGVyL2RldGFpbD9pZD0nICsgZC5vcmRlcklkICsgJyZzaWQ9JyArIChkLnN1Yk51bSB8fCAnJykgKyAnXCI+5Yig6ZmkPC9hPjwvdGQ+IDwvdHI+J1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2hhbmdlU3RyKHR5cGUpIHtcclxuICAgICAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2FsbCc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICdwZW5kaW5nJzpcclxuICAgICAgICAgICAgICAgICAgICBzdHIgPSAn6K6i5Y2V54q25oCBJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb2snOlxyXG4gICAgICAgICAgICAgICAgICAgIHN0ciA9ICforqLoiLHnirbmgIEnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnZW50cnknOlxyXG4gICAgICAgICAgICAgICAgICAgIHN0ciA9ICfov5vku5PnirbmgIEnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnZGVjbGFyZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyID0gJ+aKpeWFs+eKtuaAgSc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdjaGVjayc6XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyID0gJ+afpemqjOeKtuaAgSc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICd0cmFuc2Zvcm0nOlxyXG4gICAgICAgICAgICAgICAgICAgIHN0ciA9ICfov5DovpPnirbmgIEnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJy5jaGFuZ2Utc3RyJykuaHRtbChzdHIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGxpc3Q6IGxpc3RcclxuICAgIH07XHJcbn0oKSk7XHJcbm1vZHVsZS5leHBvcnRzLkRvbSA9IERvbTtcclxuXHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNi8xMS8yMi5cclxuICovXHJcblwidXNlIHN0cmljdFwiO1xyXG5yZXF1aXJlKCcuLi9nZW5lcmFsJykucnVuKCk7XHJcblxyXG5yZXF1aXJlKCcuL2xpc3RlbmVyJykucnVuKCk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplcmVteSBvbiAyMDE2LzExLzIyLlxyXG4gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcbnJlcXVpcmUoJy4uL2ZyYW1lL2J1cnN0ZXInKTtcclxudmFyIE1vZGFsID0gcmVxdWlyZSgnLi4vZnJhbWUvbW9kYWwnKTtcclxudmFyIHVybCA9IHJlcXVpcmUoJy4uL2ZyYW1lL2Z1bmN0aW9uJykudXJsO1xyXG52YXIgRGF0YSA9IHJlcXVpcmUoJy4vZGF0YScpLkRhdGFcclxuICAgICwgRG9tID0gcmVxdWlyZSgnLi9kb20nKS5Eb207XHJcbnZhciBMaXN0ZW5lciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy9jbG9zZVxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuY2xvc2UtYnRuJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcud2hpdGUtYmFjaycpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnLmFsZXJ0LXBhcnQnKS5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnLnVzZXItaW5mbyAuZHJvcGRvd24tbWVudScpLmZpbmQoJ2xpJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcjYnV5Q29uJykudmFsKCQodGhpcykuZmluZCgnYScpLmh0bWwoKXx8J+WFqOmDqCcpO1xyXG4gICAgICAgICAgICB1cmwuc2V0KCd0cCcsJCgnI2J1eUNvbicpLnZhbCgpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL2ZpbGwgY29udGFjdFR5cGVcclxuICAgICAgICAkKCcubmV3QWRkLW1vZGFsIC5kcm9wZG93bi1tZW51JykuZmluZCgnbGknKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJyNhZGRCdXlDb24nKS52YWwoJCh0aGlzKS5maW5kKCdhJykuaHRtbCgpfHwn5pS26LSn5Lq6Jyk7XHJcbiAgICAgICAgICAgIHVybC5zZXQoJ3RwJywkKCcjYWRkQnV5Q29uJykudmFsKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuc2VhcmNoLWJ0bicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaW5pdCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuc2VsLXRpdGxlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB1cmwuc2V0KCdvZmZzZXQnLCAwKTtcclxuICAgICAgICAgICAgdXJsLnNldCgndHAnLCAkKHRoaXMpLmRhdGEoJ3RwJykpO1xyXG4gICAgICAgICAgICAkKCcucGFnZS1ib3gnKS5odG1sKCcnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGluaXQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnBhZ2VzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB1cmwuc2V0KCdvZmZzZXQnLCAkKHRoaXMpLmRhdGEoJ29mZnNldCcpKTtcclxuICAgICAgICAgICAgaW5pdCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJyNkYXktdGltZScpLmRhdGV0aW1lcGlja2VyKHtcclxuICAgICAgICAgICAgZm9ybWF0OiAneXl5eS1tbS1kZCcsLy/ml6XmnJ/nmoTmoLzlvI9cclxuICAgICAgICAgICAgc3RhcnREYXRlOiAnMTkwMC0wMS0wMScsLy/pgInmi6nlmajnmoTlvIDlp4vml6XmnJ9cclxuICAgICAgICAgICAgYXV0b2Nsb3NlOiB0cnVlLC8v5pel5pyf6YCJ5oup5a6M5oiQ5ZCO5piv5ZCm5YWz6Zet6YCJ5oup5qGGXHJcbiAgICAgICAgICAgIGJvb3Rjc3NWZXI6IDMsLy/mmL7npLrlkJHlt6blkJHlj7PnmoTnrq3lpLRcclxuICAgICAgICAgICAgbGFuZ3VhZ2U6ICd6aC1DTicsLy/or63oqIBcclxuICAgICAgICAgICAgbWluVmlldzogXCJtb250aFwiLy/ooajnpLrml6XmnJ/pgInmi6nnmoTmnIDlsI/ojIPlm7TvvIzpu5jorqTmmK9ob3VyXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGFpcmxpbmVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdibHVyJywgJyNzdGFydF9sb2NhdGlvbiwjZW5kX2xvY2F0aW9uJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSAkKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAsIHVsID0gX3RoaXMuc2libGluZ3MoJy5hamF4LXBhcnQnKTtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB1bC5jaGlsZHJlbignLmFjdGl2ZScpLmh0bWwoKSB8fCB1bC5maW5kKCdsaTpmaXJzdC1jaGlsZCcpLmh0bWwoKSB8fCAnJztcclxuICAgICAgICAgICAgdmFyIGRhdGEyID0gdWwuY2hpbGRyZW4oJy5hY3RpdmUnKS5kYXRhKCd2YWwnKSB8fCB1bC5maW5kKCdsaTpmaXJzdC1jaGlsZCcpLmRhdGEoJ3ZhbCcpIHx8ICcnO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnZhbChkYXRhKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5kYXRhKCd2YWwnLCBkYXRhMik7XHJcbiAgICAgICAgICAgIHVsLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbigna2V5dXAnLCAnI3N0YXJ0X2xvY2F0aW9uLCNlbmRfbG9jYXRpb24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSAkKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAsIHVsID0gX3RoaXMuc2libGluZ3MoJy5hamF4LXBhcnQnKTtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gdWwuZmluZCgnLmFjdGl2ZScpLmluZGV4KCkgfHwgMFxyXG4gICAgICAgICAgICAgICAgLCBsZW4gPSB1bC5jaGlsZHJlbigpLmxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykgey8v5Zue6L2m6ZSuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHVsLmNoaWxkcmVuKCcuYWN0aXZlJykuaHRtbCgpIHx8IHVsLmZpbmQoJ2xpOmZpcnN0LWNoaWxkJykuaHRtbCgpIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEyID0gdWwuY2hpbGRyZW4oJy5hY3RpdmUnKS5kYXRhKCd2YWwnKSB8fCB1bC5maW5kKCdsaTpmaXJzdC1jaGlsZCcpLmRhdGEoJ3ZhbCcpIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmRhdGEoJ3ZhbCcsIGRhdGEyKTtcclxuICAgICAgICAgICAgICAgIHVsLmhpZGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gMzgpIHsvL+S4iumUrlxyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCA9PSAwID8gbGVuIC0gMSA6IGluZGV4IC0gMTtcclxuICAgICAgICAgICAgICAgIHVsLmZpbmQoJ2xpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdWwuZmluZCgnbGknKS5lcShpbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSA0MCkgey8v5LiL6ZSuXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGluZGV4ID09IGxlbiAtIDEgPyAwIDogaW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgdWwuZmluZCgnbGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB1bC5maW5kKCdsaScpLmVxKGluZGV4KS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDgpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdrZXl1cCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Ugey8v5q2j5bi46L6T5YWlXHJcbiAgICAgICAgICAgICAgICBEYXRhLmFpcnBvcnQoe2tleTogX3RoaXMudmFsKCl9LCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQm9keScgaW4ganNvbiAmJiBqc29uLnJlc0JvZHkgaW5zdGFuY2VvZiBBcnJheSAmJiBqc29uLnJlc0JvZHkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9keSA9IGpzb24ucmVzQm9keTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYiBpbiBib2R5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYm9keS5oYXNPd25Qcm9wZXJ0eShiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gYm9keVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzxsaSBkYXRhLXZhbD1cIicgKyBkLmFpcnBvcnRDb2RlICsgJ1wiIGNsYXNzPVwiJyArIChiID09IDAgPyAnYWN0aXZlJyA6ICcnKSArICdcIj4nICsgZC5kaXNwbGF5TmFtZSArICc8L2xpPidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB1bC5odG1sKHN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgdWwuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignbW91c2VvdmVyJywgJy5hamF4LXBhcnQgbGknLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5hamF4LXBhcnQnKS5vbignY2xpY2snLCAnbGknLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuc2libGluZ3MoJ2lucHV0JykudmFsKCQodGhpcykuaHRtbCgpKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnZHAtbicpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbiAocmVxLCByZXMpIHtcclxuICAgICAgICB2YXIgbmV3VHAgPSA5OTtcclxuICAgICAgICB2YXIgdHAgPSB1cmwuZ2V0KCd0cCcpIHx8ICflhajpg6gnO1xyXG4gICAgICAgIHN3aXRjaCAodHApIHtcclxuICAgICAgICAgICAgY2FzZSAn5YWo6YOoJzpcclxuICAgICAgICAgICAgICAgIG5ld1RwID0gOTk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAn5pS26LSn5Lq6JzpcclxuICAgICAgICAgICAgICAgIG5ld1RwID0gMTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICflj5HotKfkuronOlxyXG4gICAgICAgICAgICAgICAgbmV3VHAgPSAyO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ+mAmuefpeS6uic6XHJcbiAgICAgICAgICAgICAgICBuZXdUcCA9IDM7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIFwiY29udGFjdFR5cGVcIjogbmV3VHAsXHJcbiAgICAgICAgICAgIFwiY29tcGFueU5hbWVcIjogJCgnI2J1eUNvbXBhbnknKS52YWwoKSB8fCAnJyxcclxuICAgICAgICAgICAgXCJjb250YWN0UGVyc29uXCI6ICQoJyNidXlOYW1lJykudmFsKCkgfHwgJycsXHJcbiAgICAgICAgICAgIFwiY29udGFjdFRlbFwiOiQoJyNidXlQaG9uZScpLnZhbCgpIHx8ICcnLFxyXG4gICAgICAgICAgICAvL1wiZmxpZ2h0RGF0ZVwiOiAkKCcjZGF5LXRpbWUnKS52YWwoKSA/ICQoJyNkYXktdGltZScpLnZhbCgpICsgJyAwMDowMDowMCcgOiBudWxsLFxyXG4gICAgICAgICAgICBcIm9mZnNldFwiOiB1cmwuZ2V0KCdvZmZzZXQnKSB8fCAwLFxyXG4gICAgICAgICAgICBcImxpbWl0XCI6IHVybC5nZXQoJ2xpbWl0JykgfHwgMjBcclxuICAgICAgICB9O1xyXG4gICAgICAgIERhdGEuY29tbW9uY0NvbnRhY3QoZGF0YSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgRG9tLmxpc3QoanNvbiwgZGF0YSwgdHApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnI2J1eUNvbicpLnZhbCgn5YWo6YOoJyk7XHJcbiAgICAgICAgJCgnI2FkZEJ1eUNvbicpLnZhbCgn5pS26LSn5Lq6Jyk7XHJcbiAgICAgICAgbGlzdGVuZXIoKTtcclxuICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgYWlybGluZXMoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJ1bjogcnVuXHJcbiAgICB9XHJcbn0oKSk7XHJcbm1vZHVsZS5leHBvcnRzID0gTGlzdGVuZXI7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTYvMTEvMjQuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbihmdW5jdGlvbiAoJCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiDnlJ/miJDliIbpobXlmahcclxuICAgICAqIEBwYXJhbSBlbGUg6ZyA6KaB5re75Yqg5YiG6aG15Zmo55qE5YWD57SgXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IOWBj+enu+mHj++8jOWNs+S7juesrGRhdGEtb2Zmc2V05byA5aeLXHJcbiAgICAgKiBAcGFyYW0gbGVuZ3RoIOaAu+iusOW9leadoeaVsFxyXG4gICAgICogQHBhcmFtIHNob3dQYWdlcyDliIbpobXlmajmmL7npLrnmoTpobXmlbDvvIzotoXov4fliJnpmpDol4/lpJrkvZnnmoTpobVcclxuICAgICAqIEBwYXJhbSByb3dzIOavj+mhteaYvuekuueahOiusOW9leadoeaVsFxyXG4gICAgICovXHJcbiAgICAkLmJ1cnN0ZXIgPSBmdW5jdGlvbiAoZWxlLCBvZmZzZXQsIGxlbmd0aCwgc2hvd1BhZ2VzLCByb3dzKSB7XHJcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID8gcGFyc2VJbnQob2Zmc2V0KSA6IDA7XHJcbiAgICAgICAgLy/lsIbliIbpobXlmajoo4XlhaV0YWJsZeS4rVxyXG4gICAgICAgIGlmIChsZW5ndGggJiYgbGVuZ3RoID4gb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIHZhciBwYWdlSHRtbCA9IFwiXCJcclxuICAgICAgICAgICAgICAgICwgYXNzID0gXCJcIi8v5riF56m66ZyA6KaB6KOF5YWl55qEaHRtbFxyXG4gICAgICAgICAgICAgICAgLCBiZWZvcmVQYWdlcyA9IE1hdGguY2VpbChvZmZzZXQgLyByb3dzKS8v6ZyA6KaB5pi+56S655qE5YmN6aG15pWwL+W9k+WJjemhtVxyXG4gICAgICAgICAgICAgICAgLCBhZnRlclBhZ2VzID0gTWF0aC5jZWlsKChsZW5ndGggLSBvZmZzZXQgKSAvIHJvd3MpLy/pnIDopoHmmL7npLrnmoTlkI7pobXmlbBcclxuICAgICAgICAgICAgICAgICwgcGFnZXMgPSBNYXRoLmNlaWwobGVuZ3RoIC8gcm93cykgLy/mgLvpobXmlbBcclxuICAgICAgICAgICAgICAgICwgayA9IDA7XHJcbiAgICAgICAgICAgIC8vYWxlcnQoXCLmgLvpobXmlbBcIiArIHBhZ2VzICsgXCIg5YmN6aG15pWwIFwiICsgYmVmb3JlUGFnZXMgKyBcIiDlkI7pobXmlbAgXCIgKyBhZnRlclBhZ2VzKTtcclxuICAgICAgICAgICAgLy/oi6XpobXmlbDlsI/kuo5zaG93UGFnZXPpobXvvIzliJnlhajpg6jmmL7npLpcclxuICAgICAgICAgICAgaWYgKHBhZ2VzID49IDAgJiYgcGFnZXMgPD0gc2hvd1BhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgcGFnZXM7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwYWdlcyA+IHNob3dQYWdlcykgey8v5oC76aG15pWw5aSn5LqOc2hvd1BhZ2Vz6aG1XHJcbiAgICAgICAgICAgICAgICBpZiAoYmVmb3JlUGFnZXMgPD0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICYmIGFmdGVyUGFnZXMgPiBzaG93UGFnZXMgKyAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IHNob3dQYWdlczsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKChwYWdlcyAtIDEpICogcm93cykgKyBcIic+Li4uXCIgKyBwYWdlcyArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZVBhZ2VzIDw9IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSAmJiBhZnRlclBhZ2VzID09IHNob3dQYWdlcyArIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgc2hvd1BhZ2VzIC0gMTsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKChwYWdlcyAtIDEpICogcm93cykgKyBcIic+Li4uXCIgKyBwYWdlcyArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZVBhZ2VzIDw9IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSAmJiBhZnRlclBhZ2VzIDw9IHNob3dQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBzaG93UGFnZXMgLSAxOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoKHBhZ2VzIC0gMSkgKiByb3dzKSArIFwiJz4uLi5cIiArIHBhZ2VzICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlUGFnZXMgPiBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgJiYgYmVmb3JlUGFnZXMgPD0gc2hvd1BhZ2VzICYmIGFmdGVyUGFnZXMgPiBzaG93UGFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PScwJz4xLi4uPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gYmVmb3JlUGFnZXMgLSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxOyBrIDwgYmVmb3JlUGFnZXMgKyBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMik7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGkgY2xhc3M9J2FjdGl2ZScgPjxhPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArICgocGFnZXMgLSAxKSAqIHJvd3MpICsgXCInPi4uLlwiICsgcGFnZXMgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiZWZvcmVQYWdlcyA+IHNob3dQYWdlcyAmJiBhZnRlclBhZ2VzID4gc2hvd1BhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nMCc+MS4uLjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IGJlZm9yZVBhZ2VzIC0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMTsgayA8IGJlZm9yZVBhZ2VzICsgTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoKHBhZ2VzIC0gMSkgKiByb3dzKSArIFwiJz4uLi5cIiArIHBhZ2VzICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlUGFnZXMgPiBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgJiYgYmVmb3JlUGFnZXMgPD0gcGFnZXMgJiYgYWZ0ZXJQYWdlcyA8PSBzaG93UGFnZXMgJiYgYWZ0ZXJQYWdlcyA+IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSArIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PScwJz4xLi4uPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gYmVmb3JlUGFnZXMgLSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxOyBrIDwgYmVmb3JlUGFnZXMgKyBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMik7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGkgY2xhc3M9J2FjdGl2ZScgPjxhPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArICgocGFnZXMgLSAxKSAqIHJvd3MpICsgXCInPi4uLlwiICsgcGFnZXMgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiZWZvcmVQYWdlcyA+IHBhZ2VzICYmIGFmdGVyUGFnZXMgPD0gc2hvd1BhZ2VzICYmIGFmdGVyUGFnZXMgPiBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nMCc+MS4uLjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IGJlZm9yZVBhZ2VzIC0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMTsgayA8IGJlZm9yZVBhZ2VzICsgTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoKHBhZ2VzIC0gMSkgKiByb3dzKSArIFwiJz4uLi5cIiArIHBhZ2VzICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlUGFnZXMgPiBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgJiYgYWZ0ZXJQYWdlcyA8PSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nMCc+MS4uLjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IGJlZm9yZVBhZ2VzIC0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMTsgayA8IHBhZ2VzOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/liKTmlq1cIummlumhtVwi5ZKMXCLmnKvpobVcIuaYr+WQpuWPr+eCueWHu1xyXG4gICAgICAgICAgICB2YXIgZmlyc3RQYWdlLCBsYXN0UGFnZTtcclxuICAgICAgICAgICAgaWYgKG9mZnNldCA9PSAwKSB7Ly/mraTml7bpppbpobXml6Dms5Xngrnlh7tcclxuICAgICAgICAgICAgICAgIGZpcnN0UGFnZSA9ICc8bGkgY2xhc3M9XCJkaXNhYmxlZFwiPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIjBcIj7pppbpobU8L2E+PC9saT4nO1xyXG4gICAgICAgICAgICAgICAgbGFzdFBhZ2UgPSAnPGxpPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIicgKyBwYXJzZUludChwYXJzZUludCgobGVuZ3RoICUgcm93cyA9PSAwID8gKGxlbmd0aCAtIDEpIDogbGVuZ3RoKSAvIHJvd3MpICogcm93cykgKyAnXCIgPuacq+mhtTwvYT48L2xpPic7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKG9mZnNldCArIHJvd3MpID49IGxlbmd0aCkgey8v5q2k5pe25pyr6aG15peg5rOV54K55Ye7XHJcbiAgICAgICAgICAgICAgICBmaXJzdFBhZ2UgPSAnPGxpPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIjBcIj7pppbpobU8L2E+PC9saT4nO1xyXG4gICAgICAgICAgICAgICAgbGFzdFBhZ2UgPSAnPGxpIGNsYXNzPVwiZGlzYWJsZWRcIj48YSBjbGFzcz1cInBhZ2VzXCIgZGF0YS1vZmZzZXQ9XCInICsgcGFyc2VJbnQocGFyc2VJbnQoKGxlbmd0aCAlIHJvd3MgPT0gMCA/IChsZW5ndGggLSAxKSA6IGxlbmd0aCkgLyByb3dzKSAqIHJvd3MpICsgJ1wiPuacq+mhtTwvYT48L2xpPic7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmaXJzdFBhZ2UgPSAnPGxpPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIjBcIj7pppbpobU8L2E+PC9saT4nO1xyXG4gICAgICAgICAgICAgICAgbGFzdFBhZ2UgPSAnPGxpPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIicgKyBwYXJzZUludChwYXJzZUludCgobGVuZ3RoICUgcm93cyA9PSAwID8gKGxlbmd0aCAtIDEpIDogbGVuZ3RoKSAvIHJvd3MpICogcm93cykgKyAnXCI+5pyr6aG1PC9hPjwvbGk+JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+WIpOaWrVwi5LiK5LiA6aG1XCLlkoxcIuS4i+S4gOmhtVwi5piv5ZCm5a2Y5ZyoXHJcbiAgICAgICAgICAgIHZhciB1cFBhZ2UsIGRvd25QYWdlO1xyXG4gICAgICAgICAgICBpZiAob2Zmc2V0ID09IDAgfHwgKG9mZnNldCA8IHJvd3MgJiYgKG9mZnNldCAlIHJvd3MgIT0gMCkpKSB7XHJcbiAgICAgICAgICAgICAgICB1cFBhZ2UgPSBcIjxsaSBjbGFzcz0nZGlzYWJsZWQnPjxhIGNsYXNzPSdwYWdlcycgZnVuYz0ncHJldmlvdXMnIGRhdGEtb2Zmc2V0PSdcIiArIHBhcnNlSW50KG9mZnNldCkgKyBcIicgPuS4iumhtTwvYT48L2xpPlwiXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB1cFBhZ2UgPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGZ1bmM9J3ByZXZpb3VzJyBkYXRhLW9mZnNldD0nXCIgKyAocGFyc2VJbnQob2Zmc2V0KSAtIHBhcnNlSW50KHJvd3MpKSArIFwiJyA+5LiK6aG1PC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9mZnNldCA+PSAobGVuZ3RoIC0gcm93cykpIHtcclxuICAgICAgICAgICAgICAgIGRvd25QYWdlID0gXCI8bGkgY2xhc3M9J2Rpc2FibGVkJz48YSBjbGFzcz0ncGFnZXMnIGZ1bmM9J25leHQnIGRhdGEtb2Zmc2V0PSdcIiArIHBhcnNlSW50KG9mZnNldCkgKyBcIic+5LiL6aG1PC9hPjwvbGk+XCJcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRvd25QYWdlID0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBmdW5jPSduZXh0JyBkYXRhLW9mZnNldD0nXCIgKyBwYXJzZUludChwYXJzZUludChvZmZzZXQpICsgcGFyc2VJbnQocm93cykpICsgXCInPuS4i+mhtTwvYT48L2xpPlwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBhZ2VzICE9IDEpIHtcclxuICAgICAgICAgICAgICAgIC8v5YiG6aG16YOo5YiGXHJcbiAgICAgICAgICAgICAgICBhc3MgKz0gXCI8ZGl2IGlkPSdwYWdlcicgY2xhc3M9J3BhZ2VyLWluZm8nPlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIjxoNiBpZD0ncmVzdWx0JyBjbGFzcz0ncGFnZXItcmVjb3JkJz7lhbHmnIk8c3Bhbj5cIiArIGxlbmd0aCArIFwiPC9zcGFuPuadoeiusOW9lTwvaDY+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiPHVsIGNsYXNzPSdwYWdpbmF0aW9uJz5cIiArIGZpcnN0UGFnZSArIHVwUGFnZSArIHBhZ2VIdG1sICsgZG93blBhZ2UgKyBsYXN0UGFnZSArIFwiPC91bD48L2Rpdj5cIjtcclxuICAgICAgICAgICAgICAgIC8vdGFibGXkuK3ms6jlhaXmi7zoo4XnmoTorrDlvZVcclxuICAgICAgICAgICAgICAgIGVsZS5odG1sKGFzcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7Ly/ml6Dms5XliIbpobXmuIXnqbrliIbpobXlmahcclxuICAgICAgICAgICAgICAgIGVsZS5odG1sKCcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufShqUXVlcnkpKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqZXJlbXkgb24gMjAxNi8yLzI2LlxyXG4gKiBAdmVyc2lvbiAxLjAuMCBjcmVhdGVkIOmAmueUqOaAp+WKn+iDveaWueazlVxyXG4gKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBGdW4gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIF90aW1lT3V0ID0gMTAwMDAwOy8v6K+35rGC6LaF5pe25pe26Ze05Li6MTBzXHJcbiAgICAvKipcclxuICAgICAqIOWwgeijhWFqYXhcclxuICAgICAqIEBwYXJhbSBvcHRpb25cclxuICAgICAqIHtcclxuICAgICAqICAgICAgdXJsOlwi6K+35rGC55qE5Zyw5Z2AXCJcclxuICAgICAqICAgICAgLG1ldGhvZDpcIuivt+axgueahOaWueazlVwiXHJcbiAgICAgKiAgICAgICxhc3luYzpcIuaYr+WQpuW5tuWPkVwiXHJcbiAgICAgKiAgICAgICxkYXRhOlwi5Y+R6YCB55qE5pWw5o2uXCJcclxuICAgICAqICAgICAgLHN1Y2Nlc3M6XCLmiJDlip/ml7blm57osINcIlxyXG4gICAgICogICAgICAsZXJyb3I6XCLlpLHotKUv6LaF5pe25pe25Zue6LCDXCJcclxuICAgICAqICAgICAgLHRpbWVvdXQ6XCLotoXml7bml7bpl7RcIlxyXG4gICAgICogICAgICAsY29tcGxldGU6XCLlrozmiJDlkI7nmoTlm57osINcIlxyXG4gICAgICogfVxyXG4gICAgICovXHJcbiAgICB2YXIgYWpheCA9IGZ1bmN0aW9uIChvcHRpb24pIHtcclxuICAgICAgICAvL2FqYXjlvIDlp4vml7blupTmmL7npLrigJzliqDovb3kv6Hmga/moYbigJ1cclxuICAgICAgICBNb2RhbC5zaG93TG9hZGluZygpO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogb3B0aW9uLnVybFxyXG4gICAgICAgICAgICAsIHR5cGU6IFwidHlwZVwiIGluIG9wdGlvbiAmJiBvcHRpb24udHlwZSB8fCBcIkdFVFwiXHJcbiAgICAgICAgICAgICwgdGltZW91dDogb3B0aW9uLnRpbWVvdXQgfHwgX3RpbWVPdXRcclxuICAgICAgICAgICAgLCBkYXRhOiBcImRhdGFcIiBpbiBvcHRpb24gJiYgb3B0aW9uLmRhdGEgfHwge31cclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogXCJqc29uXCJcclxuICAgICAgICAgICAgLCBhc3luYzogKFwiYXN5bmNcIiBpbiBvcHRpb24gJiYgb3B0aW9uLmFzeW5jKSA/IHRydWUgOiBmYWxzZVxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJzdGF0dXNcIiBpbiBqc29uICYmIGpzb24uc3RhdHVzID4gMCAmJiBcImRhdGFcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwic3VjY2Vzc1wiIGluIG9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24uc3VjY2Vzcyhqc29uLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KFwi5pegc3VjY2Vzc+aWueazlSFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcImVycm9yXCIgaW4gb3B0aW9uICYmIG9wdGlvbi5lcnJvciBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmVycm9yKGpzb24pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn5pON5L2c5aSx6LSlIScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBlcnJvcjogZnVuY3Rpb24gKHhocikgey8vNDA05oiW6ICF6LaF5pe2XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJlcnJvclwiIGluIG9wdGlvbiAmJiBvcHRpb24uZXJyb3IgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5o+Q56S655So5oi36ZSZ6K+v5L+h5oGvXHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2hvd0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KFwi6L+e5o6l5pyN5Yqh5Zmo5aSx6LSl77yM54q25oCB77yaXCIgKyAoeGhyLnN0YXR1cyB8fCAtMSkgKyBcIizkv6Hmga/vvJpcIiArICh4aHIuc3RhdHVzVGV4dCB8fCBcIi1cIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5lcnJvcih4aHIuc3RhdHVzLCB4aHIuc3RhdHVzVGV4dCk7Ly/lm57osIPor7fmsYLnmoTnirbmgIHlkozplJnor6/kv6Hmga9cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICh4aHIsIHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIC8v5YWz6Zet4oCc5Yqg6L295L+h5oGv5qGG4oCdXHJcbiAgICAgICAgICAgICAgICBNb2RhbC5zaG93TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJjb21wbGV0ZVwiIGluIG9wdGlvbiAmJiBvcHRpb24uY29tcGxldGUgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5jb21wbGV0ZSh4aHIsIHR5cGUpOy8v5Zue6LCD6K+35rGC55qEeGhy5L+h5oGv5ZKM57G75Z6LXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvL+WFqOmAieWSjOWNlemAieeahOe7keWumlxyXG4gICAgdmFyIHNldENoZWNrYm94TGlzdGVuZXIgPSBmdW5jdGlvbiAoYWxsQ2hlY2ssIHJhZGlvQ2hlY2tzKSB7XHJcbiAgICAgICAgLy/nrZvpgInljZXpgInmjInpkq7nu4RcclxuICAgICAgICB2YXIgcmFkaW9WYWx1ZUVsZXMgPSAkKHJhZGlvQ2hlY2tzKTtcclxuICAgICAgICAvL+eCueWHu+WFqOmAieaXtu+8jOWQjOe7hOaMiemSruiiq+WQjOatpVxyXG4gICAgICAgICQoZG9jdW1lbnQpLmRlbGVnYXRlKGFsbENoZWNrLCBcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHJhZGlvVmFsdWVFbGVzICYmIHJhZGlvVmFsdWVFbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9yID0gMDsgX3IgPCByYWRpb1ZhbHVlRWxlcy5sZW5ndGg7IF9yKyspIHtcclxuICAgICAgICAgICAgICAgICAgICByYWRpb1ZhbHVlRWxlc1tfcl0uY2hlY2tlZCA9ICQodGhpcykuaXMoXCI6Y2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v54K55Ye75Y2V6YCJ5oyJ6ZKu5pe277yMXHJcbiAgICAgICAgJChkb2N1bWVudCkuZGVsZWdhdGUocmFkaW9DaGVja3MsIFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKGFsbENoZWNrKVswXS5jaGVja2VkID0gJChyYWRpb0NoZWNrcyArIFwiOmNoZWNrZWRcIikubGVuZ3RoID09ICQocmFkaW9DaGVja3MpLmxlbmd0aDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgdXJsID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZ2V0ID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoXCIoXnwmKVwiICsgbmFtZSArIFwiPShbXiZdKikoJnwkKVwiLCBcImlcIik7XHJcbiAgICAgICAgICAgIHZhciByID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSkubWF0Y2gocmVnKTtcclxuICAgICAgICAgICAgaWYgKHIgIT0gbnVsbCkgcmV0dXJuIGRlY29kZVVSSShyWzJdKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmoLnmja7lj4LmlbDliJfooajplb/luqbov5vooYzliKTmlq3vvIzlhbzlrrlJRTlcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxICYmIHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdvYmplY3QnKSB7Ly/kuIDkuKrlr7nosaHvvIzkvb/nlKhrZXnmoIforrB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IGFyZ3VtZW50c1swXVxyXG4gICAgICAgICAgICAgICAgICAgICwgc2VhcmNoID0gbG9jYXRpb24uc2VhcmNoO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbyBpbiBvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KG8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaCA9IGNoYW5nZVVSTEtleVZhbHVlKHNlYXJjaCwgbywgb2JqW29dKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJ3B1c2hTdGF0ZScgaW4gaGlzdG9yeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsIGRvY3VtZW50LnRpdGxlLCBzZWFyY2gpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgncHVzaFN0YXRlJyBpbiBIaXN0b3J5KSB7Ly9pZTkg5LiN5pSv5oyBcHVzaFN0YXRl5pa55rOVLGphdmFzY3JpcHQuZWpz5Lit5re75YqgaGlzdG9yeS5qc+WujOaIkGh0bWw05a+5cHVzaFN0YXRl55qE5pSv5oyBXHJcbiAgICAgICAgICAgICAgICAgICAgSGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgc2VhcmNoKTsvL+i/lOWbnumHjeaWsOaehOmAoOWQjnNlYXJjaOS4slxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHsvL2tleSt2YWx1ZVxyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGFyZ3VtZW50c1swXVxyXG4gICAgICAgICAgICAgICAgICAgICwgdmFsdWUgPSBhcmd1bWVudHNbMV07XHJcbiAgICAgICAgICAgICAgICBpZiAoJ3B1c2hTdGF0ZScgaW4gaGlzdG9yeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsIGRvY3VtZW50LnRpdGxlLCBjaGFuZ2VVUkxLZXlWYWx1ZShsb2NhdGlvbi50b1N0cmluZygpLCBrZXksIHZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCdwdXNoU3RhdGUnIGluIEhpc3RvcnkpIHsvL2llOSDkuI3mlK/mjIFwdXNoU3RhdGXmlrnms5UsamF2YXNjcmlwdC5lanPkuK3mt7vliqBoaXN0b3J5Lmpz5a6M5oiQaHRtbDTlr7lwdXNoU3RhdGXnmoTmlK/mjIFcclxuICAgICAgICAgICAgICAgICAgICBIaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCBjaGFuZ2VVUkxLZXlWYWx1ZShsb2NhdGlvbi5zZWFyY2gsIGtleSwgdmFsdWUpKTsvL+i/lOWbnumHjeaWsOaehOmAoOWQjnNlYXJjaOS4slxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoYW5nZVVSTEtleVZhbHVlKHVybCwgYXJnLCBhcmdfdmFsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGF0dGVybiA9IGFyZyArICc9KFteJl0qKSc7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVwbGFjZVRleHQgPSBhcmcgKyAnPScgKyBhcmdfdmFsO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVybC5tYXRjaChwYXR0ZXJuKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSAnLygnICsgYXJnICsgJz0pKFteJl0qKS9naSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wID0gdXJsLnJlcGxhY2UoZXZhbCh0bXApLCByZXBsYWNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRtcDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVybC5tYXRjaCgnW1xcP10nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXJsICsgJyYnICsgcmVwbGFjZVRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVybCArICc/JyArIHJlcGxhY2VUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZ2V0OiBnZXRcclxuICAgICAgICAgICAgLCBzZXQ6IHNldFxyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICB2YXIgZm9ybWF0SW1hZ2U9ZnVuY3Rpb24gKHBhdGgsIHNpemUsIGVsZSkge1xyXG4gICAgICAgIGlmKHBhdGggaW5zdGFuY2VvZiAgQXJyYXkgJiYgcGF0aC5sZW5ndGg+MCl7XHJcbiAgICAgICAgICAgIHBhdGggPSBwYXRoWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgSU1BR0VfU0laRSA9IHtcclxuICAgICAgICAgICAgb3JpZ2luYWw6IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIlwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHhsYXJnZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfeGxhcmdlXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjY2MCo2NjBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsYXJnZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbGFyZ2VcIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiNDIwKjQyMFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1pZGRsZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbWlkZGxlXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjMwMCozMDBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzbWFsbDoge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfc21hbGxcIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiMjQwKjI0MFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxpdHRsZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbGl0dGxlXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjEyMCoxMjBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtaWNybzoge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbWljcm9cIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiNjAqNjBcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzaXplID0gSU1BR0VfU0laRVtzaXplIHx8IFwibWlkZGxlXCJdIHx8IElNQUdFX1NJWkUubWlkZGxlO1xyXG4gICAgICAgIHZhciBwYXRoVGVtcCA9IC9cXC5cXHcrPyQvLmV4ZWMocGF0aCk7XHJcbiAgICAgICAgaWYgKCFwYXRoVGVtcCkge1xyXG4gICAgICAgICAgICBwYXRoICs9IHNpemUucGF0aDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwYXRoID0gKHBhdGguc3Vic3RyKDAsIHBhdGhUZW1wLmluZGV4IHx8IHBhdGgubGVuZ3RoKSkgKyBzaXplLnBhdGggKyBwYXRoVGVtcFswXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVsZSAmJiBlbGUuYXR0cikge1xyXG4gICAgICAgICAgICBlbGUuYXR0cihcInNyY1wiLCBwYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBmb3JtYXQgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmb3JtYXRhbW91bnQgPSBmdW5jdGlvbihfdmFsdWUpe1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChfdmFsdWUpLnRvRml4ZWQoMik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL+S9k+enr+agvOW8j+WMluWwj+aVsOeCuTLkvY1cclxuICAgICAgICB2YXIgZm9ybWF0dm9sdW1lID0gZnVuY3Rpb24oX3ZhbHVlKXtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoX3ZhbHVlKS50b0ZpeGVkKDMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy/ph43ph4/moLzlvI/ljJblsI/mlbDngrky5L2NXHJcbiAgICAgICAgdmFyIGZvcm1hdHdlaWdodCA9IGZ1bmN0aW9uKF92YWx1ZSl7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KF92YWx1ZSkudG9GaXhlZCgzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGZvcm1hdGFtb3VudDogZm9ybWF0YW1vdW50XHJcbiAgICAgICAgICAgICwgZm9ybWF0dm9sdW1lOiBmb3JtYXR2b2x1bWVcclxuICAgICAgICAgICAgLCBmb3JtYXR3ZWlnaHQ6IGZvcm1hdHdlaWdodFxyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGFqYXg6IGFqYXhcclxuICAgICAgICAsIGdldFRpbXRvdXQ6IF90aW1lT3V0XHJcbiAgICAgICAgLCBzZXRDaGVja2JveExpc3RlbmVyOiBzZXRDaGVja2JveExpc3RlbmVyXHJcbiAgICAgICAgLCB1cmw6IHVybFxyXG4gICAgICAgICwgZm9ybWF0SW1hZ2U6IGZvcm1hdEltYWdlXHJcbiAgICAgICAgLCBmb3JtYXQ6IGZvcm1hdFxyXG4gICAgfVxyXG59KCkpO1xyXG5cclxuZXhwb3J0cy5hamF4ID0gRnVuLmFqYXg7XHJcbmV4cG9ydHMuZ2V0VGltZW91dCA9IEZ1bi5nZXRUaW10b3V0O1xyXG5leHBvcnRzLnNldENoZWNrYm94TGlzdGVuZXIgPSBGdW4uc2V0Q2hlY2tib3hMaXN0ZW5lcjtcclxuZXhwb3J0cy51cmwgPSBGdW4udXJsO1xyXG5leHBvcnRzLmZvcm1hdCA9IEZ1bi5mb3JtYXQ7XHJcbmV4cG9ydHMuZm9ybWF0SW1hZ2UgPSBGdW4uZm9ybWF0SW1hZ2U7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGplcmVteSBvbiAyMDE2LzIvMjQuXHJcbiAqIEB2ZXJzaW9uIDEuMC4wIGNyZWF0ZWRcclxuICovXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG4vL+aehOmAoOS/oeaBr+ahhuS4u+S9k1xyXG52YXIgTW9kYWwgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgLy/mnoTpgKDljp/lp4vnsbtcclxuICAgIGZ1bmN0aW9uIE0obSkge1xyXG4gICAgICAgIHRoaXMucyA9IG0uczsvL+aYr+WQpuaYvuekulxyXG4gICAgICAgIHRoaXMuaWQgPSBtLmlkO1xyXG4gICAgfVxyXG5cclxuICAgIC8v5p6E6YCg5qCH5YeGc2hvd+aWueazle+8jOeUqOS6jue7p+aJv1xyXG4gICAgTS5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pZCk7XHJcbiAgICAgICAgaWYgKGVsZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zICYmICFpc1Nob3coKSkgey8v5pi+56S65b2T5YmN6ZqQ6JePXHJcbiAgICAgICAgICAgICAgICBlbGUuY2xhc3NOYW1lID0gZWxlLmNsYXNzTmFtZS5yZXBsYWNlKFwiZHAtblwiLCBcIlwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5zICYmIGlzU2hvdygpKSB7Ly/pmpDol4/lvZPliY3mmL7npLpcclxuICAgICAgICAgICAgICAgIGVsZS5jbGFzc05hbWUgKz0gXCIgZHAtblwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5Y676Zmk5Lik6L6555qE56m65qC8XHJcbiAgICAgICAgICAgIGVsZS5jbGFzc05hbWUgPSBTdHJpbmcoZWxlLmNsYXNzTmFtZSkudHJpbSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBpc1Nob3coKSB7Ly/mmK/lkKblt7LmmL7npLrvvIzml6BjbGFzc+aXtuaYvuekulxyXG4gICAgICAgICAgICByZXR1cm4gZWxlLmNsYXNzTmFtZS5zcGxpdChcImRwLW5cIikubGVuZ3RoID09IDE7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvL+WKoOi9veS/oeaBr+ahhlxyXG4gICAgdmFyIGxvYWRpbmcgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v5Yid5aeL5YyW55Sf5oiQ5Yqg6L295L+h5oGv5qGGXHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2FkaW5nX21vZGFsX2VsZW1lbnRcIikpIHtcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJsb2FkaW5nX21vZGFsX2VsZW1lbnRcIiBjbGFzcz1cImxvYWRpbmctbW9kYWwtYm9keSBkcC1uXCI+PGRpdiBjbGFzcz1cImNvdmVyX21vZGFsX2VsZW1lbnRcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImxvYWRpbmctbW9kYWwtaW1hZ2VcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImxvYWRpbmctbW9kYWwtdGV4dFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8aDI+546p5ZG95Yqg6L295Lit4oCm4oCmPC9oMj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy/mmL7npLrjgIHpmpDol4/kv6Hmga/moYZcclxuICAgICAgICB2YXIgc2hvdyA9IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgIHMgPSB0eXBlb2YgcyA9PSBcInVuZGVmaW5lZFwiID8gdHJ1ZSA6IHM7Ly/ml6Dlj4LmlbDmmL7npLrkv6Hmga/moYZcclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgTSh7aWQ6IFwibG9hZGluZ19tb2RhbF9lbGVtZW50XCIsIHM6IHN9KTtcclxuICAgICAgICAgICAgbS5zaG93KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbml0OiBpbml0XHJcbiAgICAgICAgICAgICwgc2hvdzogc2hvd1xyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICAvL+W8ueWHuuS/oeaBr+ahhlxyXG4gICAgdmFyIGFsZXJ0ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsZXJ0X21vZGFsX2VsZW1lbnRcIikpIHtcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJhbGVydF9tb2RhbF9lbGVtZW50XCIgY2xhc3M9XCJhbGVydC1tb2RhbC1lbGVtZW50IGRwLW5cIj48ZGl2IGNsYXNzPVwiY292ZXJfbW9kYWxfZWxlbWVudFwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxlcnQtbW9kYWwtY29udGVudFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxlcnQtbW9kYWwtYm9keVwiPjxzcGFuIGNsYXNzPVwiYWxlcnQtbW9kYWwtdGV4dFwiPjwvc3Bhbj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsZXJ0LW1vZGFsLWZvb3RlclwiPjxidXR0b24gaWQ9XCJhbGVydF9tb2RhbF9jbG9zZVwiIGNsYXNzPVwiYWxlcnQtbW9kYWwtYnV0dG9uXCI+5YWz6ZetPC9idXR0b24+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzaG93ID0gZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICAgICAgcyA9IHR5cGVvZiBzID09IFwidW5kZWZpbmVkXCIgPyB0cnVlIDogcztcclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgTSh7aWQ6IFwiYWxlcnRfbW9kYWxfZWxlbWVudFwiLCBzOiBzfSk7XHJcbiAgICAgICAgICAgIG0uc2hvdygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6K6+572u5by55Ye65L+h5oGv5qGGXHJcbiAgICAgICAgICogQHBhcmFtIG1zZyAgICAgICDmmL7npLrnmoTkv6Hmga/vvIzmlK/mjIFodG1sXHJcbiAgICAgICAgICogQHBhcmFtIHNlZCAgICAgICDlgJLorqHml7blhbPpl63ml7bpl7TvvIzljZXkvY3vvJpzZWNvbmRcclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sgIOWFs+mXreinpuWPkeWbnuiwg+WHveaVsFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBzZXQgPSBmdW5jdGlvbiAobXNnLCBzZWQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsZXJ0X21vZGFsX2VsZW1lbnRcIik7XHJcbiAgICAgICAgICAgIGlmIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbXNnID09PSAnb2JqZWN0Jykgey8v5bqU5a+55ZCO56uv6L+U5Zue5o+Q56S65pe25L2/55SoT2JqZWN05bCB6KOFXHJcbiAgICAgICAgICAgICAgICAgICAgbXNnID0gSlNPTi5zdHJpbmdpZnkobXNnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGVsZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJhbGVydC1tb2RhbC10ZXh0XCIpWzBdLmlubmVySFRNTCA9IG1zZztcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImFsZXJ0LW1vZGFsLXRleHRcIilbMF0uaW5uZXJIVE1MID0gbXNnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzZWQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0sIDEwMDAgKiBzZWQpO1xyXG4gICAgICAgICAgICB9Ly/ml6DlhbPpl63ml7bpl7TmiJbogIXlhbPpl63ml7bpl7TkuLow77yM5LiN6Ieq5Yqo5YWz6ZetXHJcbiAgICAgICAgICAgIC8vZml4bWUg5LqL5Lu255uR5ZCs55qEaWXlhbzlrrnmgKdcclxuICAgICAgICAgICAgLy/lhbPpl63mjInpkq7nmoTkuovku7bkvqblkKxcclxuICAgICAgICAgICAgJChcIiNhbGVydF9tb2RhbF9jbG9zZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNob3coZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgLy/pmLvmraLkuovku7bnu6fnu63kvKDpgJJcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbml0OiBpbml0XHJcbiAgICAgICAgICAgICwgc2hvdzogc2hvd1xyXG4gICAgICAgICAgICAsIHNldDogc2V0XHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuICAgIC8v6YCJ5oup5L+h5oGv5qGGXHJcbiAgICB2YXIgY29uZmlybSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maXJtX21vZGFsX2VsZW1lbnRcIikpIHtcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJjb25maXJtX21vZGFsX2VsZW1lbnRcIiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtZWxlbWVudCBkcC1uXCI+PGRpdiBjbGFzcz1cImNvdmVyX21vZGFsX2VsZW1lbnRcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtY29udGVudFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGlkPVwiY29uZmlybV9tb2RhbF9oZWFkZXJcIiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtaGVhZGVyIGRwLW5cIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtYm9keVwiPjxzcGFuIGlkPVwiY29uZmlybV9tb2RhbF90ZXh0XCIgY2xhc3M9XCJjb25maXJtLW1vZGFsLXRleHRcIj48L3NwYW4+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb25maXJtLW1vZGFsLWZvb3RlclwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZm9vdGVyLWJ1dHRvbi1zdWNjZXNzXCI+PGJ1dHRvbiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtYnV0dG9uICBtb2RhbC1zdWNjZXNzXCIgZGF0YS1jb25maXJtPVwic3VjY2Vzc1wiPuehruiupDwvYnV0dG9uPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZm9vdGVyLWJ1dHRvbi1mYWxzZVwiPjxidXR0b24gY2xhc3M9XCJjb25maXJtLW1vZGFsLWJ1dHRvblwiIGRhdGEtY29uZmlybT1cImVycm9yXCI+5Y+W5raIPC9idXR0b24+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzaG93ID0gZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICAgICAgcyA9IHR5cGVvZiBzID09IFwidW5kZWZpbmVkXCIgPyB0cnVlIDogcztcclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgTSh7aWQ6IFwiY29uZmlybV9tb2RhbF9lbGVtZW50XCIsIHM6IHN9KTtcclxuICAgICAgICAgICAgbS5zaG93KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDorr7nva7pgInmi6nkv6Hmga/moYbnmoTlhoXlrrlcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9uICAgIOmFjee9rlxyXG4gICAgICAgICAqIHtcclxuICAgICAgICAgKiAgICAgIHRpdGxlOlwi5aS06YOo5pi+56S655qE5L+h5oGvXCJcclxuICAgICAgICAgKiAgICAgICx0ZXh0Olwi5pi+56S655qE5o+Q56S65L+h5oGvXCJcclxuICAgICAgICAgKiAgICAgICxzdWNjZXNzOlwi54K55Ye75oiQ5Yqf5ZCO55qE5Zue6LCDXCJcclxuICAgICAgICAgKiAgICAgICxlcnJvcjpcIueCueWHu+Wksei0peWQjueahOWbnuiwg1wiXHJcbiAgICAgICAgICogICAgICAsY29tcGxldGU6XCLngrnlh7vmjInpkq7lkI7nmoTmlbTkvZPlm57osINcIlxyXG4gICAgICAgICAqIH1cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgYmFyID0gMDtcclxuICAgICAgICB2YXIgc2V0ID0gZnVuY3Rpb24gKG9wdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoIW9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChcInRpdGxlXCIgaW4gb3B0aW9uICYmIG9wdGlvbi50aXRsZS5sZW5ndGggPiAwKSB7Ly/mnInlpLTpg6jvvIzliJnmmL7npLrlpLTpg6hcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlybV9tb2RhbF9oZWFkZXJcIikuaW5uZXJIVE1MID0gb3B0aW9uLnRpdGxlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChcInRleHRcIiBpbiBvcHRpb24gJiYgb3B0aW9uLnRleHQubGVuZ3RoID4gMCkgey8v5pyJ5YaF5a6577yM5YiZ5pi+56S65pW05Liq6YCJ5oup5L+h5oGv5qGGXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbmZpcm1fbW9kYWxfdGV4dFwiKS5pbm5lckhUTUwgPSBvcHRpb24udGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2ZpeG1lIOS6i+S7tuebkeWQrOeahGll5YW85a655oCnXHJcbiAgICAgICAgICAgIC8v5YWz6Zet5oyJ6ZKu55qE5LqL5Lu25L6m5ZCsXHJcbiAgICAgICAgICAgICQoXCIjY29uZmlybV9tb2RhbF9lbGVtZW50XCIpLmZpbmQoXCIuY29uZmlybS1tb2RhbC1idXR0b25cIikub2ZmKFwiY2xpY2tcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvL2ZpeG1lIC5vZmYoXCJjbGlja1wiKeeUqOS6jumYsuatouWkmuasoeinpuWPkTwtLeW+iOeOhOWtpu+8jOaIkeS5n+S4jeefpemBk+S4uuS7gOS5iO+8jOS9huaYr+ivt+S4jeimgeS/ruaUueOAglxyXG4gICAgICAgICAgICAgICAgdmFyIGF0ciA9ICQodGhpcykuYXR0cihcImRhdGEtY29uZmlybVwiKTsvL+mAieaLqeeahOaMiemSrlxyXG4gICAgICAgICAgICAgICAgYmFyKys7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uICYmIGF0ciBpbiBvcHRpb24gJiYgb3B0aW9uW2F0cl0gaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvblthdHJdKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uICYmIFwiY29tcGxldGVcIiBpbiBvcHRpb24gJiYgb3B0aW9uLmNvbXBsZXRlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24uY29tcGxldGUoKTsvL+iLpeacieWujOaIkOWHveaVsO+8jOWImeaJp+ihjFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsvL+WQpuWIme+8jOWFs+mXremAieaLqeahhlxyXG4gICAgICAgICAgICAgICAgICAgIHNob3coZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy/pmLvmraLkuovku7bnu6fnu63kvKDpgJJcclxuICAgICAgICAgICAgICAgIC8vcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluaXQ6IGluaXRcclxuICAgICAgICAgICAgLCBzaG93OiBzaG93XHJcbiAgICAgICAgICAgICwgc2V0OiBzZXRcclxuICAgICAgICB9XHJcbiAgICB9KCkpO1xyXG4gICAgLy/opobnm5blsYJcclxuICAgIHZhciBjb3ZlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb3Zlcl9tb2RhbF9lbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwiY292ZXJfbW9kYWxfZWxlbWVudFwiIGNsYXNzPVwiY292ZXItbW9kYWwtZWxlbWVudCBkcC1uXCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGhpZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY292ZXJfbW9kYWxfZWxlbWVudFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb3Zlcl9tb2RhbF9lbGVtZW50XCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbml0OiBpbml0XHJcbiAgICAgICAgICAgICwgc2hvdzogc2hvd1xyXG4gICAgICAgICAgICAsIGhpZGU6IGhpZGVcclxuICAgICAgICB9XHJcbiAgICB9KCkpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpbml0TG9hZGluZzogbG9hZGluZy5pbml0XHJcbiAgICAgICAgLCBzaG93TG9hZGluZzogbG9hZGluZy5zaG93XHJcblxyXG4gICAgICAgICwgaW5pdEFsZXJ0OiBhbGVydC5pbml0XHJcbiAgICAgICAgLCBzaG93QWxlcnQ6IGFsZXJ0LnNob3dcclxuICAgICAgICAsIHNldEFsZXJ0OiBhbGVydC5zZXRcclxuXHJcbiAgICAgICAgLCBpbml0Q29uZmlybTogY29uZmlybS5pbml0XHJcbiAgICAgICAgLCBzZXRDb25maXJtOiBjb25maXJtLnNldFxyXG4gICAgICAgICwgc2hvd0NvbmZpcm06IGNvbmZpcm0uc2hvd1xyXG4gICAgICAgICwgaW5pdENvdmVyOiBjb3Zlci5pbml0XHJcbiAgICB9XHJcbn0oKSk7XHJcblxyXG4vL+mhtemdouWKoOi9veWujOavleWQjueUn+aIkOWbm+S4quiHquWumuS5ieaooeaAgeahhlxyXG5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgIC8v6aG16Z2i5Yqg6L295pe255Sf5oiQ5LiA5Liq6KaG55uW5bGCXHJcbiAgICBNb2RhbC5pbml0Q292ZXIoKTtcclxuICAgIC8v6aG16Z2i5Yqg6L295pe255Sf5oiQ5LiA5Liq5Yqg6L295L+h5oGv5qGGXHJcbiAgICBNb2RhbC5pbml0TG9hZGluZygpO1xyXG4gICAgLy/pobXpnaLliqDovb3ml7bnlJ/miJDkuIDkuKrlvLnlh7rkv6Hmga/moYZcclxuICAgIE1vZGFsLmluaXRBbGVydCgpO1xyXG4gICAgLy/pobXpnaLliqDovb3ml7bnlJ/miJDkuIDkuKrpgInmi6nkv6Hmga/moYZcclxuICAgIE1vZGFsLmluaXRDb25maXJtKCk7XHJcbn0sIDEwMCk7XHJcblxyXG5cclxuLy/mipvlh7rkuIrlsYLosIPnlKhcclxuZXhwb3J0cy5zaG93TG9hZGluZyA9IE1vZGFsLnNob3dMb2FkaW5nO1xyXG5leHBvcnRzLnNldEFsZXJ0ID0gTW9kYWwuc2V0QWxlcnQ7XHJcbmV4cG9ydHMuc2hvd0FsZXJ0ID0gTW9kYWwuc2hvd0FsZXJ0O1xyXG5leHBvcnRzLnNldENvbmZpcm0gPSBNb2RhbC5zZXRDb25maXJtO1xyXG5leHBvcnRzLnNob3dDb25maXJtID0gTW9kYWwuc2hvd0NvbmZpcm07IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTYvMTEvMjIuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxudmFyIGhlYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvL+aXtumXtOagvOW8j+WMllxyXG4gICAgRGF0ZS5wcm90b3R5cGUuRm9ybWF0ID0gZnVuY3Rpb24gKGZtdCkgeyAvL2F1dGhvcjogSmVyZW15eXlcclxuICAgICAgICB2YXIgbyA9IHtcclxuICAgICAgICAgICAgXCJNK1wiOiB0aGlzLmdldE1vbnRoKCkgKyAxLCAvL+aciOS7vVxyXG4gICAgICAgICAgICBcImQrXCI6IHRoaXMuZ2V0RGF0ZSgpLCAvL+aXpVxyXG4gICAgICAgICAgICBcImgrXCI6IHRoaXMuZ2V0SG91cnMoKSwgLy/lsI/ml7ZcclxuICAgICAgICAgICAgXCJtK1wiOiB0aGlzLmdldE1pbnV0ZXMoKSwgLy/liIZcclxuICAgICAgICAgICAgXCJzK1wiOiB0aGlzLmdldFNlY29uZHMoKSwgLy/np5JcclxuICAgICAgICAgICAgXCJxK1wiOiBNYXRoLmZsb29yKCh0aGlzLmdldE1vbnRoKCkgKyAzKSAvIDMpLCAvL+Wto+W6plxyXG4gICAgICAgICAgICBcIlNcIjogdGhpcy5nZXRNaWxsaXNlY29uZHMoKSAvL+avq+enklxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKC8oeSspLy50ZXN0KGZtdCkpIGZtdCA9IGZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKHRoaXMuZ2V0RnVsbFllYXIoKSArIFwiXCIpLnN1YnN0cig0IC0gUmVnRXhwLiQxLmxlbmd0aCkpO1xyXG4gICAgICAgIGZvciAodmFyIGsgaW4gbylcclxuICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoXCIoXCIgKyBrICsgXCIpXCIpLnRlc3QoZm10KSkgZm10ID0gZm10LnJlcGxhY2UoUmVnRXhwLiQxLCAoUmVnRXhwLiQxLmxlbmd0aCA9PSAxKSA/IChvW2tdKSA6ICgoXCIwMFwiICsgb1trXSkuc3Vic3RyKChcIlwiICsgb1trXSkubGVuZ3RoKSkpO1xyXG4gICAgICAgIHJldHVybiBmbXQ7XHJcbiAgICB9O1xyXG4gICAgLy/ov5Tlm57pobbpg6hcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYmFjay10b3AnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChcImh0bWwsYm9keVwiKS5hbmltYXRlKHtzY3JvbGxUb3A6MH0sMTAwKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWVudGVyJywgJy52aXAtcGFydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcudmlwLXNlbGVjdCcpLnN0b3AodHJ1ZSk7XHJcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLnZpcC1zZWxlY3QnKS5zbGlkZURvd24oMTAwKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWxlYXZlJywgJy52aXAtcGFydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcudmlwLXNlbGVjdCcpLnN0b3AodHJ1ZSk7XHJcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLnZpcC1zZWxlY3QnKS5zbGlkZVVwKDEwMCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgICAkKGRvY3VtZW50KS5vbignbW91c2VlbnRlcicsICcud2VjaGF0LWxvZ28nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLmJpZy13ZWNoYXQnKS5mYWRlSW4oMjAwKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWxlYXZlJywgJy53ZWNoYXQtbG9nbycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcuYmlnLXdlY2hhdCcpLmZhZGVPdXQoMjAwKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxufTtcclxubW9kdWxlLmV4cG9ydHMuaGVhZCA9IGhlYWQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTYvMTEvMjIuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxudmFyIGxpc3RlbmVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/lpLTpg6jngrnlh7vkuovku7ZcclxuICAgICAgICByZXF1aXJlKCcuL2hlYWQnKS5oZWFkKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBydW46IHJ1blxyXG4gICAgfVxyXG59KCkpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IGxpc3RlbmVyOyJdfQ==
