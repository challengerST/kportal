(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * Created by jeremy on 2016/2/24.
 * @version 1.0.0 created
 */

'use strict';

//构造信息框主体
var Modal = (function () {
    //构造原始类
    function M(m) {
        this.s = m.s;//是否显示
        this.id = m.id;
    }

    //构造标准show方法，用于继承
    M.prototype.show = function () {
        var ele = document.getElementById(this.id);
        if (ele) {
            if (this.s && !isShow()) {//显示当前隐藏
                ele.className = ele.className.replace("dp-n", "");
            } else if (!this.s && isShow()) {//隐藏当前显示
                ele.className += " dp-n";
            }
            //去除两边的空格
            ele.className = String(ele.className).trim();
        }
        function isShow() {//是否已显示，无class时显示
            return ele.className.split("dp-n").length == 1;
        }
    };

    //加载信息框
    var loading = (function () {
        //初始化生成加载信息框
        var init = function () {
            if (!document.getElementById("loading_modal_element")) {
                $('body').append('<div id="loading_modal_element" class="loading-modal-body dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="loading-modal-image"></div>' +
                    '<div class="loading-modal-text">' +
                    '<h2>玩命加载中……</h2>' +
                    '</div></div>');
            }
            return false;
        };
        //显示、隐藏信息框
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;//无参数显示信息框
            var m = new M({id: "loading_modal_element", s: s});
            m.show();
        };
        return {
            init: init
            , show: show
        }
    }());
    //弹出信息框
    var alert = (function () {
        var init = function () {
            if (!document.getElementById("alert_modal_element")) {
                $('body').append('<div id="alert_modal_element" class="alert-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="alert-modal-content">' +
                    '<div class="alert-modal-body"><span class="alert-modal-text"></span></div>' +
                    '<div class="alert-modal-footer"><button id="alert_modal_close" class="alert-modal-button">关闭</button></div>' +
                    '</div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "alert_modal_element", s: s});
            m.show();
        };
        /**
         * 设置弹出信息框
         * @param msg       显示的信息，支持html
         * @param sed       倒计时关闭时间，单位：second
         * @param callback  关闭触发回调函数
         */
        var set = function (msg, sed, callback) {
            var ele = document.getElementById("alert_modal_element");
            if (msg) {
                if (typeof msg === 'object') {//应对后端返回提示时使用Object封装
                    msg = JSON.stringify(msg);
                }
                if(ele){
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }else{
                    init();
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }
                show();
            }
            if (sed > 0) {
                setTimeout(function () {
                    show(false);
                }, 1000 * sed);
            }//无关闭时间或者关闭时间为0，不自动关闭
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#alert_modal_close").on("click", function () {
                if (callback && callback instanceof Function) {
                    callback();
                }
                show(false);
                //阻止事件继续传递
                return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //选择信息框
    var confirm = (function () {
        var init = function () {
            if (!document.getElementById("confirm_modal_element")) {
                $('body').append('<div id="confirm_modal_element" class="confirm-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="confirm-modal-content">' +
                    '<div id="confirm_modal_header" class="confirm-modal-header dp-n"></div>' +
                    '<div class="confirm-modal-body"><span id="confirm_modal_text" class="confirm-modal-text"></span></div>' +
                    '<div class="confirm-modal-footer">' +
                    '<div class="footer-button-success"><button class="confirm-modal-button  modal-success" data-confirm="success">确认</button></div>' +
                    '<div class="footer-button-false"><button class="confirm-modal-button" data-confirm="error">取消</button></div>' +
                    '</div></div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "confirm_modal_element", s: s});
            m.show();
        };
        /**
         * 设置选择信息框的内容
         * @param option    配置
         * {
         *      title:"头部显示的信息"
         *      ,text:"显示的提示信息"
         *      ,success:"点击成功后的回调"
         *      ,error:"点击失败后的回调"
         *      ,complete:"点击按钮后的整体回调"
         * }
         */
        var bar = 0;
        var set = function (option) {
            if (!option) {
                return false;
            }
            if ("title" in option && option.title.length > 0) {//有头部，则显示头部
                document.getElementById("confirm_modal_header").innerHTML = option.title;
            }
            if ("text" in option && option.text.length > 0) {//有内容，则显示整个选择信息框
                document.getElementById("confirm_modal_text").innerHTML = option.text;
            }
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#confirm_modal_element").find(".confirm-modal-button").off("click").on("click", function () {
                //fixme .off("click")用于防止多次触发<--很玄学，我也不知道为什么，但是请不要修改。
                var atr = $(this).attr("data-confirm");//选择的按钮
                bar++;
                if (option && atr in option && option[atr] instanceof Function) {
                    option[atr]();
                }
                if (option && "complete" in option && option.complete instanceof Function) {
                    option.complete();//若有完成函数，则执行
                } else {//否则，关闭选择框
                    show(false);
                }
                //阻止事件继续传递
                //return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //覆盖层
    var cover = (function () {
        var init = function () {
            if (!document.getElementById("cover_modal_element")) {
                $('body').append('<div id="cover_modal_element" class="cover-modal-element dp-n"></div>');
            }
            return false;
        };
        var hide = function () {
            document.getElementById("cover_modal_element").style.display = "none";
        };
        var show = function () {
            document.getElementById("cover_modal_element").style.display = "block";
        };
        return {
            init: init
            , show: show
            , hide: hide
        }
    }());
    return {
        initLoading: loading.init
        , showLoading: loading.show

        , initAlert: alert.init
        , showAlert: alert.show
        , setAlert: alert.set

        , initConfirm: confirm.init
        , setConfirm: confirm.set
        , showConfirm: confirm.show
        , initCover: cover.init
    }
}());

//页面加载完毕后生成四个自定义模态框
setTimeout(function () {
    //页面加载时生成一个覆盖层
    Modal.initCover();
    //页面加载时生成一个加载信息框
    Modal.initLoading();
    //页面加载时生成一个弹出信息框
    Modal.initAlert();
    //页面加载时生成一个选择信息框
    Modal.initConfirm();
}, 100);


//抛出上层调用
exports.showLoading = Modal.showLoading;
exports.setAlert = Modal.setAlert;
exports.showAlert = Modal.showAlert;
exports.setConfirm = Modal.setConfirm;
exports.showConfirm = Modal.showConfirm;
},{}],2:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var head = function () {
    //时间格式化
    Date.prototype.Format = function (fmt) { //author: Jeremyyy
        var o = {
            "M+": this.getMonth() + 1, //月份
            "d+": this.getDate(), //日
            "h+": this.getHours(), //小时
            "m+": this.getMinutes(), //分
            "s+": this.getSeconds(), //秒
            "q+": Math.floor((this.getMonth() + 3) / 3), //季度
            "S": this.getMilliseconds() //毫秒
        };
        if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        for (var k in o)
            if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
        return fmt;
    };
    //返回顶部
    $(document).on('click', '.back-top', function () {
        $("html,body").animate({scrollTop:0},100);
        return false;
    });
    $(document).on('mouseenter', '.vip-part', function () {
        $(this).children('.vip-select').stop(true);
        $(this).children('.vip-select').slideDown(100);
        return false;
    });
    $(document).on('mouseleave', '.vip-part', function () {
        $(this).children('.vip-select').stop(true);
        $(this).children('.vip-select').slideUp(100);
        return false;
    });
    $(document).on('mouseenter', '.wechat-logo', function () {
        $(this).children('.big-wechat').fadeIn(200);
        return false;
    });
    $(document).on('mouseleave', '.wechat-logo', function () {
        $(this).children('.big-wechat').fadeOut(200);
        return false;
    });
};
module.exports.head = head;
},{}],3:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var listener = (function () {
    var run = function () {
        //头部点击事件
        require('./head').head();
    };
    return {
        run: run
    }
}());
module.exports = listener;
},{"./head":2}],4:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/24.
 */
"use strict";
var Data = (function () {
  var sendText = function (data, callback) {
    var _data = {};
    $.ajax({
      url: '/api/login/sendText'
      , type: 'post'
      , data: data
      , dataType: 'json'
      , timeout: 100000
      , success: function (json) {
        if (json && "resCode" in json) {
          _data = json;
        } else {
          _data = {};
        }
      }, complete: function () {
        if (callback && callback instanceof Function) {
          callback(_data);
        }
      }
    });
  };
  var nextStep = function (data, callback) {
    var _data = {};
    $.ajax({
      url: '/api/login/nextStep'
      , type: 'post'
      , data: data
      , dataType: 'json'
      , timeout: 100000
      , success: function (json) {
        if (json && "resCode" in json) {
          _data = json;
        } else {
          _data = {};
        }
      }, complete: function () {
        if (callback && callback instanceof Function) {
          callback(_data);
        }
      }
    });
  };
  var checkMobile = function (data, callback) {
    var _data = {};
    $.ajax({
      url: '/api/login/checkMobile'
      , type: 'post'
      , data: data
      , dataType: 'json'
      , timeout: 100000
      , success: function (json) {
        if (json && "resCode" in json) {
          _data = json;
        } else {
          _data = {};
        }
      }, complete: function () {
        if (callback && callback instanceof Function) {
          callback(_data);
        }
      }
    });
  };
  var checkSms = function (data, callback) {
    var _data = {};
    $.ajax({
      url: '/api/login/sendSms'
      , type: 'post'
      , data: data
      , dataType: 'json'
      , timeout: 100000
      , success: function (json) {
        console.log(json);
        if (json && "resCode" in json) {
          _data = json;
        } else {
          _data = {};
        }
      }, complete: function () {
        if (callback && callback instanceof Function) {
          callback(_data);
        }
      }
    });
  };
  return {
    sendText: sendText
    , nextStep: nextStep
    , checkMobile: checkMobile
    , checkSms :checkSms
  }
}());
module.exports.Data = Data;
},{}],5:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/23.
 */
"use strict";
require('../general').run();

require('./listener').run();
},{"../general":3,"./listener":6}],6:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var Modal = require('../frame/modal');
var Listener = (function () {
    var Data = require('./data').Data;
    var tel = false
    //, pwd = false
    //, repeat = false
    //, code = true
        , msg = false
        , mail = false
        , check = true
        , next = false
        , newRegName = false;
    var mailUrl = '';
    var listener = function () {
        //输入姓名
        $(document).on('click', '.agr_name .agr_wrong', function () {
            $(this).parent().find('.agr_wrong').hide();
            $('#agr_name').focus();
            $(this).css('border-color','#c6cede');
        });
        $(document).on('focus', '#agr_name', function () {
            $(this).parent().find('.agr_wrong').hide();
            $(this).parent().find('.info').hide();
            $(this).css('border-color','#c6cede');
        });
        $(document).on('blur', '#agr_name', function () {
            var reg1 = /^[a-zA-Z ]{1,20}$/,
                reg2 = /^[\u4e00-\u9fa5]{2,5}$/
                , value = $(this).val();
            if (value=='') {
                $(this).parent().find('.agr_wrong').show();
                $(this).css('border-color','red');
            } else {
                if (reg1.test(value) || reg2.test(value)) {
                    newRegName = true;
                    $(this).removeClass('wrong');
                    $(this).parent().find('.info').hide();
                }
                else {
                    newRegName = false;
                    $(this).addClass('wrong');
                    $(this).parent().find('.info').show();
                    $(this).css('border-color','red');
                }
            }
            pass();
        });
        //输入邮箱
        $(document).on('click', '.ensure .agr_wrong', function () {
            $(this).parent().find('.agr_wrong').hide();
            $('#mail').focus();
            $(this).css('border-color','#c6cede');
        });
        $(document).on('focus', '#mail', function () {
            $(this).parent().find('.agr_wrong').hide();
            $(this).css('border-color','#c6cede');
            $(this).parent().find('.info').hide();
        });
        $(document).on('blur', '#mail', function () {
            var reg = /^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]{2,4})+$/
                , value = $(this).val();
            if (value=='') {
                $(this).parent().find('.agr_wrong').show();
                $(this).css('border-color','red');
            } else {
                if (reg.test(value)) {
                    $(this).val();
                    mail = true;
                    $(this).removeClass('wrong');
                    $(this).siblings('.info').hide();
                } else {
                    mail = false;
                    $(this).addClass('wrong');
                    $(this).siblings('.info').show();
                    $(this).css('border-color','red');
                }
            }
            pass();
        });
        //输入电话
        $(document).on('click', '.tel .agr_wrong', function () {
            $(this).parent().find('.agr_wrong').hide();
            $('#tel').focus();
            $(this).css('border-color','#c6cede');
        });
        $(document).on('focus', '#tel', function () {
            $(this).parent().find('.agr_wrong').hide();
            $(this).css('border-color','#c6cede');
            $(this).parent().find('.info').hide();
        });
        $(document).on('blur', '#tel', function () {
            var reg = /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/
                , value = $(this).val();
            if (value=='') {
                $(this).parent().find('.agr_wrong').show();
                $(this).css('border-color','red');
            } else {
                if (reg.test(value)) {
                    tel = true;
                    $(this).removeClass('wrong');
                    $(this).siblings('.info').hide();
                } else {
                    tel = false;
                    $(this).addClass('wrong');
                    $(this).siblings('.info').show();
                    $(this).css('border-color','red');
                }
            }
            pass();
        });
        //输入短信验证码
        if($('#tel')==''){
            $('#p-msg').attr('disabled', true);
        }else{
            $(document).on('click', '.phone-msg .agr_wrong', function () {
                $(this).parent().find('.agr_wrong').hide();
                $('#mail').focus();
                $(this).css('border-color','#c6cede');
            });
            $(document).on('focus', '#p-msg', function () {
                $(this).parent().find('.agr_wrong').hide();
                $(this).css('border-color','#c6cede');
                $(this).parent().find('.info').hide();
            });
            $(document).on('blur', '#p-msg', function () {
                var value = $(this).val();
                if (value=='') {
                    $(this).parent().find('.agr_wrong').show();
                    $(this).css('border-color','red');
                } else {
                    if (value) {
                        msg = true;
                        $(this).removeClass('wrong');
                        $(this).siblings('.info').addClass('dp-n');
                    } else {
                        msg = false;
                        $(this).addClass('wrong');
                        $(this).siblings('.info').removeClass('dp-n');
                        $(this).css('border-color','#red');
                    }
                }
                pass();
            });
        }
        //同意协议勾选
        $(document).on('click', '#check', function () {
            check = $(this).prop('checked');
            pass();
        });
        //判断必选项是否填写
        var pass = function () {
            var ele = $('#register');
            if (tel && msg && check && mail && newRegName) {
                //ele.attr('disabled', false);
                next = true;
            } else {
                //ele.attr('disabled', true);
                next = false;
            }
        };
        $('.p-msg').click(function () {
            sendPhone();
        });
        //注册
        $(document).on('click', '.agr_next .lg-btn', function () {
            if (next) {
                var data = {
                    mobile: $('#tel').val()
                    , smsCode: $('#p-msg').val()
                    , email: $('#mail').val()
                    , name: $('#agr_name').val()
                };
                Data.nextStep(data, function (data) {
                    if (data && 'resCode' in data && data.resCode == 0) {
                        window.location.href = "./Certification?id="+ data.resBody.applyId;
                    } else {
                        Modal.setAlert(data.resMsg);
                    }
                });
            } else {
                Modal.setAlert('请填写完整');
            }
        });
        //验证码切换
    };

    //获取图形验证码
    //发送验证码
    var sendPhone = function () {
        var _this = $('.p-msg');
        if (tel) {
            Data.checkSms({mobile: $('#tel').val()}, function (json) {
                if (json && 'resCode' in json && json.resCode == 0) {
                    _this.prop('disabled', true);
                    _this.css({'background':'#e7ebf2','color':'#006bbd'});
                    //$('.agr_next').find('.lg-btn').removeAttribute("disabled");
                    var time = 120;
                    var timer = setInterval(function () {
                        if (time != 0) {
                            var str = '短信已发送（' + time + '）';
                            _this.html(str);
                            time--;
                        } else {
                            clearInterval(timer);
                            _this.html('点击发送验证码');
                            _this.prop('disabled', false);
                            _this.css('background','#fff');
                        }
                    }, 1000)
                } else {
                    _this.prop('disabled', false);
                    Modal.setAlert(json.resMsg);
                }
            });
        }
    };

    function gotomail($mail) {
        if ($mail) {
            var $t = $mail.split('@')[1];
            if ($t) {
                $t = $t.toLowerCase();
                if ($t == '163.com') {
                    return 'http://mail.163.com';
                } else if ($t == 'vip.163.com') {
                    return 'http://vip.163.com';
                } else if ($t == '126.com') {
                    return 'http://mail.126.com';
                } else if ($t == 'qq.com' || $t == 'vip.qq.com' || $t == 'foxmail.com') {
                    return 'http://mail.qq.com';
                } else if ($t == 'gmail.com') {
                    return 'http://mail.google.com';
                } else if ($t == 'sohu.com') {
                    return 'http://mail.sohu.com';
                } else if ($t == 'tom.com') {
                    return 'http://mail.tom.com';
                } else if ($t == 'vip.sina.com') {
                    return 'http://vip.sina.com';
                } else if ($t == 'sina.com.cn' || $t == 'sina.com') {
                    return 'http://mail.sina.com.cn';
                } else if ($t == 'tom.com') {
                    return 'http://mail.tom.com';
                } else if ($t == 'yahoo.com.cn' || $t == 'yahoo.cn') {
                    return 'http://mail.cn.yahoo.com';
                } else if ($t == 'tom.com') {
                    return 'http://mail.tom.com';
                } else if ($t == 'yeah.net') {
                    return 'http://www.yeah.net';
                } else if ($t == '21cn.com') {
                    return 'http://mail.21cn.com';
                } else if ($t == 'hotmail.com') {
                    return 'http://www.hotmail.com';
                } else if ($t == 'sogou.com') {
                    return 'http://mail.sogou.com';
                } else if ($t == '188.com') {
                    return 'http://www.188.com';
                } else if ($t == '139.com') {
                    return 'http://mail.10086.cn';
                } else if ($t == '189.cn') {
                    return 'http://webmail15.189.cn/webmail';
                } else if ($t == 'wo.com.cn') {
                    return 'http://mail.wo.com.cn/smsmail';
                } else if ($t == '139.com') {
                    return 'http://mail.10086.cn';
                } else {
                    return 'javascript:void(0);';
                }
            } else {
                return 'javascript:void(0);';
            }
        } else {
            return 'javascript:void(0);';
        }
    }

    var run = function () {
        listener();
        //getGt();
        //getCode();
        sendPhone();
    };
    return {
        run: run
    }
}());
module.exports = Listener;
},{"../frame/modal":1,"./data":4}]},{},[5])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL252bS92Ni4yLjAvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi4uL2ZyYW1lL21vZGFsLmpzIiwiLi4vZ2VuZXJhbC9oZWFkLmpzIiwiLi4vZ2VuZXJhbC9pbmRleC5qcyIsImRhdGEuanMiLCJpbmRleC5qcyIsImxpc3RlbmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgamVyZW15IG9uIDIwMTYvMi8yNC5cclxuICogQHZlcnNpb24gMS4wLjAgY3JlYXRlZFxyXG4gKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbi8v5p6E6YCg5L+h5oGv5qGG5Li75L2TXHJcbnZhciBNb2RhbCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAvL+aehOmAoOWOn+Wni+exu1xyXG4gICAgZnVuY3Rpb24gTShtKSB7XHJcbiAgICAgICAgdGhpcy5zID0gbS5zOy8v5piv5ZCm5pi+56S6XHJcbiAgICAgICAgdGhpcy5pZCA9IG0uaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy/mnoTpgKDmoIflh4ZzaG935pa55rOV77yM55So5LqO57un5om/XHJcbiAgICBNLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmlkKTtcclxuICAgICAgICBpZiAoZWxlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnMgJiYgIWlzU2hvdygpKSB7Ly/mmL7npLrlvZPliY3pmpDol49cclxuICAgICAgICAgICAgICAgIGVsZS5jbGFzc05hbWUgPSBlbGUuY2xhc3NOYW1lLnJlcGxhY2UoXCJkcC1uXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnMgJiYgaXNTaG93KCkpIHsvL+makOiXj+W9k+WJjeaYvuekulxyXG4gICAgICAgICAgICAgICAgZWxlLmNsYXNzTmFtZSArPSBcIiBkcC1uXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/ljrvpmaTkuKTovrnnmoTnqbrmoLxcclxuICAgICAgICAgICAgZWxlLmNsYXNzTmFtZSA9IFN0cmluZyhlbGUuY2xhc3NOYW1lKS50cmltKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGlzU2hvdygpIHsvL+aYr+WQpuW3suaYvuekuu+8jOaXoGNsYXNz5pe25pi+56S6XHJcbiAgICAgICAgICAgIHJldHVybiBlbGUuY2xhc3NOYW1lLnNwbGl0KFwiZHAtblwiKS5sZW5ndGggPT0gMTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8v5Yqg6L295L+h5oGv5qGGXHJcbiAgICB2YXIgbG9hZGluZyA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/liJ3lp4vljJbnlJ/miJDliqDovb3kv6Hmga/moYZcclxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYWRpbmdfbW9kYWxfZWxlbWVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImxvYWRpbmdfbW9kYWxfZWxlbWVudFwiIGNsYXNzPVwibG9hZGluZy1tb2RhbC1ib2R5IGRwLW5cIj48ZGl2IGNsYXNzPVwiY292ZXJfbW9kYWxfZWxlbWVudFwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibG9hZGluZy1tb2RhbC1pbWFnZVwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibG9hZGluZy1tb2RhbC10ZXh0XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxoMj7njqnlkb3liqDovb3kuK3igKbigKY8L2gyPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL+aYvuekuuOAgemakOiXj+S/oeaBr+ahhlxyXG4gICAgICAgIHZhciBzaG93ID0gZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICAgICAgcyA9IHR5cGVvZiBzID09IFwidW5kZWZpbmVkXCIgPyB0cnVlIDogczsvL+aXoOWPguaVsOaYvuekuuS/oeaBr+ahhlxyXG4gICAgICAgICAgICB2YXIgbSA9IG5ldyBNKHtpZDogXCJsb2FkaW5nX21vZGFsX2VsZW1lbnRcIiwgczogc30pO1xyXG4gICAgICAgICAgICBtLnNob3coKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluaXQ6IGluaXRcclxuICAgICAgICAgICAgLCBzaG93OiBzaG93XHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuICAgIC8v5by55Ye65L+h5oGv5qGGXHJcbiAgICB2YXIgYWxlcnQgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxlcnRfbW9kYWxfZWxlbWVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImFsZXJ0X21vZGFsX2VsZW1lbnRcIiBjbGFzcz1cImFsZXJ0LW1vZGFsLWVsZW1lbnQgZHAtblwiPjxkaXYgY2xhc3M9XCJjb3Zlcl9tb2RhbF9lbGVtZW50XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhbGVydC1tb2RhbC1jb250ZW50XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhbGVydC1tb2RhbC1ib2R5XCI+PHNwYW4gY2xhc3M9XCJhbGVydC1tb2RhbC10ZXh0XCI+PC9zcGFuPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxlcnQtbW9kYWwtZm9vdGVyXCI+PGJ1dHRvbiBpZD1cImFsZXJ0X21vZGFsX2Nsb3NlXCIgY2xhc3M9XCJhbGVydC1tb2RhbC1idXR0b25cIj7lhbPpl608L2J1dHRvbj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHNob3cgPSBmdW5jdGlvbiAocykge1xyXG4gICAgICAgICAgICBzID0gdHlwZW9mIHMgPT0gXCJ1bmRlZmluZWRcIiA/IHRydWUgOiBzO1xyXG4gICAgICAgICAgICB2YXIgbSA9IG5ldyBNKHtpZDogXCJhbGVydF9tb2RhbF9lbGVtZW50XCIsIHM6IHN9KTtcclxuICAgICAgICAgICAgbS5zaG93KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDorr7nva7lvLnlh7rkv6Hmga/moYZcclxuICAgICAgICAgKiBAcGFyYW0gbXNnICAgICAgIOaYvuekuueahOS/oeaBr++8jOaUr+aMgWh0bWxcclxuICAgICAgICAgKiBAcGFyYW0gc2VkICAgICAgIOWAkuiuoeaXtuWFs+mXreaXtumXtO+8jOWNleS9je+8mnNlY29uZFxyXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayAg5YWz6Zet6Kem5Y+R5Zue6LCD5Ye95pWwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIHNldCA9IGZ1bmN0aW9uIChtc2csIHNlZCwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxlcnRfbW9kYWxfZWxlbWVudFwiKTtcclxuICAgICAgICAgICAgaWYgKG1zZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtc2cgPT09ICdvYmplY3QnKSB7Ly/lupTlr7nlkI7nq6/ov5Tlm57mj5DnpLrml7bkvb/nlKhPYmplY3TlsIHoo4VcclxuICAgICAgICAgICAgICAgICAgICBtc2cgPSBKU09OLnN0cmluZ2lmeShtc2cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoZWxlKXtcclxuICAgICAgICAgICAgICAgICAgICBlbGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImFsZXJ0LW1vZGFsLXRleHRcIilbMF0uaW5uZXJIVE1MID0gbXNnO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYWxlcnQtbW9kYWwtdGV4dFwiKVswXS5pbm5lckhUTUwgPSBtc2c7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNlZCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3coZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCAqIHNlZCk7XHJcbiAgICAgICAgICAgIH0vL+aXoOWFs+mXreaXtumXtOaIluiAheWFs+mXreaXtumXtOS4ujDvvIzkuI3oh6rliqjlhbPpl61cclxuICAgICAgICAgICAgLy9maXhtZSDkuovku7bnm5HlkKznmoRpZeWFvOWuueaAp1xyXG4gICAgICAgICAgICAvL+WFs+mXreaMiemSrueahOS6i+S7tuS+puWQrFxyXG4gICAgICAgICAgICAkKFwiI2FsZXJ0X21vZGFsX2Nsb3NlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAvL+mYu+atouS6i+S7tue7p+e7reS8oOmAklxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluaXQ6IGluaXRcclxuICAgICAgICAgICAgLCBzaG93OiBzaG93XHJcbiAgICAgICAgICAgICwgc2V0OiBzZXRcclxuICAgICAgICB9XHJcbiAgICB9KCkpO1xyXG4gICAgLy/pgInmi6nkv6Hmga/moYZcclxuICAgIHZhciBjb25maXJtID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbmZpcm1fbW9kYWxfZWxlbWVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImNvbmZpcm1fbW9kYWxfZWxlbWVudFwiIGNsYXNzPVwiY29uZmlybS1tb2RhbC1lbGVtZW50IGRwLW5cIj48ZGl2IGNsYXNzPVwiY292ZXJfbW9kYWxfZWxlbWVudFwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29uZmlybS1tb2RhbC1jb250ZW50XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgaWQ9XCJjb25maXJtX21vZGFsX2hlYWRlclwiIGNsYXNzPVwiY29uZmlybS1tb2RhbC1oZWFkZXIgZHAtblwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29uZmlybS1tb2RhbC1ib2R5XCI+PHNwYW4gaWQ9XCJjb25maXJtX21vZGFsX3RleHRcIiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtdGV4dFwiPjwvc3Bhbj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtZm9vdGVyXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJmb290ZXItYnV0dG9uLXN1Y2Nlc3NcIj48YnV0dG9uIGNsYXNzPVwiY29uZmlybS1tb2RhbC1idXR0b24gIG1vZGFsLXN1Y2Nlc3NcIiBkYXRhLWNvbmZpcm09XCJzdWNjZXNzXCI+56Gu6K6kPC9idXR0b24+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJmb290ZXItYnV0dG9uLWZhbHNlXCI+PGJ1dHRvbiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtYnV0dG9uXCIgZGF0YS1jb25maXJtPVwiZXJyb3JcIj7lj5bmtog8L2J1dHRvbj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHNob3cgPSBmdW5jdGlvbiAocykge1xyXG4gICAgICAgICAgICBzID0gdHlwZW9mIHMgPT0gXCJ1bmRlZmluZWRcIiA/IHRydWUgOiBzO1xyXG4gICAgICAgICAgICB2YXIgbSA9IG5ldyBNKHtpZDogXCJjb25maXJtX21vZGFsX2VsZW1lbnRcIiwgczogc30pO1xyXG4gICAgICAgICAgICBtLnNob3coKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOiuvue9rumAieaLqeS/oeaBr+ahhueahOWGheWuuVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb24gICAg6YWN572uXHJcbiAgICAgICAgICoge1xyXG4gICAgICAgICAqICAgICAgdGl0bGU6XCLlpLTpg6jmmL7npLrnmoTkv6Hmga9cIlxyXG4gICAgICAgICAqICAgICAgLHRleHQ6XCLmmL7npLrnmoTmj5DnpLrkv6Hmga9cIlxyXG4gICAgICAgICAqICAgICAgLHN1Y2Nlc3M6XCLngrnlh7vmiJDlip/lkI7nmoTlm57osINcIlxyXG4gICAgICAgICAqICAgICAgLGVycm9yOlwi54K55Ye75aSx6LSl5ZCO55qE5Zue6LCDXCJcclxuICAgICAgICAgKiAgICAgICxjb21wbGV0ZTpcIueCueWHu+aMiemSruWQjueahOaVtOS9k+Wbnuiwg1wiXHJcbiAgICAgICAgICogfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBiYXIgPSAwO1xyXG4gICAgICAgIHZhciBzZXQgPSBmdW5jdGlvbiAob3B0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmICghb3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFwidGl0bGVcIiBpbiBvcHRpb24gJiYgb3B0aW9uLnRpdGxlLmxlbmd0aCA+IDApIHsvL+acieWktOmDqO+8jOWImeaYvuekuuWktOmDqFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maXJtX21vZGFsX2hlYWRlclwiKS5pbm5lckhUTUwgPSBvcHRpb24udGl0bGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFwidGV4dFwiIGluIG9wdGlvbiAmJiBvcHRpb24udGV4dC5sZW5ndGggPiAwKSB7Ly/mnInlhoXlrrnvvIzliJnmmL7npLrmlbTkuKrpgInmi6nkv6Hmga/moYZcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlybV9tb2RhbF90ZXh0XCIpLmlubmVySFRNTCA9IG9wdGlvbi50ZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vZml4bWUg5LqL5Lu255uR5ZCs55qEaWXlhbzlrrnmgKdcclxuICAgICAgICAgICAgLy/lhbPpl63mjInpkq7nmoTkuovku7bkvqblkKxcclxuICAgICAgICAgICAgJChcIiNjb25maXJtX21vZGFsX2VsZW1lbnRcIikuZmluZChcIi5jb25maXJtLW1vZGFsLWJ1dHRvblwiKS5vZmYoXCJjbGlja1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vZml4bWUgLm9mZihcImNsaWNrXCIp55So5LqO6Ziy5q2i5aSa5qyh6Kem5Y+RPC0t5b6I546E5a2m77yM5oiR5Lmf5LiN55+l6YGT5Li65LuA5LmI77yM5L2G5piv6K+35LiN6KaB5L+u5pS544CCXHJcbiAgICAgICAgICAgICAgICB2YXIgYXRyID0gJCh0aGlzKS5hdHRyKFwiZGF0YS1jb25maXJtXCIpOy8v6YCJ5oup55qE5oyJ6ZKuXHJcbiAgICAgICAgICAgICAgICBiYXIrKztcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb24gJiYgYXRyIGluIG9wdGlvbiAmJiBvcHRpb25bYXRyXSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uW2F0cl0oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb24gJiYgXCJjb21wbGV0ZVwiIGluIG9wdGlvbiAmJiBvcHRpb24uY29tcGxldGUgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5jb21wbGV0ZSgpOy8v6Iul5pyJ5a6M5oiQ5Ye95pWw77yM5YiZ5omn6KGMXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Ugey8v5ZCm5YiZ77yM5YWz6Zet6YCJ5oup5qGGXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL+mYu+atouS6i+S7tue7p+e7reS8oOmAklxyXG4gICAgICAgICAgICAgICAgLy9yZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICAsIHNob3c6IHNob3dcclxuICAgICAgICAgICAgLCBzZXQ6IHNldFxyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICAvL+imhuebluWxglxyXG4gICAgdmFyIGNvdmVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdmVyX21vZGFsX2VsZW1lbnRcIikpIHtcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJjb3Zlcl9tb2RhbF9lbGVtZW50XCIgY2xhc3M9XCJjb3Zlci1tb2RhbC1lbGVtZW50IGRwLW5cIj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgaGlkZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb3Zlcl9tb2RhbF9lbGVtZW50XCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzaG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdmVyX21vZGFsX2VsZW1lbnRcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluaXQ6IGluaXRcclxuICAgICAgICAgICAgLCBzaG93OiBzaG93XHJcbiAgICAgICAgICAgICwgaGlkZTogaGlkZVxyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGluaXRMb2FkaW5nOiBsb2FkaW5nLmluaXRcclxuICAgICAgICAsIHNob3dMb2FkaW5nOiBsb2FkaW5nLnNob3dcclxuXHJcbiAgICAgICAgLCBpbml0QWxlcnQ6IGFsZXJ0LmluaXRcclxuICAgICAgICAsIHNob3dBbGVydDogYWxlcnQuc2hvd1xyXG4gICAgICAgICwgc2V0QWxlcnQ6IGFsZXJ0LnNldFxyXG5cclxuICAgICAgICAsIGluaXRDb25maXJtOiBjb25maXJtLmluaXRcclxuICAgICAgICAsIHNldENvbmZpcm06IGNvbmZpcm0uc2V0XHJcbiAgICAgICAgLCBzaG93Q29uZmlybTogY29uZmlybS5zaG93XHJcbiAgICAgICAgLCBpbml0Q292ZXI6IGNvdmVyLmluaXRcclxuICAgIH1cclxufSgpKTtcclxuXHJcbi8v6aG16Z2i5Yqg6L295a6M5q+V5ZCO55Sf5oiQ5Zub5Liq6Ieq5a6a5LmJ5qih5oCB5qGGXHJcbnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgLy/pobXpnaLliqDovb3ml7bnlJ/miJDkuIDkuKropobnm5blsYJcclxuICAgIE1vZGFsLmluaXRDb3ZlcigpO1xyXG4gICAgLy/pobXpnaLliqDovb3ml7bnlJ/miJDkuIDkuKrliqDovb3kv6Hmga/moYZcclxuICAgIE1vZGFsLmluaXRMb2FkaW5nKCk7XHJcbiAgICAvL+mhtemdouWKoOi9veaXtueUn+aIkOS4gOS4quW8ueWHuuS/oeaBr+ahhlxyXG4gICAgTW9kYWwuaW5pdEFsZXJ0KCk7XHJcbiAgICAvL+mhtemdouWKoOi9veaXtueUn+aIkOS4gOS4qumAieaLqeS/oeaBr+ahhlxyXG4gICAgTW9kYWwuaW5pdENvbmZpcm0oKTtcclxufSwgMTAwKTtcclxuXHJcblxyXG4vL+aKm+WHuuS4iuWxguiwg+eUqFxyXG5leHBvcnRzLnNob3dMb2FkaW5nID0gTW9kYWwuc2hvd0xvYWRpbmc7XHJcbmV4cG9ydHMuc2V0QWxlcnQgPSBNb2RhbC5zZXRBbGVydDtcclxuZXhwb3J0cy5zaG93QWxlcnQgPSBNb2RhbC5zaG93QWxlcnQ7XHJcbmV4cG9ydHMuc2V0Q29uZmlybSA9IE1vZGFsLnNldENvbmZpcm07XHJcbmV4cG9ydHMuc2hvd0NvbmZpcm0gPSBNb2RhbC5zaG93Q29uZmlybTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNi8xMS8yMi5cclxuICovXHJcblwidXNlIHN0cmljdFwiO1xyXG52YXIgaGVhZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8v5pe26Ze05qC85byP5YyWXHJcbiAgICBEYXRlLnByb3RvdHlwZS5Gb3JtYXQgPSBmdW5jdGlvbiAoZm10KSB7IC8vYXV0aG9yOiBKZXJlbXl5eVxyXG4gICAgICAgIHZhciBvID0ge1xyXG4gICAgICAgICAgICBcIk0rXCI6IHRoaXMuZ2V0TW9udGgoKSArIDEsIC8v5pyI5Lu9XHJcbiAgICAgICAgICAgIFwiZCtcIjogdGhpcy5nZXREYXRlKCksIC8v5pelXHJcbiAgICAgICAgICAgIFwiaCtcIjogdGhpcy5nZXRIb3VycygpLCAvL+Wwj+aXtlxyXG4gICAgICAgICAgICBcIm0rXCI6IHRoaXMuZ2V0TWludXRlcygpLCAvL+WIhlxyXG4gICAgICAgICAgICBcInMrXCI6IHRoaXMuZ2V0U2Vjb25kcygpLCAvL+enklxyXG4gICAgICAgICAgICBcInErXCI6IE1hdGguZmxvb3IoKHRoaXMuZ2V0TW9udGgoKSArIDMpIC8gMyksIC8v5a2j5bqmXHJcbiAgICAgICAgICAgIFwiU1wiOiB0aGlzLmdldE1pbGxpc2Vjb25kcygpIC8v5q+r56eSXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoLyh5KykvLnRlc3QoZm10KSkgZm10ID0gZm10LnJlcGxhY2UoUmVnRXhwLiQxLCAodGhpcy5nZXRGdWxsWWVhcigpICsgXCJcIikuc3Vic3RyKDQgLSBSZWdFeHAuJDEubGVuZ3RoKSk7XHJcbiAgICAgICAgZm9yICh2YXIgayBpbiBvKVxyXG4gICAgICAgICAgICBpZiAobmV3IFJlZ0V4cChcIihcIiArIGsgKyBcIilcIikudGVzdChmbXQpKSBmbXQgPSBmbXQucmVwbGFjZShSZWdFeHAuJDEsIChSZWdFeHAuJDEubGVuZ3RoID09IDEpID8gKG9ba10pIDogKChcIjAwXCIgKyBvW2tdKS5zdWJzdHIoKFwiXCIgKyBvW2tdKS5sZW5ndGgpKSk7XHJcbiAgICAgICAgcmV0dXJuIGZtdDtcclxuICAgIH07XHJcbiAgICAvL+i/lOWbnumhtumDqFxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5iYWNrLXRvcCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKFwiaHRtbCxib2R5XCIpLmFuaW1hdGUoe3Njcm9sbFRvcDowfSwxMDApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG4gICAgJChkb2N1bWVudCkub24oJ21vdXNlZW50ZXInLCAnLnZpcC1wYXJ0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oJy52aXAtc2VsZWN0Jykuc3RvcCh0cnVlKTtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcudmlwLXNlbGVjdCcpLnNsaWRlRG93bigxMDApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG4gICAgJChkb2N1bWVudCkub24oJ21vdXNlbGVhdmUnLCAnLnZpcC1wYXJ0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oJy52aXAtc2VsZWN0Jykuc3RvcCh0cnVlKTtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcudmlwLXNlbGVjdCcpLnNsaWRlVXAoMTAwKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWVudGVyJywgJy53ZWNoYXQtbG9nbycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcuYmlnLXdlY2hhdCcpLmZhZGVJbigyMDApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG4gICAgJChkb2N1bWVudCkub24oJ21vdXNlbGVhdmUnLCAnLndlY2hhdC1sb2dvJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oJy5iaWctd2VjaGF0JykuZmFkZU91dCgyMDApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG59O1xyXG5tb2R1bGUuZXhwb3J0cy5oZWFkID0gaGVhZDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNi8xMS8yMi5cclxuICovXHJcblwidXNlIHN0cmljdFwiO1xyXG52YXIgbGlzdGVuZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+WktOmDqOeCueWHu+S6i+S7tlxyXG4gICAgICAgIHJlcXVpcmUoJy4vaGVhZCcpLmhlYWQoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJ1bjogcnVuXHJcbiAgICB9XHJcbn0oKSk7XHJcbm1vZHVsZS5leHBvcnRzID0gbGlzdGVuZXI7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTYvMTEvMjQuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxudmFyIERhdGEgPSAoZnVuY3Rpb24gKCkge1xyXG4gIHZhciBzZW5kVGV4dCA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICB1cmw6ICcvYXBpL2xvZ2luL3NlbmRUZXh0J1xyXG4gICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG4gIHZhciBuZXh0U3RlcCA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICB1cmw6ICcvYXBpL2xvZ2luL25leHRTdGVwJ1xyXG4gICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG4gIHZhciBjaGVja01vYmlsZSA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICB1cmw6ICcvYXBpL2xvZ2luL2NoZWNrTW9iaWxlJ1xyXG4gICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG4gIHZhciBjaGVja1NtcyA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICB1cmw6ICcvYXBpL2xvZ2luL3NlbmRTbXMnXHJcbiAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGpzb24pO1xyXG4gICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcbiAgcmV0dXJuIHtcclxuICAgIHNlbmRUZXh0OiBzZW5kVGV4dFxyXG4gICAgLCBuZXh0U3RlcDogbmV4dFN0ZXBcclxuICAgICwgY2hlY2tNb2JpbGU6IGNoZWNrTW9iaWxlXHJcbiAgICAsIGNoZWNrU21zIDpjaGVja1Ntc1xyXG4gIH1cclxufSgpKTtcclxubW9kdWxlLmV4cG9ydHMuRGF0YSA9IERhdGE7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTYvMTEvMjMuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxucmVxdWlyZSgnLi4vZ2VuZXJhbCcpLnJ1bigpO1xyXG5cclxucmVxdWlyZSgnLi9saXN0ZW5lcicpLnJ1bigpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplcmVteSBvbiAyMDE2LzExLzIyLlxyXG4gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBNb2RhbCA9IHJlcXVpcmUoJy4uL2ZyYW1lL21vZGFsJyk7XHJcbnZhciBMaXN0ZW5lciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgRGF0YSA9IHJlcXVpcmUoJy4vZGF0YScpLkRhdGE7XHJcbiAgICB2YXIgdGVsID0gZmFsc2VcclxuICAgIC8vLCBwd2QgPSBmYWxzZVxyXG4gICAgLy8sIHJlcGVhdCA9IGZhbHNlXHJcbiAgICAvLywgY29kZSA9IHRydWVcclxuICAgICAgICAsIG1zZyA9IGZhbHNlXHJcbiAgICAgICAgLCBtYWlsID0gZmFsc2VcclxuICAgICAgICAsIGNoZWNrID0gdHJ1ZVxyXG4gICAgICAgICwgbmV4dCA9IGZhbHNlXHJcbiAgICAgICAgLCBuZXdSZWdOYW1lID0gZmFsc2U7XHJcbiAgICB2YXIgbWFpbFVybCA9ICcnO1xyXG4gICAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v6L6T5YWl5aeT5ZCNXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5hZ3JfbmFtZSAuYWdyX3dyb25nJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5hZ3Jfd3JvbmcnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJyNhZ3JfbmFtZScpLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCcjYzZjZWRlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2ZvY3VzJywgJyNhZ3JfbmFtZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuYWdyX3dyb25nJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5pbmZvJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcygnYm9yZGVyLWNvbG9yJywnI2M2Y2VkZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdibHVyJywgJyNhZ3JfbmFtZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlZzEgPSAvXlthLXpBLVogXXsxLDIwfSQvLFxyXG4gICAgICAgICAgICAgICAgcmVnMiA9IC9eW1xcdTRlMDAtXFx1OWZhNV17Miw1fSQvXHJcbiAgICAgICAgICAgICAgICAsIHZhbHVlID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlPT0nJykge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuYWdyX3dyb25nJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2JvcmRlci1jb2xvcicsJ3JlZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlZzEudGVzdCh2YWx1ZSkgfHwgcmVnMi50ZXN0KHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1JlZ05hbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3dyb25nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuaW5mbycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1JlZ05hbWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCd3cm9uZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmluZm8nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2JvcmRlci1jb2xvcicsJ3JlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhc3MoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+i+k+WFpemCrueusVxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZW5zdXJlIC5hZ3Jfd3JvbmcnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmFncl93cm9uZycpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnI21haWwnKS5mb2N1cygpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcygnYm9yZGVyLWNvbG9yJywnI2M2Y2VkZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdmb2N1cycsICcjbWFpbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuYWdyX3dyb25nJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcygnYm9yZGVyLWNvbG9yJywnI2M2Y2VkZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5pbmZvJykuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdibHVyJywgJyNtYWlsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVnID0gL15bXFx3LV0rKFxcLltcXHctXSspKkBbXFx3LV0rKFxcLltcXHctXXsyLDR9KSskL1xyXG4gICAgICAgICAgICAgICAgLCB2YWx1ZSA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZT09JycpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmFncl93cm9uZycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCdyZWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZWcudGVzdCh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1haWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3dyb25nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmluZm8nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG1haWwgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCd3cm9uZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5pbmZvJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCdyZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwYXNzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/ovpPlhaXnlLXor51cclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnRlbCAuYWdyX3dyb25nJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5hZ3Jfd3JvbmcnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJyN0ZWwnKS5mb2N1cygpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcygnYm9yZGVyLWNvbG9yJywnI2M2Y2VkZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdmb2N1cycsICcjdGVsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5hZ3Jfd3JvbmcnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCcjYzZjZWRlJyk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmluZm8nKS5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2JsdXInLCAnI3RlbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlZyA9IC9eKDB8ODZ8MTc5NTEpPygxM1swLTldfDE1WzAxMjM1Njc4OV18MTdbNjc4XXwxOFswLTldfDE0WzU3XSlbMC05XXs4fSQvXHJcbiAgICAgICAgICAgICAgICAsIHZhbHVlID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlPT0nJykge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuYWdyX3dyb25nJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2JvcmRlci1jb2xvcicsJ3JlZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlZy50ZXN0KHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnd3JvbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuaW5mbycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVsID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnd3JvbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuaW5mbycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnYm9yZGVyLWNvbG9yJywncmVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGFzcygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v6L6T5YWl55+t5L+h6aqM6K+B56CBXHJcbiAgICAgICAgaWYoJCgnI3RlbCcpPT0nJyl7XHJcbiAgICAgICAgICAgICQoJyNwLW1zZycpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucGhvbmUtbXNnIC5hZ3Jfd3JvbmcnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5hZ3Jfd3JvbmcnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjbWFpbCcpLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnYm9yZGVyLWNvbG9yJywnI2M2Y2VkZScpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2ZvY3VzJywgJyNwLW1zZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmFncl93cm9uZycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCcjYzZjZWRlJyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5pbmZvJykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2JsdXInLCAnI3AtbXNnJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZT09JycpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5hZ3Jfd3JvbmcnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2JvcmRlci1jb2xvcicsJ3JlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnd3JvbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmluZm8nKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCd3cm9uZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuaW5mbycpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCcjcmVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGFzcygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/lkIzmhI/ljY/orq7li77pgIlcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2NoZWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjaGVjayA9ICQodGhpcykucHJvcCgnY2hlY2tlZCcpO1xyXG4gICAgICAgICAgICBwYXNzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/liKTmlq3lv4XpgInpobnmmK/lkKbloavlhplcclxuICAgICAgICB2YXIgcGFzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGVsZSA9ICQoJyNyZWdpc3RlcicpO1xyXG4gICAgICAgICAgICBpZiAodGVsICYmIG1zZyAmJiBjaGVjayAmJiBtYWlsICYmIG5ld1JlZ05hbWUpIHtcclxuICAgICAgICAgICAgICAgIC8vZWxlLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgbmV4dCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL2VsZS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgbmV4dCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkKCcucC1tc2cnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbmRQaG9uZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5rOo5YaMXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5hZ3JfbmV4dCAubGctYnRuJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobmV4dCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9iaWxlOiAkKCcjdGVsJykudmFsKClcclxuICAgICAgICAgICAgICAgICAgICAsIHNtc0NvZGU6ICQoJyNwLW1zZycpLnZhbCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLCBlbWFpbDogJCgnI21haWwnKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgICAgICwgbmFtZTogJCgnI2Fncl9uYW1lJykudmFsKClcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBEYXRhLm5leHRTdGVwKGRhdGEsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgJ3Jlc0NvZGUnIGluIGRhdGEgJiYgZGF0YS5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi4vQ2VydGlmaWNhdGlvbj9pZD1cIisgZGF0YS5yZXNCb2R5LmFwcGx5SWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoZGF0YS5yZXNNc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+ivt+Whq+WGmeWujOaVtCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/pqozor4HnoIHliIfmjaJcclxuICAgIH07XHJcblxyXG4gICAgLy/ojrflj5blm77lvaLpqozor4HnoIFcclxuICAgIC8v5Y+R6YCB6aqM6K+B56CBXHJcbiAgICB2YXIgc2VuZFBob25lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9ICQoJy5wLW1zZycpO1xyXG4gICAgICAgIGlmICh0ZWwpIHtcclxuICAgICAgICAgICAgRGF0YS5jaGVja1Ntcyh7bW9iaWxlOiAkKCcjdGVsJykudmFsKCl9LCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNzcyh7J2JhY2tncm91bmQnOicjZTdlYmYyJywnY29sb3InOicjMDA2YmJkJ30pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vJCgnLmFncl9uZXh0JykuZmluZCgnLmxnLWJ0bicpLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aW1lID0gMTIwO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWUgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9ICfnn63kv6Hlt7Llj5HpgIHvvIgnICsgdGltZSArICfvvIknO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaHRtbChzdHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5odG1sKCfngrnlh7vlj5HpgIHpqozor4HnoIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3NzKCdiYWNrZ3JvdW5kJywnI2ZmZicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMClcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoanNvbi5yZXNNc2cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGdvdG9tYWlsKCRtYWlsKSB7XHJcbiAgICAgICAgaWYgKCRtYWlsKSB7XHJcbiAgICAgICAgICAgIHZhciAkdCA9ICRtYWlsLnNwbGl0KCdAJylbMV07XHJcbiAgICAgICAgICAgIGlmICgkdCkge1xyXG4gICAgICAgICAgICAgICAgJHQgPSAkdC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCR0ID09ICcxNjMuY29tJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL21haWwuMTYzLmNvbSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICd2aXAuMTYzLmNvbScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly92aXAuMTYzLmNvbSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICcxMjYuY29tJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL21haWwuMTI2LmNvbSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICdxcS5jb20nIHx8ICR0ID09ICd2aXAucXEuY29tJyB8fCAkdCA9PSAnZm94bWFpbC5jb20nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdodHRwOi8vbWFpbC5xcS5jb20nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkdCA9PSAnZ21haWwuY29tJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL21haWwuZ29vZ2xlLmNvbSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICdzb2h1LmNvbScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly9tYWlsLnNvaHUuY29tJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHQgPT0gJ3RvbS5jb20nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdodHRwOi8vbWFpbC50b20uY29tJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHQgPT0gJ3ZpcC5zaW5hLmNvbScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly92aXAuc2luYS5jb20nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkdCA9PSAnc2luYS5jb20uY24nIHx8ICR0ID09ICdzaW5hLmNvbScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly9tYWlsLnNpbmEuY29tLmNuJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHQgPT0gJ3RvbS5jb20nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdodHRwOi8vbWFpbC50b20uY29tJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHQgPT0gJ3lhaG9vLmNvbS5jbicgfHwgJHQgPT0gJ3lhaG9vLmNuJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL21haWwuY24ueWFob28uY29tJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHQgPT0gJ3RvbS5jb20nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdodHRwOi8vbWFpbC50b20uY29tJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHQgPT0gJ3llYWgubmV0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL3d3dy55ZWFoLm5ldCc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICcyMWNuLmNvbScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly9tYWlsLjIxY24uY29tJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHQgPT0gJ2hvdG1haWwuY29tJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL3d3dy5ob3RtYWlsLmNvbSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICdzb2dvdS5jb20nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdodHRwOi8vbWFpbC5zb2dvdS5jb20nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkdCA9PSAnMTg4LmNvbScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly93d3cuMTg4LmNvbSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICcxMzkuY29tJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL21haWwuMTAwODYuY24nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkdCA9PSAnMTg5LmNuJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL3dlYm1haWwxNS4xODkuY24vd2VibWFpbCc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICd3by5jb20uY24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdodHRwOi8vbWFpbC53by5jb20uY24vc21zbWFpbCc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICcxMzkuY29tJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL21haWwuMTAwODYuY24nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2phdmFzY3JpcHQ6dm9pZCgwKTsnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdqYXZhc2NyaXB0OnZvaWQoMCk7JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnamF2YXNjcmlwdDp2b2lkKDApOyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGlzdGVuZXIoKTtcclxuICAgICAgICAvL2dldEd0KCk7XHJcbiAgICAgICAgLy9nZXRDb2RlKCk7XHJcbiAgICAgICAgc2VuZFBob25lKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBydW46IHJ1blxyXG4gICAgfVxyXG59KCkpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IExpc3RlbmVyOyJdfQ==
