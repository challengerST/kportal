(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * Created by Auser on 2016/12/6.
 */
"use strict";
var Data = (function () {
  var list = function (data, callback) {
    var _data = {};
    $.ajax({
      url: '/api/entrust/list'
      , type: 'post'
      , data: data
      , dataType: 'json'
      , timeout: 100000
      , success: function (json) {
        if (json && "resCode" in json) {
          _data = json;
        } else {
          _data = {};
        }
      }, complete: function () {
        if (callback && callback instanceof Function) {
          callback(_data);
        }
      }
    });
  };
  return {
    list: list
  }
}());
module.exports.Data = Data;
},{}],2:[function(require,module,exports){
/**
 * Created by Auser on 2016/12/7.
 */
"use strict";
require('../frame/burster');
var Dom = (function () {
  var list = function (json, ele, param) {
    var str = '';
    if (json && 'resCode' in json && json.resCode == 0 && 'resBody' in json && json.resBody && 'sList' in json.resBody) {
      if (json.resBody.sList instanceof Array && json.resBody.sList.length > 0) {
        var body = json.resBody.sList;
        for (var b in body) {
          if (body.hasOwnProperty(b)) {
            str += render(body[b]);
          }
        }
        $.burster($(".page-box"), param.offset || 0, json.resBody.totalCount || 0, 5, param.limit || 10);
      } else {
        str = '<tr class="wrong-msg"><td colspan="7">暂无此类消息</td></tr>';
        $('.page-box').html('');
      }
    } else {
      str = '<tr class="wrong-msg"><td colspan="7">获取列表失败，<a href="">请刷新重试</a>！</td></tr>';
      $('.page-box').html('');
    }
    ele.find('tbody').html(str);
    function render(d) {
      var type;
      switch (d.messageType) {
        case 10:
          type = '系统消息';
          break;
        case 20:
          type = '订单消息';
          break;
        case 30:
          type = '账单消息';
          break;
        case 40:
          type = '发票消息';
          break;
      }
      return '<tr> <td><input type="checkbox" name="tb-sel" data-id="' + d.Id + '"></td> ' +
        '<td><a href="/vip/note/detail?id=' + d.Id + '">' + (d.messageTitle || '无标题') + '</a></td> ' +
        '<td>' + new Date(d.createDt).Format('yyyy-MM-dd hh:mm:ss') + '</td> <td>' + type + '</td> </tr>'
    }
  };
  return {
    list: list
  }
}());
module.exports.Dom = Dom;
},{"../frame/burster":5}],3:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
require('../general').run();
require('./listener').run();
},{"../general":9,"./listener":4}],4:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var url = require('../frame/function').url;
var Data = require('./data').Data
  , Dom = require('./dom').Dom;
var Modal = require('../frame/modal');
var Listener = (function () {
  var listener = function () {
    $('#f-date').datetimepicker({
      format: 'yyyy-mm-dd',//日期的格式
      startDate: new Date(),//选择器的开始日期
      autoclose: true,//日期选择完成后是否关闭选择框
      bootcssVer: 3,//显示向左向右的箭头
      language: 'zh-CN',//语言
      minView: "month"//表示日期选择的最小范围，默认是hour
    });
    $('#h-date').datetimepicker({
      format: 'yyyy-mm-dd',//日期的格式
      startDate: new Date(),//选择器的开始日期
      autoclose: true,//日期选择完成后是否关闭选择框
      bootcssVer: 3,//显示向左向右的箭头
      language: 'zh-CN',//语言
      minView: "month"//表示日期选择的最小范围，默认是hour
    })
    $(document).on('click', '.type-sel span', function () {
      $(this).addClass('active');
      $(this).siblings().removeClass('active');
      url.set('type', $(this).data('type'));
      operate();
      init();
    });
  };
  var operate = function () {
    var tp = url.get('type') || 'all';
    var str = '';
    if (tp == 'all') {
      str += '<button class="sm-btn bg-w" id="send-mail">发送邮件</button><button class="sm-btn bg-w" id="download">下载</button>' +
      '<button class="sm-btn bg-w" id="re-order">重新委托</button><button class="sm-btn bg-w" id="delete">删除</button>' +
      '<button class="sm-btn bg-w" id="cancel">取消</button><button class="sm-btn blue-btn" id="search">搜索</button>'
    } else if (tp == 'doing') {
      str += '<button class="sm-btn bg-w" id="send-mail">发送邮件</button><button class="sm-btn bg-w" id="download">下载</button>' +
      '<button class="sm-btn bg-w" id="cancel">取消</button><button class="sm-btn blue-btn" id="search">搜索</button>'
    } else if (tp == 'cancel') {
      str += '<button class="sm-btn bg-w" id="send-mail">发送邮件</button><button class="sm-btn bg-w" id="download">下载</button>' +
      '<button class="sm-btn bg-w" id="re-order">重新委托</button>' +
      '<button class="sm-btn bg-w" id="cancel">取消</button><button class="sm-btn blue-btn" id="search">搜索</button>'
    } else if (tp == 'refuse') {
      str += '<button class="sm-btn bg-w" id="send-mail">发送邮件</button><button class="sm-btn bg-w" id="download">下载</button>' +
      '<button class="sm-btn bg-w" id="cancel">取消</button><button class="sm-btn blue-btn" id="search">搜索</button>'
    } else if (tp == 'done') {
      str += '<button class="sm-btn bg-w" id="send-mail">发送邮件</button><button class="sm-btn bg-w" id="download">下载</button>' +
      '<button class="sm-btn blue-btn" id="search">搜索</button>'
    }
    $('.operate-part').html(str);
  };
  var init = function () {
    var tp = url.get('type') || 'all', state;
    switch (tp) {
      case 'all':
        state = 0;
        break;
      case 'doing':
        state = 1;
        break;
      case 'cancel':
        state = 2;
        break;
      case 'refuse':
        state = 3;
        break;
      case 'done':
        state = 4;
        break;
      case 'delete':
        state = -1;
        break;
    }
    var data = {
      memberId: 0,
      state: state,
      offset: url.get('offset') || 0,
      limit: url.get('limit') || 20
    };
    Data.list(data, function (json) {
      console.log(json);
    });
  };
  var run = function () {
    listener();
    $('.type-sel').find('span[data-type="' + (url.get('type') || 'all') + '"]').addClass('active');
    operate();
    init();
  };
  return {
    run: run
  }
}());
module.exports = Listener;
},{"../frame/function":6,"../frame/modal":7,"./data":1,"./dom":2}],5:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/24.
 */
"use strict";

(function ($) {
    /**
     * 生成分页器
     * @param ele 需要添加分页器的元素
     * @param offset 偏移量，即从第data-offset开始
     * @param length 总记录条数
     * @param showPages 分页器显示的页数，超过则隐藏多余的页
     * @param rows 每页显示的记录条数
     */
    $.burster = function (ele, offset, length, showPages, rows) {
        offset = offset ? parseInt(offset) : 0;
        //将分页器装入table中
        if (length && length > offset) {
            var pageHtml = ""
                , ass = ""//清空需要装入的html
                , beforePages = Math.ceil(offset / rows)//需要显示的前页数/当前页
                , afterPages = Math.ceil((length - offset ) / rows)//需要显示的后页数
                , pages = Math.ceil(length / rows) //总页数
                , k = 0;
            //alert("总页数" + pages + " 前页数 " + beforePages + " 后页数 " + afterPages);
            //若页数小于showPages页，则全部显示
            if (pages >= 0 && pages <= showPages) {
                for (k = 0; k < pages; k++) {
                    if (k == beforePages) {
                        pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                    } else {
                        pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                    }
                }
            } else if (pages > showPages) {//总页数大于showPages页
                if (beforePages <= Math.ceil(showPages / 2) && afterPages > showPages + 1) {
                    for (k = 0; k < showPages; k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages <= Math.ceil(showPages / 2) && afterPages == showPages + 1) {
                    for (k = 0; k < showPages - 1; k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages <= Math.ceil(showPages / 2) && afterPages <= showPages) {
                    for (k = 0; k < showPages - 1; k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages > Math.ceil(showPages / 2) && beforePages <= showPages && afterPages > showPages) {
                    pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
                    for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages > showPages && afterPages > showPages) {
                    pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
                    for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages > Math.ceil(showPages / 2) && beforePages <= pages && afterPages <= showPages && afterPages > Math.ceil(showPages / 2) + 1) {
                    pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
                    for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages > pages && afterPages <= showPages && afterPages > Math.ceil(showPages / 2) + 1) {
                    pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
                    for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages > Math.ceil(showPages / 2) && afterPages <= Math.ceil(showPages / 2) + 1) {
                    pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
                    for (k = beforePages - Math.ceil(showPages / 2) + 1; k < pages; k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                }
            }
            //判断"首页"和"末页"是否可点击
            var firstPage, lastPage;
            if (offset == 0) {//此时首页无法点击
                firstPage = '<li class="disabled"><a class="pages" data-offset="0">首页</a></li>';
                lastPage = '<li><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '" >末页</a></li>';
            } else if ((offset + rows) >= length) {//此时末页无法点击
                firstPage = '<li><a class="pages" data-offset="0">首页</a></li>';
                lastPage = '<li class="disabled"><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '">末页</a></li>';
            } else {
                firstPage = '<li><a class="pages" data-offset="0">首页</a></li>';
                lastPage = '<li><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '">末页</a></li>';
            }
            //判断"上一页"和"下一页"是否存在
            var upPage, downPage;
            if (offset == 0 || (offset < rows && (offset % rows != 0))) {
                upPage = "<li class='disabled'><a class='pages' func='previous' data-offset='" + parseInt(offset) + "' >上页</a></li>"
            } else {
                upPage = "<li><a class='pages' func='previous' data-offset='" + (parseInt(offset) - parseInt(rows)) + "' >上页</a></li>";
            }
            if (offset >= (length - rows)) {
                downPage = "<li class='disabled'><a class='pages' func='next' data-offset='" + parseInt(offset) + "'>下页</a></li>"
            } else {
                downPage = "<li><a class='pages' func='next' data-offset='" + parseInt(parseInt(offset) + parseInt(rows)) + "'>下页</a></li>"
            }
            if (pages != 1) {
                //分页部分
                ass += "<div id='pager' class='pager-info'>" +
                    "<h6 id='result' class='pager-record'>共有<span>" + length + "</span>条记录</h6>" +
                    "<ul class='pagination'>" + firstPage + upPage + pageHtml + downPage + lastPage + "</ul></div>";
                //table中注入拼装的记录
                ele.html(ass);
            } else {//无法分页清空分页器
                ele.html('');
            }
        }
    }
}(jQuery));
},{}],6:[function(require,module,exports){
/**
 * Created by jeremy on 2016/2/26.
 * @version 1.0.0 created 通用性功能方法
 */

'use strict';

var Fun = (function () {
    var _timeOut = 100000;//请求超时时间为10s
    /**
     * 封装ajax
     * @param option
     * {
     *      url:"请求的地址"
     *      ,method:"请求的方法"
     *      ,async:"是否并发"
     *      ,data:"发送的数据"
     *      ,success:"成功时回调"
     *      ,error:"失败/超时时回调"
     *      ,timeout:"超时时间"
     *      ,complete:"完成后的回调"
     * }
     */
    var ajax = function (option) {
        //ajax开始时应显示“加载信息框”
        Modal.showLoading();
        $.ajax({
            url: option.url
            , type: "type" in option && option.type || "GET"
            , timeout: option.timeout || _timeOut
            , data: "data" in option && option.data || {}
            , dataType: "json"
            , async: ("async" in option && option.async) ? true : false
            , success: function (json) {
                if ("status" in json && json.status > 0 && "data" in json) {
                    if ("success" in option) {
                        option.success(json.data);
                    } else {
                        Modal.setAlert("无success方法!");
                    }
                } else if ("error" in option && option.error instanceof Function) {
                    option.error(json);
                } else {
                    Modal.setAlert('操作失败!');
                }
            }, error: function (xhr) {//404或者超时
                if ("error" in option && option.error instanceof Function) {
                    //提示用户错误信息
                    Modal.showLoading(false);
                    Modal.setAlert("连接服务器失败，状态：" + (xhr.status || -1) + ",信息：" + (xhr.statusText || "-"));
                    option.error(xhr.status, xhr.statusText);//回调请求的状态和错误信息
                }
            }, complete: function (xhr, type) {
                //关闭“加载信息框”
                Modal.showLoading(false);
                if ("complete" in option && option.complete instanceof Function) {
                    option.complete(xhr, type);//回调请求的xhr信息和类型
                }
            }
        });
    };
    //全选和单选的绑定
    var setCheckboxListener = function (allCheck, radioChecks) {
        //筛选单选按钮组
        var radioValueEles = $(radioChecks);
        //点击全选时，同组按钮被同步
        $(document).delegate(allCheck, "click", function () {
            if (radioValueEles && radioValueEles.length > 0) {
                for (var _r = 0; _r < radioValueEles.length; _r++) {
                    radioValueEles[_r].checked = $(this).is(":checked");
                }
            }
        });
        //点击单选按钮时，
        $(document).delegate(radioChecks, "click", function () {
            $(allCheck)[0].checked = $(radioChecks + ":checked").length == $(radioChecks).length;
        });
    };
    var url = (function () {
        var get = function (name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return decodeURI(r[2]);
            return null;
        };
        /**
         * 根据参数列表长度进行判断，兼容IE9
         * @returns {string}
         */
        var set = function () {
            if (arguments.length === 1 && typeof arguments[0] === 'object') {//一个对象，使用key标记value
                var obj = arguments[0]
                    , search = location.search;
                for (var o in obj) {
                    if (obj.hasOwnProperty(o)) {
                        search = changeURLKeyValue(search, o, obj[o]);
                    }
                }
                if ('pushState' in history) {
                    history.pushState(null, document.title, search);
                } else if ('pushState' in History) {//ie9 不支持pushState方法,javascript.ejs中添加history.js完成html4对pushState的支持
                    History.pushState(null, null, search);//返回重新构造后search串
                }
            } else if (arguments.length === 2) {//key+value
                var key = arguments[0]
                    , value = arguments[1];
                if ('pushState' in history) {
                    history.pushState(null, document.title, changeURLKeyValue(location.toString(), key, value));
                } else if ('pushState' in History) {//ie9 不支持pushState方法,javascript.ejs中添加history.js完成html4对pushState的支持
                    History.pushState(null, null, changeURLKeyValue(location.search, key, value));//返回重新构造后search串
                }
            }
            function changeURLKeyValue(url, arg, arg_val) {
                var pattern = arg + '=([^&]*)';
                var replaceText = arg + '=' + arg_val;
                if (url.match(pattern)) {
                    var tmp = '/(' + arg + '=)([^&]*)/gi';
                    tmp = url.replace(eval(tmp), replaceText);
                    return tmp;
                } else {
                    if (url.match('[\?]')) {
                        return url + '&' + replaceText;
                    } else {
                        return url + '?' + replaceText;
                    }
                }
            }
        };
        return {
            get: get
            , set: set
        }
    }());
    var formatImage=function (path, size, ele) {
        if(path instanceof  Array && path.length>0){
            path = path[0];
        }
        var IMAGE_SIZE = {
            original: {
                path: "",
                size: ""
            },
            xlarge: {
                path: "_xlarge",
                size: "660*660"
            },
            large: {
                path: "_large",
                size: "420*420"
            },
            middle: {
                path: "_middle",
                size: "300*300"
            },
            small: {
                path: "_small",
                size: "240*240"
            },
            little: {
                path: "_little",
                size: "120*120"
            },
            micro: {
                path: "_micro",
                size: "60*60"
            }
        };
        size = IMAGE_SIZE[size || "middle"] || IMAGE_SIZE.middle;
        var pathTemp = /\.\w+?$/.exec(path);
        if (!pathTemp) {
            path += size.path;
        } else {
            path = (path.substr(0, pathTemp.index || path.length)) + size.path + pathTemp[0];
        }
        if (ele && ele.attr) {
            ele.attr("src", path);
        }
        return path;
    };
    return {
        ajax: ajax
        , getTimtout: _timeOut
        , setCheckboxListener: setCheckboxListener
        , url: url
        , formatImage: formatImage
    }
}());

exports.ajax = Fun.ajax;
exports.getTimeout = Fun.getTimtout;
exports.setCheckboxListener = Fun.setCheckboxListener;
exports.url = Fun.url;
exports.formatImage = Fun.formatImage;

},{}],7:[function(require,module,exports){
/**
 * Created by jeremy on 2016/2/24.
 * @version 1.0.0 created
 */

'use strict';

//构造信息框主体
var Modal = (function () {
    //构造原始类
    function M(m) {
        this.s = m.s;//是否显示
        this.id = m.id;
    }

    //构造标准show方法，用于继承
    M.prototype.show = function () {
        var ele = document.getElementById(this.id);
        if (ele) {
            if (this.s && !isShow()) {//显示当前隐藏
                ele.className = ele.className.replace("dp-n", "");
            } else if (!this.s && isShow()) {//隐藏当前显示
                ele.className += " dp-n";
            }
            //去除两边的空格
            ele.className = String(ele.className).trim();
        }
        function isShow() {//是否已显示，无class时显示
            return ele.className.split("dp-n").length == 1;
        }
    };

    //加载信息框
    var loading = (function () {
        //初始化生成加载信息框
        var init = function () {
            if (!document.getElementById("loading_modal_element")) {
                $('body').append('<div id="loading_modal_element" class="loading-modal-body dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="loading-modal-image"></div>' +
                    '<div class="loading-modal-text">' +
                    '<h2>玩命加载中……</h2>' +
                    '</div></div>');
            }
            return false;
        };
        //显示、隐藏信息框
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;//无参数显示信息框
            var m = new M({id: "loading_modal_element", s: s});
            m.show();
        };
        return {
            init: init
            , show: show
        }
    }());
    //弹出信息框
    var alert = (function () {
        var init = function () {
            if (!document.getElementById("alert_modal_element")) {
                $('body').append('<div id="alert_modal_element" class="alert-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="alert-modal-content">' +
                    '<div class="alert-modal-body"><span class="alert-modal-text"></span></div>' +
                    '<div class="alert-modal-footer"><button id="alert_modal_close" class="alert-modal-button">关闭</button></div>' +
                    '</div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "alert_modal_element", s: s});
            m.show();
        };
        /**
         * 设置弹出信息框
         * @param msg       显示的信息，支持html
         * @param sed       倒计时关闭时间，单位：second
         * @param callback  关闭触发回调函数
         */
        var set = function (msg, sed, callback) {
            var ele = document.getElementById("alert_modal_element");
            if (msg) {
                if (typeof msg === 'object') {//应对后端返回提示时使用Object封装
                    msg = JSON.stringify(msg);
                }
                if(ele){
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }else{
                    init();
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }
                show();
            }
            if (sed > 0) {
                setTimeout(function () {
                    show(false);
                }, 1000 * sed);
            }//无关闭时间或者关闭时间为0，不自动关闭
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#alert_modal_close").on("click", function () {
                if (callback && callback instanceof Function) {
                    callback();
                }
                show(false);
                //阻止事件继续传递
                return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //选择信息框
    var confirm = (function () {
        var init = function () {
            if (!document.getElementById("confirm_modal_element")) {
                $('body').append('<div id="confirm_modal_element" class="confirm-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="confirm-modal-content">' +
                    '<div id="confirm_modal_header" class="confirm-modal-header dp-n"></div>' +
                    '<div class="confirm-modal-body"><span id="confirm_modal_text" class="confirm-modal-text"></span></div>' +
                    '<div class="confirm-modal-footer">' +
                    '<div class="footer-button-success"><button class="confirm-modal-button  modal-success" data-confirm="success">确认</button></div>' +
                    '<div class="footer-button-false"><button class="confirm-modal-button" data-confirm="error">取消</button></div>' +
                    '</div></div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "confirm_modal_element", s: s});
            m.show();
        };
        /**
         * 设置选择信息框的内容
         * @param option    配置
         * {
         *      title:"头部显示的信息"
         *      ,text:"显示的提示信息"
         *      ,success:"点击成功后的回调"
         *      ,error:"点击失败后的回调"
         *      ,complete:"点击按钮后的整体回调"
         * }
         */
        var bar = 0;
        var set = function (option) {
            if (!option) {
                return false;
            }
            if ("title" in option && option.title.length > 0) {//有头部，则显示头部
                document.getElementById("confirm_modal_header").innerHTML = option.title;
            }
            if ("text" in option && option.text.length > 0) {//有内容，则显示整个选择信息框
                document.getElementById("confirm_modal_text").innerHTML = option.text;
            }
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#confirm_modal_element").find(".confirm-modal-button").off("click").on("click", function () {
                //fixme .off("click")用于防止多次触发<--很玄学，我也不知道为什么，但是请不要修改。
                var atr = $(this).attr("data-confirm");//选择的按钮
                bar++;
                if (option && atr in option && option[atr] instanceof Function) {
                    option[atr]();
                }
                if (option && "complete" in option && option.complete instanceof Function) {
                    option.complete();//若有完成函数，则执行
                } else {//否则，关闭选择框
                    show(false);
                }
                //阻止事件继续传递
                //return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //覆盖层
    var cover = (function () {
        var init = function () {
            if (!document.getElementById("cover_modal_element")) {
                $('body').append('<div id="cover_modal_element" class="cover-modal-element dp-n"></div>');
            }
            return false;
        };
        var hide = function () {
            document.getElementById("cover_modal_element").style.display = "none";
        };
        var show = function () {
            document.getElementById("cover_modal_element").style.display = "block";
        };
        return {
            init: init
            , show: show
            , hide: hide
        }
    }());
    return {
        initLoading: loading.init
        , showLoading: loading.show

        , initAlert: alert.init
        , showAlert: alert.show
        , setAlert: alert.set

        , initConfirm: confirm.init
        , setConfirm: confirm.set
        , showConfirm: confirm.show
        , initCover: cover.init
    }
}());

//页面加载完毕后生成四个自定义模态框
setTimeout(function () {
    //页面加载时生成一个覆盖层
    Modal.initCover();
    //页面加载时生成一个加载信息框
    Modal.initLoading();
    //页面加载时生成一个弹出信息框
    Modal.initAlert();
    //页面加载时生成一个选择信息框
    Modal.initConfirm();
}, 100);


//抛出上层调用
exports.showLoading = Modal.showLoading;
exports.setAlert = Modal.setAlert;
exports.showAlert = Modal.showAlert;
exports.setConfirm = Modal.setConfirm;
exports.showConfirm = Modal.showConfirm;
},{}],8:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var head = function () {
    //时间格式化
    Date.prototype.Format = function (fmt) { //author: Jeremyyy
        var o = {
            "M+": this.getMonth() + 1, //月份
            "d+": this.getDate(), //日
            "h+": this.getHours(), //小时
            "m+": this.getMinutes(), //分
            "s+": this.getSeconds(), //秒
            "q+": Math.floor((this.getMonth() + 3) / 3), //季度
            "S": this.getMilliseconds() //毫秒
        };
        if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        for (var k in o)
            if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
        return fmt;
    };
    //返回顶部
    $(document).on('click', '.back-top', function () {
        $("html,body").animate({scrollTop:0},100);
        return false;
    });
    $(document).on('mouseenter', '.vip-part', function () {
        $(this).children('.vip-select').stop(true);
        $(this).children('.vip-select').slideDown(100);
        return false;
    });
    $(document).on('mouseleave', '.vip-part', function () {
        $(this).children('.vip-select').stop(true);
        $(this).children('.vip-select').slideUp(100);
        return false;
    });
    $(document).on('mouseenter', '.wechat-logo', function () {
        $(this).children('.big-wechat').fadeIn(200);
        return false;
    });
    $(document).on('mouseleave', '.wechat-logo', function () {
        $(this).children('.big-wechat').fadeOut(200);
        return false;
    });
};
module.exports.head = head;
},{}],9:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var listener = (function () {
    var run = function () {
        //头部点击事件
        require('./head').head();
    };
    return {
        run: run
    }
}());
module.exports = listener;
},{"./head":8}]},{},[3])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L252bS92Ni4yLjAvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsImRhdGEuanMiLCJkb20uanMiLCJpbmRleC5qcyIsImxpc3RlbmVyLmpzIiwiLi4vZnJhbWUvYnVyc3Rlci5qcyIsIi4uL2ZyYW1lL2Z1bmN0aW9uLmpzIiwiLi4vZnJhbWUvbW9kYWwuanMiLCIuLi9nZW5lcmFsL2hlYWQuanMiLCIuLi9nZW5lcmFsL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNySkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEF1c2VyIG9uIDIwMTYvMTIvNi5cclxuICovXHJcblwidXNlIHN0cmljdFwiO1xyXG52YXIgRGF0YSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIGxpc3QgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgdXJsOiAnL2FwaS9lbnRydXN0L2xpc3QnXHJcbiAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcbiAgcmV0dXJuIHtcclxuICAgIGxpc3Q6IGxpc3RcclxuICB9XHJcbn0oKSk7XHJcbm1vZHVsZS5leHBvcnRzLkRhdGEgPSBEYXRhOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEF1c2VyIG9uIDIwMTYvMTIvNy5cclxuICovXHJcblwidXNlIHN0cmljdFwiO1xyXG5yZXF1aXJlKCcuLi9mcmFtZS9idXJzdGVyJyk7XHJcbnZhciBEb20gPSAoZnVuY3Rpb24gKCkge1xyXG4gIHZhciBsaXN0ID0gZnVuY3Rpb24gKGpzb24sIGVsZSwgcGFyYW0pIHtcclxuICAgIHZhciBzdHIgPSAnJztcclxuICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwICYmICdyZXNCb2R5JyBpbiBqc29uICYmIGpzb24ucmVzQm9keSAmJiAnc0xpc3QnIGluIGpzb24ucmVzQm9keSkge1xyXG4gICAgICBpZiAoanNvbi5yZXNCb2R5LnNMaXN0IGluc3RhbmNlb2YgQXJyYXkgJiYganNvbi5yZXNCb2R5LnNMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICB2YXIgYm9keSA9IGpzb24ucmVzQm9keS5zTGlzdDtcclxuICAgICAgICBmb3IgKHZhciBiIGluIGJvZHkpIHtcclxuICAgICAgICAgIGlmIChib2R5Lmhhc093blByb3BlcnR5KGIpKSB7XHJcbiAgICAgICAgICAgIHN0ciArPSByZW5kZXIoYm9keVtiXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQuYnVyc3RlcigkKFwiLnBhZ2UtYm94XCIpLCBwYXJhbS5vZmZzZXQgfHwgMCwganNvbi5yZXNCb2R5LnRvdGFsQ291bnQgfHwgMCwgNSwgcGFyYW0ubGltaXQgfHwgMTApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN0ciA9ICc8dHIgY2xhc3M9XCJ3cm9uZy1tc2dcIj48dGQgY29sc3Bhbj1cIjdcIj7mmoLml6DmraTnsbvmtojmga88L3RkPjwvdHI+JztcclxuICAgICAgICAkKCcucGFnZS1ib3gnKS5odG1sKCcnKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc3RyID0gJzx0ciBjbGFzcz1cIndyb25nLW1zZ1wiPjx0ZCBjb2xzcGFuPVwiN1wiPuiOt+WPluWIl+ihqOWksei0pe+8jDxhIGhyZWY9XCJcIj7or7fliLfmlrDph43or5U8L2E+77yBPC90ZD48L3RyPic7XHJcbiAgICAgICQoJy5wYWdlLWJveCcpLmh0bWwoJycpO1xyXG4gICAgfVxyXG4gICAgZWxlLmZpbmQoJ3Rib2R5JykuaHRtbChzdHIpO1xyXG4gICAgZnVuY3Rpb24gcmVuZGVyKGQpIHtcclxuICAgICAgdmFyIHR5cGU7XHJcbiAgICAgIHN3aXRjaCAoZC5tZXNzYWdlVHlwZSkge1xyXG4gICAgICAgIGNhc2UgMTA6XHJcbiAgICAgICAgICB0eXBlID0gJ+ezu+e7n+a2iOaBryc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDIwOlxyXG4gICAgICAgICAgdHlwZSA9ICforqLljZXmtojmga8nO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAzMDpcclxuICAgICAgICAgIHR5cGUgPSAn6LSm5Y2V5raI5oGvJztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgICB0eXBlID0gJ+WPkeelqOa2iOaBryc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gJzx0cj4gPHRkPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwidGItc2VsXCIgZGF0YS1pZD1cIicgKyBkLklkICsgJ1wiPjwvdGQ+ICcgK1xyXG4gICAgICAgICc8dGQ+PGEgaHJlZj1cIi92aXAvbm90ZS9kZXRhaWw/aWQ9JyArIGQuSWQgKyAnXCI+JyArIChkLm1lc3NhZ2VUaXRsZSB8fCAn5peg5qCH6aKYJykgKyAnPC9hPjwvdGQ+ICcgK1xyXG4gICAgICAgICc8dGQ+JyArIG5ldyBEYXRlKGQuY3JlYXRlRHQpLkZvcm1hdCgneXl5eS1NTS1kZCBoaDptbTpzcycpICsgJzwvdGQ+IDx0ZD4nICsgdHlwZSArICc8L3RkPiA8L3RyPidcclxuICAgIH1cclxuICB9O1xyXG4gIHJldHVybiB7XHJcbiAgICBsaXN0OiBsaXN0XHJcbiAgfVxyXG59KCkpO1xyXG5tb2R1bGUuZXhwb3J0cy5Eb20gPSBEb207IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTYvMTEvMjIuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxucmVxdWlyZSgnLi4vZ2VuZXJhbCcpLnJ1bigpO1xyXG5yZXF1aXJlKCcuL2xpc3RlbmVyJykucnVuKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTYvMTEvMjIuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxudmFyIHVybCA9IHJlcXVpcmUoJy4uL2ZyYW1lL2Z1bmN0aW9uJykudXJsO1xyXG52YXIgRGF0YSA9IHJlcXVpcmUoJy4vZGF0YScpLkRhdGFcclxuICAsIERvbSA9IHJlcXVpcmUoJy4vZG9tJykuRG9tO1xyXG52YXIgTW9kYWwgPSByZXF1aXJlKCcuLi9mcmFtZS9tb2RhbCcpO1xyXG52YXIgTGlzdGVuZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQoJyNmLWRhdGUnKS5kYXRldGltZXBpY2tlcih7XHJcbiAgICAgIGZvcm1hdDogJ3l5eXktbW0tZGQnLC8v5pel5pyf55qE5qC85byPXHJcbiAgICAgIHN0YXJ0RGF0ZTogbmV3IERhdGUoKSwvL+mAieaLqeWZqOeahOW8gOWni+aXpeacn1xyXG4gICAgICBhdXRvY2xvc2U6IHRydWUsLy/ml6XmnJ/pgInmi6nlrozmiJDlkI7mmK/lkKblhbPpl63pgInmi6nmoYZcclxuICAgICAgYm9vdGNzc1ZlcjogMywvL+aYvuekuuWQkeW3puWQkeWPs+eahOeureWktFxyXG4gICAgICBsYW5ndWFnZTogJ3poLUNOJywvL+ivreiogFxyXG4gICAgICBtaW5WaWV3OiBcIm1vbnRoXCIvL+ihqOekuuaXpeacn+mAieaLqeeahOacgOWwj+iMg+WbtO+8jOm7mOiupOaYr2hvdXJcclxuICAgIH0pO1xyXG4gICAgJCgnI2gtZGF0ZScpLmRhdGV0aW1lcGlja2VyKHtcclxuICAgICAgZm9ybWF0OiAneXl5eS1tbS1kZCcsLy/ml6XmnJ/nmoTmoLzlvI9cclxuICAgICAgc3RhcnREYXRlOiBuZXcgRGF0ZSgpLC8v6YCJ5oup5Zmo55qE5byA5aeL5pel5pyfXHJcbiAgICAgIGF1dG9jbG9zZTogdHJ1ZSwvL+aXpeacn+mAieaLqeWujOaIkOWQjuaYr+WQpuWFs+mXremAieaLqeahhlxyXG4gICAgICBib290Y3NzVmVyOiAzLC8v5pi+56S65ZCR5bem5ZCR5Y+z55qE566t5aS0XHJcbiAgICAgIGxhbmd1YWdlOiAnemgtQ04nLC8v6K+t6KiAXHJcbiAgICAgIG1pblZpZXc6IFwibW9udGhcIi8v6KGo56S65pel5pyf6YCJ5oup55qE5pyA5bCP6IyD5Zu077yM6buY6K6k5pivaG91clxyXG4gICAgfSlcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcudHlwZS1zZWwgc3BhbicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQodGhpcykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIHVybC5zZXQoJ3R5cGUnLCAkKHRoaXMpLmRhdGEoJ3R5cGUnKSk7XHJcbiAgICAgIG9wZXJhdGUoKTtcclxuICAgICAgaW5pdCgpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuICB2YXIgb3BlcmF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB0cCA9IHVybC5nZXQoJ3R5cGUnKSB8fCAnYWxsJztcclxuICAgIHZhciBzdHIgPSAnJztcclxuICAgIGlmICh0cCA9PSAnYWxsJykge1xyXG4gICAgICBzdHIgKz0gJzxidXR0b24gY2xhc3M9XCJzbS1idG4gYmctd1wiIGlkPVwic2VuZC1tYWlsXCI+5Y+R6YCB6YKu5Lu2PC9idXR0b24+PGJ1dHRvbiBjbGFzcz1cInNtLWJ0biBiZy13XCIgaWQ9XCJkb3dubG9hZFwiPuS4i+i9vTwvYnV0dG9uPicgK1xyXG4gICAgICAnPGJ1dHRvbiBjbGFzcz1cInNtLWJ0biBiZy13XCIgaWQ9XCJyZS1vcmRlclwiPumHjeaWsOWnlOaJmDwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCJzbS1idG4gYmctd1wiIGlkPVwiZGVsZXRlXCI+5Yig6ZmkPC9idXR0b24+JyArXHJcbiAgICAgICc8YnV0dG9uIGNsYXNzPVwic20tYnRuIGJnLXdcIiBpZD1cImNhbmNlbFwiPuWPlua2iDwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCJzbS1idG4gYmx1ZS1idG5cIiBpZD1cInNlYXJjaFwiPuaQnOe0ojwvYnV0dG9uPidcclxuICAgIH0gZWxzZSBpZiAodHAgPT0gJ2RvaW5nJykge1xyXG4gICAgICBzdHIgKz0gJzxidXR0b24gY2xhc3M9XCJzbS1idG4gYmctd1wiIGlkPVwic2VuZC1tYWlsXCI+5Y+R6YCB6YKu5Lu2PC9idXR0b24+PGJ1dHRvbiBjbGFzcz1cInNtLWJ0biBiZy13XCIgaWQ9XCJkb3dubG9hZFwiPuS4i+i9vTwvYnV0dG9uPicgK1xyXG4gICAgICAnPGJ1dHRvbiBjbGFzcz1cInNtLWJ0biBiZy13XCIgaWQ9XCJjYW5jZWxcIj7lj5bmtog8L2J1dHRvbj48YnV0dG9uIGNsYXNzPVwic20tYnRuIGJsdWUtYnRuXCIgaWQ9XCJzZWFyY2hcIj7mkJzntKI8L2J1dHRvbj4nXHJcbiAgICB9IGVsc2UgaWYgKHRwID09ICdjYW5jZWwnKSB7XHJcbiAgICAgIHN0ciArPSAnPGJ1dHRvbiBjbGFzcz1cInNtLWJ0biBiZy13XCIgaWQ9XCJzZW5kLW1haWxcIj7lj5HpgIHpgq7ku7Y8L2J1dHRvbj48YnV0dG9uIGNsYXNzPVwic20tYnRuIGJnLXdcIiBpZD1cImRvd25sb2FkXCI+5LiL6L29PC9idXR0b24+JyArXHJcbiAgICAgICc8YnV0dG9uIGNsYXNzPVwic20tYnRuIGJnLXdcIiBpZD1cInJlLW9yZGVyXCI+6YeN5paw5aeU5omYPC9idXR0b24+JyArXHJcbiAgICAgICc8YnV0dG9uIGNsYXNzPVwic20tYnRuIGJnLXdcIiBpZD1cImNhbmNlbFwiPuWPlua2iDwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCJzbS1idG4gYmx1ZS1idG5cIiBpZD1cInNlYXJjaFwiPuaQnOe0ojwvYnV0dG9uPidcclxuICAgIH0gZWxzZSBpZiAodHAgPT0gJ3JlZnVzZScpIHtcclxuICAgICAgc3RyICs9ICc8YnV0dG9uIGNsYXNzPVwic20tYnRuIGJnLXdcIiBpZD1cInNlbmQtbWFpbFwiPuWPkemAgemCruS7tjwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCJzbS1idG4gYmctd1wiIGlkPVwiZG93bmxvYWRcIj7kuIvovb08L2J1dHRvbj4nICtcclxuICAgICAgJzxidXR0b24gY2xhc3M9XCJzbS1idG4gYmctd1wiIGlkPVwiY2FuY2VsXCI+5Y+W5raIPC9idXR0b24+PGJ1dHRvbiBjbGFzcz1cInNtLWJ0biBibHVlLWJ0blwiIGlkPVwic2VhcmNoXCI+5pCc57SiPC9idXR0b24+J1xyXG4gICAgfSBlbHNlIGlmICh0cCA9PSAnZG9uZScpIHtcclxuICAgICAgc3RyICs9ICc8YnV0dG9uIGNsYXNzPVwic20tYnRuIGJnLXdcIiBpZD1cInNlbmQtbWFpbFwiPuWPkemAgemCruS7tjwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCJzbS1idG4gYmctd1wiIGlkPVwiZG93bmxvYWRcIj7kuIvovb08L2J1dHRvbj4nICtcclxuICAgICAgJzxidXR0b24gY2xhc3M9XCJzbS1idG4gYmx1ZS1idG5cIiBpZD1cInNlYXJjaFwiPuaQnOe0ojwvYnV0dG9uPidcclxuICAgIH1cclxuICAgICQoJy5vcGVyYXRlLXBhcnQnKS5odG1sKHN0cik7XHJcbiAgfTtcclxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB0cCA9IHVybC5nZXQoJ3R5cGUnKSB8fCAnYWxsJywgc3RhdGU7XHJcbiAgICBzd2l0Y2ggKHRwKSB7XHJcbiAgICAgIGNhc2UgJ2FsbCc6XHJcbiAgICAgICAgc3RhdGUgPSAwO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdkb2luZyc6XHJcbiAgICAgICAgc3RhdGUgPSAxO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdjYW5jZWwnOlxyXG4gICAgICAgIHN0YXRlID0gMjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAncmVmdXNlJzpcclxuICAgICAgICBzdGF0ZSA9IDM7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2RvbmUnOlxyXG4gICAgICAgIHN0YXRlID0gNDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZGVsZXRlJzpcclxuICAgICAgICBzdGF0ZSA9IC0xO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgIG1lbWJlcklkOiAwLFxyXG4gICAgICBzdGF0ZTogc3RhdGUsXHJcbiAgICAgIG9mZnNldDogdXJsLmdldCgnb2Zmc2V0JykgfHwgMCxcclxuICAgICAgbGltaXQ6IHVybC5nZXQoJ2xpbWl0JykgfHwgMjBcclxuICAgIH07XHJcbiAgICBEYXRhLmxpc3QoZGF0YSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgY29uc29sZS5sb2coanNvbik7XHJcbiAgICB9KTtcclxuICB9O1xyXG4gIHZhciBydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBsaXN0ZW5lcigpO1xyXG4gICAgJCgnLnR5cGUtc2VsJykuZmluZCgnc3BhbltkYXRhLXR5cGU9XCInICsgKHVybC5nZXQoJ3R5cGUnKSB8fCAnYWxsJykgKyAnXCJdJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgb3BlcmF0ZSgpO1xyXG4gICAgaW5pdCgpO1xyXG4gIH07XHJcbiAgcmV0dXJuIHtcclxuICAgIHJ1bjogcnVuXHJcbiAgfVxyXG59KCkpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IExpc3RlbmVyOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplcmVteSBvbiAyMDE2LzExLzI0LlxyXG4gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4oZnVuY3Rpb24gKCQpIHtcclxuICAgIC8qKlxyXG4gICAgICog55Sf5oiQ5YiG6aG15ZmoXHJcbiAgICAgKiBAcGFyYW0gZWxlIOmcgOimgea3u+WKoOWIhumhteWZqOeahOWFg+e0oFxyXG4gICAgICogQHBhcmFtIG9mZnNldCDlgY/np7vph4/vvIzljbPku47nrKxkYXRhLW9mZnNldOW8gOWni1xyXG4gICAgICogQHBhcmFtIGxlbmd0aCDmgLvorrDlvZXmnaHmlbBcclxuICAgICAqIEBwYXJhbSBzaG93UGFnZXMg5YiG6aG15Zmo5pi+56S655qE6aG15pWw77yM6LaF6L+H5YiZ6ZqQ6JeP5aSa5L2Z55qE6aG1XHJcbiAgICAgKiBAcGFyYW0gcm93cyDmr4/pobXmmL7npLrnmoTorrDlvZXmnaHmlbBcclxuICAgICAqL1xyXG4gICAgJC5idXJzdGVyID0gZnVuY3Rpb24gKGVsZSwgb2Zmc2V0LCBsZW5ndGgsIHNob3dQYWdlcywgcm93cykge1xyXG4gICAgICAgIG9mZnNldCA9IG9mZnNldCA/IHBhcnNlSW50KG9mZnNldCkgOiAwO1xyXG4gICAgICAgIC8v5bCG5YiG6aG15Zmo6KOF5YWldGFibGXkuK1cclxuICAgICAgICBpZiAobGVuZ3RoICYmIGxlbmd0aCA+IG9mZnNldCkge1xyXG4gICAgICAgICAgICB2YXIgcGFnZUh0bWwgPSBcIlwiXHJcbiAgICAgICAgICAgICAgICAsIGFzcyA9IFwiXCIvL+a4heepuumcgOimgeijheWFpeeahGh0bWxcclxuICAgICAgICAgICAgICAgICwgYmVmb3JlUGFnZXMgPSBNYXRoLmNlaWwob2Zmc2V0IC8gcm93cykvL+mcgOimgeaYvuekuueahOWJjemhteaVsC/lvZPliY3pobVcclxuICAgICAgICAgICAgICAgICwgYWZ0ZXJQYWdlcyA9IE1hdGguY2VpbCgobGVuZ3RoIC0gb2Zmc2V0ICkgLyByb3dzKS8v6ZyA6KaB5pi+56S655qE5ZCO6aG15pWwXHJcbiAgICAgICAgICAgICAgICAsIHBhZ2VzID0gTWF0aC5jZWlsKGxlbmd0aCAvIHJvd3MpIC8v5oC76aG15pWwXHJcbiAgICAgICAgICAgICAgICAsIGsgPSAwO1xyXG4gICAgICAgICAgICAvL2FsZXJ0KFwi5oC76aG15pWwXCIgKyBwYWdlcyArIFwiIOWJjemhteaVsCBcIiArIGJlZm9yZVBhZ2VzICsgXCIg5ZCO6aG15pWwIFwiICsgYWZ0ZXJQYWdlcyk7XHJcbiAgICAgICAgICAgIC8v6Iul6aG15pWw5bCP5LqOc2hvd1BhZ2Vz6aG177yM5YiZ5YWo6YOo5pi+56S6XHJcbiAgICAgICAgICAgIGlmIChwYWdlcyA+PSAwICYmIHBhZ2VzIDw9IHNob3dQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IHBhZ2VzOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFnZXMgPiBzaG93UGFnZXMpIHsvL+aAu+mhteaVsOWkp+S6jnNob3dQYWdlc+mhtVxyXG4gICAgICAgICAgICAgICAgaWYgKGJlZm9yZVBhZ2VzIDw9IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSAmJiBhZnRlclBhZ2VzID4gc2hvd1BhZ2VzICsgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBzaG93UGFnZXM7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGkgY2xhc3M9J2FjdGl2ZScgPjxhPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArICgocGFnZXMgLSAxKSAqIHJvd3MpICsgXCInPi4uLlwiICsgcGFnZXMgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiZWZvcmVQYWdlcyA8PSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgJiYgYWZ0ZXJQYWdlcyA9PSBzaG93UGFnZXMgKyAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IHNob3dQYWdlcyAtIDE7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGkgY2xhc3M9J2FjdGl2ZScgPjxhPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArICgocGFnZXMgLSAxKSAqIHJvd3MpICsgXCInPi4uLlwiICsgcGFnZXMgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiZWZvcmVQYWdlcyA8PSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgJiYgYWZ0ZXJQYWdlcyA8PSBzaG93UGFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgc2hvd1BhZ2VzIC0gMTsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKChwYWdlcyAtIDEpICogcm93cykgKyBcIic+Li4uXCIgKyBwYWdlcyArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZVBhZ2VzID4gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICYmIGJlZm9yZVBhZ2VzIDw9IHNob3dQYWdlcyAmJiBhZnRlclBhZ2VzID4gc2hvd1BhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nMCc+MS4uLjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IGJlZm9yZVBhZ2VzIC0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMTsgayA8IGJlZm9yZVBhZ2VzICsgTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoKHBhZ2VzIC0gMSkgKiByb3dzKSArIFwiJz4uLi5cIiArIHBhZ2VzICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlUGFnZXMgPiBzaG93UGFnZXMgJiYgYWZ0ZXJQYWdlcyA+IHNob3dQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9JzAnPjEuLi48L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSBiZWZvcmVQYWdlcyAtIE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSArIDE7IGsgPCBiZWZvcmVQYWdlcyArIE1hdGguY2VpbChzaG93UGFnZXMgLyAyKTsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKChwYWdlcyAtIDEpICogcm93cykgKyBcIic+Li4uXCIgKyBwYWdlcyArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZVBhZ2VzID4gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICYmIGJlZm9yZVBhZ2VzIDw9IHBhZ2VzICYmIGFmdGVyUGFnZXMgPD0gc2hvd1BhZ2VzICYmIGFmdGVyUGFnZXMgPiBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nMCc+MS4uLjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IGJlZm9yZVBhZ2VzIC0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMTsgayA8IGJlZm9yZVBhZ2VzICsgTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoKHBhZ2VzIC0gMSkgKiByb3dzKSArIFwiJz4uLi5cIiArIHBhZ2VzICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlUGFnZXMgPiBwYWdlcyAmJiBhZnRlclBhZ2VzIDw9IHNob3dQYWdlcyAmJiBhZnRlclBhZ2VzID4gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9JzAnPjEuLi48L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSBiZWZvcmVQYWdlcyAtIE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSArIDE7IGsgPCBiZWZvcmVQYWdlcyArIE1hdGguY2VpbChzaG93UGFnZXMgLyAyKTsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKChwYWdlcyAtIDEpICogcm93cykgKyBcIic+Li4uXCIgKyBwYWdlcyArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZVBhZ2VzID4gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICYmIGFmdGVyUGFnZXMgPD0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9JzAnPjEuLi48L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSBiZWZvcmVQYWdlcyAtIE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSArIDE7IGsgPCBwYWdlczsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5Yik5patXCLpppbpobVcIuWSjFwi5pyr6aG1XCLmmK/lkKblj6/ngrnlh7tcclxuICAgICAgICAgICAgdmFyIGZpcnN0UGFnZSwgbGFzdFBhZ2U7XHJcbiAgICAgICAgICAgIGlmIChvZmZzZXQgPT0gMCkgey8v5q2k5pe26aaW6aG15peg5rOV54K55Ye7XHJcbiAgICAgICAgICAgICAgICBmaXJzdFBhZ2UgPSAnPGxpIGNsYXNzPVwiZGlzYWJsZWRcIj48YSBjbGFzcz1cInBhZ2VzXCIgZGF0YS1vZmZzZXQ9XCIwXCI+6aaW6aG1PC9hPjwvbGk+JztcclxuICAgICAgICAgICAgICAgIGxhc3RQYWdlID0gJzxsaT48YSBjbGFzcz1cInBhZ2VzXCIgZGF0YS1vZmZzZXQ9XCInICsgcGFyc2VJbnQocGFyc2VJbnQoKGxlbmd0aCAlIHJvd3MgPT0gMCA/IChsZW5ndGggLSAxKSA6IGxlbmd0aCkgLyByb3dzKSAqIHJvd3MpICsgJ1wiID7mnKvpobU8L2E+PC9saT4nO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKChvZmZzZXQgKyByb3dzKSA+PSBsZW5ndGgpIHsvL+atpOaXtuacq+mhteaXoOazleeCueWHu1xyXG4gICAgICAgICAgICAgICAgZmlyc3RQYWdlID0gJzxsaT48YSBjbGFzcz1cInBhZ2VzXCIgZGF0YS1vZmZzZXQ9XCIwXCI+6aaW6aG1PC9hPjwvbGk+JztcclxuICAgICAgICAgICAgICAgIGxhc3RQYWdlID0gJzxsaSBjbGFzcz1cImRpc2FibGVkXCI+PGEgY2xhc3M9XCJwYWdlc1wiIGRhdGEtb2Zmc2V0PVwiJyArIHBhcnNlSW50KHBhcnNlSW50KChsZW5ndGggJSByb3dzID09IDAgPyAobGVuZ3RoIC0gMSkgOiBsZW5ndGgpIC8gcm93cykgKiByb3dzKSArICdcIj7mnKvpobU8L2E+PC9saT4nO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmlyc3RQYWdlID0gJzxsaT48YSBjbGFzcz1cInBhZ2VzXCIgZGF0YS1vZmZzZXQ9XCIwXCI+6aaW6aG1PC9hPjwvbGk+JztcclxuICAgICAgICAgICAgICAgIGxhc3RQYWdlID0gJzxsaT48YSBjbGFzcz1cInBhZ2VzXCIgZGF0YS1vZmZzZXQ9XCInICsgcGFyc2VJbnQocGFyc2VJbnQoKGxlbmd0aCAlIHJvd3MgPT0gMCA/IChsZW5ndGggLSAxKSA6IGxlbmd0aCkgLyByb3dzKSAqIHJvd3MpICsgJ1wiPuacq+mhtTwvYT48L2xpPic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/liKTmlq1cIuS4iuS4gOmhtVwi5ZKMXCLkuIvkuIDpobVcIuaYr+WQpuWtmOWcqFxyXG4gICAgICAgICAgICB2YXIgdXBQYWdlLCBkb3duUGFnZTtcclxuICAgICAgICAgICAgaWYgKG9mZnNldCA9PSAwIHx8IChvZmZzZXQgPCByb3dzICYmIChvZmZzZXQgJSByb3dzICE9IDApKSkge1xyXG4gICAgICAgICAgICAgICAgdXBQYWdlID0gXCI8bGkgY2xhc3M9J2Rpc2FibGVkJz48YSBjbGFzcz0ncGFnZXMnIGZ1bmM9J3ByZXZpb3VzJyBkYXRhLW9mZnNldD0nXCIgKyBwYXJzZUludChvZmZzZXQpICsgXCInID7kuIrpobU8L2E+PC9saT5cIlxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdXBQYWdlID0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBmdW5jPSdwcmV2aW91cycgZGF0YS1vZmZzZXQ9J1wiICsgKHBhcnNlSW50KG9mZnNldCkgLSBwYXJzZUludChyb3dzKSkgKyBcIicgPuS4iumhtTwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvZmZzZXQgPj0gKGxlbmd0aCAtIHJvd3MpKSB7XHJcbiAgICAgICAgICAgICAgICBkb3duUGFnZSA9IFwiPGxpIGNsYXNzPSdkaXNhYmxlZCc+PGEgY2xhc3M9J3BhZ2VzJyBmdW5jPSduZXh0JyBkYXRhLW9mZnNldD0nXCIgKyBwYXJzZUludChvZmZzZXQpICsgXCInPuS4i+mhtTwvYT48L2xpPlwiXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkb3duUGFnZSA9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZnVuYz0nbmV4dCcgZGF0YS1vZmZzZXQ9J1wiICsgcGFyc2VJbnQocGFyc2VJbnQob2Zmc2V0KSArIHBhcnNlSW50KHJvd3MpKSArIFwiJz7kuIvpobU8L2E+PC9saT5cIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYWdlcyAhPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvL+WIhumhtemDqOWIhlxyXG4gICAgICAgICAgICAgICAgYXNzICs9IFwiPGRpdiBpZD0ncGFnZXInIGNsYXNzPSdwYWdlci1pbmZvJz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCI8aDYgaWQ9J3Jlc3VsdCcgY2xhc3M9J3BhZ2VyLXJlY29yZCc+5YWx5pyJPHNwYW4+XCIgKyBsZW5ndGggKyBcIjwvc3Bhbj7mnaHorrDlvZU8L2g2PlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIjx1bCBjbGFzcz0ncGFnaW5hdGlvbic+XCIgKyBmaXJzdFBhZ2UgKyB1cFBhZ2UgKyBwYWdlSHRtbCArIGRvd25QYWdlICsgbGFzdFBhZ2UgKyBcIjwvdWw+PC9kaXY+XCI7XHJcbiAgICAgICAgICAgICAgICAvL3RhYmxl5Lit5rOo5YWl5ou86KOF55qE6K6w5b2VXHJcbiAgICAgICAgICAgICAgICBlbGUuaHRtbChhc3MpO1xyXG4gICAgICAgICAgICB9IGVsc2Ugey8v5peg5rOV5YiG6aG15riF56m65YiG6aG15ZmoXHJcbiAgICAgICAgICAgICAgICBlbGUuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oalF1ZXJ5KSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgamVyZW15IG9uIDIwMTYvMi8yNi5cclxuICogQHZlcnNpb24gMS4wLjAgY3JlYXRlZCDpgJrnlKjmgKflip/og73mlrnms5VcclxuICovXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG52YXIgRnVuID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBfdGltZU91dCA9IDEwMDAwMDsvL+ivt+axgui2heaXtuaXtumXtOS4ujEwc1xyXG4gICAgLyoqXHJcbiAgICAgKiDlsIHoo4VhamF4XHJcbiAgICAgKiBAcGFyYW0gb3B0aW9uXHJcbiAgICAgKiB7XHJcbiAgICAgKiAgICAgIHVybDpcIuivt+axgueahOWcsOWdgFwiXHJcbiAgICAgKiAgICAgICxtZXRob2Q6XCLor7fmsYLnmoTmlrnms5VcIlxyXG4gICAgICogICAgICAsYXN5bmM6XCLmmK/lkKblubblj5FcIlxyXG4gICAgICogICAgICAsZGF0YTpcIuWPkemAgeeahOaVsOaNrlwiXHJcbiAgICAgKiAgICAgICxzdWNjZXNzOlwi5oiQ5Yqf5pe25Zue6LCDXCJcclxuICAgICAqICAgICAgLGVycm9yOlwi5aSx6LSlL+i2heaXtuaXtuWbnuiwg1wiXHJcbiAgICAgKiAgICAgICx0aW1lb3V0Olwi6LaF5pe25pe26Ze0XCJcclxuICAgICAqICAgICAgLGNvbXBsZXRlOlwi5a6M5oiQ5ZCO55qE5Zue6LCDXCJcclxuICAgICAqIH1cclxuICAgICAqL1xyXG4gICAgdmFyIGFqYXggPSBmdW5jdGlvbiAob3B0aW9uKSB7XHJcbiAgICAgICAgLy9hamF45byA5aeL5pe25bqU5pi+56S64oCc5Yqg6L295L+h5oGv5qGG4oCdXHJcbiAgICAgICAgTW9kYWwuc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IG9wdGlvbi51cmxcclxuICAgICAgICAgICAgLCB0eXBlOiBcInR5cGVcIiBpbiBvcHRpb24gJiYgb3B0aW9uLnR5cGUgfHwgXCJHRVRcIlxyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IG9wdGlvbi50aW1lb3V0IHx8IF90aW1lT3V0XHJcbiAgICAgICAgICAgICwgZGF0YTogXCJkYXRhXCIgaW4gb3B0aW9uICYmIG9wdGlvbi5kYXRhIHx8IHt9XHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6IFwianNvblwiXHJcbiAgICAgICAgICAgICwgYXN5bmM6IChcImFzeW5jXCIgaW4gb3B0aW9uICYmIG9wdGlvbi5hc3luYykgPyB0cnVlIDogZmFsc2VcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKFwic3RhdHVzXCIgaW4ganNvbiAmJiBqc29uLnN0YXR1cyA+IDAgJiYgXCJkYXRhXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcInN1Y2Nlc3NcIiBpbiBvcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnN1Y2Nlc3MoanNvbi5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChcIuaXoHN1Y2Nlc3Pmlrnms5UhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJlcnJvclwiIGluIG9wdGlvbiAmJiBvcHRpb24uZXJyb3IgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5lcnJvcihqc29uKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+aTjeS9nOWksei0pSEnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgZXJyb3I6IGZ1bmN0aW9uICh4aHIpIHsvLzQwNOaIluiAhei2heaXtlxyXG4gICAgICAgICAgICAgICAgaWYgKFwiZXJyb3JcIiBpbiBvcHRpb24gJiYgb3B0aW9uLmVycm9yIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAvL+aPkOekuueUqOaIt+mUmeivr+S/oeaBr1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNob3dMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChcIui/nuaOpeacjeWKoeWZqOWksei0pe+8jOeKtuaAge+8mlwiICsgKHhoci5zdGF0dXMgfHwgLTEpICsgXCIs5L+h5oGv77yaXCIgKyAoeGhyLnN0YXR1c1RleHQgfHwgXCItXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24uZXJyb3IoeGhyLnN0YXR1cywgeGhyLnN0YXR1c1RleHQpOy8v5Zue6LCD6K+35rGC55qE54q25oCB5ZKM6ZSZ6K+v5L+h5oGvXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoeGhyLCB0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAvL+WFs+mXreKAnOWKoOi9veS/oeaBr+ahhuKAnVxyXG4gICAgICAgICAgICAgICAgTW9kYWwuc2hvd0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKFwiY29tcGxldGVcIiBpbiBvcHRpb24gJiYgb3B0aW9uLmNvbXBsZXRlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24uY29tcGxldGUoeGhyLCB0eXBlKTsvL+Wbnuiwg+ivt+axgueahHhocuS/oeaBr+WSjOexu+Wei1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy/lhajpgInlkozljZXpgInnmoTnu5HlrppcclxuICAgIHZhciBzZXRDaGVja2JveExpc3RlbmVyID0gZnVuY3Rpb24gKGFsbENoZWNrLCByYWRpb0NoZWNrcykge1xyXG4gICAgICAgIC8v562b6YCJ5Y2V6YCJ5oyJ6ZKu57uEXHJcbiAgICAgICAgdmFyIHJhZGlvVmFsdWVFbGVzID0gJChyYWRpb0NoZWNrcyk7XHJcbiAgICAgICAgLy/ngrnlh7vlhajpgInml7bvvIzlkIznu4TmjInpkq7ooqvlkIzmraVcclxuICAgICAgICAkKGRvY3VtZW50KS5kZWxlZ2F0ZShhbGxDaGVjaywgXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChyYWRpb1ZhbHVlRWxlcyAmJiByYWRpb1ZhbHVlRWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfciA9IDA7IF9yIDwgcmFkaW9WYWx1ZUVsZXMubGVuZ3RoOyBfcisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9WYWx1ZUVsZXNbX3JdLmNoZWNrZWQgPSAkKHRoaXMpLmlzKFwiOmNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+eCueWHu+WNlemAieaMiemSruaXtu+8jFxyXG4gICAgICAgICQoZG9jdW1lbnQpLmRlbGVnYXRlKHJhZGlvQ2hlY2tzLCBcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJChhbGxDaGVjaylbMF0uY2hlY2tlZCA9ICQocmFkaW9DaGVja3MgKyBcIjpjaGVja2VkXCIpLmxlbmd0aCA9PSAkKHJhZGlvQ2hlY2tzKS5sZW5ndGg7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHVybCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGdldCA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKFwiKF58JilcIiArIG5hbWUgKyBcIj0oW14mXSopKCZ8JClcIiwgXCJpXCIpO1xyXG4gICAgICAgICAgICB2YXIgciA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpLm1hdGNoKHJlZyk7XHJcbiAgICAgICAgICAgIGlmIChyICE9IG51bGwpIHJldHVybiBkZWNvZGVVUkkoclsyXSk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5qC55o2u5Y+C5pWw5YiX6KGo6ZW/5bqm6L+b6KGM5Yik5pat77yM5YW85a65SUU5XHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnb2JqZWN0Jykgey8v5LiA5Liq5a+56LGh77yM5L2/55Soa2V55qCH6K6wdmFsdWVcclxuICAgICAgICAgICAgICAgIHZhciBvYmogPSBhcmd1bWVudHNbMF1cclxuICAgICAgICAgICAgICAgICAgICAsIHNlYXJjaCA9IGxvY2F0aW9uLnNlYXJjaDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIG8gaW4gb2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShvKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2ggPSBjaGFuZ2VVUkxLZXlWYWx1ZShzZWFyY2gsIG8sIG9ialtvXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCdwdXNoU3RhdGUnIGluIGhpc3RvcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBkb2N1bWVudC50aXRsZSwgc2VhcmNoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJ3B1c2hTdGF0ZScgaW4gSGlzdG9yeSkgey8vaWU5IOS4jeaUr+aMgXB1c2hTdGF0ZeaWueazlSxqYXZhc2NyaXB0LmVqc+S4rea3u+WKoGhpc3RvcnkuanPlrozmiJBodG1sNOWvuXB1c2hTdGF0ZeeahOaUr+aMgVxyXG4gICAgICAgICAgICAgICAgICAgIEhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIHNlYXJjaCk7Ly/ov5Tlm57ph43mlrDmnoTpgKDlkI5zZWFyY2jkuLJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7Ly9rZXkrdmFsdWVcclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBhcmd1bWVudHNbMF1cclxuICAgICAgICAgICAgICAgICAgICAsIHZhbHVlID0gYXJndW1lbnRzWzFdO1xyXG4gICAgICAgICAgICAgICAgaWYgKCdwdXNoU3RhdGUnIGluIGhpc3RvcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBkb2N1bWVudC50aXRsZSwgY2hhbmdlVVJMS2V5VmFsdWUobG9jYXRpb24udG9TdHJpbmcoKSwga2V5LCB2YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgncHVzaFN0YXRlJyBpbiBIaXN0b3J5KSB7Ly9pZTkg5LiN5pSv5oyBcHVzaFN0YXRl5pa55rOVLGphdmFzY3JpcHQuZWpz5Lit5re75YqgaGlzdG9yeS5qc+WujOaIkGh0bWw05a+5cHVzaFN0YXRl55qE5pSv5oyBXHJcbiAgICAgICAgICAgICAgICAgICAgSGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgY2hhbmdlVVJMS2V5VmFsdWUobG9jYXRpb24uc2VhcmNoLCBrZXksIHZhbHVlKSk7Ly/ov5Tlm57ph43mlrDmnoTpgKDlkI5zZWFyY2jkuLJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGFuZ2VVUkxLZXlWYWx1ZSh1cmwsIGFyZywgYXJnX3ZhbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBhcmcgKyAnPShbXiZdKiknO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VUZXh0ID0gYXJnICsgJz0nICsgYXJnX3ZhbDtcclxuICAgICAgICAgICAgICAgIGlmICh1cmwubWF0Y2gocGF0dGVybikpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG1wID0gJy8oJyArIGFyZyArICc9KShbXiZdKikvZ2knO1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcCA9IHVybC5yZXBsYWNlKGV2YWwodG1wKSwgcmVwbGFjZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0bXA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1cmwubWF0Y2goJ1tcXD9dJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVybCArICcmJyArIHJlcGxhY2VUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cmwgKyAnPycgKyByZXBsYWNlVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGdldDogZ2V0XHJcbiAgICAgICAgICAgICwgc2V0OiBzZXRcclxuICAgICAgICB9XHJcbiAgICB9KCkpO1xyXG4gICAgdmFyIGZvcm1hdEltYWdlPWZ1bmN0aW9uIChwYXRoLCBzaXplLCBlbGUpIHtcclxuICAgICAgICBpZihwYXRoIGluc3RhbmNlb2YgIEFycmF5ICYmIHBhdGgubGVuZ3RoPjApe1xyXG4gICAgICAgICAgICBwYXRoID0gcGF0aFswXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIElNQUdFX1NJWkUgPSB7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsOiB7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogXCJcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB4bGFyZ2U6IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiX3hsYXJnZVwiLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogXCI2NjAqNjYwXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGFyZ2U6IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiX2xhcmdlXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjQyMCo0MjBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtaWRkbGU6IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiX21pZGRsZVwiLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogXCIzMDAqMzAwXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc21hbGw6IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiX3NtYWxsXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjI0MCoyNDBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaXR0bGU6IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiX2xpdHRsZVwiLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogXCIxMjAqMTIwXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWljcm86IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiX21pY3JvXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjYwKjYwXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2l6ZSA9IElNQUdFX1NJWkVbc2l6ZSB8fCBcIm1pZGRsZVwiXSB8fCBJTUFHRV9TSVpFLm1pZGRsZTtcclxuICAgICAgICB2YXIgcGF0aFRlbXAgPSAvXFwuXFx3Kz8kLy5leGVjKHBhdGgpO1xyXG4gICAgICAgIGlmICghcGF0aFRlbXApIHtcclxuICAgICAgICAgICAgcGF0aCArPSBzaXplLnBhdGg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGF0aCA9IChwYXRoLnN1YnN0cigwLCBwYXRoVGVtcC5pbmRleCB8fCBwYXRoLmxlbmd0aCkpICsgc2l6ZS5wYXRoICsgcGF0aFRlbXBbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbGUgJiYgZWxlLmF0dHIpIHtcclxuICAgICAgICAgICAgZWxlLmF0dHIoXCJzcmNcIiwgcGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwYXRoO1xyXG4gICAgfTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYWpheDogYWpheFxyXG4gICAgICAgICwgZ2V0VGltdG91dDogX3RpbWVPdXRcclxuICAgICAgICAsIHNldENoZWNrYm94TGlzdGVuZXI6IHNldENoZWNrYm94TGlzdGVuZXJcclxuICAgICAgICAsIHVybDogdXJsXHJcbiAgICAgICAgLCBmb3JtYXRJbWFnZTogZm9ybWF0SW1hZ2VcclxuICAgIH1cclxufSgpKTtcclxuXHJcbmV4cG9ydHMuYWpheCA9IEZ1bi5hamF4O1xyXG5leHBvcnRzLmdldFRpbWVvdXQgPSBGdW4uZ2V0VGltdG91dDtcclxuZXhwb3J0cy5zZXRDaGVja2JveExpc3RlbmVyID0gRnVuLnNldENoZWNrYm94TGlzdGVuZXI7XHJcbmV4cG9ydHMudXJsID0gRnVuLnVybDtcclxuZXhwb3J0cy5mb3JtYXRJbWFnZSA9IEZ1bi5mb3JtYXRJbWFnZTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgamVyZW15IG9uIDIwMTYvMi8yNC5cclxuICogQHZlcnNpb24gMS4wLjAgY3JlYXRlZFxyXG4gKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbi8v5p6E6YCg5L+h5oGv5qGG5Li75L2TXHJcbnZhciBNb2RhbCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAvL+aehOmAoOWOn+Wni+exu1xyXG4gICAgZnVuY3Rpb24gTShtKSB7XHJcbiAgICAgICAgdGhpcy5zID0gbS5zOy8v5piv5ZCm5pi+56S6XHJcbiAgICAgICAgdGhpcy5pZCA9IG0uaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy/mnoTpgKDmoIflh4ZzaG935pa55rOV77yM55So5LqO57un5om/XHJcbiAgICBNLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmlkKTtcclxuICAgICAgICBpZiAoZWxlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnMgJiYgIWlzU2hvdygpKSB7Ly/mmL7npLrlvZPliY3pmpDol49cclxuICAgICAgICAgICAgICAgIGVsZS5jbGFzc05hbWUgPSBlbGUuY2xhc3NOYW1lLnJlcGxhY2UoXCJkcC1uXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnMgJiYgaXNTaG93KCkpIHsvL+makOiXj+W9k+WJjeaYvuekulxyXG4gICAgICAgICAgICAgICAgZWxlLmNsYXNzTmFtZSArPSBcIiBkcC1uXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/ljrvpmaTkuKTovrnnmoTnqbrmoLxcclxuICAgICAgICAgICAgZWxlLmNsYXNzTmFtZSA9IFN0cmluZyhlbGUuY2xhc3NOYW1lKS50cmltKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGlzU2hvdygpIHsvL+aYr+WQpuW3suaYvuekuu+8jOaXoGNsYXNz5pe25pi+56S6XHJcbiAgICAgICAgICAgIHJldHVybiBlbGUuY2xhc3NOYW1lLnNwbGl0KFwiZHAtblwiKS5sZW5ndGggPT0gMTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8v5Yqg6L295L+h5oGv5qGGXHJcbiAgICB2YXIgbG9hZGluZyA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/liJ3lp4vljJbnlJ/miJDliqDovb3kv6Hmga/moYZcclxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYWRpbmdfbW9kYWxfZWxlbWVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImxvYWRpbmdfbW9kYWxfZWxlbWVudFwiIGNsYXNzPVwibG9hZGluZy1tb2RhbC1ib2R5IGRwLW5cIj48ZGl2IGNsYXNzPVwiY292ZXJfbW9kYWxfZWxlbWVudFwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibG9hZGluZy1tb2RhbC1pbWFnZVwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibG9hZGluZy1tb2RhbC10ZXh0XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxoMj7njqnlkb3liqDovb3kuK3igKbigKY8L2gyPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL+aYvuekuuOAgemakOiXj+S/oeaBr+ahhlxyXG4gICAgICAgIHZhciBzaG93ID0gZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICAgICAgcyA9IHR5cGVvZiBzID09IFwidW5kZWZpbmVkXCIgPyB0cnVlIDogczsvL+aXoOWPguaVsOaYvuekuuS/oeaBr+ahhlxyXG4gICAgICAgICAgICB2YXIgbSA9IG5ldyBNKHtpZDogXCJsb2FkaW5nX21vZGFsX2VsZW1lbnRcIiwgczogc30pO1xyXG4gICAgICAgICAgICBtLnNob3coKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluaXQ6IGluaXRcclxuICAgICAgICAgICAgLCBzaG93OiBzaG93XHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuICAgIC8v5by55Ye65L+h5oGv5qGGXHJcbiAgICB2YXIgYWxlcnQgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxlcnRfbW9kYWxfZWxlbWVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImFsZXJ0X21vZGFsX2VsZW1lbnRcIiBjbGFzcz1cImFsZXJ0LW1vZGFsLWVsZW1lbnQgZHAtblwiPjxkaXYgY2xhc3M9XCJjb3Zlcl9tb2RhbF9lbGVtZW50XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhbGVydC1tb2RhbC1jb250ZW50XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhbGVydC1tb2RhbC1ib2R5XCI+PHNwYW4gY2xhc3M9XCJhbGVydC1tb2RhbC10ZXh0XCI+PC9zcGFuPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxlcnQtbW9kYWwtZm9vdGVyXCI+PGJ1dHRvbiBpZD1cImFsZXJ0X21vZGFsX2Nsb3NlXCIgY2xhc3M9XCJhbGVydC1tb2RhbC1idXR0b25cIj7lhbPpl608L2J1dHRvbj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHNob3cgPSBmdW5jdGlvbiAocykge1xyXG4gICAgICAgICAgICBzID0gdHlwZW9mIHMgPT0gXCJ1bmRlZmluZWRcIiA/IHRydWUgOiBzO1xyXG4gICAgICAgICAgICB2YXIgbSA9IG5ldyBNKHtpZDogXCJhbGVydF9tb2RhbF9lbGVtZW50XCIsIHM6IHN9KTtcclxuICAgICAgICAgICAgbS5zaG93KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDorr7nva7lvLnlh7rkv6Hmga/moYZcclxuICAgICAgICAgKiBAcGFyYW0gbXNnICAgICAgIOaYvuekuueahOS/oeaBr++8jOaUr+aMgWh0bWxcclxuICAgICAgICAgKiBAcGFyYW0gc2VkICAgICAgIOWAkuiuoeaXtuWFs+mXreaXtumXtO+8jOWNleS9je+8mnNlY29uZFxyXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayAg5YWz6Zet6Kem5Y+R5Zue6LCD5Ye95pWwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIHNldCA9IGZ1bmN0aW9uIChtc2csIHNlZCwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxlcnRfbW9kYWxfZWxlbWVudFwiKTtcclxuICAgICAgICAgICAgaWYgKG1zZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtc2cgPT09ICdvYmplY3QnKSB7Ly/lupTlr7nlkI7nq6/ov5Tlm57mj5DnpLrml7bkvb/nlKhPYmplY3TlsIHoo4VcclxuICAgICAgICAgICAgICAgICAgICBtc2cgPSBKU09OLnN0cmluZ2lmeShtc2cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoZWxlKXtcclxuICAgICAgICAgICAgICAgICAgICBlbGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImFsZXJ0LW1vZGFsLXRleHRcIilbMF0uaW5uZXJIVE1MID0gbXNnO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYWxlcnQtbW9kYWwtdGV4dFwiKVswXS5pbm5lckhUTUwgPSBtc2c7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNlZCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3coZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCAqIHNlZCk7XHJcbiAgICAgICAgICAgIH0vL+aXoOWFs+mXreaXtumXtOaIluiAheWFs+mXreaXtumXtOS4ujDvvIzkuI3oh6rliqjlhbPpl61cclxuICAgICAgICAgICAgLy9maXhtZSDkuovku7bnm5HlkKznmoRpZeWFvOWuueaAp1xyXG4gICAgICAgICAgICAvL+WFs+mXreaMiemSrueahOS6i+S7tuS+puWQrFxyXG4gICAgICAgICAgICAkKFwiI2FsZXJ0X21vZGFsX2Nsb3NlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAvL+mYu+atouS6i+S7tue7p+e7reS8oOmAklxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluaXQ6IGluaXRcclxuICAgICAgICAgICAgLCBzaG93OiBzaG93XHJcbiAgICAgICAgICAgICwgc2V0OiBzZXRcclxuICAgICAgICB9XHJcbiAgICB9KCkpO1xyXG4gICAgLy/pgInmi6nkv6Hmga/moYZcclxuICAgIHZhciBjb25maXJtID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbmZpcm1fbW9kYWxfZWxlbWVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImNvbmZpcm1fbW9kYWxfZWxlbWVudFwiIGNsYXNzPVwiY29uZmlybS1tb2RhbC1lbGVtZW50IGRwLW5cIj48ZGl2IGNsYXNzPVwiY292ZXJfbW9kYWxfZWxlbWVudFwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29uZmlybS1tb2RhbC1jb250ZW50XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgaWQ9XCJjb25maXJtX21vZGFsX2hlYWRlclwiIGNsYXNzPVwiY29uZmlybS1tb2RhbC1oZWFkZXIgZHAtblwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29uZmlybS1tb2RhbC1ib2R5XCI+PHNwYW4gaWQ9XCJjb25maXJtX21vZGFsX3RleHRcIiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtdGV4dFwiPjwvc3Bhbj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtZm9vdGVyXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJmb290ZXItYnV0dG9uLXN1Y2Nlc3NcIj48YnV0dG9uIGNsYXNzPVwiY29uZmlybS1tb2RhbC1idXR0b24gIG1vZGFsLXN1Y2Nlc3NcIiBkYXRhLWNvbmZpcm09XCJzdWNjZXNzXCI+56Gu6K6kPC9idXR0b24+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJmb290ZXItYnV0dG9uLWZhbHNlXCI+PGJ1dHRvbiBjbGFzcz1cImNvbmZpcm0tbW9kYWwtYnV0dG9uXCIgZGF0YS1jb25maXJtPVwiZXJyb3JcIj7lj5bmtog8L2J1dHRvbj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHNob3cgPSBmdW5jdGlvbiAocykge1xyXG4gICAgICAgICAgICBzID0gdHlwZW9mIHMgPT0gXCJ1bmRlZmluZWRcIiA/IHRydWUgOiBzO1xyXG4gICAgICAgICAgICB2YXIgbSA9IG5ldyBNKHtpZDogXCJjb25maXJtX21vZGFsX2VsZW1lbnRcIiwgczogc30pO1xyXG4gICAgICAgICAgICBtLnNob3coKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOiuvue9rumAieaLqeS/oeaBr+ahhueahOWGheWuuVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb24gICAg6YWN572uXHJcbiAgICAgICAgICoge1xyXG4gICAgICAgICAqICAgICAgdGl0bGU6XCLlpLTpg6jmmL7npLrnmoTkv6Hmga9cIlxyXG4gICAgICAgICAqICAgICAgLHRleHQ6XCLmmL7npLrnmoTmj5DnpLrkv6Hmga9cIlxyXG4gICAgICAgICAqICAgICAgLHN1Y2Nlc3M6XCLngrnlh7vmiJDlip/lkI7nmoTlm57osINcIlxyXG4gICAgICAgICAqICAgICAgLGVycm9yOlwi54K55Ye75aSx6LSl5ZCO55qE5Zue6LCDXCJcclxuICAgICAgICAgKiAgICAgICxjb21wbGV0ZTpcIueCueWHu+aMiemSruWQjueahOaVtOS9k+Wbnuiwg1wiXHJcbiAgICAgICAgICogfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBiYXIgPSAwO1xyXG4gICAgICAgIHZhciBzZXQgPSBmdW5jdGlvbiAob3B0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmICghb3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFwidGl0bGVcIiBpbiBvcHRpb24gJiYgb3B0aW9uLnRpdGxlLmxlbmd0aCA+IDApIHsvL+acieWktOmDqO+8jOWImeaYvuekuuWktOmDqFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maXJtX21vZGFsX2hlYWRlclwiKS5pbm5lckhUTUwgPSBvcHRpb24udGl0bGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFwidGV4dFwiIGluIG9wdGlvbiAmJiBvcHRpb24udGV4dC5sZW5ndGggPiAwKSB7Ly/mnInlhoXlrrnvvIzliJnmmL7npLrmlbTkuKrpgInmi6nkv6Hmga/moYZcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlybV9tb2RhbF90ZXh0XCIpLmlubmVySFRNTCA9IG9wdGlvbi50ZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vZml4bWUg5LqL5Lu255uR5ZCs55qEaWXlhbzlrrnmgKdcclxuICAgICAgICAgICAgLy/lhbPpl63mjInpkq7nmoTkuovku7bkvqblkKxcclxuICAgICAgICAgICAgJChcIiNjb25maXJtX21vZGFsX2VsZW1lbnRcIikuZmluZChcIi5jb25maXJtLW1vZGFsLWJ1dHRvblwiKS5vZmYoXCJjbGlja1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vZml4bWUgLm9mZihcImNsaWNrXCIp55So5LqO6Ziy5q2i5aSa5qyh6Kem5Y+RPC0t5b6I546E5a2m77yM5oiR5Lmf5LiN55+l6YGT5Li65LuA5LmI77yM5L2G5piv6K+35LiN6KaB5L+u5pS544CCXHJcbiAgICAgICAgICAgICAgICB2YXIgYXRyID0gJCh0aGlzKS5hdHRyKFwiZGF0YS1jb25maXJtXCIpOy8v6YCJ5oup55qE5oyJ6ZKuXHJcbiAgICAgICAgICAgICAgICBiYXIrKztcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb24gJiYgYXRyIGluIG9wdGlvbiAmJiBvcHRpb25bYXRyXSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uW2F0cl0oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb24gJiYgXCJjb21wbGV0ZVwiIGluIG9wdGlvbiAmJiBvcHRpb24uY29tcGxldGUgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5jb21wbGV0ZSgpOy8v6Iul5pyJ5a6M5oiQ5Ye95pWw77yM5YiZ5omn6KGMXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Ugey8v5ZCm5YiZ77yM5YWz6Zet6YCJ5oup5qGGXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL+mYu+atouS6i+S7tue7p+e7reS8oOmAklxyXG4gICAgICAgICAgICAgICAgLy9yZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICAsIHNob3c6IHNob3dcclxuICAgICAgICAgICAgLCBzZXQ6IHNldFxyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICAvL+imhuebluWxglxyXG4gICAgdmFyIGNvdmVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdmVyX21vZGFsX2VsZW1lbnRcIikpIHtcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJjb3Zlcl9tb2RhbF9lbGVtZW50XCIgY2xhc3M9XCJjb3Zlci1tb2RhbC1lbGVtZW50IGRwLW5cIj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgaGlkZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb3Zlcl9tb2RhbF9lbGVtZW50XCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzaG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdmVyX21vZGFsX2VsZW1lbnRcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluaXQ6IGluaXRcclxuICAgICAgICAgICAgLCBzaG93OiBzaG93XHJcbiAgICAgICAgICAgICwgaGlkZTogaGlkZVxyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGluaXRMb2FkaW5nOiBsb2FkaW5nLmluaXRcclxuICAgICAgICAsIHNob3dMb2FkaW5nOiBsb2FkaW5nLnNob3dcclxuXHJcbiAgICAgICAgLCBpbml0QWxlcnQ6IGFsZXJ0LmluaXRcclxuICAgICAgICAsIHNob3dBbGVydDogYWxlcnQuc2hvd1xyXG4gICAgICAgICwgc2V0QWxlcnQ6IGFsZXJ0LnNldFxyXG5cclxuICAgICAgICAsIGluaXRDb25maXJtOiBjb25maXJtLmluaXRcclxuICAgICAgICAsIHNldENvbmZpcm06IGNvbmZpcm0uc2V0XHJcbiAgICAgICAgLCBzaG93Q29uZmlybTogY29uZmlybS5zaG93XHJcbiAgICAgICAgLCBpbml0Q292ZXI6IGNvdmVyLmluaXRcclxuICAgIH1cclxufSgpKTtcclxuXHJcbi8v6aG16Z2i5Yqg6L295a6M5q+V5ZCO55Sf5oiQ5Zub5Liq6Ieq5a6a5LmJ5qih5oCB5qGGXHJcbnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgLy/pobXpnaLliqDovb3ml7bnlJ/miJDkuIDkuKropobnm5blsYJcclxuICAgIE1vZGFsLmluaXRDb3ZlcigpO1xyXG4gICAgLy/pobXpnaLliqDovb3ml7bnlJ/miJDkuIDkuKrliqDovb3kv6Hmga/moYZcclxuICAgIE1vZGFsLmluaXRMb2FkaW5nKCk7XHJcbiAgICAvL+mhtemdouWKoOi9veaXtueUn+aIkOS4gOS4quW8ueWHuuS/oeaBr+ahhlxyXG4gICAgTW9kYWwuaW5pdEFsZXJ0KCk7XHJcbiAgICAvL+mhtemdouWKoOi9veaXtueUn+aIkOS4gOS4qumAieaLqeS/oeaBr+ahhlxyXG4gICAgTW9kYWwuaW5pdENvbmZpcm0oKTtcclxufSwgMTAwKTtcclxuXHJcblxyXG4vL+aKm+WHuuS4iuWxguiwg+eUqFxyXG5leHBvcnRzLnNob3dMb2FkaW5nID0gTW9kYWwuc2hvd0xvYWRpbmc7XHJcbmV4cG9ydHMuc2V0QWxlcnQgPSBNb2RhbC5zZXRBbGVydDtcclxuZXhwb3J0cy5zaG93QWxlcnQgPSBNb2RhbC5zaG93QWxlcnQ7XHJcbmV4cG9ydHMuc2V0Q29uZmlybSA9IE1vZGFsLnNldENvbmZpcm07XHJcbmV4cG9ydHMuc2hvd0NvbmZpcm0gPSBNb2RhbC5zaG93Q29uZmlybTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNi8xMS8yMi5cclxuICovXHJcblwidXNlIHN0cmljdFwiO1xyXG52YXIgaGVhZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8v5pe26Ze05qC85byP5YyWXHJcbiAgICBEYXRlLnByb3RvdHlwZS5Gb3JtYXQgPSBmdW5jdGlvbiAoZm10KSB7IC8vYXV0aG9yOiBKZXJlbXl5eVxyXG4gICAgICAgIHZhciBvID0ge1xyXG4gICAgICAgICAgICBcIk0rXCI6IHRoaXMuZ2V0TW9udGgoKSArIDEsIC8v5pyI5Lu9XHJcbiAgICAgICAgICAgIFwiZCtcIjogdGhpcy5nZXREYXRlKCksIC8v5pelXHJcbiAgICAgICAgICAgIFwiaCtcIjogdGhpcy5nZXRIb3VycygpLCAvL+Wwj+aXtlxyXG4gICAgICAgICAgICBcIm0rXCI6IHRoaXMuZ2V0TWludXRlcygpLCAvL+WIhlxyXG4gICAgICAgICAgICBcInMrXCI6IHRoaXMuZ2V0U2Vjb25kcygpLCAvL+enklxyXG4gICAgICAgICAgICBcInErXCI6IE1hdGguZmxvb3IoKHRoaXMuZ2V0TW9udGgoKSArIDMpIC8gMyksIC8v5a2j5bqmXHJcbiAgICAgICAgICAgIFwiU1wiOiB0aGlzLmdldE1pbGxpc2Vjb25kcygpIC8v5q+r56eSXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoLyh5KykvLnRlc3QoZm10KSkgZm10ID0gZm10LnJlcGxhY2UoUmVnRXhwLiQxLCAodGhpcy5nZXRGdWxsWWVhcigpICsgXCJcIikuc3Vic3RyKDQgLSBSZWdFeHAuJDEubGVuZ3RoKSk7XHJcbiAgICAgICAgZm9yICh2YXIgayBpbiBvKVxyXG4gICAgICAgICAgICBpZiAobmV3IFJlZ0V4cChcIihcIiArIGsgKyBcIilcIikudGVzdChmbXQpKSBmbXQgPSBmbXQucmVwbGFjZShSZWdFeHAuJDEsIChSZWdFeHAuJDEubGVuZ3RoID09IDEpID8gKG9ba10pIDogKChcIjAwXCIgKyBvW2tdKS5zdWJzdHIoKFwiXCIgKyBvW2tdKS5sZW5ndGgpKSk7XHJcbiAgICAgICAgcmV0dXJuIGZtdDtcclxuICAgIH07XHJcbiAgICAvL+i/lOWbnumhtumDqFxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5iYWNrLXRvcCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKFwiaHRtbCxib2R5XCIpLmFuaW1hdGUoe3Njcm9sbFRvcDowfSwxMDApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG4gICAgJChkb2N1bWVudCkub24oJ21vdXNlZW50ZXInLCAnLnZpcC1wYXJ0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oJy52aXAtc2VsZWN0Jykuc3RvcCh0cnVlKTtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcudmlwLXNlbGVjdCcpLnNsaWRlRG93bigxMDApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG4gICAgJChkb2N1bWVudCkub24oJ21vdXNlbGVhdmUnLCAnLnZpcC1wYXJ0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oJy52aXAtc2VsZWN0Jykuc3RvcCh0cnVlKTtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcudmlwLXNlbGVjdCcpLnNsaWRlVXAoMTAwKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWVudGVyJywgJy53ZWNoYXQtbG9nbycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcuYmlnLXdlY2hhdCcpLmZhZGVJbigyMDApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG4gICAgJChkb2N1bWVudCkub24oJ21vdXNlbGVhdmUnLCAnLndlY2hhdC1sb2dvJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oJy5iaWctd2VjaGF0JykuZmFkZU91dCgyMDApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG59O1xyXG5tb2R1bGUuZXhwb3J0cy5oZWFkID0gaGVhZDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNi8xMS8yMi5cclxuICovXHJcblwidXNlIHN0cmljdFwiO1xyXG52YXIgbGlzdGVuZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+WktOmDqOeCueWHu+S6i+S7tlxyXG4gICAgICAgIHJlcXVpcmUoJy4vaGVhZCcpLmhlYWQoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJ1bjogcnVuXHJcbiAgICB9XHJcbn0oKSk7XHJcbm1vZHVsZS5leHBvcnRzID0gbGlzdGVuZXI7Il19
