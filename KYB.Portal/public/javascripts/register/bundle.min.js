(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * Created by jeremy on 2016/2/24.
 * @version 1.0.0 created
 */

'use strict';

//构造信息框主体
var Modal = (function () {
    //构造原始类
    function M(m) {
        this.s = m.s;//是否显示
        this.id = m.id;
    }

    //构造标准show方法，用于继承
    M.prototype.show = function () {
        var ele = document.getElementById(this.id);
        if (ele) {
            if (this.s && !isShow()) {//显示当前隐藏
                ele.className = ele.className.replace("dp-n", "");
            } else if (!this.s && isShow()) {//隐藏当前显示
                ele.className += " dp-n";
            }
            //去除两边的空格
            ele.className = String(ele.className).trim();
        }
        function isShow() {//是否已显示，无class时显示
            return ele.className.split("dp-n").length == 1;
        }
    };

    //加载信息框
    var loading = (function () {
        //初始化生成加载信息框
        var init = function () {
            if (!document.getElementById("loading_modal_element")) {
                $('body').append('<div id="loading_modal_element" class="loading-modal-body dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="loading-modal-image"></div>' +
                    '<div class="loading-modal-text">' +
                    '<h2>玩命加载中……</h2>' +
                    '</div></div>');
            }
            return false;
        };
        //显示、隐藏信息框
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;//无参数显示信息框
            var m = new M({id: "loading_modal_element", s: s});
            m.show();
        };
        return {
            init: init
            , show: show
        }
    }());
    //弹出信息框
    var alert = (function () {
        var init = function () {
            if (!document.getElementById("alert_modal_element")) {
                $('body').append('<div id="alert_modal_element" class="alert-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="alert-modal-content">' +
                    '<div class="alert-modal-body"><span class="alert-modal-text"></span></div>' +
                    '<div class="alert-modal-footer"><button id="alert_modal_close" class="alert-modal-button">关闭</button></div>' +
                    '</div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "alert_modal_element", s: s});
            m.show();
        };
        /**
         * 设置弹出信息框
         * @param msg       显示的信息，支持html
         * @param sed       倒计时关闭时间，单位：second
         * @param callback  关闭触发回调函数
         */
        var set = function (msg, sed, callback) {
            var ele = document.getElementById("alert_modal_element");
            if (msg) {
                if (typeof msg === 'object') {//应对后端返回提示时使用Object封装
                    msg = JSON.stringify(msg);
                }
                if(ele){
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }else{
                    init();
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }
                show();
            }
            if (sed > 0) {
                setTimeout(function () {
                    show(false);
                }, 1000 * sed);
            }//无关闭时间或者关闭时间为0，不自动关闭
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#alert_modal_close").on("click", function () {
                if (callback && callback instanceof Function) {
                    callback();
                }
                show(false);
                //阻止事件继续传递
                return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //选择信息框
    var confirm = (function () {
        var init = function () {
            if (!document.getElementById("confirm_modal_element")) {
                $('body').append('<div id="confirm_modal_element" class="confirm-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="confirm-modal-content">' +
                    '<div id="confirm_modal_header" class="confirm-modal-header dp-n"></div>' +
                    '<div class="confirm-modal-body"><span id="confirm_modal_text" class="confirm-modal-text"></span></div>' +
                    '<div class="confirm-modal-footer">' +
                    '<div class="footer-button-success"><button class="confirm-modal-button  modal-success" data-confirm="success">确认</button></div>' +
                    '<div class="footer-button-false"><button class="confirm-modal-button" data-confirm="error">取消</button></div>' +
                    '</div></div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "confirm_modal_element", s: s});
            m.show();
        };
        /**
         * 设置选择信息框的内容
         * @param option    配置
         * {
         *      title:"头部显示的信息"
         *      ,text:"显示的提示信息"
         *      ,success:"点击成功后的回调"
         *      ,error:"点击失败后的回调"
         *      ,complete:"点击按钮后的整体回调"
         * }
         */
        var bar = 0;
        var set = function (option) {
            if (!option) {
                return false;
            }
            if ("title" in option && option.title.length > 0) {//有头部，则显示头部
                document.getElementById("confirm_modal_header").innerHTML = option.title;
            }
            if ("text" in option && option.text.length > 0) {//有内容，则显示整个选择信息框
                document.getElementById("confirm_modal_text").innerHTML = option.text;
            }
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#confirm_modal_element").find(".confirm-modal-button").off("click").on("click", function () {
                //fixme .off("click")用于防止多次触发<--很玄学，我也不知道为什么，但是请不要修改。
                var atr = $(this).attr("data-confirm");//选择的按钮
                bar++;
                if (option && atr in option && option[atr] instanceof Function) {
                    option[atr]();
                }
                if (option && "complete" in option && option.complete instanceof Function) {
                    option.complete();//若有完成函数，则执行
                } else {//否则，关闭选择框
                    show(false);
                }
                //阻止事件继续传递
                //return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //覆盖层
    var cover = (function () {
        var init = function () {
            if (!document.getElementById("cover_modal_element")) {
                $('body').append('<div id="cover_modal_element" class="cover-modal-element dp-n"></div>');
            }
            return false;
        };
        var hide = function () {
            document.getElementById("cover_modal_element").style.display = "none";
        };
        var show = function () {
            document.getElementById("cover_modal_element").style.display = "block";
        };
        return {
            init: init
            , show: show
            , hide: hide
        }
    }());
    return {
        initLoading: loading.init
        , showLoading: loading.show

        , initAlert: alert.init
        , showAlert: alert.show
        , setAlert: alert.set

        , initConfirm: confirm.init
        , setConfirm: confirm.set
        , showConfirm: confirm.show
        , initCover: cover.init
    }
}());

//页面加载完毕后生成四个自定义模态框
setTimeout(function () {
    //页面加载时生成一个覆盖层
    Modal.initCover();
    //页面加载时生成一个加载信息框
    Modal.initLoading();
    //页面加载时生成一个弹出信息框
    Modal.initAlert();
    //页面加载时生成一个选择信息框
    Modal.initConfirm();
}, 100);


//抛出上层调用
exports.showLoading = Modal.showLoading;
exports.setAlert = Modal.setAlert;
exports.showAlert = Modal.showAlert;
exports.setConfirm = Modal.setConfirm;
exports.showConfirm = Modal.showConfirm;
},{}],2:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var head = function () {
    //时间格式化
    Date.prototype.Format = function (fmt) { //author: Jeremyyy
        var o = {
            "M+": this.getMonth() + 1, //月份
            "d+": this.getDate(), //日
            "h+": this.getHours(), //小时
            "m+": this.getMinutes(), //分
            "s+": this.getSeconds(), //秒
            "q+": Math.floor((this.getMonth() + 3) / 3), //季度
            "S": this.getMilliseconds() //毫秒
        };
        if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        for (var k in o)
            if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
        return fmt;
    };
    //返回顶部
    $(document).on('click', '.back-top', function () {
        $("html,body").animate({scrollTop:0},100);
        return false;
    });
    $(document).on('mouseenter', '.vip-part', function () {
        $(this).children('.vip-select').stop(true);
        $(this).children('.vip-select').slideDown(100);
        return false;
    });
    $(document).on('mouseleave', '.vip-part', function () {
        $(this).children('.vip-select').stop(true);
        $(this).children('.vip-select').slideUp(100);
        return false;
    });
    $(document).on('mouseenter', '.wechat-logo', function () {
        $(this).children('.big-wechat').fadeIn(200);
        return false;
    });
    $(document).on('mouseleave', '.wechat-logo', function () {
        $(this).children('.big-wechat').fadeOut(200);
        return false;
    });
};
module.exports.head = head;
},{}],3:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var listener = (function () {
    var run = function () {
        //头部点击事件
        require('./head').head();
    };
    return {
        run: run
    }
}());
module.exports = listener;
},{"./head":2}],4:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/24.
 */
"use strict";
var Data = (function () {
  var sendText = function (data, callback) {
    var _data = {};
    $.ajax({
      url: '/api/login/sendText'
      , type: 'post'
      , data: data
      , dataType: 'json'
      , timeout: 100000
      , success: function (json) {
        if (json && "resCode" in json) {
          _data = json;
        } else {
          _data = {};
        }
      }, complete: function () {
        if (callback && callback instanceof Function) {
          callback(_data);
        }
      }
    });
  };
  var register = function (data, callback) {
    var _data = {};
    $.ajax({
      url: '/api/login/register'
      , type: 'post'
      , data: data
      , dataType: 'json'
      , timeout: 100000
      , success: function (json) {
        if (json && "resCode" in json) {
          _data = json;
        } else {
          _data = {};
        }
      }, complete: function () {
        if (callback && callback instanceof Function) {
          callback(_data);
        }
      }
    });
  };
  var checkMobile = function (data, callback) {
    var _data = {};
    $.ajax({
      url: '/api/login/checkMobile'
      , type: 'post'
      , data: data
      , dataType: 'json'
      , timeout: 100000
      , success: function (json) {
        if (json && "resCode" in json) {
          _data = json;
        } else {
          _data = {};
        }
      }, complete: function () {
        if (callback && callback instanceof Function) {
          callback(_data);
        }
      }
    });
  };
  var checkSms = function (data, callback) {
    var _data = {};
    $.ajax({
      url: '/api/login/regSendSms'
      , type: 'post'
      , data: data
      , dataType: 'json'
      , timeout: 100000
      , success: function (json) {
        console.log(json);
        if (json && "resCode" in json) {
          _data = json;
        } else {
          _data = {};
        }
      }, complete: function () {
        if (callback && callback instanceof Function) {
          callback(_data);
        }
      }
    });
  };
  var ckSms = function (data, callback) {
    var _data = {};
    $.ajax({
      url: '/api/login/ckSms'
      , type: 'post'
      , data: data
      , dataType: 'json'
      , timeout: 100000
      , success: function (json) {
        if (json && "resCode" in json) {
          _data = json;
        } else {
          _data = {};
        }
      }, complete: function () {
        if (callback && callback instanceof Function) {
          callback(_data);
        }
      }
    });
  };
  return {
    sendText: sendText
    , register: register
    , checkMobile: checkMobile
    , ckSms :ckSms
    , checkSms:checkSms
  }
}());
module.exports.Data = Data;
},{}],5:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/23.
 */
"use strict";
require('../general').run();

require('./listener').run();
},{"../general":3,"./listener":6}],6:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var Modal = require('../frame/modal');
var Listener = (function () {
    var Data = require('./data').Data;
    var tel = false
        , pwd = false
        , repeat = false
        , msg = false
        , mail = false
        , next1 = false
        , next2 = false
        , companyName = false
        , realName = false;
    var mailUrl = '';
    var pass1, pass2;
    var listener = function () {
        //判断必选项是否填写
        pass1 = function () {
            var ele = $('.agr_next>.lg-btn');
            if (tel && msg) {
                ele.removeAttr('style').css({'backgroundColor': '#006bbc'});
                next1 = true;
            } else {
                ele.css({'pointer-events': 'none', 'backgroundColor': '#C6CEDE'});
                next1 = false;
            }
        };
        //输入电话
        $(document).on('click', '.tel .agr_wrong', function () {
            $(this).parent().find('.agr_wrong').hide();
            $('#tel').focus();
            $(this).css('border-color', '#c6cede');
        });
        $(document).on('focus', '#tel', function () {
            $(this).parent().find('.agr_wrong').hide();
            $(this).css('border-color', '#c6cede');
            $(this).parent().find('.info').hide();
        });
        $(document).on('blur', '#tel', function () {
            var reg = /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/
                , value = $(this).val();
            if (value == '') {
                $(this).parent().find('.agr_wrong').show();
                $(this).css('border-color', 'red');
            } else {
                if (reg.test(value)) {
                    tel = true;
                    $(this).removeClass('wrong');
                    $(this).siblings('.info').hide();
                } else {
                    tel = false;
                    $(this).addClass('wrong');
                    $(this).siblings('.info').show();
                    $(this).css('border-color', 'red');
                }
            }
            pass1();
        });
        $('.p-msg').click(function () {
            sendPhone();
        });
        //输入短信验证码
        if ($('#tel') == '') {
            $('#p-msg').attr('disabled', true);
        } else {
            $(document).on('click', '.phone-msg .agr_wrong', function () {
                $(this).parent().find('.agr_wrong').hide();
                $('#p-msg').focus();
                $(this).css('border-color', '#c6cede');
            });
            $(document).on('focus', '#p-msg', function () {
                $(this).parent().find('.agr_wrong').hide();
                $(this).css('border-color', '#c6cede');
                $(this).parent().find('.info').hide();
            });
            $(document).on('blur', '#p-msg', function () {
                var value = $(this).val();
                if (value == '') {
                    $(this).parent().find('.agr_wrong').show();
                    $(this).css('border-color', 'red');
                } else {
                    if (value) {
                        msg = true;
                        $(this).removeClass('wrong');
                        $(this).siblings('.info').addClass('dp-n');
                    } else {
                        msg = false;
                        $(this).addClass('wrong');
                        $(this).siblings('.info').removeClass('dp-n');
                        $(this).css('border-color', '#red');
                    }
                }
                pass1();
            });
        }
        //注册下一步
        $(document).on('click', '.agr_next>.lg-btn', function () {
            console.log(next1);
            if (next1) {
                var data = {
                    mobile: $('#tel').val()
                    , smsCode: $('#p-msg').val()
                };
                Data.ckSms(data, function (data) {
                    if (data && 'resCode' in data && data.resCode == 0) {
                        $('.register-box').hide();
                        $('.data-box').show();
                        $('.agr_statusDetail').eq(1).addClass('active').siblings().removeClass('active');
                        $('.res_mobile').html(data.resMsg);
                    } else {
                        Modal.setAlert('请填写完整！');
                    }
                });
            } else {
                Modal.setAlert('请填写完整');
            }
        });
        //输入资料
        //vertify pwd
        $(document).on('click', '.passward .agr_wrong', function () {
            $(this).parent().find('.agr_wrong').hide();
            $('#password').focus();
            $(this).css('border-color', '#c6cede');
        });
        $(document).on('focus', '#password', function () {
            $(this).parent().find('.agr_wrong').hide();
            $(this).css('border-color', '#c6cede');
            $(this).parent().find('.info').hide();
        });
        $(document).on('blur', '#password', function () {
            var value = $(this).val()
                , reg = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;
            if (value == '') {
                $(this).parent().find('.agr_wrong').show();
                $(this).css('border-color', 'red');
            } else {
                if (reg.test(value)) {
                    pwd = true;
                    $(this).removeClass('wrong');
                    $(this).siblings('.info').hide();
                } else {
                    pwd = false;
                    $(this).addClass('wrong');
                    $(this).siblings('.info').show();
                    $(this).css('border-color', 'red');
                }
            }
            pass2();
        });
        //vertify twice pwd
        $(document).on('click', '.ensurePwd .agr_wrong', function () {
            $(this).parent().find('.agr_wrong').hide();
            $('#ensure').focus();
            $(this).css('border-color', '#c6cede');
        });
        $(document).on('focus', '#ensure', function () {
            $(this).parent().find('.agr_wrong').hide();
            $(this).css('border-color', '#c6cede');
            $(this).parent().find('.info').hide();
        });
        $(document).on('blur', '#ensure', function () {
            var value = $(this).val()
                , reg = $('#password').val();
            if (value == '') {
                $(this).parent().find('.agr_wrong').show();
                $(this).css('border-color', 'red');
            } else {
                if (value === reg) {
                    repeat = true;
                    $(this).removeClass('wrong');
                    $(this).siblings('.info').hide();
                } else {
                    repeat = false;
                    $(this).addClass('wrong');
                    $(this).siblings('.info').show();
                    $(this).css('border-color', 'red');
                }
            }
            pass2();
        });
        //vertify name
        $(document).on('click', '.res_name .agr_wrong', function () {
            $(this).parent().find('.agr_wrong').hide();
            $('#agr_name').focus();
            $(this).css('border-color', '#c6cede');
        });
        $(document).on('focus', '#res_name', function () {
            $(this).parent().find('.agr_wrong').hide();
            $(this).parent().find('.info').hide();
            $(this).css('border-color', '#c6cede');
        });
        $(document).on('blur', '#res_name', function () {
            var reg1 = /^[a-zA-Z ]{1,20}$/,
                reg2 = /^[\u4e00-\u9fa5]{2,5}$/
                , value = $(this).val();
            if (value == '') {
                $(this).parent().find('.agr_wrong').show();
                $(this).css('border-color', 'red');
            } else {
                if (reg1.test(value) || reg2.test(value)) {
                    realName = true;
                    $(this).removeClass('wrong');
                    $(this).parent().find('.info').hide();
                }
                else {
                    realName = false;
                    $(this).addClass('wrong');
                    $(this).parent().find('.info').show();
                    $(this).css('border-color', 'red');
                }
            }
            pass2();
        });
        //vertify mail
        $(document).on('click', '.res_mail .agr_wrong', function () {
            $(this).parent().find('.agr_wrong').hide();
            $('#mail').focus();
            $(this).css('border-color', '#c6cede');
        });
        $(document).on('focus', '#mail', function () {
            $(this).parent().find('.agr_wrong').hide();
            $(this).css('border-color', '#c6cede');
            $(this).parent().find('.info').hide();
        });
        $(document).on('blur', '#mail', function () {
            var reg = /^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]{2,4})+$/
                , value = $(this).val();
            if (value == '') {
                $(this).parent().find('.agr_wrong').show();
                $(this).css('border-color', 'red');
            } else {
                if (reg.test(value)) {
                    $(this).val();
                    mail = true;
                    $(this).removeClass('wrong');
                    $(this).siblings('.info').hide();
                } else {
                    mail = false;
                    $(this).addClass('wrong');
                    $(this).siblings('.info').show();
                    $(this).css('border-color', 'red');
                }
            }
            pass2();
        });

        //vertify company name
        $(document).on('click', '.companyName .agr_wrong', function () {
            $(this).parent().find('.agr_wrong').hide();
            $('#companyName').focus();
            $(this).css('border-color', '#c6cede');
        });
        $(document).on('focus', '#companyName', function () {
            $(this).parent().find('.agr_wrong').hide();
            $(this).css('border-color', '#c6cede');
            $(this).parent().find('.info').hide();
        });
        $(document).on('blur', '#companyName', function () {
            var value = $(this).val()
                , reg = $('#companyName').val();
            if (value == '') {
                $(this).parent().find('.agr_wrong').show();
                $(this).css('border-color', 'red');
                companyName = false;
            } else {
                companyName = true;
            }
            //if (value === reg) {
            //    companyName = true;
            //    $(this).removeClass('wrong');
            //    $(this).siblings('.info').hide();
            //} else {
            //    companyName = false;
            //    $(this).addClass('wrong');
            //    $(this).siblings('.info').show();
            //    $(this).css('border-color', 'red');
            //}
            pass2();
        });
        //图形验证
        //$(document).on('blur', '#code', function () {
        //    var value = $(this).val();
        //    if (value) {
        //        code = true;
        //        $(this).removeClass('wrong');
        //        $(this).siblings('.wrong-code').addClass('dp-n');
        //    } else {
        //        code = false;
        //        $(this).addClass('wrong');
        //        $(this).siblings('.wrong-code').html('请输入验证码');
        //        $(this).siblings('.wrong-code').removeClass('dp-n');
        //    }
        //    pass();
        //});
        //判断必选项是否填写
        var pass2 = function () {
            var ele = $('.res_next>a');
            if (pwd && repeat && realName && companyName && mail) {
                ele.removeAttr('style').css({'backgroundColor': '#006bbc'});
                next2 = true;
            } else {
                ele.css({'pointer-events': 'none', 'backgroundColor': '#C6CEDE'});
                next2 = false;
            }
        };

        //注册
        $(document).on('click', '.res_next>a', function () {
            if (next2) {
                var data = {
                    mobile: $('.res_mobile').html()
                    , password: $('#password').val()
                    , confirmPassword: $('#ensure').val()
                    , name: $('#res_name').val()
                    , email: $('#mail').val()
                    , companyName: $('#companyName').val()
                };
                Data.register(data, function (data) {
                    if (data && 'resCode' in data && data.resCode == 0) {
                        //var mail = $('#mail').val();
                        //$('#acc-id').html(data.resBody.member.mobile);
                        //$('#open-mail').html(mail);
                        //$('#open-mail').attr('href', gotomail(mail));
                        //$('.register-box').addClass('dp-n');
                        //$('.pass-box').removeClass('dp-n');
                        $('.data-box').hide();
                        $('.res_ok').show();
                    } else {
                        Modal.setAlert(data.resMsg);
                    }
                });
            } else {
                Modal.setAlert('请填写完整');
            }
        });
        //验证码切换
        $(document).on('click', '.validate-img', function () {
            getCode();
        });
    };
    //获取图形验证码
    //var getCode = function () {
    //    var src = '/getImgCode?';
    //    var getNum = function () {
    //        var num = '';
    //        for (var i = 0; i < 4; i++) {
    //            num = num + parseInt(10 * Math.random());
    //        }
    //        return num;
    //    };
    //    src += getNum();
    //    $('.validate-img').attr('src', src);
    //};
    //发送验证码
    var sendPhone = function () {
        var _this = $('.p-msg');
        if (tel) {
            Data.checkSms({mobile: $('#tel').val()}, function (json) {
                if (json && 'resCode' in json && json.resCode == 0) {
                    _this.prop('disabled', true);
                    _this.css({'background': '#e7ebf2', 'color': '#006bbd'});
                    //$('.agr_next').find('.lg-btn').removeAttribute("disabled");
                    var time = 120;
                    var timer = setInterval(function () {
                        if (time != 0) {
                            var str = '短信已发送（' + time + '）';
                            _this.html(str);
                            time--;
                        } else {
                            clearInterval(timer);
                            _this.html('点击发送验证码');
                            _this.prop('disabled', false);
                            _this.css('background', '#fff');
                        }
                    }, 1000)
                } else {
                    _this.prop('disabled', false);
                    Modal.setAlert(json.resMsg);
                }
            });
        }
    };

    //获取gt验证码
    //var getGt = function () {
    //    var handler2 = function (captchaObj) {
    //        $(".p-msg").click(function (e) {
    //            var result = captchaObj.getValidate();
    //            if (!result) {
    //                $("#notice").show();
    //                setTimeout(function () {
    //                    $("#notice").hide();
    //                }, 2000);
    //            } else {
    //                if (tel) {
    //                    sendPhone(result)
    //                } else {
    //                    $('.tel').find('.info').removeClass('dp-n');
    //                }
    //            }
    //            e.preventDefault();
    //        });
    //
    //        // 将验证码加到id为captcha的元素里，同时会有三个input的值用于表单提交
    //        captchaObj.appendTo("#captcha");
    //
    //        captchaObj.onReady(function () {
    //            $("#wait").hide();
    //        });
    //
    //        // 更多接口参考：http://www.geetest.com/install/sections/idx-client-sdk.html
    //    };
    //
    //
    //    $.ajax({
    //        url: "/login/sendGt3?t=" + (new Date()).getTime(), // 加随机数防止缓存
    //        type: "get",
    //        dataType: "json",
    //        success: function (data) {
    //
    //            // 调用 initGeetest 初始化参数
    //            // 参数1：配置参数
    //            // 参数2：回调，回调的第一个参数验证码对象，之后可以使用它调用相应的接口
    //            initGeetest({
    //                gt: data.gt,
    //                challenge: data.challenge,
    //                new_captcha: data.new_captcha, // 用于宕机时表示是新验证码的宕机
    //                offline: !data.success, // 表示用户后台检测极验服务器是否宕机，一般不需要关注
    //                product: "popup", // 产品形式，包括：float，popup
    //                width: "100%"
    //
    //                // 更多配置参数请参见：http://www.geetest.com/install/sections/idx-client-sdk.html#config
    //            }, handler2);
    //        }
    //    });
    //};

    function gotomail($mail) {
        if ($mail) {
            var $t = $mail.split('@')[1];
            if ($t) {
                $t = $t.toLowerCase();
                if ($t == '163.com') {
                    return 'http://mail.163.com';
                } else if ($t == 'vip.163.com') {
                    return 'http://vip.163.com';
                } else if ($t == '126.com') {
                    return 'http://mail.126.com';
                } else if ($t == 'qq.com' || $t == 'vip.qq.com' || $t == 'foxmail.com') {
                    return 'http://mail.qq.com';
                } else if ($t == 'gmail.com') {
                    return 'http://mail.google.com';
                } else if ($t == 'sohu.com') {
                    return 'http://mail.sohu.com';
                } else if ($t == 'tom.com') {
                    return 'http://mail.tom.com';
                } else if ($t == 'vip.sina.com') {
                    return 'http://vip.sina.com';
                } else if ($t == 'sina.com.cn' || $t == 'sina.com') {
                    return 'http://mail.sina.com.cn';
                } else if ($t == 'tom.com') {
                    return 'http://mail.tom.com';
                } else if ($t == 'yahoo.com.cn' || $t == 'yahoo.cn') {
                    return 'http://mail.cn.yahoo.com';
                } else if ($t == 'tom.com') {
                    return 'http://mail.tom.com';
                } else if ($t == 'yeah.net') {
                    return 'http://www.yeah.net';
                } else if ($t == '21cn.com') {
                    return 'http://mail.21cn.com';
                } else if ($t == 'hotmail.com') {
                    return 'http://www.hotmail.com';
                } else if ($t == 'sogou.com') {
                    return 'http://mail.sogou.com';
                } else if ($t == '188.com') {
                    return 'http://www.188.com';
                } else if ($t == '139.com') {
                    return 'http://mail.10086.cn';
                } else if ($t == '189.cn') {
                    return 'http://webmail15.189.cn/webmail';
                } else if ($t == 'wo.com.cn') {
                    return 'http://mail.wo.com.cn/smsmail';
                } else if ($t == '139.com') {
                    return 'http://mail.10086.cn';
                } else {
                    return 'javascript:void(0);';
                }
            } else {
                return 'javascript:void(0);';
            }
        } else {
            return 'javascript:void(0);';
        }
    }

    var run = function () {
        $('.res_next>a').css({'pointer-events': 'none', 'backgroundColor': '#C6CEDE'});
        $('.agr_next>.lg-btn').css({'pointer-events': 'none', 'backgroundColor': '#C6CEDE'});
        listener();
        //getCode();
    };
    return {
        run: run
    }
}());
module.exports = Listener;
},{"../frame/modal":1,"./data":4}]},{},[5])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL252bS92Ni4yLjAvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi4uL2ZyYW1lL21vZGFsLmpzIiwiLi4vZ2VuZXJhbC9oZWFkLmpzIiwiLi4vZ2VuZXJhbC9pbmRleC5qcyIsImRhdGEuanMiLCJpbmRleC5qcyIsImxpc3RlbmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKipcclxuICogQ3JlYXRlZCBieSBqZXJlbXkgb24gMjAxNi8yLzI0LlxyXG4gKiBAdmVyc2lvbiAxLjAuMCBjcmVhdGVkXHJcbiAqL1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuLy/mnoTpgKDkv6Hmga/moYbkuLvkvZNcclxudmFyIE1vZGFsID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8v5p6E6YCg5Y6f5aeL57G7XHJcbiAgICBmdW5jdGlvbiBNKG0pIHtcclxuICAgICAgICB0aGlzLnMgPSBtLnM7Ly/mmK/lkKbmmL7npLpcclxuICAgICAgICB0aGlzLmlkID0gbS5pZDtcclxuICAgIH1cclxuXHJcbiAgICAvL+aehOmAoOagh+WHhnNob3fmlrnms5XvvIznlKjkuo7nu6fmib9cclxuICAgIE0ucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuaWQpO1xyXG4gICAgICAgIGlmIChlbGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucyAmJiAhaXNTaG93KCkpIHsvL+aYvuekuuW9k+WJjemakOiXj1xyXG4gICAgICAgICAgICAgICAgZWxlLmNsYXNzTmFtZSA9IGVsZS5jbGFzc05hbWUucmVwbGFjZShcImRwLW5cIiwgXCJcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMucyAmJiBpc1Nob3coKSkgey8v6ZqQ6JeP5b2T5YmN5pi+56S6XHJcbiAgICAgICAgICAgICAgICBlbGUuY2xhc3NOYW1lICs9IFwiIGRwLW5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+WOu+mZpOS4pOi+ueeahOepuuagvFxyXG4gICAgICAgICAgICBlbGUuY2xhc3NOYW1lID0gU3RyaW5nKGVsZS5jbGFzc05hbWUpLnRyaW0oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gaXNTaG93KCkgey8v5piv5ZCm5bey5pi+56S677yM5pegY2xhc3Pml7bmmL7npLpcclxuICAgICAgICAgICAgcmV0dXJuIGVsZS5jbGFzc05hbWUuc3BsaXQoXCJkcC1uXCIpLmxlbmd0aCA9PSAxO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy/liqDovb3kv6Hmga/moYZcclxuICAgIHZhciBsb2FkaW5nID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+WIneWni+WMlueUn+aIkOWKoOi9veS/oeaBr+ahhlxyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9hZGluZ19tb2RhbF9lbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwibG9hZGluZ19tb2RhbF9lbGVtZW50XCIgY2xhc3M9XCJsb2FkaW5nLW1vZGFsLWJvZHkgZHAtblwiPjxkaXYgY2xhc3M9XCJjb3Zlcl9tb2RhbF9lbGVtZW50XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJsb2FkaW5nLW1vZGFsLWltYWdlXCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJsb2FkaW5nLW1vZGFsLXRleHRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGgyPueOqeWRveWKoOi9veS4reKApuKApjwvaDI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8v5pi+56S644CB6ZqQ6JeP5L+h5oGv5qGGXHJcbiAgICAgICAgdmFyIHNob3cgPSBmdW5jdGlvbiAocykge1xyXG4gICAgICAgICAgICBzID0gdHlwZW9mIHMgPT0gXCJ1bmRlZmluZWRcIiA/IHRydWUgOiBzOy8v5peg5Y+C5pWw5pi+56S65L+h5oGv5qGGXHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE0oe2lkOiBcImxvYWRpbmdfbW9kYWxfZWxlbWVudFwiLCBzOiBzfSk7XHJcbiAgICAgICAgICAgIG0uc2hvdygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICAsIHNob3c6IHNob3dcclxuICAgICAgICB9XHJcbiAgICB9KCkpO1xyXG4gICAgLy/lvLnlh7rkv6Hmga/moYZcclxuICAgIHZhciBhbGVydCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGVydF9tb2RhbF9lbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwiYWxlcnRfbW9kYWxfZWxlbWVudFwiIGNsYXNzPVwiYWxlcnQtbW9kYWwtZWxlbWVudCBkcC1uXCI+PGRpdiBjbGFzcz1cImNvdmVyX21vZGFsX2VsZW1lbnRcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsZXJ0LW1vZGFsLWNvbnRlbnRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsZXJ0LW1vZGFsLWJvZHlcIj48c3BhbiBjbGFzcz1cImFsZXJ0LW1vZGFsLXRleHRcIj48L3NwYW4+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhbGVydC1tb2RhbC1mb290ZXJcIj48YnV0dG9uIGlkPVwiYWxlcnRfbW9kYWxfY2xvc2VcIiBjbGFzcz1cImFsZXJ0LW1vZGFsLWJ1dHRvblwiPuWFs+mXrTwvYnV0dG9uPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgc2hvdyA9IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgIHMgPSB0eXBlb2YgcyA9PSBcInVuZGVmaW5lZFwiID8gdHJ1ZSA6IHM7XHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE0oe2lkOiBcImFsZXJ0X21vZGFsX2VsZW1lbnRcIiwgczogc30pO1xyXG4gICAgICAgICAgICBtLnNob3coKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOiuvue9ruW8ueWHuuS/oeaBr+ahhlxyXG4gICAgICAgICAqIEBwYXJhbSBtc2cgICAgICAg5pi+56S655qE5L+h5oGv77yM5pSv5oyBaHRtbFxyXG4gICAgICAgICAqIEBwYXJhbSBzZWQgICAgICAg5YCS6K6h5pe25YWz6Zet5pe26Ze077yM5Y2V5L2N77yac2Vjb25kXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrICDlhbPpl63op6blj5Hlm57osIPlh73mlbBcclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgc2V0ID0gZnVuY3Rpb24gKG1zZywgc2VkLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGVydF9tb2RhbF9lbGVtZW50XCIpO1xyXG4gICAgICAgICAgICBpZiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1zZyA9PT0gJ29iamVjdCcpIHsvL+W6lOWvueWQjuerr+i/lOWbnuaPkOekuuaXtuS9v+eUqE9iamVjdOWwgeijhVxyXG4gICAgICAgICAgICAgICAgICAgIG1zZyA9IEpTT04uc3RyaW5naWZ5KG1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihlbGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYWxlcnQtbW9kYWwtdGV4dFwiKVswXS5pbm5lckhUTUwgPSBtc2c7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJhbGVydC1tb2RhbC10ZXh0XCIpWzBdLmlubmVySFRNTCA9IG1zZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2VkID4gMCkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDAwICogc2VkKTtcclxuICAgICAgICAgICAgfS8v5peg5YWz6Zet5pe26Ze05oiW6ICF5YWz6Zet5pe26Ze05Li6MO+8jOS4jeiHquWKqOWFs+mXrVxyXG4gICAgICAgICAgICAvL2ZpeG1lIOS6i+S7tuebkeWQrOeahGll5YW85a655oCnXHJcbiAgICAgICAgICAgIC8v5YWz6Zet5oyJ6ZKu55qE5LqL5Lu25L6m5ZCsXHJcbiAgICAgICAgICAgICQoXCIjYWxlcnRfbW9kYWxfY2xvc2VcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIC8v6Zi75q2i5LqL5Lu257un57ut5Lyg6YCSXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICAsIHNob3c6IHNob3dcclxuICAgICAgICAgICAgLCBzZXQ6IHNldFxyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICAvL+mAieaLqeS/oeaBr+ahhlxyXG4gICAgdmFyIGNvbmZpcm0gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlybV9tb2RhbF9lbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwiY29uZmlybV9tb2RhbF9lbGVtZW50XCIgY2xhc3M9XCJjb25maXJtLW1vZGFsLWVsZW1lbnQgZHAtblwiPjxkaXYgY2xhc3M9XCJjb3Zlcl9tb2RhbF9lbGVtZW50XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb25maXJtLW1vZGFsLWNvbnRlbnRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBpZD1cImNvbmZpcm1fbW9kYWxfaGVhZGVyXCIgY2xhc3M9XCJjb25maXJtLW1vZGFsLWhlYWRlciBkcC1uXCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb25maXJtLW1vZGFsLWJvZHlcIj48c3BhbiBpZD1cImNvbmZpcm1fbW9kYWxfdGV4dFwiIGNsYXNzPVwiY29uZmlybS1tb2RhbC10ZXh0XCI+PC9zcGFuPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29uZmlybS1tb2RhbC1mb290ZXJcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImZvb3Rlci1idXR0b24tc3VjY2Vzc1wiPjxidXR0b24gY2xhc3M9XCJjb25maXJtLW1vZGFsLWJ1dHRvbiAgbW9kYWwtc3VjY2Vzc1wiIGRhdGEtY29uZmlybT1cInN1Y2Nlc3NcIj7noa7orqQ8L2J1dHRvbj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImZvb3Rlci1idXR0b24tZmFsc2VcIj48YnV0dG9uIGNsYXNzPVwiY29uZmlybS1tb2RhbC1idXR0b25cIiBkYXRhLWNvbmZpcm09XCJlcnJvclwiPuWPlua2iDwvYnV0dG9uPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgc2hvdyA9IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgIHMgPSB0eXBlb2YgcyA9PSBcInVuZGVmaW5lZFwiID8gdHJ1ZSA6IHM7XHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE0oe2lkOiBcImNvbmZpcm1fbW9kYWxfZWxlbWVudFwiLCBzOiBzfSk7XHJcbiAgICAgICAgICAgIG0uc2hvdygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6K6+572u6YCJ5oup5L+h5oGv5qGG55qE5YaF5a65XHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbiAgICDphY3nva5cclxuICAgICAgICAgKiB7XHJcbiAgICAgICAgICogICAgICB0aXRsZTpcIuWktOmDqOaYvuekuueahOS/oeaBr1wiXHJcbiAgICAgICAgICogICAgICAsdGV4dDpcIuaYvuekuueahOaPkOekuuS/oeaBr1wiXHJcbiAgICAgICAgICogICAgICAsc3VjY2VzczpcIueCueWHu+aIkOWKn+WQjueahOWbnuiwg1wiXHJcbiAgICAgICAgICogICAgICAsZXJyb3I6XCLngrnlh7vlpLHotKXlkI7nmoTlm57osINcIlxyXG4gICAgICAgICAqICAgICAgLGNvbXBsZXRlOlwi54K55Ye75oyJ6ZKu5ZCO55qE5pW05L2T5Zue6LCDXCJcclxuICAgICAgICAgKiB9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGJhciA9IDA7XHJcbiAgICAgICAgdmFyIHNldCA9IGZ1bmN0aW9uIChvcHRpb24pIHtcclxuICAgICAgICAgICAgaWYgKCFvcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoXCJ0aXRsZVwiIGluIG9wdGlvbiAmJiBvcHRpb24udGl0bGUubGVuZ3RoID4gMCkgey8v5pyJ5aS06YOo77yM5YiZ5pi+56S65aS06YOoXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbmZpcm1fbW9kYWxfaGVhZGVyXCIpLmlubmVySFRNTCA9IG9wdGlvbi50aXRsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoXCJ0ZXh0XCIgaW4gb3B0aW9uICYmIG9wdGlvbi50ZXh0Lmxlbmd0aCA+IDApIHsvL+acieWGheWuue+8jOWImeaYvuekuuaVtOS4qumAieaLqeS/oeaBr+ahhlxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maXJtX21vZGFsX3RleHRcIikuaW5uZXJIVE1MID0gb3B0aW9uLnRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9maXhtZSDkuovku7bnm5HlkKznmoRpZeWFvOWuueaAp1xyXG4gICAgICAgICAgICAvL+WFs+mXreaMiemSrueahOS6i+S7tuS+puWQrFxyXG4gICAgICAgICAgICAkKFwiI2NvbmZpcm1fbW9kYWxfZWxlbWVudFwiKS5maW5kKFwiLmNvbmZpcm0tbW9kYWwtYnV0dG9uXCIpLm9mZihcImNsaWNrXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy9maXhtZSAub2ZmKFwiY2xpY2tcIinnlKjkuo7pmLLmraLlpJrmrKHop6blj5E8LS3lvojnjoTlrabvvIzmiJHkuZ/kuI3nn6XpgZPkuLrku4DkuYjvvIzkvYbmmK/or7fkuI3opoHkv67mlLnjgIJcclxuICAgICAgICAgICAgICAgIHZhciBhdHIgPSAkKHRoaXMpLmF0dHIoXCJkYXRhLWNvbmZpcm1cIik7Ly/pgInmi6nnmoTmjInpkq5cclxuICAgICAgICAgICAgICAgIGJhcisrO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbiAmJiBhdHIgaW4gb3B0aW9uICYmIG9wdGlvblthdHJdIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25bYXRyXSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbiAmJiBcImNvbXBsZXRlXCIgaW4gb3B0aW9uICYmIG9wdGlvbi5jb21wbGV0ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmNvbXBsZXRlKCk7Ly/oi6XmnInlrozmiJDlh73mlbDvvIzliJnmiafooYxcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7Ly/lkKbliJnvvIzlhbPpl63pgInmi6nmoYZcclxuICAgICAgICAgICAgICAgICAgICBzaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8v6Zi75q2i5LqL5Lu257un57ut5Lyg6YCSXHJcbiAgICAgICAgICAgICAgICAvL3JldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbml0OiBpbml0XHJcbiAgICAgICAgICAgICwgc2hvdzogc2hvd1xyXG4gICAgICAgICAgICAsIHNldDogc2V0XHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuICAgIC8v6KaG55uW5bGCXHJcbiAgICB2YXIgY292ZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY292ZXJfbW9kYWxfZWxlbWVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImNvdmVyX21vZGFsX2VsZW1lbnRcIiBjbGFzcz1cImNvdmVyLW1vZGFsLWVsZW1lbnQgZHAtblwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBoaWRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdmVyX21vZGFsX2VsZW1lbnRcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHNob3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY292ZXJfbW9kYWxfZWxlbWVudFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICAsIHNob3c6IHNob3dcclxuICAgICAgICAgICAgLCBoaWRlOiBoaWRlXHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5pdExvYWRpbmc6IGxvYWRpbmcuaW5pdFxyXG4gICAgICAgICwgc2hvd0xvYWRpbmc6IGxvYWRpbmcuc2hvd1xyXG5cclxuICAgICAgICAsIGluaXRBbGVydDogYWxlcnQuaW5pdFxyXG4gICAgICAgICwgc2hvd0FsZXJ0OiBhbGVydC5zaG93XHJcbiAgICAgICAgLCBzZXRBbGVydDogYWxlcnQuc2V0XHJcblxyXG4gICAgICAgICwgaW5pdENvbmZpcm06IGNvbmZpcm0uaW5pdFxyXG4gICAgICAgICwgc2V0Q29uZmlybTogY29uZmlybS5zZXRcclxuICAgICAgICAsIHNob3dDb25maXJtOiBjb25maXJtLnNob3dcclxuICAgICAgICAsIGluaXRDb3ZlcjogY292ZXIuaW5pdFxyXG4gICAgfVxyXG59KCkpO1xyXG5cclxuLy/pobXpnaLliqDovb3lrozmr5XlkI7nlJ/miJDlm5vkuKroh6rlrprkuYnmqKHmgIHmoYZcclxuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAvL+mhtemdouWKoOi9veaXtueUn+aIkOS4gOS4quimhuebluWxglxyXG4gICAgTW9kYWwuaW5pdENvdmVyKCk7XHJcbiAgICAvL+mhtemdouWKoOi9veaXtueUn+aIkOS4gOS4quWKoOi9veS/oeaBr+ahhlxyXG4gICAgTW9kYWwuaW5pdExvYWRpbmcoKTtcclxuICAgIC8v6aG16Z2i5Yqg6L295pe255Sf5oiQ5LiA5Liq5by55Ye65L+h5oGv5qGGXHJcbiAgICBNb2RhbC5pbml0QWxlcnQoKTtcclxuICAgIC8v6aG16Z2i5Yqg6L295pe255Sf5oiQ5LiA5Liq6YCJ5oup5L+h5oGv5qGGXHJcbiAgICBNb2RhbC5pbml0Q29uZmlybSgpO1xyXG59LCAxMDApO1xyXG5cclxuXHJcbi8v5oqb5Ye65LiK5bGC6LCD55SoXHJcbmV4cG9ydHMuc2hvd0xvYWRpbmcgPSBNb2RhbC5zaG93TG9hZGluZztcclxuZXhwb3J0cy5zZXRBbGVydCA9IE1vZGFsLnNldEFsZXJ0O1xyXG5leHBvcnRzLnNob3dBbGVydCA9IE1vZGFsLnNob3dBbGVydDtcclxuZXhwb3J0cy5zZXRDb25maXJtID0gTW9kYWwuc2V0Q29uZmlybTtcclxuZXhwb3J0cy5zaG93Q29uZmlybSA9IE1vZGFsLnNob3dDb25maXJtOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplcmVteSBvbiAyMDE2LzExLzIyLlxyXG4gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBoZWFkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy/ml7bpl7TmoLzlvI/ljJZcclxuICAgIERhdGUucHJvdG90eXBlLkZvcm1hdCA9IGZ1bmN0aW9uIChmbXQpIHsgLy9hdXRob3I6IEplcmVteXl5XHJcbiAgICAgICAgdmFyIG8gPSB7XHJcbiAgICAgICAgICAgIFwiTStcIjogdGhpcy5nZXRNb250aCgpICsgMSwgLy/mnIjku71cclxuICAgICAgICAgICAgXCJkK1wiOiB0aGlzLmdldERhdGUoKSwgLy/ml6VcclxuICAgICAgICAgICAgXCJoK1wiOiB0aGlzLmdldEhvdXJzKCksIC8v5bCP5pe2XHJcbiAgICAgICAgICAgIFwibStcIjogdGhpcy5nZXRNaW51dGVzKCksIC8v5YiGXHJcbiAgICAgICAgICAgIFwicytcIjogdGhpcy5nZXRTZWNvbmRzKCksIC8v56eSXHJcbiAgICAgICAgICAgIFwicStcIjogTWF0aC5mbG9vcigodGhpcy5nZXRNb250aCgpICsgMykgLyAzKSwgLy/lraPluqZcclxuICAgICAgICAgICAgXCJTXCI6IHRoaXMuZ2V0TWlsbGlzZWNvbmRzKCkgLy/mr6vnp5JcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICgvKHkrKS8udGVzdChmbXQpKSBmbXQgPSBmbXQucmVwbGFjZShSZWdFeHAuJDEsICh0aGlzLmdldEZ1bGxZZWFyKCkgKyBcIlwiKS5zdWJzdHIoNCAtIFJlZ0V4cC4kMS5sZW5ndGgpKTtcclxuICAgICAgICBmb3IgKHZhciBrIGluIG8pXHJcbiAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKFwiKFwiICsgayArIFwiKVwiKS50ZXN0KGZtdCkpIGZtdCA9IGZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKFJlZ0V4cC4kMS5sZW5ndGggPT0gMSkgPyAob1trXSkgOiAoKFwiMDBcIiArIG9ba10pLnN1YnN0cigoXCJcIiArIG9ba10pLmxlbmd0aCkpKTtcclxuICAgICAgICByZXR1cm4gZm10O1xyXG4gICAgfTtcclxuICAgIC8v6L+U5Zue6aG26YOoXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmJhY2stdG9wJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCJodG1sLGJvZHlcIikuYW5pbWF0ZSh7c2Nyb2xsVG9wOjB9LDEwMCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgICAkKGRvY3VtZW50KS5vbignbW91c2VlbnRlcicsICcudmlwLXBhcnQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLnZpcC1zZWxlY3QnKS5zdG9wKHRydWUpO1xyXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oJy52aXAtc2VsZWN0Jykuc2xpZGVEb3duKDEwMCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgICAkKGRvY3VtZW50KS5vbignbW91c2VsZWF2ZScsICcudmlwLXBhcnQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLnZpcC1zZWxlY3QnKS5zdG9wKHRydWUpO1xyXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oJy52aXAtc2VsZWN0Jykuc2xpZGVVcCgxMDApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG4gICAgJChkb2N1bWVudCkub24oJ21vdXNlZW50ZXInLCAnLndlY2hhdC1sb2dvJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oJy5iaWctd2VjaGF0JykuZmFkZUluKDIwMCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgICAkKGRvY3VtZW50KS5vbignbW91c2VsZWF2ZScsICcud2VjaGF0LWxvZ28nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLmJpZy13ZWNoYXQnKS5mYWRlT3V0KDIwMCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbn07XHJcbm1vZHVsZS5leHBvcnRzLmhlYWQgPSBoZWFkOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplcmVteSBvbiAyMDE2LzExLzIyLlxyXG4gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBsaXN0ZW5lciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgcnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v5aS06YOo54K55Ye75LqL5Lu2XHJcbiAgICAgICAgcmVxdWlyZSgnLi9oZWFkJykuaGVhZCgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcnVuOiBydW5cclxuICAgIH1cclxufSgpKTtcclxubW9kdWxlLmV4cG9ydHMgPSBsaXN0ZW5lcjsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNi8xMS8yNC5cclxuICovXHJcblwidXNlIHN0cmljdFwiO1xyXG52YXIgRGF0YSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIHNlbmRUZXh0ID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgIHVybDogJy9hcGkvbG9naW4vc2VuZFRleHQnXHJcbiAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcbiAgdmFyIHJlZ2lzdGVyID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgIHVybDogJy9hcGkvbG9naW4vcmVnaXN0ZXInXHJcbiAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcbiAgdmFyIGNoZWNrTW9iaWxlID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgIHVybDogJy9hcGkvbG9naW4vY2hlY2tNb2JpbGUnXHJcbiAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcbiAgdmFyIGNoZWNrU21zID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgIHVybDogJy9hcGkvbG9naW4vcmVnU2VuZFNtcydcclxuICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coanNvbik7XHJcbiAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuICB2YXIgY2tTbXMgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgdXJsOiAnL2FwaS9sb2dpbi9ja1NtcydcclxuICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuICByZXR1cm4ge1xyXG4gICAgc2VuZFRleHQ6IHNlbmRUZXh0XHJcbiAgICAsIHJlZ2lzdGVyOiByZWdpc3RlclxyXG4gICAgLCBjaGVja01vYmlsZTogY2hlY2tNb2JpbGVcclxuICAgICwgY2tTbXMgOmNrU21zXHJcbiAgICAsIGNoZWNrU21zOmNoZWNrU21zXHJcbiAgfVxyXG59KCkpO1xyXG5tb2R1bGUuZXhwb3J0cy5EYXRhID0gRGF0YTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNi8xMS8yMy5cclxuICovXHJcblwidXNlIHN0cmljdFwiO1xyXG5yZXF1aXJlKCcuLi9nZW5lcmFsJykucnVuKCk7XHJcblxyXG5yZXF1aXJlKCcuL2xpc3RlbmVyJykucnVuKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTYvMTEvMjIuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxudmFyIE1vZGFsID0gcmVxdWlyZSgnLi4vZnJhbWUvbW9kYWwnKTtcclxudmFyIExpc3RlbmVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBEYXRhID0gcmVxdWlyZSgnLi9kYXRhJykuRGF0YTtcclxuICAgIHZhciB0ZWwgPSBmYWxzZVxyXG4gICAgICAgICwgcHdkID0gZmFsc2VcclxuICAgICAgICAsIHJlcGVhdCA9IGZhbHNlXHJcbiAgICAgICAgLCBtc2cgPSBmYWxzZVxyXG4gICAgICAgICwgbWFpbCA9IGZhbHNlXHJcbiAgICAgICAgLCBuZXh0MSA9IGZhbHNlXHJcbiAgICAgICAgLCBuZXh0MiA9IGZhbHNlXHJcbiAgICAgICAgLCBjb21wYW55TmFtZSA9IGZhbHNlXHJcbiAgICAgICAgLCByZWFsTmFtZSA9IGZhbHNlO1xyXG4gICAgdmFyIG1haWxVcmwgPSAnJztcclxuICAgIHZhciBwYXNzMSwgcGFzczI7XHJcbiAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/liKTmlq3lv4XpgInpobnmmK/lkKbloavlhplcclxuICAgICAgICBwYXNzMSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGVsZSA9ICQoJy5hZ3JfbmV4dD4ubGctYnRuJyk7XHJcbiAgICAgICAgICAgIGlmICh0ZWwgJiYgbXNnKSB7XHJcbiAgICAgICAgICAgICAgICBlbGUucmVtb3ZlQXR0cignc3R5bGUnKS5jc3MoeydiYWNrZ3JvdW5kQ29sb3InOiAnIzAwNmJiYyd9KTtcclxuICAgICAgICAgICAgICAgIG5leHQxID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsZS5jc3Moeydwb2ludGVyLWV2ZW50cyc6ICdub25lJywgJ2JhY2tncm91bmRDb2xvcic6ICcjQzZDRURFJ30pO1xyXG4gICAgICAgICAgICAgICAgbmV4dDEgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy/ovpPlhaXnlLXor51cclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnRlbCAuYWdyX3dyb25nJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5hZ3Jfd3JvbmcnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJyN0ZWwnKS5mb2N1cygpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcygnYm9yZGVyLWNvbG9yJywgJyNjNmNlZGUnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignZm9jdXMnLCAnI3RlbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuYWdyX3dyb25nJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcygnYm9yZGVyLWNvbG9yJywgJyNjNmNlZGUnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuaW5mbycpLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignYmx1cicsICcjdGVsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVnID0gL14oMHw4NnwxNzk1MSk/KDEzWzAtOV18MTVbMDEyMzU2Nzg5XXwxN1s2NzhdfDE4WzAtOV18MTRbNTddKVswLTldezh9JC9cclxuICAgICAgICAgICAgICAgICwgdmFsdWUgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmFncl93cm9uZycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCAncmVkJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVnLnRlc3QodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCd3cm9uZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5pbmZvJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZWwgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCd3cm9uZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5pbmZvJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCAncmVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGFzczEoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcucC1tc2cnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbmRQaG9uZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v6L6T5YWl55+t5L+h6aqM6K+B56CBXHJcbiAgICAgICAgaWYgKCQoJyN0ZWwnKSA9PSAnJykge1xyXG4gICAgICAgICAgICAkKCcjcC1tc2cnKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucGhvbmUtbXNnIC5hZ3Jfd3JvbmcnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5hZ3Jfd3JvbmcnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjcC1tc2cnKS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2JvcmRlci1jb2xvcicsICcjYzZjZWRlJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignZm9jdXMnLCAnI3AtbXNnJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuYWdyX3dyb25nJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2JvcmRlci1jb2xvcicsICcjYzZjZWRlJyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5pbmZvJykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2JsdXInLCAnI3AtbXNnJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmFncl93cm9uZycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnYm9yZGVyLWNvbG9yJywgJ3JlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnd3JvbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmluZm8nKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCd3cm9uZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuaW5mbycpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCAnI3JlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBhc3MxKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+azqOWGjOS4i+S4gOatpVxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYWdyX25leHQ+LmxnLWJ0bicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cobmV4dDEpO1xyXG4gICAgICAgICAgICBpZiAobmV4dDEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vYmlsZTogJCgnI3RlbCcpLnZhbCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLCBzbXNDb2RlOiAkKCcjcC1tc2cnKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIERhdGEuY2tTbXMoZGF0YSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiAncmVzQ29kZScgaW4gZGF0YSAmJiBkYXRhLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItYm94JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuZGF0YS1ib3gnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hZ3Jfc3RhdHVzRGV0YWlsJykuZXEoMSkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcucmVzX21vYmlsZScpLmh0bWwoZGF0YS5yZXNNc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfor7floavlhpnlrozmlbTvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KCfor7floavlhpnlrozmlbQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v6L6T5YWl6LWE5paZXHJcbiAgICAgICAgLy92ZXJ0aWZ5IHB3ZFxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucGFzc3dhcmQgLmFncl93cm9uZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuYWdyX3dyb25nJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcjcGFzc3dvcmQnKS5mb2N1cygpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcygnYm9yZGVyLWNvbG9yJywgJyNjNmNlZGUnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignZm9jdXMnLCAnI3Bhc3N3b3JkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5hZ3Jfd3JvbmcnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCAnI2M2Y2VkZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5pbmZvJykuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdibHVyJywgJyNwYXNzd29yZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gJCh0aGlzKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgLCByZWcgPSAvXig/IVswLTldKyQpKD8hW2EtekEtWl0rJClbMC05QS1aYS16XXs2LDIwfSQvO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmFncl93cm9uZycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCAncmVkJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVnLnRlc3QodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHdkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCd3cm9uZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5pbmZvJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwd2QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCd3cm9uZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5pbmZvJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCAncmVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGFzczIoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL3ZlcnRpZnkgdHdpY2UgcHdkXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5lbnN1cmVQd2QgLmFncl93cm9uZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuYWdyX3dyb25nJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcjZW5zdXJlJykuZm9jdXMoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2JvcmRlci1jb2xvcicsICcjYzZjZWRlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2ZvY3VzJywgJyNlbnN1cmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmFncl93cm9uZycpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2JvcmRlci1jb2xvcicsICcjYzZjZWRlJyk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmluZm8nKS5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2JsdXInLCAnI2Vuc3VyZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gJCh0aGlzKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgLCByZWcgPSAkKCcjcGFzc3dvcmQnKS52YWwoKTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5hZ3Jfd3JvbmcnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnYm9yZGVyLWNvbG9yJywgJ3JlZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSByZWcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXBlYXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3dyb25nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmluZm8nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcGVhdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3dyb25nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmluZm8nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2JvcmRlci1jb2xvcicsICdyZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwYXNzMigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vdmVydGlmeSBuYW1lXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5yZXNfbmFtZSAuYWdyX3dyb25nJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5hZ3Jfd3JvbmcnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJyNhZ3JfbmFtZScpLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCAnI2M2Y2VkZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdmb2N1cycsICcjcmVzX25hbWUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmFncl93cm9uZycpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuaW5mbycpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2JvcmRlci1jb2xvcicsICcjYzZjZWRlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2JsdXInLCAnI3Jlc19uYW1lJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVnMSA9IC9eW2EtekEtWiBdezEsMjB9JC8sXHJcbiAgICAgICAgICAgICAgICByZWcyID0gL15bXFx1NGUwMC1cXHU5ZmE1XXsyLDV9JC9cclxuICAgICAgICAgICAgICAgICwgdmFsdWUgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmFncl93cm9uZycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCAncmVkJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVnMS50ZXN0KHZhbHVlKSB8fCByZWcyLnRlc3QodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhbE5hbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3dyb25nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuaW5mbycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWxOYW1lID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnd3JvbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5pbmZvJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCAncmVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGFzczIoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL3ZlcnRpZnkgbWFpbFxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucmVzX21haWwgLmFncl93cm9uZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuYWdyX3dyb25nJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcjbWFpbCcpLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCAnI2M2Y2VkZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdmb2N1cycsICcjbWFpbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuYWdyX3dyb25nJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcygnYm9yZGVyLWNvbG9yJywgJyNjNmNlZGUnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuaW5mbycpLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignYmx1cicsICcjbWFpbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlZyA9IC9eW1xcdy1dKyhcXC5bXFx3LV0rKSpAW1xcdy1dKyhcXC5bXFx3LV17Miw0fSkrJC9cclxuICAgICAgICAgICAgICAgICwgdmFsdWUgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmFncl93cm9uZycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXItY29sb3InLCAncmVkJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVnLnRlc3QodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBtYWlsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCd3cm9uZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5pbmZvJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtYWlsID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnd3JvbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuaW5mbycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnYm9yZGVyLWNvbG9yJywgJ3JlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhc3MyKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vdmVydGlmeSBjb21wYW55IG5hbWVcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmNvbXBhbnlOYW1lIC5hZ3Jfd3JvbmcnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmFncl93cm9uZycpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnI2NvbXBhbnlOYW1lJykuZm9jdXMoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2JvcmRlci1jb2xvcicsICcjYzZjZWRlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2ZvY3VzJywgJyNjb21wYW55TmFtZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuYWdyX3dyb25nJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcygnYm9yZGVyLWNvbG9yJywgJyNjNmNlZGUnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuaW5mbycpLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignYmx1cicsICcjY29tcGFueU5hbWUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9ICQodGhpcykudmFsKClcclxuICAgICAgICAgICAgICAgICwgcmVnID0gJCgnI2NvbXBhbnlOYW1lJykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuYWdyX3dyb25nJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2JvcmRlci1jb2xvcicsICdyZWQnKTtcclxuICAgICAgICAgICAgICAgIGNvbXBhbnlOYW1lID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb21wYW55TmFtZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9pZiAodmFsdWUgPT09IHJlZykge1xyXG4gICAgICAgICAgICAvLyAgICBjb21wYW55TmFtZSA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3dyb25nJyk7XHJcbiAgICAgICAgICAgIC8vICAgICQodGhpcykuc2libGluZ3MoJy5pbmZvJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAvL30gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICAgIGNvbXBhbnlOYW1lID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vICAgICQodGhpcykuYWRkQ2xhc3MoJ3dyb25nJyk7XHJcbiAgICAgICAgICAgIC8vICAgICQodGhpcykuc2libGluZ3MoJy5pbmZvJykuc2hvdygpO1xyXG4gICAgICAgICAgICAvLyAgICAkKHRoaXMpLmNzcygnYm9yZGVyLWNvbG9yJywgJ3JlZCcpO1xyXG4gICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgcGFzczIoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+WbvuW9oumqjOivgVxyXG4gICAgICAgIC8vJChkb2N1bWVudCkub24oJ2JsdXInLCAnI2NvZGUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gICAgdmFyIHZhbHVlID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAvLyAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAvLyAgICAgICAgY29kZSA9IHRydWU7XHJcbiAgICAgICAgLy8gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3dyb25nJyk7XHJcbiAgICAgICAgLy8gICAgICAgICQodGhpcykuc2libGluZ3MoJy53cm9uZy1jb2RlJykuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAvLyAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICBjb2RlID0gZmFsc2U7XHJcbiAgICAgICAgLy8gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3dyb25nJyk7XHJcbiAgICAgICAgLy8gICAgICAgICQodGhpcykuc2libGluZ3MoJy53cm9uZy1jb2RlJykuaHRtbCgn6K+36L6T5YWl6aqM6K+B56CBJyk7XHJcbiAgICAgICAgLy8gICAgICAgICQodGhpcykuc2libGluZ3MoJy53cm9uZy1jb2RlJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAvLyAgICB9XHJcbiAgICAgICAgLy8gICAgcGFzcygpO1xyXG4gICAgICAgIC8vfSk7XHJcbiAgICAgICAgLy/liKTmlq3lv4XpgInpobnmmK/lkKbloavlhplcclxuICAgICAgICB2YXIgcGFzczIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGUgPSAkKCcucmVzX25leHQ+YScpO1xyXG4gICAgICAgICAgICBpZiAocHdkICYmIHJlcGVhdCAmJiByZWFsTmFtZSAmJiBjb21wYW55TmFtZSAmJiBtYWlsKSB7XHJcbiAgICAgICAgICAgICAgICBlbGUucmVtb3ZlQXR0cignc3R5bGUnKS5jc3MoeydiYWNrZ3JvdW5kQ29sb3InOiAnIzAwNmJiYyd9KTtcclxuICAgICAgICAgICAgICAgIG5leHQyID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsZS5jc3Moeydwb2ludGVyLWV2ZW50cyc6ICdub25lJywgJ2JhY2tncm91bmRDb2xvcic6ICcjQzZDRURFJ30pO1xyXG4gICAgICAgICAgICAgICAgbmV4dDIgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8v5rOo5YaMXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5yZXNfbmV4dD5hJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobmV4dDIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vYmlsZTogJCgnLnJlc19tb2JpbGUnKS5odG1sKClcclxuICAgICAgICAgICAgICAgICAgICAsIHBhc3N3b3JkOiAkKCcjcGFzc3dvcmQnKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgICAgICwgY29uZmlybVBhc3N3b3JkOiAkKCcjZW5zdXJlJykudmFsKClcclxuICAgICAgICAgICAgICAgICAgICAsIG5hbWU6ICQoJyNyZXNfbmFtZScpLnZhbCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLCBlbWFpbDogJCgnI21haWwnKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgICAgICwgY29tcGFueU5hbWU6ICQoJyNjb21wYW55TmFtZScpLnZhbCgpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgRGF0YS5yZWdpc3RlcihkYXRhLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhICYmICdyZXNDb2RlJyBpbiBkYXRhICYmIGRhdGEucmVzQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyIG1haWwgPSAkKCcjbWFpbCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyQoJyNhY2MtaWQnKS5odG1sKGRhdGEucmVzQm9keS5tZW1iZXIubW9iaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8kKCcjb3Blbi1tYWlsJykuaHRtbChtYWlsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8kKCcjb3Blbi1tYWlsJykuYXR0cignaHJlZicsIGdvdG9tYWlsKG1haWwpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8kKCcucmVnaXN0ZXItYm94JykuYWRkQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8kKCcucGFzcy1ib3gnKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuZGF0YS1ib3gnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5yZXNfb2snKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoZGF0YS5yZXNNc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+ivt+Whq+WGmeWujOaVtCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/pqozor4HnoIHliIfmjaJcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnZhbGlkYXRlLWltZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZ2V0Q29kZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8v6I635Y+W5Zu+5b2i6aqM6K+B56CBXHJcbiAgICAvL3ZhciBnZXRDb2RlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICAgdmFyIHNyYyA9ICcvZ2V0SW1nQ29kZT8nO1xyXG4gICAgLy8gICAgdmFyIGdldE51bSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgICAgICB2YXIgbnVtID0gJyc7XHJcbiAgICAvLyAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHtcclxuICAgIC8vICAgICAgICAgICAgbnVtID0gbnVtICsgcGFyc2VJbnQoMTAgKiBNYXRoLnJhbmRvbSgpKTtcclxuICAgIC8vICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgcmV0dXJuIG51bTtcclxuICAgIC8vICAgIH07XHJcbiAgICAvLyAgICBzcmMgKz0gZ2V0TnVtKCk7XHJcbiAgICAvLyAgICAkKCcudmFsaWRhdGUtaW1nJykuYXR0cignc3JjJywgc3JjKTtcclxuICAgIC8vfTtcclxuICAgIC8v5Y+R6YCB6aqM6K+B56CBXHJcbiAgICB2YXIgc2VuZFBob25lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9ICQoJy5wLW1zZycpO1xyXG4gICAgICAgIGlmICh0ZWwpIHtcclxuICAgICAgICAgICAgRGF0YS5jaGVja1Ntcyh7bW9iaWxlOiAkKCcjdGVsJykudmFsKCl9LCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNzcyh7J2JhY2tncm91bmQnOiAnI2U3ZWJmMicsICdjb2xvcic6ICcjMDA2YmJkJ30pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vJCgnLmFncl9uZXh0JykuZmluZCgnLmxnLWJ0bicpLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aW1lID0gMTIwO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWUgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9ICfnn63kv6Hlt7Llj5HpgIHvvIgnICsgdGltZSArICfvvIknO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaHRtbChzdHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5odG1sKCfngrnlh7vlj5HpgIHpqozor4HnoIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3NzKCdiYWNrZ3JvdW5kJywgJyNmZmYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMDApXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KGpzb24ucmVzTXNnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvL+iOt+WPlmd06aqM6K+B56CBXHJcbiAgICAvL3ZhciBnZXRHdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgIHZhciBoYW5kbGVyMiA9IGZ1bmN0aW9uIChjYXB0Y2hhT2JqKSB7XHJcbiAgICAvLyAgICAgICAgJChcIi5wLW1zZ1wiKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgLy8gICAgICAgICAgICB2YXIgcmVzdWx0ID0gY2FwdGNoYU9iai5nZXRWYWxpZGF0ZSgpO1xyXG4gICAgLy8gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgJChcIiNub3RpY2VcIikuc2hvdygpO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgJChcIiNub3RpY2VcIikuaGlkZSgpO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgfSwgMjAwMCk7XHJcbiAgICAvLyAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICBpZiAodGVsKSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgc2VuZFBob25lKHJlc3VsdClcclxuICAgIC8vICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgJCgnLnRlbCcpLmZpbmQoJy5pbmZvJykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgIC8vICAgICAgICAgICAgICAgIH1cclxuICAgIC8vICAgICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAvLyAgICAgICAgfSk7XHJcbiAgICAvL1xyXG4gICAgLy8gICAgICAgIC8vIOWwhumqjOivgeeggeWKoOWIsGlk5Li6Y2FwdGNoYeeahOWFg+e0oOmHjO+8jOWQjOaXtuS8muacieS4ieS4qmlucHV055qE5YC855So5LqO6KGo5Y2V5o+Q5LqkXHJcbiAgICAvLyAgICAgICAgY2FwdGNoYU9iai5hcHBlbmRUbyhcIiNjYXB0Y2hhXCIpO1xyXG4gICAgLy9cclxuICAgIC8vICAgICAgICBjYXB0Y2hhT2JqLm9uUmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICAgICAgICAgICAkKFwiI3dhaXRcIikuaGlkZSgpO1xyXG4gICAgLy8gICAgICAgIH0pO1xyXG4gICAgLy9cclxuICAgIC8vICAgICAgICAvLyDmm7TlpJrmjqXlj6Plj4LogIPvvJpodHRwOi8vd3d3LmdlZXRlc3QuY29tL2luc3RhbGwvc2VjdGlvbnMvaWR4LWNsaWVudC1zZGsuaHRtbFxyXG4gICAgLy8gICAgfTtcclxuICAgIC8vXHJcbiAgICAvL1xyXG4gICAgLy8gICAgJC5hamF4KHtcclxuICAgIC8vICAgICAgICB1cmw6IFwiL2xvZ2luL3NlbmRHdDM/dD1cIiArIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCksIC8vIOWKoOmaj+acuuaVsOmYsuatoue8k+WtmFxyXG4gICAgLy8gICAgICAgIHR5cGU6IFwiZ2V0XCIsXHJcbiAgICAvLyAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgLy8gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAvL1xyXG4gICAgLy8gICAgICAgICAgICAvLyDosIPnlKggaW5pdEdlZXRlc3Qg5Yid5aeL5YyW5Y+C5pWwXHJcbiAgICAvLyAgICAgICAgICAgIC8vIOWPguaVsDHvvJrphY3nva7lj4LmlbBcclxuICAgIC8vICAgICAgICAgICAgLy8g5Y+C5pWwMu+8muWbnuiwg++8jOWbnuiwg+eahOesrOS4gOS4quWPguaVsOmqjOivgeeggeWvueixoe+8jOS5i+WQjuWPr+S7peS9v+eUqOWug+iwg+eUqOebuOW6lOeahOaOpeWPo1xyXG4gICAgLy8gICAgICAgICAgICBpbml0R2VldGVzdCh7XHJcbiAgICAvLyAgICAgICAgICAgICAgICBndDogZGF0YS5ndCxcclxuICAgIC8vICAgICAgICAgICAgICAgIGNoYWxsZW5nZTogZGF0YS5jaGFsbGVuZ2UsXHJcbiAgICAvLyAgICAgICAgICAgICAgICBuZXdfY2FwdGNoYTogZGF0YS5uZXdfY2FwdGNoYSwgLy8g55So5LqO5a6V5py65pe26KGo56S65piv5paw6aqM6K+B56CB55qE5a6V5py6XHJcbiAgICAvLyAgICAgICAgICAgICAgICBvZmZsaW5lOiAhZGF0YS5zdWNjZXNzLCAvLyDooajnpLrnlKjmiLflkI7lj7Dmo4DmtYvmnoHpqozmnI3liqHlmajmmK/lkKblrpXmnLrvvIzkuIDoiKzkuI3pnIDopoHlhbPms6hcclxuICAgIC8vICAgICAgICAgICAgICAgIHByb2R1Y3Q6IFwicG9wdXBcIiwgLy8g5Lqn5ZOB5b2i5byP77yM5YyF5ous77yaZmxvYXTvvIxwb3B1cFxyXG4gICAgLy8gICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiXHJcbiAgICAvL1xyXG4gICAgLy8gICAgICAgICAgICAgICAgLy8g5pu05aSa6YWN572u5Y+C5pWw6K+35Y+C6KeB77yaaHR0cDovL3d3dy5nZWV0ZXN0LmNvbS9pbnN0YWxsL3NlY3Rpb25zL2lkeC1jbGllbnQtc2RrLmh0bWwjY29uZmlnXHJcbiAgICAvLyAgICAgICAgICAgIH0sIGhhbmRsZXIyKTtcclxuICAgIC8vICAgICAgICB9XHJcbiAgICAvLyAgICB9KTtcclxuICAgIC8vfTtcclxuXHJcbiAgICBmdW5jdGlvbiBnb3RvbWFpbCgkbWFpbCkge1xyXG4gICAgICAgIGlmICgkbWFpbCkge1xyXG4gICAgICAgICAgICB2YXIgJHQgPSAkbWFpbC5zcGxpdCgnQCcpWzFdO1xyXG4gICAgICAgICAgICBpZiAoJHQpIHtcclxuICAgICAgICAgICAgICAgICR0ID0gJHQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIGlmICgkdCA9PSAnMTYzLmNvbScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly9tYWlsLjE2My5jb20nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkdCA9PSAndmlwLjE2My5jb20nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdodHRwOi8vdmlwLjE2My5jb20nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkdCA9PSAnMTI2LmNvbScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly9tYWlsLjEyNi5jb20nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkdCA9PSAncXEuY29tJyB8fCAkdCA9PSAndmlwLnFxLmNvbScgfHwgJHQgPT0gJ2ZveG1haWwuY29tJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL21haWwucXEuY29tJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHQgPT0gJ2dtYWlsLmNvbScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly9tYWlsLmdvb2dsZS5jb20nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkdCA9PSAnc29odS5jb20nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdodHRwOi8vbWFpbC5zb2h1LmNvbSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICd0b20uY29tJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL21haWwudG9tLmNvbSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICd2aXAuc2luYS5jb20nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdodHRwOi8vdmlwLnNpbmEuY29tJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHQgPT0gJ3NpbmEuY29tLmNuJyB8fCAkdCA9PSAnc2luYS5jb20nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdodHRwOi8vbWFpbC5zaW5hLmNvbS5jbic7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICd0b20uY29tJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL21haWwudG9tLmNvbSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICd5YWhvby5jb20uY24nIHx8ICR0ID09ICd5YWhvby5jbicpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly9tYWlsLmNuLnlhaG9vLmNvbSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICd0b20uY29tJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL21haWwudG9tLmNvbSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICd5ZWFoLm5ldCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly93d3cueWVhaC5uZXQnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkdCA9PSAnMjFjbi5jb20nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdodHRwOi8vbWFpbC4yMWNuLmNvbSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0ID09ICdob3RtYWlsLmNvbScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly93d3cuaG90bWFpbC5jb20nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkdCA9PSAnc29nb3UuY29tJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL21haWwuc29nb3UuY29tJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHQgPT0gJzE4OC5jb20nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdodHRwOi8vd3d3LjE4OC5jb20nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkdCA9PSAnMTM5LmNvbScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly9tYWlsLjEwMDg2LmNuJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHQgPT0gJzE4OS5jbicpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly93ZWJtYWlsMTUuMTg5LmNuL3dlYm1haWwnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkdCA9PSAnd28uY29tLmNuJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL21haWwud28uY29tLmNuL3Ntc21haWwnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkdCA9PSAnMTM5LmNvbScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly9tYWlsLjEwMDg2LmNuJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdqYXZhc2NyaXB0OnZvaWQoMCk7JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnamF2YXNjcmlwdDp2b2lkKDApOyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2phdmFzY3JpcHQ6dm9pZCgwKTsnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgcnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5yZXNfbmV4dD5hJykuY3NzKHsncG9pbnRlci1ldmVudHMnOiAnbm9uZScsICdiYWNrZ3JvdW5kQ29sb3InOiAnI0M2Q0VERSd9KTtcclxuICAgICAgICAkKCcuYWdyX25leHQ+LmxnLWJ0bicpLmNzcyh7J3BvaW50ZXItZXZlbnRzJzogJ25vbmUnLCAnYmFja2dyb3VuZENvbG9yJzogJyNDNkNFREUnfSk7XHJcbiAgICAgICAgbGlzdGVuZXIoKTtcclxuICAgICAgICAvL2dldENvZGUoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJ1bjogcnVuXHJcbiAgICB9XHJcbn0oKSk7XHJcbm1vZHVsZS5leHBvcnRzID0gTGlzdGVuZXI7Il19
