(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/24.
 */
"use strict";

(function ($) {
    /**
     * 生成分页器
     * @param ele 需要添加分页器的元素
     * @param offset 偏移量，即从第data-offset开始
     * @param length 总记录条数
     * @param showPages 分页器显示的页数，超过则隐藏多余的页
     * @param rows 每页显示的记录条数
     */
    $.burster = function (ele, offset, length, showPages, rows) {
        offset = offset ? parseInt(offset) : 0;
        //将分页器装入table中
        if (length && length > offset) {
            var pageHtml = ""
                , ass = ""//清空需要装入的html
                , beforePages = Math.ceil(offset / rows)//需要显示的前页数/当前页
                , afterPages = Math.ceil((length - offset ) / rows)//需要显示的后页数
                , pages = Math.ceil(length / rows) //总页数
                , k = 0;
            //alert("总页数" + pages + " 前页数 " + beforePages + " 后页数 " + afterPages);
            //若页数小于showPages页，则全部显示
            if (pages >= 0 && pages <= showPages) {
                for (k = 0; k < pages; k++) {
                    if (k == beforePages) {
                        pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                    } else {
                        pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                    }
                }
            } else if (pages > showPages) {//总页数大于showPages页
                if (beforePages <= Math.ceil(showPages / 2) && afterPages > showPages + 1) {
                    for (k = 0; k < showPages; k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages <= Math.ceil(showPages / 2) && afterPages == showPages + 1) {
                    for (k = 0; k < showPages - 1; k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages <= Math.ceil(showPages / 2) && afterPages <= showPages) {
                    for (k = 0; k < showPages - 1; k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages > Math.ceil(showPages / 2) && beforePages <= showPages && afterPages > showPages) {
                    pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
                    for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages > showPages && afterPages > showPages) {
                    pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
                    for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages > Math.ceil(showPages / 2) && beforePages <= pages && afterPages <= showPages && afterPages > Math.ceil(showPages / 2) + 1) {
                    pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
                    for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages > pages && afterPages <= showPages && afterPages > Math.ceil(showPages / 2) + 1) {
                    pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
                    for (k = beforePages - Math.ceil(showPages / 2) + 1; k < beforePages + Math.ceil(showPages / 2); k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                    pageHtml += "<li><a class='pages' data-offset='" + ((pages - 1) * rows) + "'>..." + pages + "</a></li>";
                } else if (beforePages > Math.ceil(showPages / 2) && afterPages <= Math.ceil(showPages / 2) + 1) {
                    pageHtml += "<li><a class='pages' data-offset='0'>1...</a></li>";
                    for (k = beforePages - Math.ceil(showPages / 2) + 1; k < pages; k++) {
                        if (k == beforePages) {
                            pageHtml += "<li class='active' ><a>" + (k + 1) + "</a></li>";
                        } else {
                            pageHtml += "<li><a class='pages' data-offset='" + (k * rows) + "'>" + (k + 1) + "</a></li>";
                        }
                    }
                }
            }
            //判断"首页"和"末页"是否可点击
            var firstPage, lastPage;
            if (offset == 0) {//此时首页无法点击
                firstPage = '<li class="disabled"><a class="pages" data-offset="0">首页</a></li>';
                lastPage = '<li><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '" >末页</a></li>';
            } else if ((offset + rows) >= length) {//此时末页无法点击
                firstPage = '<li><a class="pages" data-offset="0">首页</a></li>';
                lastPage = '<li class="disabled"><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '">末页</a></li>';
            } else {
                firstPage = '<li><a class="pages" data-offset="0">首页</a></li>';
                lastPage = '<li><a class="pages" data-offset="' + parseInt(parseInt((length % rows == 0 ? (length - 1) : length) / rows) * rows) + '">末页</a></li>';
            }
            //判断"上一页"和"下一页"是否存在
            var upPage, downPage;
            if (offset == 0 || (offset < rows && (offset % rows != 0))) {
                upPage = "<li class='disabled'><a class='pages' func='previous' data-offset='" + parseInt(offset) + "' >上页</a></li>"
            } else {
                upPage = "<li><a class='pages' func='previous' data-offset='" + (parseInt(offset) - parseInt(rows)) + "' >上页</a></li>";
            }
            if (offset >= (length - rows)) {
                downPage = "<li class='disabled'><a class='pages' func='next' data-offset='" + parseInt(offset) + "'>下页</a></li>"
            } else {
                downPage = "<li><a class='pages' func='next' data-offset='" + parseInt(parseInt(offset) + parseInt(rows)) + "'>下页</a></li>"
            }
            if (pages != 1) {
                //分页部分
                ass += "<div id='pager' class='pager-info'>" +
                    "<h6 id='result' class='pager-record'>共有<span>" + length + "</span>条记录</h6>" +
                    "<ul class='pagination'>" + firstPage + upPage + pageHtml + downPage + lastPage + "</ul></div>";
                //table中注入拼装的记录
                ele.html(ass);
            } else {//无法分页清空分页器
                ele.html('');
            }
        }
    }
}(jQuery));
},{}],2:[function(require,module,exports){
/**
 * Created by jeremy on 2016/2/26.
 * @version 1.0.0 created 通用性功能方法
 */

'use strict';

var Fun = (function () {
    var _timeOut = 100000;//请求超时时间为10s
    /**
     * 封装ajax
     * @param option
     * {
     *      url:"请求的地址"
     *      ,method:"请求的方法"
     *      ,async:"是否并发"
     *      ,data:"发送的数据"
     *      ,success:"成功时回调"
     *      ,error:"失败/超时时回调"
     *      ,timeout:"超时时间"
     *      ,complete:"完成后的回调"
     * }
     */
    var ajax = function (option) {
        //ajax开始时应显示“加载信息框”
        Modal.showLoading();
        $.ajax({
            url: option.url
            , type: "type" in option && option.type || "GET"
            , timeout: option.timeout || _timeOut
            , data: "data" in option && option.data || {}
            , dataType: "json"
            , async: ("async" in option && option.async) ? true : false
            , success: function (json) {
                if ("status" in json && json.status > 0 && "data" in json) {
                    if ("success" in option) {
                        option.success(json.data);
                    } else {
                        Modal.setAlert("无success方法!");
                    }
                } else if ("error" in option && option.error instanceof Function) {
                    option.error(json);
                } else {
                    Modal.setAlert('操作失败!');
                }
            }, error: function (xhr) {//404或者超时
                if ("error" in option && option.error instanceof Function) {
                    //提示用户错误信息
                    Modal.showLoading(false);
                    Modal.setAlert("连接服务器失败，状态：" + (xhr.status || -1) + ",信息：" + (xhr.statusText || "-"));
                    option.error(xhr.status, xhr.statusText);//回调请求的状态和错误信息
                }
            }, complete: function (xhr, type) {
                //关闭“加载信息框”
                Modal.showLoading(false);
                if ("complete" in option && option.complete instanceof Function) {
                    option.complete(xhr, type);//回调请求的xhr信息和类型
                }
            }
        });
    };
    //全选和单选的绑定
    var setCheckboxListener = function (allCheck, radioChecks) {
        //筛选单选按钮组
        var radioValueEles = $(radioChecks);
        //点击全选时，同组按钮被同步
        $(document).delegate(allCheck, "click", function () {
            if (radioValueEles && radioValueEles.length > 0) {
                for (var _r = 0; _r < radioValueEles.length; _r++) {
                    radioValueEles[_r].checked = $(this).is(":checked");
                }
            }
        });
        //点击单选按钮时，
        $(document).delegate(radioChecks, "click", function () {
            $(allCheck)[0].checked = $(radioChecks + ":checked").length == $(radioChecks).length;
        });
    };
    var url = (function () {
        var get = function (name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return decodeURI(r[2]);
            return null;
        };
        /**
         * 根据参数列表长度进行判断，兼容IE9
         * @returns {string}
         */
        var set = function () {
            if (arguments.length === 1 && typeof arguments[0] === 'object') {//一个对象，使用key标记value
                var obj = arguments[0]
                    , search = location.search;
                for (var o in obj) {
                    if (obj.hasOwnProperty(o)) {
                        search = changeURLKeyValue(search, o, obj[o]);
                    }
                }
                if ('pushState' in history) {
                    history.pushState(null, document.title, search);
                } else if ('pushState' in History) {//ie9 不支持pushState方法,javascript.ejs中添加history.js完成html4对pushState的支持
                    History.pushState(null, null, search);//返回重新构造后search串
                }
            } else if (arguments.length === 2) {//key+value
                var key = arguments[0]
                    , value = arguments[1];
                if ('pushState' in history) {
                    history.pushState(null, document.title, changeURLKeyValue(location.toString(), key, value));
                } else if ('pushState' in History) {//ie9 不支持pushState方法,javascript.ejs中添加history.js完成html4对pushState的支持
                    History.pushState(null, null, changeURLKeyValue(location.search, key, value));//返回重新构造后search串
                }
            }
            function changeURLKeyValue(url, arg, arg_val) {
                var pattern = arg + '=([^&]*)';
                var replaceText = arg + '=' + arg_val;
                if (url.match(pattern)) {
                    var tmp = '/(' + arg + '=)([^&]*)/gi';
                    tmp = url.replace(eval(tmp), replaceText);
                    return tmp;
                } else {
                    if (url.match('[\?]')) {
                        return url + '&' + replaceText;
                    } else {
                        return url + '?' + replaceText;
                    }
                }
            }
        };
        return {
            get: get
            , set: set
        }
    }());
    var formatImage=function (path, size, ele) {
        if(path instanceof  Array && path.length>0){
            path = path[0];
        }
        var IMAGE_SIZE = {
            original: {
                path: "",
                size: ""
            },
            xlarge: {
                path: "_xlarge",
                size: "660*660"
            },
            large: {
                path: "_large",
                size: "420*420"
            },
            middle: {
                path: "_middle",
                size: "300*300"
            },
            small: {
                path: "_small",
                size: "240*240"
            },
            little: {
                path: "_little",
                size: "120*120"
            },
            micro: {
                path: "_micro",
                size: "60*60"
            }
        };
        size = IMAGE_SIZE[size || "middle"] || IMAGE_SIZE.middle;
        var pathTemp = /\.\w+?$/.exec(path);
        if (!pathTemp) {
            path += size.path;
        } else {
            path = (path.substr(0, pathTemp.index || path.length)) + size.path + pathTemp[0];
        }
        if (ele && ele.attr) {
            ele.attr("src", path);
        }
        return path;
    };
    return {
        ajax: ajax
        , getTimtout: _timeOut
        , setCheckboxListener: setCheckboxListener
        , url: url
        , formatImage: formatImage
    }
}());

exports.ajax = Fun.ajax;
exports.getTimeout = Fun.getTimtout;
exports.setCheckboxListener = Fun.setCheckboxListener;
exports.url = Fun.url;
exports.formatImage = Fun.formatImage;

},{}],3:[function(require,module,exports){
/**
 * Created by jeremy on 2016/2/24.
 * @version 1.0.0 created
 */

'use strict';

//构造信息框主体
var Modal = (function () {
    //构造原始类
    function M(m) {
        this.s = m.s;//是否显示
        this.id = m.id;
    }

    //构造标准show方法，用于继承
    M.prototype.show = function () {
        var ele = document.getElementById(this.id);
        if (ele) {
            if (this.s && !isShow()) {//显示当前隐藏
                ele.className = ele.className.replace("dp-n", "");
            } else if (!this.s && isShow()) {//隐藏当前显示
                ele.className += " dp-n";
            }
            //去除两边的空格
            ele.className = String(ele.className).trim();
        }
        function isShow() {//是否已显示，无class时显示
            return ele.className.split("dp-n").length == 1;
        }
    };

    //加载信息框
    var loading = (function () {
        //初始化生成加载信息框
        var init = function () {
            if (!document.getElementById("loading_modal_element")) {
                $('body').append('<div id="loading_modal_element" class="loading-modal-body dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="loading-modal-image"></div>' +
                    '<div class="loading-modal-text">' +
                    '<h2>玩命加载中……</h2>' +
                    '</div></div>');
            }
            return false;
        };
        //显示、隐藏信息框
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;//无参数显示信息框
            var m = new M({id: "loading_modal_element", s: s});
            m.show();
        };
        return {
            init: init
            , show: show
        }
    }());
    //弹出信息框
    var alert = (function () {
        var init = function () {
            if (!document.getElementById("alert_modal_element")) {
                $('body').append('<div id="alert_modal_element" class="alert-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="alert-modal-content">' +
                    '<div class="alert-modal-body"><span class="alert-modal-text"></span></div>' +
                    '<div class="alert-modal-footer"><button id="alert_modal_close" class="alert-modal-button">关闭</button></div>' +
                    '</div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "alert_modal_element", s: s});
            m.show();
        };
        /**
         * 设置弹出信息框
         * @param msg       显示的信息，支持html
         * @param sed       倒计时关闭时间，单位：second
         * @param callback  关闭触发回调函数
         */
        var set = function (msg, sed, callback) {
            var ele = document.getElementById("alert_modal_element");
            if (msg) {
                if (typeof msg === 'object') {//应对后端返回提示时使用Object封装
                    msg = JSON.stringify(msg);
                }
                if(ele){
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }else{
                    init();
                    ele.getElementsByClassName("alert-modal-text")[0].innerHTML = msg;
                }
                show();
            }
            if (sed > 0) {
                setTimeout(function () {
                    show(false);
                }, 1000 * sed);
            }//无关闭时间或者关闭时间为0，不自动关闭
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#alert_modal_close").on("click", function () {
                if (callback && callback instanceof Function) {
                    callback();
                }
                show(false);
                //阻止事件继续传递
                return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //选择信息框
    var confirm = (function () {
        var init = function () {
            if (!document.getElementById("confirm_modal_element")) {
                $('body').append('<div id="confirm_modal_element" class="confirm-modal-element dp-n"><div class="cover_modal_element"></div>' +
                    '<div class="confirm-modal-content">' +
                    '<div id="confirm_modal_header" class="confirm-modal-header dp-n"></div>' +
                    '<div class="confirm-modal-body"><span id="confirm_modal_text" class="confirm-modal-text"></span></div>' +
                    '<div class="confirm-modal-footer">' +
                    '<div class="footer-button-success"><button class="confirm-modal-button  modal-success" data-confirm="success">确认</button></div>' +
                    '<div class="footer-button-false"><button class="confirm-modal-button" data-confirm="error">取消</button></div>' +
                    '</div></div></div>');
            }
            return false;
        };
        var show = function (s) {
            s = typeof s == "undefined" ? true : s;
            var m = new M({id: "confirm_modal_element", s: s});
            m.show();
        };
        /**
         * 设置选择信息框的内容
         * @param option    配置
         * {
         *      title:"头部显示的信息"
         *      ,text:"显示的提示信息"
         *      ,success:"点击成功后的回调"
         *      ,error:"点击失败后的回调"
         *      ,complete:"点击按钮后的整体回调"
         * }
         */
        var bar = 0;
        var set = function (option) {
            if (!option) {
                return false;
            }
            if ("title" in option && option.title.length > 0) {//有头部，则显示头部
                document.getElementById("confirm_modal_header").innerHTML = option.title;
            }
            if ("text" in option && option.text.length > 0) {//有内容，则显示整个选择信息框
                document.getElementById("confirm_modal_text").innerHTML = option.text;
            }
            //fixme 事件监听的ie兼容性
            //关闭按钮的事件侦听
            $("#confirm_modal_element").find(".confirm-modal-button").off("click").on("click", function () {
                //fixme .off("click")用于防止多次触发<--很玄学，我也不知道为什么，但是请不要修改。
                var atr = $(this).attr("data-confirm");//选择的按钮
                bar++;
                if (option && atr in option && option[atr] instanceof Function) {
                    option[atr]();
                }
                if (option && "complete" in option && option.complete instanceof Function) {
                    option.complete();//若有完成函数，则执行
                } else {//否则，关闭选择框
                    show(false);
                }
                //阻止事件继续传递
                //return false;
            });
        };
        return {
            init: init
            , show: show
            , set: set
        }
    }());
    //覆盖层
    var cover = (function () {
        var init = function () {
            if (!document.getElementById("cover_modal_element")) {
                $('body').append('<div id="cover_modal_element" class="cover-modal-element dp-n"></div>');
            }
            return false;
        };
        var hide = function () {
            document.getElementById("cover_modal_element").style.display = "none";
        };
        var show = function () {
            document.getElementById("cover_modal_element").style.display = "block";
        };
        return {
            init: init
            , show: show
            , hide: hide
        }
    }());
    return {
        initLoading: loading.init
        , showLoading: loading.show

        , initAlert: alert.init
        , showAlert: alert.show
        , setAlert: alert.set

        , initConfirm: confirm.init
        , setConfirm: confirm.set
        , showConfirm: confirm.show
        , initCover: cover.init
    }
}());

//页面加载完毕后生成四个自定义模态框
setTimeout(function () {
    //页面加载时生成一个覆盖层
    Modal.initCover();
    //页面加载时生成一个加载信息框
    Modal.initLoading();
    //页面加载时生成一个弹出信息框
    Modal.initAlert();
    //页面加载时生成一个选择信息框
    Modal.initConfirm();
}, 100);


//抛出上层调用
exports.showLoading = Modal.showLoading;
exports.setAlert = Modal.setAlert;
exports.showAlert = Modal.showAlert;
exports.setConfirm = Modal.setConfirm;
exports.showConfirm = Modal.showConfirm;
},{}],4:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var head = function () {
    //时间格式化
    Date.prototype.Format = function (fmt) { //author: Jeremyyy
        var o = {
            "M+": this.getMonth() + 1, //月份
            "d+": this.getDate(), //日
            "h+": this.getHours(), //小时
            "m+": this.getMinutes(), //分
            "s+": this.getSeconds(), //秒
            "q+": Math.floor((this.getMonth() + 3) / 3), //季度
            "S": this.getMilliseconds() //毫秒
        };
        if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        for (var k in o)
            if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
        return fmt;
    };
    //返回顶部
    $(document).on('click', '.back-top', function () {
        $("html,body").animate({scrollTop:0},100);
        return false;
    });
    $(document).on('mouseenter', '.vip-part', function () {
        $(this).children('.vip-select').stop(true);
        $(this).children('.vip-select').slideDown(100);
        return false;
    });
    $(document).on('mouseleave', '.vip-part', function () {
        $(this).children('.vip-select').stop(true);
        $(this).children('.vip-select').slideUp(100);
        return false;
    });
    $(document).on('mouseenter', '.wechat-logo', function () {
        $(this).children('.big-wechat').fadeIn(200);
        return false;
    });
    $(document).on('mouseleave', '.wechat-logo', function () {
        $(this).children('.big-wechat').fadeOut(200);
        return false;
    });
};
module.exports.head = head;
},{}],5:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
var listener = (function () {
    var run = function () {
        //头部点击事件
        require('./head').head();
    };
    return {
        run: run
    }
}());
module.exports = listener;
},{"./head":4}],6:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/24.
 */
"use strict";
var Data = (function () {
    var company = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/mix/company'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var search = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/mix/search'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var getArea = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/airline/getArea'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var detail = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/airline/detail'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var calculate = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/mix/price'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var order = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/mix/submit'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var extra = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/airline/extra'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    var history = function (data, callback) {
        var _data = {};
        $.ajax({
            url: '/api/airline/history'
            , type: 'post'
            , data: data
            , dataType: 'json'
            , timeout: 100000
            , success: function (json) {
                if (json && "resCode" in json) {
                    _data = json;
                } else {
                    _data = {};
                }
            }, complete: function () {
                if (callback && callback instanceof Function) {
                    callback(_data);
                }
            }
        });
    };
    return {
        company: company
        , detail: detail
        , getArea: getArea
        , calculate: calculate
        , order: order
        , extra: extra
        , history: history
        , search: search
    }
}());
module.exports.Data = Data;
},{}],7:[function(require,module,exports){
/**
 * Created by Auser on 2016/11/29.
 */
"use strict";
var Dom = (function () {
  var renderTr = function (json) {
    var str = '';
    for (var j in json) {
      if (json.hasOwnProperty(j)) {
        var d = json[j], data;
        data = render(d, j);
        str += ' <button class="collapse-btn" data-toggle="collapse" data-target="' + (j ? j : 'null') + '"> <span class="big dp-b fl-l">' + (j ? j : '直达') + '</span> <span class="big dp-b fl-l">' + (j ? '中转' : '') + '</span> <span class="dp-b fl-l">（' + data.n + '个目的港）</span> <span class="dp-b fl-r open">' + (j ? '+展开' : '-折叠') + '</span> </button>'
        str += data.str;
      }
    }
    $('.step4').find('.bd').html(str);
    function render(arr, j) {
      var str = '', n = 0;
      str += ' <div class="end-body collapse fill' + (j ? '' : ' in') + '" id="' + (j ? j : 'null') + '">';

      for (var a in arr) {
        if (arr.hasOwnProperty(a)) {
          var data = arr[a];
          str += '<div class="part fill' + (a ? ' add' : '') + '">';
          str += a ? '<div class="lf"><span>' + a + '</span></div>' : '';
          str += '<div class="rt fill">';
          for (var b in data) {
            if (data.hasOwnProperty(b)) {
              n += 1;
              var d = data[b];
              str += '<span class="sg-end" data-limit="' + d.flightDay.join(',') + '" data-val="' + d.airwayId + '">' + d.destPortCode + '</span>';
            }
          }

          str += '</div></div>';
        }
      }

      str += '</div>';
      return {
        str: str
        , n: n
      };
    }
  };
  return {
    renderTr: renderTr
  }
}());
module.exports.Dom = Dom;
},{}],8:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/23.
 */
"use strict";
require('../general').run();

require('./listener').run();
},{"../general":5,"./listener":9}],9:[function(require,module,exports){
/**
 * Created by Jeremy on 2016/11/22.
 */
"use strict";
require('../frame/burster');
var url = require('../frame/function').url;
var Modal = require('../frame/modal');
var Listener = (function () {
    var Data = require('./data').Data
        , Dom = require('./dom').Dom;
    var lines = {};
    var order = {};
    //报价单数据
    var dlData = {
        dchy: ''
        , qyg: ''
        , mdg: ''
        , hkgs: ''
        , qfrq: ''
        , hc: ''
        , pm: ''
        , ygzl: ''
        , ygtj: ''
        , ygjs: ''
        , dj: ''
        , zj: ''
        , tzr: {}
        , btzr: {}
    };
    var listener = function () {
        $(document).on('change', '#custom', function () {
            var vol = $('#vol').val()
                , wei = $('#wei').val()
                , id = $('.sg-end.active').data('val');
            if (vol && wei && id) {
                var data = {
                    "cargoSize": vol,
                    "cargoWeight": wei,
                    "airwayId": id,
                    "cargoCount": $('#num').val(),
                    "customDeclare": $('#custom').find('option:selected').val() == 1
                };
                Data.calculate(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0 && json.resBody) {
                        var data = json.resBody.airwayFee
                            , sf = json.resBody.serviceFee
                            , str = '';
                        $('#ygzj').val(data.chargingTotal);
                        $('.right-price').find('td').removeClass('active');
                        $('.c-' + data.chargingLevel).addClass('active');
                        $('.c-price').find('.c-45').html(data['policy']['policy']['45']);
                        $('.c-price').find('.c-100').html(data['policy']['policy']['100']);
                        $('.c-price').find('.c-300').html(data['policy']['policy']['300']);
                        $('.c-price').find('.c-500').html(data['policy']['policy']['500']);
                        $('.c-price').find('.c-1000').html(data['policy']['policy']['1000']);

                        $('.get-zj').html('CNY ' + json.resBody.totalFee);
                        $('.get-kyf').html('CNY ' + data.chargingTotal);
                        $('i.get-kyf').html('空运费');


                        $('i.get-dj').html(data.chargingUnitPrice);

                        $('.get-zl').html(data.chargingWeight + (data.chargingWeight == data.cargo.chargingWeight ? '' : '（自动靠级）'));

                        for (var s in sf) {
                            if (sf.hasOwnProperty(s)) {
                                var d = sf[s];
                                str += '<p><span class="title">' + d.itemName + '</span><span class="body">CNY ' + d.itemTotal + '</span></p>';
                            }
                        }
                        $('.operate').find('.p-body').html(str);
                        $('.price-pt').removeClass('dp-n');
                    }
                });
            }
        });
        $(document).on('click', '.sel-c', function () {
            var _this = $(this);
            dlData['hkgs'] = $(this).data('val');
            if (!$(this).hasClass('active')) {
                $(this).addClass('active');
                $(this).siblings().removeClass('active');
                $('#right-com').val($(this).text());
                $('#right-start').val('');
                $('#right-end').val('');
                $('#trans-line').val('');
                $('#right-time').val('');
                var str = '';
                var data = {
                    "airCompanyCode": _this.data('val'),
                    "enableState": 1,
                    "pageIndex": 1,
                    "pageSize": 999
                };
                Data.search(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0) {
                        var arr = json.resBody.sList || [];
                        for (var a in arr) {
                            if (arr.hasOwnProperty(a)) {
                                var d = arr[a];
                                var lj = '';
                                var zzg = '';
                                for (var l in d.transPort) {
                                    if (d.transPort.hasOwnProperty(l)) {
                                        var lgA = d.transPort[l];
                                        lj += lgA.portCode + (l == d.transPort.length - 1 ? '' : ' -> ');
                                    }
                                }
                                switch (d.transPort.length) {
                                    case 2:
                                        zzg = '直达';
                                        break;
                                    case 3:
                                        zzg = d.transPort[1].portCode + ' 中转';
                                        break;
                                    case 4:
                                        zzg = d.transPort[1].portCode + ',' + d.transPort[2].portCode + ' 中转';
                                        break;
                                }
                                var th = '', tb = '';
                                for (var p in d.airwayPrice.policy) {
                                    if (d.airwayPrice.policy.hasOwnProperty(p)) {
                                        var dt = d.airwayPrice.policy[p];
                                        th += '<td>' + p + 'KG</td>';
                                        tb += '<td>' + dt + '</td>';
                                    }
                                }

                                str += '<div class="sg-mix fill"> ' +
                                    '<a href="javascript:void(0);" class="sel-sg" data-info="' + d.limtRemark + '" data-lj="' + lj + '" data-time="' + new Date(d.flightDate).Format('yyyy-MM-dd') + '" data-s="' + d.deptCode + '" data-e="' + d.destCode + '" data-aid="' + d.airwayId + '" data-lid="' + d.lclId + '">选择</a> ' +
                                    '<div class="info fill"> <p class="big">' + d.deptCode + '</p>' +
                                    ' <p class="zz"> <span class="time">航班日期：' + new Date(d.flightDate).Format('yyyy-MM-dd') + '</span> ' +
                                    '<span class="zd circle">' + zzg + '</span> </p> <p class="big">' + d.destCode + '</p>' +
                                    ' </div> <p class="jzj">基准价：' + d.airwayPrice.basicPrice + '/KG（拼货失败时，每公斤价格）</p> ' +
                                    '<p class="jtj">阶梯价格：（拼货成功时，每公斤价格参考表）</p> <table> ' +
                                    '<thead> <tr> ' + th + '</tr> ' +
                                    '</thead> <tbody> <tr> ' + tb +
                                    ' </tr> </tbody> </table></div>';
                            }
                        }
                    }
                    $('.step2').find('.bd').html(str).removeClass('dp-n');
                });
            }
            extraInit();
        });
        $(document).on('click', '.sel-sg', function () {
            $(this).addClass('active');
            var ele = $(this).parents('.sg-mix');
            ele.siblings().find('.sel-sg').removeClass('active');
            $('#right-start').val($(this).data('s'));
            dlData.qyg = $(this).data('s');
            $('#right-end').val($(this).data('e'));
            dlData.mdg = $(this).data('e');
            $('#trans-line').val($(this).data('lj'));
            dlData.hc = $(this).data('lj');
            $('#right-time').val($(this).data('time'));
            dlData.qfrq = $(this).data('time');
            $('.limit-remark').html($(this).data('info')).removeClass('dp-n');
        });

        $(document).on('change', '#custom', function () {
            var vol = $('#vol').val()
                , wei = $('#wei').val()
                , aid = $('.sel-sg.active').data('aid')
                , lid = $('.sel-sg.active').data('lid');
            if (vol && wei && aid && lid) {
                var data = {
                    "cargoSize": vol,
                    "cargoWeight": wei,
                    "airwayId": aid,
                    "cargoCount": $('#num').val(),
                    "customDeclare": $('#custom').find('option:selected').val() == 1,
                    "lclId": lid
                };
                Data.calculate(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0 && json.resBody) {
                        var data = json.resBody.airwayFee
                            , sf = json.resBody.serviceFee
                            , str = '';
                        $('#ygzj').val(data.chargingTotal);
                        $('.get-zj').html('CNY ' + json.resBody.totalFee);
                        $('.get-kyf').html('CNY ' + data.chargingTotal);
                        $('i.get-kyf').html('空运费');
                        dlData['zj'] = json.resBody.totalFee;
                        dlData['dj'] = data.chargingUnitPrice;

                        $('i.get-dj').html(data.chargingUnitPrice);

                        $('.get-zl').html(data.chargingWeight + (data.chargingWeight == data.cargo.chargingWeight ? '' : '（自动靠级）'));

                        for (var s in sf) {
                            if (sf.hasOwnProperty(s)) {
                                var d = sf[s];
                                str += '<p><span class="title">' + d.itemName + '</span><span class="body">CNY ' + d.itemTotal + '</span></p>';
                            }
                        }
                        $('.operate').find('.p-body').html(str);
                        $('.price-pt').removeClass('dp-n');
                    }
                });
            }
        });
        $(document).on('blur', '#vol,#wei,#num', function () {
            var vol = $('#vol').val()
                , wei = $('#wei').val()
                , aid = $('.sel-sg.active').data('aid')
                , lid = $('.sel-sg.active').data('lid')
                , sum = $('#num').val();
            dlData['ygzl'] = (wei || 0);
            dlData['ygtj'] = (vol || 0);
            dlData['ygjs'] = (sum || 0);
            if (vol && wei && aid && lid) {
                var data = {
                    "cargoSize": vol,
                    "cargoWeight": wei,
                    "airwayId": aid,
                    "cargoCount": sum,
                    "customDeclare": $('#custom').find('option:selected').val() == 1,
                    "lclId": lid

                };
                Data.calculate(data, function (json) {
                    if (json && 'resCode' in json && json.resCode == 0 && json.resBody) {
                        var data = json.resBody.airwayFee
                            , sf = json.resBody.serviceFee
                            , str = '';
                        dlData['zj'] = json.resBody.totalFee;
                        dlData['dj'] = data.chargingUnitPrice;
                        $('.right-price').find('td').removeClass('active');


                        $('.get-price').html(json.resBody.totalFee);
                        $('.single-fee').html(data.chargingUnitPrice);
                        $('.price-wei').html(data.chargingWeight);
                        $('.get-zj').html('CNY ' + json.resBody.totalFee);
                        $('.get-kyf').html('CNY ' + data.chargingTotal);
                        $('i.get-kyf').html('空运费');
                        $('i.get-dj').html(data.chargingUnitPrice);
                        $('.get-zl').html(data.chargingWeight + (data.chargingWeight == data.cargo.chargingWeight ? '' : '（自动靠级）') + (data.minCharge ? '（最低运费 ' + data['policy']['min'] + ' ）' : ''));

                        for (var s in sf) {
                            if (sf.hasOwnProperty(s)) {
                                var d = sf[s];
                                str += '<p><span class="title">' + d.itemName + '</span><span class="body">CNY ' + d.itemTotal + '</span></p>';
                            }
                        }
                        $('.operate').find('.p-body').html(str);
                        $('.price-pt').removeClass('dp-n');
                    }
                });
            }
        });
        $(document).on('focus', '#vol,#wei,#num', function () {
            $('.top-img').find('.step4').addClass('doing');
        });
        $(document).on('blur', '#name', function () {
            var val = $(this).val();
            if (val == '' || new RegExp("^[ ]+$").test(val)) {
                $(this).val('consol');
            }
        });
        $(document).on('click', '.close-btn', function () {
            $('.white-back').addClass('dp-n');
            $('.show-part').addClass('dp-n');
        });
        $(document).on('click', '.show-price', function () {
            $('.white-back').removeClass('dp-n');
            $('.price-list').removeClass('dp-n');
        });
        $(document).on('click', '.show-other', function () {
            var ele = $('.other-list');
            var height = 50;
            height += ele.find('tr').length * 30;
            ele.css('margin-top', '-' + parseInt(height / 2) + 'px');
            $('.white-back').removeClass('dp-n');
            ele.removeClass('dp-n');
        });
        $(document).on('click', '#submit', function () {
            var code = $('#right-com').val()
                , start = $('#right-start').val()
                , end = $('#right-end').val()
                , dt = $('#right-time').val() + ' 00:00:00'
                , size = $('#vol').val()
                , weight = $('#wei').val()
                , num = $('#num').val();
            if (code && start && end && dt && size && weight && num) {
                $('input').removeClass('warm');
                var data = {
                    "companyId": 0,
                    "agentCompanyId": 10000,
                    "memberId": 0,
                    "airCompanyCode": code,
                    "airwayLclId": $('.sel-sg.active').data('lid'),
                    "flightDate": dt,
                    "cargoName": $('#name').val(),
                    "cargoType": 1,
                    "cargoCount": num,
                    "cargoWeight": weight,
                    "cargoSize": size,
                    "bulkyRate": 0.2,
                    "customDeclare": $('#custom').find('option:selected').val() == 1
                };
                if (data.airwayLclId) {
                    Data.order(data, function (json) {
                        if (json && 'resCode' in json && json.resCode == 0) {
                            location.href = '/order';
                        } else if (json && 'resCode' in json && json.resCode == -100) {
                            location.href = "/login";
                        } else {
                            Modal.setAlert(json.resMsg || '委托失败，请重试！');
                        }
                    });
                } else {
                    Modal.setAlert('请选择一条航线');
                }
            } else {
                if (!code) {
                    $('#right-com').addClass('warm');
                } else {
                    $('#right-com').removeClass('warm');
                }
                if (!start) {
                    $('#right-start').addClass('warm');
                } else {
                    $('#right-start').removeClass('warm');
                }
                if (!end) {
                    $('#right-end').addClass('warm');
                } else {
                    $('#right-end').removeClass('warm');
                }
                if (!dt) {
                    $('#right-time').addClass('warm');
                } else {
                    $('#right-time').removeClass('warm');
                }
                if (!size) {
                    $('#vol').addClass('warm');
                } else {
                    $('#vol').removeClass('warm');
                }
                if (!weight) {
                    $('#wei').addClass('warm');
                } else {
                    $('#wei').removeClass('warm');
                }
                if (!num) {
                    $('#num').addClass('warm');
                } else {
                    $('#num').removeClass('warm');
                }
            }
        });
        $(document).on('click', '.show-history', function () {
            var ele = $('.sg-end.active');
            if (ele.length > 0 && ele.data('val')) {
                var show = $('.history-part');
                show.find('.h-qsg').html($('#right-start').val());
                show.find('.h-mdg').html($('#right-end').val());
                show.find('.h-hkgs').html($('#right-com').val());
                show.find('.h-hxlg').html($('#trans-line').val());
                Data.history({id: ele.data('val')}, function (json) {
                    var str = '';
                    if (json && 'resBody' in json && json.resBody instanceof Array && json.resBody.length > 0) {
                        var arr = json.resBody;
                        for (var a in arr) {
                            if (arr.hasOwnProperty(a)) {
                                var d = arr[a];
                                str += ' <tr> <td>' + (d.airwayPrice.rate[0].policy['45'] || '/') + '</td> <td>' + (d.airwayPrice.rate[0].policy['100'] || '/') + '</td>' +
                                    ' <td>' + (d.airwayPrice.rate[0].policy['300'] || '/') + '</td> <td>' + (d.airwayPrice.rate[0].policy['500'] || '/') + '</td>' +
                                    ' <td>' + (d.airwayPrice.rate[0].policy['1000'] || '/') + '</td> <td>' + new Date(d.modifyDt).Format('yyyy-MM-dd hh:mm') + '</td></tr>';
                            }
                        }
                    } else {
                        str = ' <tr><td colspan="6">暂无历史报价</td></tr>';
                    }
                    show.find('tbody').html(str);
                    $('.white-back').removeClass('dp-n');
                    show.removeClass('dp-n');
                });
            }
        });
        $(document).on('click', '.collapse-btn', function () {
            $('#' + $(this).data('target')).collapse('toggle');
            var ele = $(this).find('.open');
            ele.html(ele.html() == '+展开' ? '-折叠' : '+展开');
        });
    };
    var calculate = function () {
        $(document).on('click', '.calculate-logo', function () {
            $(this).siblings('.add-part').removeClass('dp-n');
        });
        $(document).on('click', function (event) {
            var evt = event.srcElement ? event.srcElement : event.target;
            if ($(evt).hasClass('add-part') || $(evt).hasClass('calculate-logo') || $(evt).parents('.add-part').length > 0) {
                return '';
            } else {
                $('.add-part').addClass('dp-n');
            }
        });
        $(document).on('click', '.multi-calcu', function () {
            $('#vol').val(parseFloat($('#long').val() || 0) * parseFloat($('#width').val() || 0) * parseFloat($('#height').val() || 0) * parseFloat($('#sum-num').val() || 0));
            $('.add-part').addClass('dp-n');
        });
    };
    var init = function () {
        var data = {
            "companyId": 0,
            "enableState": 1
        };
        Data.company(data, function (json) {
            var str = '';
            if (json && 'resCode' in json && json.resCode == 0 && json.resBody) {
                lines = json.resBody;
            }
            for (var l in lines) {
                if (lines.hasOwnProperty(l)) {
                    str += '<span class="sel-c" data-val="' + lines[l] + '">' + lines[l] + '</span>';
                }
            }
            $('.step1').find('.bd').html(str).removeClass('dp-n');
        });
    };
    var extraInit = function () {
        var data = {
            airCompanyCode: $('.sel-line').find('.active').data('val') || ''
        };
        Data.extra(data, function (json) {
            if (json && 'resCode' in json && json.resCode == 0) {
                var arr = json.resBody || []
                    , str = '';
                for (var a in arr) {
                    if (arr.hasOwnProperty(a)) {
                        var d = arr[a];
                        str += '<tr><td>' + d.itemName + '</td><td>' + d.itemPrice + '</td><td>' + (d.itemRemark || '/') + '</td></tr>'
                    }
                }
                $('.other-list').find('tbody').html(str);
            }
        });
    };
    var download = function () {
        $(document).on('click', '.dl-pdf', function () {
            dlData.pm = $('#name').val();
            $.ajax({
                url: '/api/down/bjd'
                , type: 'post'
                , data: {d: dlData, name: '报价单'}
                , dataType: 'json'
                , timeout: 100000
                , success: function (json) {
                    if ('status' in json && json.status == 1) {
                        window.open("/getImgCode/bjd");
                    }
                }
            });
        });
    };
    var run = function () {
        listener();
        calculate();
        init();
        extraInit();
        download();
    };
    return {
        run: run
    }
}());
module.exports = Listener;
},{"../frame/burster":1,"../frame/function":2,"../frame/modal":3,"./data":6,"./dom":7}]},{},[8])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L252bS92Ni4yLjAvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi4uL2ZyYW1lL2J1cnN0ZXIuanMiLCIuLi9mcmFtZS9mdW5jdGlvbi5qcyIsIi4uL2ZyYW1lL21vZGFsLmpzIiwiLi4vZ2VuZXJhbC9oZWFkLmpzIiwiLi4vZ2VuZXJhbC9pbmRleC5qcyIsImRhdGEuanMiLCJkb20uanMiLCJpbmRleC5qcyIsImxpc3RlbmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTYvMTEvMjQuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbihmdW5jdGlvbiAoJCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiDnlJ/miJDliIbpobXlmahcclxuICAgICAqIEBwYXJhbSBlbGUg6ZyA6KaB5re75Yqg5YiG6aG15Zmo55qE5YWD57SgXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IOWBj+enu+mHj++8jOWNs+S7juesrGRhdGEtb2Zmc2V05byA5aeLXHJcbiAgICAgKiBAcGFyYW0gbGVuZ3RoIOaAu+iusOW9leadoeaVsFxyXG4gICAgICogQHBhcmFtIHNob3dQYWdlcyDliIbpobXlmajmmL7npLrnmoTpobXmlbDvvIzotoXov4fliJnpmpDol4/lpJrkvZnnmoTpobVcclxuICAgICAqIEBwYXJhbSByb3dzIOavj+mhteaYvuekuueahOiusOW9leadoeaVsFxyXG4gICAgICovXHJcbiAgICAkLmJ1cnN0ZXIgPSBmdW5jdGlvbiAoZWxlLCBvZmZzZXQsIGxlbmd0aCwgc2hvd1BhZ2VzLCByb3dzKSB7XHJcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID8gcGFyc2VJbnQob2Zmc2V0KSA6IDA7XHJcbiAgICAgICAgLy/lsIbliIbpobXlmajoo4XlhaV0YWJsZeS4rVxyXG4gICAgICAgIGlmIChsZW5ndGggJiYgbGVuZ3RoID4gb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIHZhciBwYWdlSHRtbCA9IFwiXCJcclxuICAgICAgICAgICAgICAgICwgYXNzID0gXCJcIi8v5riF56m66ZyA6KaB6KOF5YWl55qEaHRtbFxyXG4gICAgICAgICAgICAgICAgLCBiZWZvcmVQYWdlcyA9IE1hdGguY2VpbChvZmZzZXQgLyByb3dzKS8v6ZyA6KaB5pi+56S655qE5YmN6aG15pWwL+W9k+WJjemhtVxyXG4gICAgICAgICAgICAgICAgLCBhZnRlclBhZ2VzID0gTWF0aC5jZWlsKChsZW5ndGggLSBvZmZzZXQgKSAvIHJvd3MpLy/pnIDopoHmmL7npLrnmoTlkI7pobXmlbBcclxuICAgICAgICAgICAgICAgICwgcGFnZXMgPSBNYXRoLmNlaWwobGVuZ3RoIC8gcm93cykgLy/mgLvpobXmlbBcclxuICAgICAgICAgICAgICAgICwgayA9IDA7XHJcbiAgICAgICAgICAgIC8vYWxlcnQoXCLmgLvpobXmlbBcIiArIHBhZ2VzICsgXCIg5YmN6aG15pWwIFwiICsgYmVmb3JlUGFnZXMgKyBcIiDlkI7pobXmlbAgXCIgKyBhZnRlclBhZ2VzKTtcclxuICAgICAgICAgICAgLy/oi6XpobXmlbDlsI/kuo5zaG93UGFnZXPpobXvvIzliJnlhajpg6jmmL7npLpcclxuICAgICAgICAgICAgaWYgKHBhZ2VzID49IDAgJiYgcGFnZXMgPD0gc2hvd1BhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgcGFnZXM7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwYWdlcyA+IHNob3dQYWdlcykgey8v5oC76aG15pWw5aSn5LqOc2hvd1BhZ2Vz6aG1XHJcbiAgICAgICAgICAgICAgICBpZiAoYmVmb3JlUGFnZXMgPD0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICYmIGFmdGVyUGFnZXMgPiBzaG93UGFnZXMgKyAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IHNob3dQYWdlczsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKChwYWdlcyAtIDEpICogcm93cykgKyBcIic+Li4uXCIgKyBwYWdlcyArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZVBhZ2VzIDw9IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSAmJiBhZnRlclBhZ2VzID09IHNob3dQYWdlcyArIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgc2hvd1BhZ2VzIC0gMTsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrID09IGJlZm9yZVBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaSBjbGFzcz0nYWN0aXZlJyA+PGE+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKGsgKiByb3dzKSArIFwiJz5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpPjxhIGNsYXNzPSdwYWdlcycgZGF0YS1vZmZzZXQ9J1wiICsgKChwYWdlcyAtIDEpICogcm93cykgKyBcIic+Li4uXCIgKyBwYWdlcyArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZVBhZ2VzIDw9IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSAmJiBhZnRlclBhZ2VzIDw9IHNob3dQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBzaG93UGFnZXMgLSAxOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoKHBhZ2VzIC0gMSkgKiByb3dzKSArIFwiJz4uLi5cIiArIHBhZ2VzICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlUGFnZXMgPiBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgJiYgYmVmb3JlUGFnZXMgPD0gc2hvd1BhZ2VzICYmIGFmdGVyUGFnZXMgPiBzaG93UGFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PScwJz4xLi4uPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gYmVmb3JlUGFnZXMgLSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxOyBrIDwgYmVmb3JlUGFnZXMgKyBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMik7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGkgY2xhc3M9J2FjdGl2ZScgPjxhPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArICgocGFnZXMgLSAxKSAqIHJvd3MpICsgXCInPi4uLlwiICsgcGFnZXMgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiZWZvcmVQYWdlcyA+IHNob3dQYWdlcyAmJiBhZnRlclBhZ2VzID4gc2hvd1BhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nMCc+MS4uLjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IGJlZm9yZVBhZ2VzIC0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMTsgayA8IGJlZm9yZVBhZ2VzICsgTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoKHBhZ2VzIC0gMSkgKiByb3dzKSArIFwiJz4uLi5cIiArIHBhZ2VzICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlUGFnZXMgPiBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgJiYgYmVmb3JlUGFnZXMgPD0gcGFnZXMgJiYgYWZ0ZXJQYWdlcyA8PSBzaG93UGFnZXMgJiYgYWZ0ZXJQYWdlcyA+IE1hdGguY2VpbChzaG93UGFnZXMgLyAyKSArIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PScwJz4xLi4uPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gYmVmb3JlUGFnZXMgLSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxOyBrIDwgYmVmb3JlUGFnZXMgKyBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMik7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoayA9PSBiZWZvcmVQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGkgY2xhc3M9J2FjdGl2ZScgPjxhPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArIChrICogcm93cykgKyBcIic+XCIgKyAoayArIDEpICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwYWdlSHRtbCArPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGRhdGEtb2Zmc2V0PSdcIiArICgocGFnZXMgLSAxKSAqIHJvd3MpICsgXCInPi4uLlwiICsgcGFnZXMgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiZWZvcmVQYWdlcyA+IHBhZ2VzICYmIGFmdGVyUGFnZXMgPD0gc2hvd1BhZ2VzICYmIGFmdGVyUGFnZXMgPiBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nMCc+MS4uLjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IGJlZm9yZVBhZ2VzIC0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMTsgayA8IGJlZm9yZVBhZ2VzICsgTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoKHBhZ2VzIC0gMSkgKiByb3dzKSArIFwiJz4uLi5cIiArIHBhZ2VzICsgXCI8L2E+PC9saT5cIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlUGFnZXMgPiBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgJiYgYWZ0ZXJQYWdlcyA8PSBNYXRoLmNlaWwoc2hvd1BhZ2VzIC8gMikgKyAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nMCc+MS4uLjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IGJlZm9yZVBhZ2VzIC0gTWF0aC5jZWlsKHNob3dQYWdlcyAvIDIpICsgMTsgayA8IHBhZ2VzOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT0gYmVmb3JlUGFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIdG1sICs9IFwiPGxpIGNsYXNzPSdhY3RpdmUnID48YT5cIiArIChrICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUh0bWwgKz0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBkYXRhLW9mZnNldD0nXCIgKyAoayAqIHJvd3MpICsgXCInPlwiICsgKGsgKyAxKSArIFwiPC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/liKTmlq1cIummlumhtVwi5ZKMXCLmnKvpobVcIuaYr+WQpuWPr+eCueWHu1xyXG4gICAgICAgICAgICB2YXIgZmlyc3RQYWdlLCBsYXN0UGFnZTtcclxuICAgICAgICAgICAgaWYgKG9mZnNldCA9PSAwKSB7Ly/mraTml7bpppbpobXml6Dms5Xngrnlh7tcclxuICAgICAgICAgICAgICAgIGZpcnN0UGFnZSA9ICc8bGkgY2xhc3M9XCJkaXNhYmxlZFwiPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIjBcIj7pppbpobU8L2E+PC9saT4nO1xyXG4gICAgICAgICAgICAgICAgbGFzdFBhZ2UgPSAnPGxpPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIicgKyBwYXJzZUludChwYXJzZUludCgobGVuZ3RoICUgcm93cyA9PSAwID8gKGxlbmd0aCAtIDEpIDogbGVuZ3RoKSAvIHJvd3MpICogcm93cykgKyAnXCIgPuacq+mhtTwvYT48L2xpPic7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKG9mZnNldCArIHJvd3MpID49IGxlbmd0aCkgey8v5q2k5pe25pyr6aG15peg5rOV54K55Ye7XHJcbiAgICAgICAgICAgICAgICBmaXJzdFBhZ2UgPSAnPGxpPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIjBcIj7pppbpobU8L2E+PC9saT4nO1xyXG4gICAgICAgICAgICAgICAgbGFzdFBhZ2UgPSAnPGxpIGNsYXNzPVwiZGlzYWJsZWRcIj48YSBjbGFzcz1cInBhZ2VzXCIgZGF0YS1vZmZzZXQ9XCInICsgcGFyc2VJbnQocGFyc2VJbnQoKGxlbmd0aCAlIHJvd3MgPT0gMCA/IChsZW5ndGggLSAxKSA6IGxlbmd0aCkgLyByb3dzKSAqIHJvd3MpICsgJ1wiPuacq+mhtTwvYT48L2xpPic7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmaXJzdFBhZ2UgPSAnPGxpPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIjBcIj7pppbpobU8L2E+PC9saT4nO1xyXG4gICAgICAgICAgICAgICAgbGFzdFBhZ2UgPSAnPGxpPjxhIGNsYXNzPVwicGFnZXNcIiBkYXRhLW9mZnNldD1cIicgKyBwYXJzZUludChwYXJzZUludCgobGVuZ3RoICUgcm93cyA9PSAwID8gKGxlbmd0aCAtIDEpIDogbGVuZ3RoKSAvIHJvd3MpICogcm93cykgKyAnXCI+5pyr6aG1PC9hPjwvbGk+JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+WIpOaWrVwi5LiK5LiA6aG1XCLlkoxcIuS4i+S4gOmhtVwi5piv5ZCm5a2Y5ZyoXHJcbiAgICAgICAgICAgIHZhciB1cFBhZ2UsIGRvd25QYWdlO1xyXG4gICAgICAgICAgICBpZiAob2Zmc2V0ID09IDAgfHwgKG9mZnNldCA8IHJvd3MgJiYgKG9mZnNldCAlIHJvd3MgIT0gMCkpKSB7XHJcbiAgICAgICAgICAgICAgICB1cFBhZ2UgPSBcIjxsaSBjbGFzcz0nZGlzYWJsZWQnPjxhIGNsYXNzPSdwYWdlcycgZnVuYz0ncHJldmlvdXMnIGRhdGEtb2Zmc2V0PSdcIiArIHBhcnNlSW50KG9mZnNldCkgKyBcIicgPuS4iumhtTwvYT48L2xpPlwiXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB1cFBhZ2UgPSBcIjxsaT48YSBjbGFzcz0ncGFnZXMnIGZ1bmM9J3ByZXZpb3VzJyBkYXRhLW9mZnNldD0nXCIgKyAocGFyc2VJbnQob2Zmc2V0KSAtIHBhcnNlSW50KHJvd3MpKSArIFwiJyA+5LiK6aG1PC9hPjwvbGk+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9mZnNldCA+PSAobGVuZ3RoIC0gcm93cykpIHtcclxuICAgICAgICAgICAgICAgIGRvd25QYWdlID0gXCI8bGkgY2xhc3M9J2Rpc2FibGVkJz48YSBjbGFzcz0ncGFnZXMnIGZ1bmM9J25leHQnIGRhdGEtb2Zmc2V0PSdcIiArIHBhcnNlSW50KG9mZnNldCkgKyBcIic+5LiL6aG1PC9hPjwvbGk+XCJcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRvd25QYWdlID0gXCI8bGk+PGEgY2xhc3M9J3BhZ2VzJyBmdW5jPSduZXh0JyBkYXRhLW9mZnNldD0nXCIgKyBwYXJzZUludChwYXJzZUludChvZmZzZXQpICsgcGFyc2VJbnQocm93cykpICsgXCInPuS4i+mhtTwvYT48L2xpPlwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBhZ2VzICE9IDEpIHtcclxuICAgICAgICAgICAgICAgIC8v5YiG6aG16YOo5YiGXHJcbiAgICAgICAgICAgICAgICBhc3MgKz0gXCI8ZGl2IGlkPSdwYWdlcicgY2xhc3M9J3BhZ2VyLWluZm8nPlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIjxoNiBpZD0ncmVzdWx0JyBjbGFzcz0ncGFnZXItcmVjb3JkJz7lhbHmnIk8c3Bhbj5cIiArIGxlbmd0aCArIFwiPC9zcGFuPuadoeiusOW9lTwvaDY+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiPHVsIGNsYXNzPSdwYWdpbmF0aW9uJz5cIiArIGZpcnN0UGFnZSArIHVwUGFnZSArIHBhZ2VIdG1sICsgZG93blBhZ2UgKyBsYXN0UGFnZSArIFwiPC91bD48L2Rpdj5cIjtcclxuICAgICAgICAgICAgICAgIC8vdGFibGXkuK3ms6jlhaXmi7zoo4XnmoTorrDlvZVcclxuICAgICAgICAgICAgICAgIGVsZS5odG1sKGFzcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7Ly/ml6Dms5XliIbpobXmuIXnqbrliIbpobXlmahcclxuICAgICAgICAgICAgICAgIGVsZS5odG1sKCcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufShqUXVlcnkpKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqZXJlbXkgb24gMjAxNi8yLzI2LlxyXG4gKiBAdmVyc2lvbiAxLjAuMCBjcmVhdGVkIOmAmueUqOaAp+WKn+iDveaWueazlVxyXG4gKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBGdW4gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIF90aW1lT3V0ID0gMTAwMDAwOy8v6K+35rGC6LaF5pe25pe26Ze05Li6MTBzXHJcbiAgICAvKipcclxuICAgICAqIOWwgeijhWFqYXhcclxuICAgICAqIEBwYXJhbSBvcHRpb25cclxuICAgICAqIHtcclxuICAgICAqICAgICAgdXJsOlwi6K+35rGC55qE5Zyw5Z2AXCJcclxuICAgICAqICAgICAgLG1ldGhvZDpcIuivt+axgueahOaWueazlVwiXHJcbiAgICAgKiAgICAgICxhc3luYzpcIuaYr+WQpuW5tuWPkVwiXHJcbiAgICAgKiAgICAgICxkYXRhOlwi5Y+R6YCB55qE5pWw5o2uXCJcclxuICAgICAqICAgICAgLHN1Y2Nlc3M6XCLmiJDlip/ml7blm57osINcIlxyXG4gICAgICogICAgICAsZXJyb3I6XCLlpLHotKUv6LaF5pe25pe25Zue6LCDXCJcclxuICAgICAqICAgICAgLHRpbWVvdXQ6XCLotoXml7bml7bpl7RcIlxyXG4gICAgICogICAgICAsY29tcGxldGU6XCLlrozmiJDlkI7nmoTlm57osINcIlxyXG4gICAgICogfVxyXG4gICAgICovXHJcbiAgICB2YXIgYWpheCA9IGZ1bmN0aW9uIChvcHRpb24pIHtcclxuICAgICAgICAvL2FqYXjlvIDlp4vml7blupTmmL7npLrigJzliqDovb3kv6Hmga/moYbigJ1cclxuICAgICAgICBNb2RhbC5zaG93TG9hZGluZygpO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogb3B0aW9uLnVybFxyXG4gICAgICAgICAgICAsIHR5cGU6IFwidHlwZVwiIGluIG9wdGlvbiAmJiBvcHRpb24udHlwZSB8fCBcIkdFVFwiXHJcbiAgICAgICAgICAgICwgdGltZW91dDogb3B0aW9uLnRpbWVvdXQgfHwgX3RpbWVPdXRcclxuICAgICAgICAgICAgLCBkYXRhOiBcImRhdGFcIiBpbiBvcHRpb24gJiYgb3B0aW9uLmRhdGEgfHwge31cclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogXCJqc29uXCJcclxuICAgICAgICAgICAgLCBhc3luYzogKFwiYXN5bmNcIiBpbiBvcHRpb24gJiYgb3B0aW9uLmFzeW5jKSA/IHRydWUgOiBmYWxzZVxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJzdGF0dXNcIiBpbiBqc29uICYmIGpzb24uc3RhdHVzID4gMCAmJiBcImRhdGFcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwic3VjY2Vzc1wiIGluIG9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24uc3VjY2Vzcyhqc29uLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KFwi5pegc3VjY2Vzc+aWueazlSFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcImVycm9yXCIgaW4gb3B0aW9uICYmIG9wdGlvbi5lcnJvciBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmVycm9yKGpzb24pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydCgn5pON5L2c5aSx6LSlIScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBlcnJvcjogZnVuY3Rpb24gKHhocikgey8vNDA05oiW6ICF6LaF5pe2XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJlcnJvclwiIGluIG9wdGlvbiAmJiBvcHRpb24uZXJyb3IgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5o+Q56S655So5oi36ZSZ6K+v5L+h5oGvXHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2hvd0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLnNldEFsZXJ0KFwi6L+e5o6l5pyN5Yqh5Zmo5aSx6LSl77yM54q25oCB77yaXCIgKyAoeGhyLnN0YXR1cyB8fCAtMSkgKyBcIizkv6Hmga/vvJpcIiArICh4aHIuc3RhdHVzVGV4dCB8fCBcIi1cIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5lcnJvcih4aHIuc3RhdHVzLCB4aHIuc3RhdHVzVGV4dCk7Ly/lm57osIPor7fmsYLnmoTnirbmgIHlkozplJnor6/kv6Hmga9cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICh4aHIsIHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIC8v5YWz6Zet4oCc5Yqg6L295L+h5oGv5qGG4oCdXHJcbiAgICAgICAgICAgICAgICBNb2RhbC5zaG93TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJjb21wbGV0ZVwiIGluIG9wdGlvbiAmJiBvcHRpb24uY29tcGxldGUgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5jb21wbGV0ZSh4aHIsIHR5cGUpOy8v5Zue6LCD6K+35rGC55qEeGhy5L+h5oGv5ZKM57G75Z6LXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvL+WFqOmAieWSjOWNlemAieeahOe7keWumlxyXG4gICAgdmFyIHNldENoZWNrYm94TGlzdGVuZXIgPSBmdW5jdGlvbiAoYWxsQ2hlY2ssIHJhZGlvQ2hlY2tzKSB7XHJcbiAgICAgICAgLy/nrZvpgInljZXpgInmjInpkq7nu4RcclxuICAgICAgICB2YXIgcmFkaW9WYWx1ZUVsZXMgPSAkKHJhZGlvQ2hlY2tzKTtcclxuICAgICAgICAvL+eCueWHu+WFqOmAieaXtu+8jOWQjOe7hOaMiemSruiiq+WQjOatpVxyXG4gICAgICAgICQoZG9jdW1lbnQpLmRlbGVnYXRlKGFsbENoZWNrLCBcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHJhZGlvVmFsdWVFbGVzICYmIHJhZGlvVmFsdWVFbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9yID0gMDsgX3IgPCByYWRpb1ZhbHVlRWxlcy5sZW5ndGg7IF9yKyspIHtcclxuICAgICAgICAgICAgICAgICAgICByYWRpb1ZhbHVlRWxlc1tfcl0uY2hlY2tlZCA9ICQodGhpcykuaXMoXCI6Y2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v54K55Ye75Y2V6YCJ5oyJ6ZKu5pe277yMXHJcbiAgICAgICAgJChkb2N1bWVudCkuZGVsZWdhdGUocmFkaW9DaGVja3MsIFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKGFsbENoZWNrKVswXS5jaGVja2VkID0gJChyYWRpb0NoZWNrcyArIFwiOmNoZWNrZWRcIikubGVuZ3RoID09ICQocmFkaW9DaGVja3MpLmxlbmd0aDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgdXJsID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZ2V0ID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoXCIoXnwmKVwiICsgbmFtZSArIFwiPShbXiZdKikoJnwkKVwiLCBcImlcIik7XHJcbiAgICAgICAgICAgIHZhciByID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSkubWF0Y2gocmVnKTtcclxuICAgICAgICAgICAgaWYgKHIgIT0gbnVsbCkgcmV0dXJuIGRlY29kZVVSSShyWzJdKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmoLnmja7lj4LmlbDliJfooajplb/luqbov5vooYzliKTmlq3vvIzlhbzlrrlJRTlcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxICYmIHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdvYmplY3QnKSB7Ly/kuIDkuKrlr7nosaHvvIzkvb/nlKhrZXnmoIforrB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IGFyZ3VtZW50c1swXVxyXG4gICAgICAgICAgICAgICAgICAgICwgc2VhcmNoID0gbG9jYXRpb24uc2VhcmNoO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbyBpbiBvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KG8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaCA9IGNoYW5nZVVSTEtleVZhbHVlKHNlYXJjaCwgbywgb2JqW29dKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJ3B1c2hTdGF0ZScgaW4gaGlzdG9yeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsIGRvY3VtZW50LnRpdGxlLCBzZWFyY2gpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgncHVzaFN0YXRlJyBpbiBIaXN0b3J5KSB7Ly9pZTkg5LiN5pSv5oyBcHVzaFN0YXRl5pa55rOVLGphdmFzY3JpcHQuZWpz5Lit5re75YqgaGlzdG9yeS5qc+WujOaIkGh0bWw05a+5cHVzaFN0YXRl55qE5pSv5oyBXHJcbiAgICAgICAgICAgICAgICAgICAgSGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgc2VhcmNoKTsvL+i/lOWbnumHjeaWsOaehOmAoOWQjnNlYXJjaOS4slxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHsvL2tleSt2YWx1ZVxyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGFyZ3VtZW50c1swXVxyXG4gICAgICAgICAgICAgICAgICAgICwgdmFsdWUgPSBhcmd1bWVudHNbMV07XHJcbiAgICAgICAgICAgICAgICBpZiAoJ3B1c2hTdGF0ZScgaW4gaGlzdG9yeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsIGRvY3VtZW50LnRpdGxlLCBjaGFuZ2VVUkxLZXlWYWx1ZShsb2NhdGlvbi50b1N0cmluZygpLCBrZXksIHZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCdwdXNoU3RhdGUnIGluIEhpc3RvcnkpIHsvL2llOSDkuI3mlK/mjIFwdXNoU3RhdGXmlrnms5UsamF2YXNjcmlwdC5lanPkuK3mt7vliqBoaXN0b3J5Lmpz5a6M5oiQaHRtbDTlr7lwdXNoU3RhdGXnmoTmlK/mjIFcclxuICAgICAgICAgICAgICAgICAgICBIaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCBjaGFuZ2VVUkxLZXlWYWx1ZShsb2NhdGlvbi5zZWFyY2gsIGtleSwgdmFsdWUpKTsvL+i/lOWbnumHjeaWsOaehOmAoOWQjnNlYXJjaOS4slxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoYW5nZVVSTEtleVZhbHVlKHVybCwgYXJnLCBhcmdfdmFsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGF0dGVybiA9IGFyZyArICc9KFteJl0qKSc7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVwbGFjZVRleHQgPSBhcmcgKyAnPScgKyBhcmdfdmFsO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVybC5tYXRjaChwYXR0ZXJuKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSAnLygnICsgYXJnICsgJz0pKFteJl0qKS9naSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wID0gdXJsLnJlcGxhY2UoZXZhbCh0bXApLCByZXBsYWNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRtcDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVybC5tYXRjaCgnW1xcP10nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXJsICsgJyYnICsgcmVwbGFjZVRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVybCArICc/JyArIHJlcGxhY2VUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZ2V0OiBnZXRcclxuICAgICAgICAgICAgLCBzZXQ6IHNldFxyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICB2YXIgZm9ybWF0SW1hZ2U9ZnVuY3Rpb24gKHBhdGgsIHNpemUsIGVsZSkge1xyXG4gICAgICAgIGlmKHBhdGggaW5zdGFuY2VvZiAgQXJyYXkgJiYgcGF0aC5sZW5ndGg+MCl7XHJcbiAgICAgICAgICAgIHBhdGggPSBwYXRoWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgSU1BR0VfU0laRSA9IHtcclxuICAgICAgICAgICAgb3JpZ2luYWw6IHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIlwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHhsYXJnZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfeGxhcmdlXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjY2MCo2NjBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsYXJnZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbGFyZ2VcIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiNDIwKjQyMFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1pZGRsZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbWlkZGxlXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjMwMCozMDBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzbWFsbDoge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfc21hbGxcIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiMjQwKjI0MFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxpdHRsZToge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbGl0dGxlXCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBcIjEyMCoxMjBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtaWNybzoge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogXCJfbWljcm9cIixcclxuICAgICAgICAgICAgICAgIHNpemU6IFwiNjAqNjBcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzaXplID0gSU1BR0VfU0laRVtzaXplIHx8IFwibWlkZGxlXCJdIHx8IElNQUdFX1NJWkUubWlkZGxlO1xyXG4gICAgICAgIHZhciBwYXRoVGVtcCA9IC9cXC5cXHcrPyQvLmV4ZWMocGF0aCk7XHJcbiAgICAgICAgaWYgKCFwYXRoVGVtcCkge1xyXG4gICAgICAgICAgICBwYXRoICs9IHNpemUucGF0aDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwYXRoID0gKHBhdGguc3Vic3RyKDAsIHBhdGhUZW1wLmluZGV4IHx8IHBhdGgubGVuZ3RoKSkgKyBzaXplLnBhdGggKyBwYXRoVGVtcFswXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVsZSAmJiBlbGUuYXR0cikge1xyXG4gICAgICAgICAgICBlbGUuYXR0cihcInNyY1wiLCBwYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhamF4OiBhamF4XHJcbiAgICAgICAgLCBnZXRUaW10b3V0OiBfdGltZU91dFxyXG4gICAgICAgICwgc2V0Q2hlY2tib3hMaXN0ZW5lcjogc2V0Q2hlY2tib3hMaXN0ZW5lclxyXG4gICAgICAgICwgdXJsOiB1cmxcclxuICAgICAgICAsIGZvcm1hdEltYWdlOiBmb3JtYXRJbWFnZVxyXG4gICAgfVxyXG59KCkpO1xyXG5cclxuZXhwb3J0cy5hamF4ID0gRnVuLmFqYXg7XHJcbmV4cG9ydHMuZ2V0VGltZW91dCA9IEZ1bi5nZXRUaW10b3V0O1xyXG5leHBvcnRzLnNldENoZWNrYm94TGlzdGVuZXIgPSBGdW4uc2V0Q2hlY2tib3hMaXN0ZW5lcjtcclxuZXhwb3J0cy51cmwgPSBGdW4udXJsO1xyXG5leHBvcnRzLmZvcm1hdEltYWdlID0gRnVuLmZvcm1hdEltYWdlO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBqZXJlbXkgb24gMjAxNi8yLzI0LlxyXG4gKiBAdmVyc2lvbiAxLjAuMCBjcmVhdGVkXHJcbiAqL1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuLy/mnoTpgKDkv6Hmga/moYbkuLvkvZNcclxudmFyIE1vZGFsID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8v5p6E6YCg5Y6f5aeL57G7XHJcbiAgICBmdW5jdGlvbiBNKG0pIHtcclxuICAgICAgICB0aGlzLnMgPSBtLnM7Ly/mmK/lkKbmmL7npLpcclxuICAgICAgICB0aGlzLmlkID0gbS5pZDtcclxuICAgIH1cclxuXHJcbiAgICAvL+aehOmAoOagh+WHhnNob3fmlrnms5XvvIznlKjkuo7nu6fmib9cclxuICAgIE0ucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuaWQpO1xyXG4gICAgICAgIGlmIChlbGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucyAmJiAhaXNTaG93KCkpIHsvL+aYvuekuuW9k+WJjemakOiXj1xyXG4gICAgICAgICAgICAgICAgZWxlLmNsYXNzTmFtZSA9IGVsZS5jbGFzc05hbWUucmVwbGFjZShcImRwLW5cIiwgXCJcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMucyAmJiBpc1Nob3coKSkgey8v6ZqQ6JeP5b2T5YmN5pi+56S6XHJcbiAgICAgICAgICAgICAgICBlbGUuY2xhc3NOYW1lICs9IFwiIGRwLW5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+WOu+mZpOS4pOi+ueeahOepuuagvFxyXG4gICAgICAgICAgICBlbGUuY2xhc3NOYW1lID0gU3RyaW5nKGVsZS5jbGFzc05hbWUpLnRyaW0oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gaXNTaG93KCkgey8v5piv5ZCm5bey5pi+56S677yM5pegY2xhc3Pml7bmmL7npLpcclxuICAgICAgICAgICAgcmV0dXJuIGVsZS5jbGFzc05hbWUuc3BsaXQoXCJkcC1uXCIpLmxlbmd0aCA9PSAxO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy/liqDovb3kv6Hmga/moYZcclxuICAgIHZhciBsb2FkaW5nID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+WIneWni+WMlueUn+aIkOWKoOi9veS/oeaBr+ahhlxyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9hZGluZ19tb2RhbF9lbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwibG9hZGluZ19tb2RhbF9lbGVtZW50XCIgY2xhc3M9XCJsb2FkaW5nLW1vZGFsLWJvZHkgZHAtblwiPjxkaXYgY2xhc3M9XCJjb3Zlcl9tb2RhbF9lbGVtZW50XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJsb2FkaW5nLW1vZGFsLWltYWdlXCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJsb2FkaW5nLW1vZGFsLXRleHRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGgyPueOqeWRveWKoOi9veS4reKApuKApjwvaDI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8v5pi+56S644CB6ZqQ6JeP5L+h5oGv5qGGXHJcbiAgICAgICAgdmFyIHNob3cgPSBmdW5jdGlvbiAocykge1xyXG4gICAgICAgICAgICBzID0gdHlwZW9mIHMgPT0gXCJ1bmRlZmluZWRcIiA/IHRydWUgOiBzOy8v5peg5Y+C5pWw5pi+56S65L+h5oGv5qGGXHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE0oe2lkOiBcImxvYWRpbmdfbW9kYWxfZWxlbWVudFwiLCBzOiBzfSk7XHJcbiAgICAgICAgICAgIG0uc2hvdygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICAsIHNob3c6IHNob3dcclxuICAgICAgICB9XHJcbiAgICB9KCkpO1xyXG4gICAgLy/lvLnlh7rkv6Hmga/moYZcclxuICAgIHZhciBhbGVydCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGVydF9tb2RhbF9lbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwiYWxlcnRfbW9kYWxfZWxlbWVudFwiIGNsYXNzPVwiYWxlcnQtbW9kYWwtZWxlbWVudCBkcC1uXCI+PGRpdiBjbGFzcz1cImNvdmVyX21vZGFsX2VsZW1lbnRcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsZXJ0LW1vZGFsLWNvbnRlbnRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsZXJ0LW1vZGFsLWJvZHlcIj48c3BhbiBjbGFzcz1cImFsZXJ0LW1vZGFsLXRleHRcIj48L3NwYW4+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhbGVydC1tb2RhbC1mb290ZXJcIj48YnV0dG9uIGlkPVwiYWxlcnRfbW9kYWxfY2xvc2VcIiBjbGFzcz1cImFsZXJ0LW1vZGFsLWJ1dHRvblwiPuWFs+mXrTwvYnV0dG9uPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgc2hvdyA9IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgIHMgPSB0eXBlb2YgcyA9PSBcInVuZGVmaW5lZFwiID8gdHJ1ZSA6IHM7XHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE0oe2lkOiBcImFsZXJ0X21vZGFsX2VsZW1lbnRcIiwgczogc30pO1xyXG4gICAgICAgICAgICBtLnNob3coKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOiuvue9ruW8ueWHuuS/oeaBr+ahhlxyXG4gICAgICAgICAqIEBwYXJhbSBtc2cgICAgICAg5pi+56S655qE5L+h5oGv77yM5pSv5oyBaHRtbFxyXG4gICAgICAgICAqIEBwYXJhbSBzZWQgICAgICAg5YCS6K6h5pe25YWz6Zet5pe26Ze077yM5Y2V5L2N77yac2Vjb25kXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrICDlhbPpl63op6blj5Hlm57osIPlh73mlbBcclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgc2V0ID0gZnVuY3Rpb24gKG1zZywgc2VkLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGVydF9tb2RhbF9lbGVtZW50XCIpO1xyXG4gICAgICAgICAgICBpZiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1zZyA9PT0gJ29iamVjdCcpIHsvL+W6lOWvueWQjuerr+i/lOWbnuaPkOekuuaXtuS9v+eUqE9iamVjdOWwgeijhVxyXG4gICAgICAgICAgICAgICAgICAgIG1zZyA9IEpTT04uc3RyaW5naWZ5KG1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihlbGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYWxlcnQtbW9kYWwtdGV4dFwiKVswXS5pbm5lckhUTUwgPSBtc2c7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJhbGVydC1tb2RhbC10ZXh0XCIpWzBdLmlubmVySFRNTCA9IG1zZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2VkID4gMCkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDAwICogc2VkKTtcclxuICAgICAgICAgICAgfS8v5peg5YWz6Zet5pe26Ze05oiW6ICF5YWz6Zet5pe26Ze05Li6MO+8jOS4jeiHquWKqOWFs+mXrVxyXG4gICAgICAgICAgICAvL2ZpeG1lIOS6i+S7tuebkeWQrOeahGll5YW85a655oCnXHJcbiAgICAgICAgICAgIC8v5YWz6Zet5oyJ6ZKu55qE5LqL5Lu25L6m5ZCsXHJcbiAgICAgICAgICAgICQoXCIjYWxlcnRfbW9kYWxfY2xvc2VcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIC8v6Zi75q2i5LqL5Lu257un57ut5Lyg6YCSXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICAsIHNob3c6IHNob3dcclxuICAgICAgICAgICAgLCBzZXQ6IHNldFxyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcbiAgICAvL+mAieaLqeS/oeaBr+ahhlxyXG4gICAgdmFyIGNvbmZpcm0gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlybV9tb2RhbF9lbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwiY29uZmlybV9tb2RhbF9lbGVtZW50XCIgY2xhc3M9XCJjb25maXJtLW1vZGFsLWVsZW1lbnQgZHAtblwiPjxkaXYgY2xhc3M9XCJjb3Zlcl9tb2RhbF9lbGVtZW50XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb25maXJtLW1vZGFsLWNvbnRlbnRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBpZD1cImNvbmZpcm1fbW9kYWxfaGVhZGVyXCIgY2xhc3M9XCJjb25maXJtLW1vZGFsLWhlYWRlciBkcC1uXCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb25maXJtLW1vZGFsLWJvZHlcIj48c3BhbiBpZD1cImNvbmZpcm1fbW9kYWxfdGV4dFwiIGNsYXNzPVwiY29uZmlybS1tb2RhbC10ZXh0XCI+PC9zcGFuPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29uZmlybS1tb2RhbC1mb290ZXJcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImZvb3Rlci1idXR0b24tc3VjY2Vzc1wiPjxidXR0b24gY2xhc3M9XCJjb25maXJtLW1vZGFsLWJ1dHRvbiAgbW9kYWwtc3VjY2Vzc1wiIGRhdGEtY29uZmlybT1cInN1Y2Nlc3NcIj7noa7orqQ8L2J1dHRvbj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImZvb3Rlci1idXR0b24tZmFsc2VcIj48YnV0dG9uIGNsYXNzPVwiY29uZmlybS1tb2RhbC1idXR0b25cIiBkYXRhLWNvbmZpcm09XCJlcnJvclwiPuWPlua2iDwvYnV0dG9uPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgc2hvdyA9IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgIHMgPSB0eXBlb2YgcyA9PSBcInVuZGVmaW5lZFwiID8gdHJ1ZSA6IHM7XHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE0oe2lkOiBcImNvbmZpcm1fbW9kYWxfZWxlbWVudFwiLCBzOiBzfSk7XHJcbiAgICAgICAgICAgIG0uc2hvdygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6K6+572u6YCJ5oup5L+h5oGv5qGG55qE5YaF5a65XHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbiAgICDphY3nva5cclxuICAgICAgICAgKiB7XHJcbiAgICAgICAgICogICAgICB0aXRsZTpcIuWktOmDqOaYvuekuueahOS/oeaBr1wiXHJcbiAgICAgICAgICogICAgICAsdGV4dDpcIuaYvuekuueahOaPkOekuuS/oeaBr1wiXHJcbiAgICAgICAgICogICAgICAsc3VjY2VzczpcIueCueWHu+aIkOWKn+WQjueahOWbnuiwg1wiXHJcbiAgICAgICAgICogICAgICAsZXJyb3I6XCLngrnlh7vlpLHotKXlkI7nmoTlm57osINcIlxyXG4gICAgICAgICAqICAgICAgLGNvbXBsZXRlOlwi54K55Ye75oyJ6ZKu5ZCO55qE5pW05L2T5Zue6LCDXCJcclxuICAgICAgICAgKiB9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGJhciA9IDA7XHJcbiAgICAgICAgdmFyIHNldCA9IGZ1bmN0aW9uIChvcHRpb24pIHtcclxuICAgICAgICAgICAgaWYgKCFvcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoXCJ0aXRsZVwiIGluIG9wdGlvbiAmJiBvcHRpb24udGl0bGUubGVuZ3RoID4gMCkgey8v5pyJ5aS06YOo77yM5YiZ5pi+56S65aS06YOoXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbmZpcm1fbW9kYWxfaGVhZGVyXCIpLmlubmVySFRNTCA9IG9wdGlvbi50aXRsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoXCJ0ZXh0XCIgaW4gb3B0aW9uICYmIG9wdGlvbi50ZXh0Lmxlbmd0aCA+IDApIHsvL+acieWGheWuue+8jOWImeaYvuekuuaVtOS4qumAieaLqeS/oeaBr+ahhlxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maXJtX21vZGFsX3RleHRcIikuaW5uZXJIVE1MID0gb3B0aW9uLnRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9maXhtZSDkuovku7bnm5HlkKznmoRpZeWFvOWuueaAp1xyXG4gICAgICAgICAgICAvL+WFs+mXreaMiemSrueahOS6i+S7tuS+puWQrFxyXG4gICAgICAgICAgICAkKFwiI2NvbmZpcm1fbW9kYWxfZWxlbWVudFwiKS5maW5kKFwiLmNvbmZpcm0tbW9kYWwtYnV0dG9uXCIpLm9mZihcImNsaWNrXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy9maXhtZSAub2ZmKFwiY2xpY2tcIinnlKjkuo7pmLLmraLlpJrmrKHop6blj5E8LS3lvojnjoTlrabvvIzmiJHkuZ/kuI3nn6XpgZPkuLrku4DkuYjvvIzkvYbmmK/or7fkuI3opoHkv67mlLnjgIJcclxuICAgICAgICAgICAgICAgIHZhciBhdHIgPSAkKHRoaXMpLmF0dHIoXCJkYXRhLWNvbmZpcm1cIik7Ly/pgInmi6nnmoTmjInpkq5cclxuICAgICAgICAgICAgICAgIGJhcisrO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbiAmJiBhdHIgaW4gb3B0aW9uICYmIG9wdGlvblthdHJdIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25bYXRyXSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbiAmJiBcImNvbXBsZXRlXCIgaW4gb3B0aW9uICYmIG9wdGlvbi5jb21wbGV0ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmNvbXBsZXRlKCk7Ly/oi6XmnInlrozmiJDlh73mlbDvvIzliJnmiafooYxcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7Ly/lkKbliJnvvIzlhbPpl63pgInmi6nmoYZcclxuICAgICAgICAgICAgICAgICAgICBzaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8v6Zi75q2i5LqL5Lu257un57ut5Lyg6YCSXHJcbiAgICAgICAgICAgICAgICAvL3JldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbml0OiBpbml0XHJcbiAgICAgICAgICAgICwgc2hvdzogc2hvd1xyXG4gICAgICAgICAgICAsIHNldDogc2V0XHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuICAgIC8v6KaG55uW5bGCXHJcbiAgICB2YXIgY292ZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY292ZXJfbW9kYWxfZWxlbWVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImNvdmVyX21vZGFsX2VsZW1lbnRcIiBjbGFzcz1cImNvdmVyLW1vZGFsLWVsZW1lbnQgZHAtblwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBoaWRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdmVyX21vZGFsX2VsZW1lbnRcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHNob3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY292ZXJfbW9kYWxfZWxlbWVudFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICAsIHNob3c6IHNob3dcclxuICAgICAgICAgICAgLCBoaWRlOiBoaWRlXHJcbiAgICAgICAgfVxyXG4gICAgfSgpKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5pdExvYWRpbmc6IGxvYWRpbmcuaW5pdFxyXG4gICAgICAgICwgc2hvd0xvYWRpbmc6IGxvYWRpbmcuc2hvd1xyXG5cclxuICAgICAgICAsIGluaXRBbGVydDogYWxlcnQuaW5pdFxyXG4gICAgICAgICwgc2hvd0FsZXJ0OiBhbGVydC5zaG93XHJcbiAgICAgICAgLCBzZXRBbGVydDogYWxlcnQuc2V0XHJcblxyXG4gICAgICAgICwgaW5pdENvbmZpcm06IGNvbmZpcm0uaW5pdFxyXG4gICAgICAgICwgc2V0Q29uZmlybTogY29uZmlybS5zZXRcclxuICAgICAgICAsIHNob3dDb25maXJtOiBjb25maXJtLnNob3dcclxuICAgICAgICAsIGluaXRDb3ZlcjogY292ZXIuaW5pdFxyXG4gICAgfVxyXG59KCkpO1xyXG5cclxuLy/pobXpnaLliqDovb3lrozmr5XlkI7nlJ/miJDlm5vkuKroh6rlrprkuYnmqKHmgIHmoYZcclxuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAvL+mhtemdouWKoOi9veaXtueUn+aIkOS4gOS4quimhuebluWxglxyXG4gICAgTW9kYWwuaW5pdENvdmVyKCk7XHJcbiAgICAvL+mhtemdouWKoOi9veaXtueUn+aIkOS4gOS4quWKoOi9veS/oeaBr+ahhlxyXG4gICAgTW9kYWwuaW5pdExvYWRpbmcoKTtcclxuICAgIC8v6aG16Z2i5Yqg6L295pe255Sf5oiQ5LiA5Liq5by55Ye65L+h5oGv5qGGXHJcbiAgICBNb2RhbC5pbml0QWxlcnQoKTtcclxuICAgIC8v6aG16Z2i5Yqg6L295pe255Sf5oiQ5LiA5Liq6YCJ5oup5L+h5oGv5qGGXHJcbiAgICBNb2RhbC5pbml0Q29uZmlybSgpO1xyXG59LCAxMDApO1xyXG5cclxuXHJcbi8v5oqb5Ye65LiK5bGC6LCD55SoXHJcbmV4cG9ydHMuc2hvd0xvYWRpbmcgPSBNb2RhbC5zaG93TG9hZGluZztcclxuZXhwb3J0cy5zZXRBbGVydCA9IE1vZGFsLnNldEFsZXJ0O1xyXG5leHBvcnRzLnNob3dBbGVydCA9IE1vZGFsLnNob3dBbGVydDtcclxuZXhwb3J0cy5zZXRDb25maXJtID0gTW9kYWwuc2V0Q29uZmlybTtcclxuZXhwb3J0cy5zaG93Q29uZmlybSA9IE1vZGFsLnNob3dDb25maXJtOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplcmVteSBvbiAyMDE2LzExLzIyLlxyXG4gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBoZWFkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy/ml7bpl7TmoLzlvI/ljJZcclxuICAgIERhdGUucHJvdG90eXBlLkZvcm1hdCA9IGZ1bmN0aW9uIChmbXQpIHsgLy9hdXRob3I6IEplcmVteXl5XHJcbiAgICAgICAgdmFyIG8gPSB7XHJcbiAgICAgICAgICAgIFwiTStcIjogdGhpcy5nZXRNb250aCgpICsgMSwgLy/mnIjku71cclxuICAgICAgICAgICAgXCJkK1wiOiB0aGlzLmdldERhdGUoKSwgLy/ml6VcclxuICAgICAgICAgICAgXCJoK1wiOiB0aGlzLmdldEhvdXJzKCksIC8v5bCP5pe2XHJcbiAgICAgICAgICAgIFwibStcIjogdGhpcy5nZXRNaW51dGVzKCksIC8v5YiGXHJcbiAgICAgICAgICAgIFwicytcIjogdGhpcy5nZXRTZWNvbmRzKCksIC8v56eSXHJcbiAgICAgICAgICAgIFwicStcIjogTWF0aC5mbG9vcigodGhpcy5nZXRNb250aCgpICsgMykgLyAzKSwgLy/lraPluqZcclxuICAgICAgICAgICAgXCJTXCI6IHRoaXMuZ2V0TWlsbGlzZWNvbmRzKCkgLy/mr6vnp5JcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICgvKHkrKS8udGVzdChmbXQpKSBmbXQgPSBmbXQucmVwbGFjZShSZWdFeHAuJDEsICh0aGlzLmdldEZ1bGxZZWFyKCkgKyBcIlwiKS5zdWJzdHIoNCAtIFJlZ0V4cC4kMS5sZW5ndGgpKTtcclxuICAgICAgICBmb3IgKHZhciBrIGluIG8pXHJcbiAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKFwiKFwiICsgayArIFwiKVwiKS50ZXN0KGZtdCkpIGZtdCA9IGZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKFJlZ0V4cC4kMS5sZW5ndGggPT0gMSkgPyAob1trXSkgOiAoKFwiMDBcIiArIG9ba10pLnN1YnN0cigoXCJcIiArIG9ba10pLmxlbmd0aCkpKTtcclxuICAgICAgICByZXR1cm4gZm10O1xyXG4gICAgfTtcclxuICAgIC8v6L+U5Zue6aG26YOoXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmJhY2stdG9wJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCJodG1sLGJvZHlcIikuYW5pbWF0ZSh7c2Nyb2xsVG9wOjB9LDEwMCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgICAkKGRvY3VtZW50KS5vbignbW91c2VlbnRlcicsICcudmlwLXBhcnQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLnZpcC1zZWxlY3QnKS5zdG9wKHRydWUpO1xyXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oJy52aXAtc2VsZWN0Jykuc2xpZGVEb3duKDEwMCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgICAkKGRvY3VtZW50KS5vbignbW91c2VsZWF2ZScsICcudmlwLXBhcnQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLnZpcC1zZWxlY3QnKS5zdG9wKHRydWUpO1xyXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oJy52aXAtc2VsZWN0Jykuc2xpZGVVcCgxMDApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG4gICAgJChkb2N1bWVudCkub24oJ21vdXNlZW50ZXInLCAnLndlY2hhdC1sb2dvJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oJy5iaWctd2VjaGF0JykuZmFkZUluKDIwMCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgICAkKGRvY3VtZW50KS5vbignbW91c2VsZWF2ZScsICcud2VjaGF0LWxvZ28nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLmJpZy13ZWNoYXQnKS5mYWRlT3V0KDIwMCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbn07XHJcbm1vZHVsZS5leHBvcnRzLmhlYWQgPSBoZWFkOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplcmVteSBvbiAyMDE2LzExLzIyLlxyXG4gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBsaXN0ZW5lciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgcnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v5aS06YOo54K55Ye75LqL5Lu2XHJcbiAgICAgICAgcmVxdWlyZSgnLi9oZWFkJykuaGVhZCgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcnVuOiBydW5cclxuICAgIH1cclxufSgpKTtcclxubW9kdWxlLmV4cG9ydHMgPSBsaXN0ZW5lcjsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKZXJlbXkgb24gMjAxNi8xMS8yNC5cclxuICovXHJcblwidXNlIHN0cmljdFwiO1xyXG52YXIgRGF0YSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgY29tcGFueSA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvbWl4L2NvbXBhbnknXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHNlYXJjaCA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvbWl4L3NlYXJjaCdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgZ2V0QXJlYSA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfZGF0YSA9IHt9O1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvYWlybGluZS9nZXRBcmVhJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBkZXRhaWwgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL2FpcmxpbmUvZGV0YWlsJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBjYWxjdWxhdGUgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL21peC9wcmljZSdcclxuICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgLCBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICwgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAsIHRpbWVvdXQ6IDEwMDAwMFxyXG4gICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBcInJlc0NvZGVcIiBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgb3JkZXIgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2RhdGEgPSB7fTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL21peC9zdWJtaXQnXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGV4dHJhID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9haXJsaW5lL2V4dHJhJ1xyXG4gICAgICAgICAgICAsIHR5cGU6ICdwb3N0J1xyXG4gICAgICAgICAgICAsIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgLCBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICwgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uICYmIFwicmVzQ29kZVwiIGluIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IGpzb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBoaXN0b3J5ID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF9kYXRhID0ge307XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9haXJsaW5lL2hpc3RvcnknXHJcbiAgICAgICAgICAgICwgdHlwZTogJ3Bvc3QnXHJcbiAgICAgICAgICAgICwgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgLCB0aW1lb3V0OiAxMDAwMDBcclxuICAgICAgICAgICAgLCBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgXCJyZXNDb2RlXCIgaW4ganNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhID0ganNvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBjb21wYW55OiBjb21wYW55XHJcbiAgICAgICAgLCBkZXRhaWw6IGRldGFpbFxyXG4gICAgICAgICwgZ2V0QXJlYTogZ2V0QXJlYVxyXG4gICAgICAgICwgY2FsY3VsYXRlOiBjYWxjdWxhdGVcclxuICAgICAgICAsIG9yZGVyOiBvcmRlclxyXG4gICAgICAgICwgZXh0cmE6IGV4dHJhXHJcbiAgICAgICAgLCBoaXN0b3J5OiBoaXN0b3J5XHJcbiAgICAgICAgLCBzZWFyY2g6IHNlYXJjaFxyXG4gICAgfVxyXG59KCkpO1xyXG5tb2R1bGUuZXhwb3J0cy5EYXRhID0gRGF0YTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBBdXNlciBvbiAyMDE2LzExLzI5LlxyXG4gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBEb20gPSAoZnVuY3Rpb24gKCkge1xyXG4gIHZhciByZW5kZXJUciA9IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICB2YXIgc3RyID0gJyc7XHJcbiAgICBmb3IgKHZhciBqIGluIGpzb24pIHtcclxuICAgICAgaWYgKGpzb24uaGFzT3duUHJvcGVydHkoaikpIHtcclxuICAgICAgICB2YXIgZCA9IGpzb25bal0sIGRhdGE7XHJcbiAgICAgICAgZGF0YSA9IHJlbmRlcihkLCBqKTtcclxuICAgICAgICBzdHIgKz0gJyA8YnV0dG9uIGNsYXNzPVwiY29sbGFwc2UtYnRuXCIgZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiIGRhdGEtdGFyZ2V0PVwiJyArIChqID8gaiA6ICdudWxsJykgKyAnXCI+IDxzcGFuIGNsYXNzPVwiYmlnIGRwLWIgZmwtbFwiPicgKyAoaiA/IGogOiAn55u06L6+JykgKyAnPC9zcGFuPiA8c3BhbiBjbGFzcz1cImJpZyBkcC1iIGZsLWxcIj4nICsgKGogPyAn5Lit6L2sJyA6ICcnKSArICc8L3NwYW4+IDxzcGFuIGNsYXNzPVwiZHAtYiBmbC1sXCI+77yIJyArIGRhdGEubiArICfkuKrnm67nmoTmuK/vvIk8L3NwYW4+IDxzcGFuIGNsYXNzPVwiZHAtYiBmbC1yIG9wZW5cIj4nICsgKGogPyAnK+WxleW8gCcgOiAnLeaKmOWPoCcpICsgJzwvc3Bhbj4gPC9idXR0b24+J1xyXG4gICAgICAgIHN0ciArPSBkYXRhLnN0cjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgJCgnLnN0ZXA0JykuZmluZCgnLmJkJykuaHRtbChzdHIpO1xyXG4gICAgZnVuY3Rpb24gcmVuZGVyKGFyciwgaikge1xyXG4gICAgICB2YXIgc3RyID0gJycsIG4gPSAwO1xyXG4gICAgICBzdHIgKz0gJyA8ZGl2IGNsYXNzPVwiZW5kLWJvZHkgY29sbGFwc2UgZmlsbCcgKyAoaiA/ICcnIDogJyBpbicpICsgJ1wiIGlkPVwiJyArIChqID8gaiA6ICdudWxsJykgKyAnXCI+JztcclxuXHJcbiAgICAgIGZvciAodmFyIGEgaW4gYXJyKSB7XHJcbiAgICAgICAgaWYgKGFyci5oYXNPd25Qcm9wZXJ0eShhKSkge1xyXG4gICAgICAgICAgdmFyIGRhdGEgPSBhcnJbYV07XHJcbiAgICAgICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9XCJwYXJ0IGZpbGwnICsgKGEgPyAnIGFkZCcgOiAnJykgKyAnXCI+JztcclxuICAgICAgICAgIHN0ciArPSBhID8gJzxkaXYgY2xhc3M9XCJsZlwiPjxzcGFuPicgKyBhICsgJzwvc3Bhbj48L2Rpdj4nIDogJyc7XHJcbiAgICAgICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9XCJydCBmaWxsXCI+JztcclxuICAgICAgICAgIGZvciAodmFyIGIgaW4gZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eShiKSkge1xyXG4gICAgICAgICAgICAgIG4gKz0gMTtcclxuICAgICAgICAgICAgICB2YXIgZCA9IGRhdGFbYl07XHJcbiAgICAgICAgICAgICAgc3RyICs9ICc8c3BhbiBjbGFzcz1cInNnLWVuZFwiIGRhdGEtbGltaXQ9XCInICsgZC5mbGlnaHREYXkuam9pbignLCcpICsgJ1wiIGRhdGEtdmFsPVwiJyArIGQuYWlyd2F5SWQgKyAnXCI+JyArIGQuZGVzdFBvcnRDb2RlICsgJzwvc3Bhbj4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgc3RyICs9ICc8L2Rpdj48L2Rpdj4nO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgc3RyICs9ICc8L2Rpdj4nO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN0cjogc3RyXHJcbiAgICAgICAgLCBuOiBuXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfTtcclxuICByZXR1cm4ge1xyXG4gICAgcmVuZGVyVHI6IHJlbmRlclRyXHJcbiAgfVxyXG59KCkpO1xyXG5tb2R1bGUuZXhwb3J0cy5Eb20gPSBEb207IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSmVyZW15IG9uIDIwMTYvMTEvMjMuXHJcbiAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxucmVxdWlyZSgnLi4vZ2VuZXJhbCcpLnJ1bigpO1xyXG5cclxucmVxdWlyZSgnLi9saXN0ZW5lcicpLnJ1bigpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplcmVteSBvbiAyMDE2LzExLzIyLlxyXG4gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcbnJlcXVpcmUoJy4uL2ZyYW1lL2J1cnN0ZXInKTtcclxudmFyIHVybCA9IHJlcXVpcmUoJy4uL2ZyYW1lL2Z1bmN0aW9uJykudXJsO1xyXG52YXIgTW9kYWwgPSByZXF1aXJlKCcuLi9mcmFtZS9tb2RhbCcpO1xyXG52YXIgTGlzdGVuZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIERhdGEgPSByZXF1aXJlKCcuL2RhdGEnKS5EYXRhXHJcbiAgICAgICAgLCBEb20gPSByZXF1aXJlKCcuL2RvbScpLkRvbTtcclxuICAgIHZhciBsaW5lcyA9IHt9O1xyXG4gICAgdmFyIG9yZGVyID0ge307XHJcbiAgICAvL+aKpeS7t+WNleaVsOaNrlxyXG4gICAgdmFyIGRsRGF0YSA9IHtcclxuICAgICAgICBkY2h5OiAnJ1xyXG4gICAgICAgICwgcXlnOiAnJ1xyXG4gICAgICAgICwgbWRnOiAnJ1xyXG4gICAgICAgICwgaGtnczogJydcclxuICAgICAgICAsIHFmcnE6ICcnXHJcbiAgICAgICAgLCBoYzogJydcclxuICAgICAgICAsIHBtOiAnJ1xyXG4gICAgICAgICwgeWd6bDogJydcclxuICAgICAgICAsIHlndGo6ICcnXHJcbiAgICAgICAgLCB5Z2pzOiAnJ1xyXG4gICAgICAgICwgZGo6ICcnXHJcbiAgICAgICAgLCB6ajogJydcclxuICAgICAgICAsIHR6cjoge31cclxuICAgICAgICAsIGJ0enI6IHt9XHJcbiAgICB9O1xyXG4gICAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnI2N1c3RvbScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZvbCA9ICQoJyN2b2wnKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgLCB3ZWkgPSAkKCcjd2VpJykudmFsKClcclxuICAgICAgICAgICAgICAgICwgaWQgPSAkKCcuc2ctZW5kLmFjdGl2ZScpLmRhdGEoJ3ZhbCcpO1xyXG4gICAgICAgICAgICBpZiAodm9sICYmIHdlaSAmJiBpZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJjYXJnb1NpemVcIjogdm9sLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2FyZ29XZWlnaHRcIjogd2VpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYWlyd2F5SWRcIjogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjYXJnb0NvdW50XCI6ICQoJyNudW0nKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcImN1c3RvbURlY2xhcmVcIjogJCgnI2N1c3RvbScpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLnZhbCgpID09IDFcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBEYXRhLmNhbGN1bGF0ZShkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwICYmIGpzb24ucmVzQm9keSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGpzb24ucmVzQm9keS5haXJ3YXlGZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgc2YgPSBqc29uLnJlc0JvZHkuc2VydmljZUZlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBzdHIgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3lnemonKS52YWwoZGF0YS5jaGFyZ2luZ1RvdGFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnJpZ2h0LXByaWNlJykuZmluZCgndGQnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jLScgKyBkYXRhLmNoYXJnaW5nTGV2ZWwpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmMtcHJpY2UnKS5maW5kKCcuYy00NScpLmh0bWwoZGF0YVsncG9saWN5J11bJ3BvbGljeSddWyc0NSddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmMtcHJpY2UnKS5maW5kKCcuYy0xMDAnKS5odG1sKGRhdGFbJ3BvbGljeSddWydwb2xpY3knXVsnMTAwJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYy1wcmljZScpLmZpbmQoJy5jLTMwMCcpLmh0bWwoZGF0YVsncG9saWN5J11bJ3BvbGljeSddWyczMDAnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jLXByaWNlJykuZmluZCgnLmMtNTAwJykuaHRtbChkYXRhWydwb2xpY3knXVsncG9saWN5J11bJzUwMCddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmMtcHJpY2UnKS5maW5kKCcuYy0xMDAwJykuaHRtbChkYXRhWydwb2xpY3knXVsncG9saWN5J11bJzEwMDAnXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuZ2V0LXpqJykuaHRtbCgnQ05ZICcgKyBqc29uLnJlc0JvZHkudG90YWxGZWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuZ2V0LWt5ZicpLmh0bWwoJ0NOWSAnICsgZGF0YS5jaGFyZ2luZ1RvdGFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnaS5nZXQta3lmJykuaHRtbCgn56m66L+Q6LS5Jyk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnaS5nZXQtZGonKS5odG1sKGRhdGEuY2hhcmdpbmdVbml0UHJpY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmdldC16bCcpLmh0bWwoZGF0YS5jaGFyZ2luZ1dlaWdodCArIChkYXRhLmNoYXJnaW5nV2VpZ2h0ID09IGRhdGEuY2FyZ28uY2hhcmdpbmdXZWlnaHQgPyAnJyA6ICfvvIjoh6rliqjpnaDnuqfvvIknKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzIGluIHNmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2YuaGFzT3duUHJvcGVydHkocykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IHNmW3NdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnPHA+PHNwYW4gY2xhc3M9XCJ0aXRsZVwiPicgKyBkLml0ZW1OYW1lICsgJzwvc3Bhbj48c3BhbiBjbGFzcz1cImJvZHlcIj5DTlkgJyArIGQuaXRlbVRvdGFsICsgJzwvc3Bhbj48L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcub3BlcmF0ZScpLmZpbmQoJy5wLWJvZHknKS5odG1sKHN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5wcmljZS1wdCcpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNlbC1jJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICBkbERhdGFbJ2hrZ3MnXSA9ICQodGhpcykuZGF0YSgndmFsJyk7XHJcbiAgICAgICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICQoJyNyaWdodC1jb20nKS52YWwoJCh0aGlzKS50ZXh0KCkpO1xyXG4gICAgICAgICAgICAgICAgJCgnI3JpZ2h0LXN0YXJ0JykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICQoJyNyaWdodC1lbmQnKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJCgnI3RyYW5zLWxpbmUnKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJCgnI3JpZ2h0LXRpbWUnKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJhaXJDb21wYW55Q29kZVwiOiBfdGhpcy5kYXRhKCd2YWwnKSxcclxuICAgICAgICAgICAgICAgICAgICBcImVuYWJsZVN0YXRlXCI6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJwYWdlSW5kZXhcIjogMSxcclxuICAgICAgICAgICAgICAgICAgICBcInBhZ2VTaXplXCI6IDk5OVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIERhdGEuc2VhcmNoKGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IGpzb24ucmVzQm9keS5zTGlzdCB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSBpbiBhcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcnIuaGFzT3duUHJvcGVydHkoYSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGFyclthXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGogPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgenpnID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbCBpbiBkLnRyYW5zUG9ydCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZC50cmFuc1BvcnQuaGFzT3duUHJvcGVydHkobCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZ0EgPSBkLnRyYW5zUG9ydFtsXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxqICs9IGxnQS5wb3J0Q29kZSArIChsID09IGQudHJhbnNQb3J0Lmxlbmd0aCAtIDEgPyAnJyA6ICcgLT4gJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChkLnRyYW5zUG9ydC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgenpnID0gJ+ebtOi+vic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgenpnID0gZC50cmFuc1BvcnRbMV0ucG9ydENvZGUgKyAnIOS4rei9rCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgenpnID0gZC50cmFuc1BvcnRbMV0ucG9ydENvZGUgKyAnLCcgKyBkLnRyYW5zUG9ydFsyXS5wb3J0Q29kZSArICcg5Lit6L2sJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGggPSAnJywgdGIgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwIGluIGQuYWlyd2F5UHJpY2UucG9saWN5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLmFpcndheVByaWNlLnBvbGljeS5oYXNPd25Qcm9wZXJ0eShwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGR0ID0gZC5haXJ3YXlQcmljZS5wb2xpY3lbcF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aCArPSAnPHRkPicgKyBwICsgJ0tHPC90ZD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGIgKz0gJzx0ZD4nICsgZHQgKyAnPC90ZD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9XCJzZy1taXggZmlsbFwiPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJzZWwtc2dcIiBkYXRhLWluZm89XCInICsgZC5saW10UmVtYXJrICsgJ1wiIGRhdGEtbGo9XCInICsgbGogKyAnXCIgZGF0YS10aW1lPVwiJyArIG5ldyBEYXRlKGQuZmxpZ2h0RGF0ZSkuRm9ybWF0KCd5eXl5LU1NLWRkJykgKyAnXCIgZGF0YS1zPVwiJyArIGQuZGVwdENvZGUgKyAnXCIgZGF0YS1lPVwiJyArIGQuZGVzdENvZGUgKyAnXCIgZGF0YS1haWQ9XCInICsgZC5haXJ3YXlJZCArICdcIiBkYXRhLWxpZD1cIicgKyBkLmxjbElkICsgJ1wiPumAieaLqTwvYT4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaW5mbyBmaWxsXCI+IDxwIGNsYXNzPVwiYmlnXCI+JyArIGQuZGVwdENvZGUgKyAnPC9wPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIDxwIGNsYXNzPVwienpcIj4gPHNwYW4gY2xhc3M9XCJ0aW1lXCI+6Iiq54+t5pel5pyf77yaJyArIG5ldyBEYXRlKGQuZmxpZ2h0RGF0ZSkuRm9ybWF0KCd5eXl5LU1NLWRkJykgKyAnPC9zcGFuPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiemQgY2lyY2xlXCI+JyArIHp6ZyArICc8L3NwYW4+IDwvcD4gPHAgY2xhc3M9XCJiaWdcIj4nICsgZC5kZXN0Q29kZSArICc8L3A+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgPC9kaXY+IDxwIGNsYXNzPVwianpqXCI+5Z+65YeG5Lu377yaJyArIGQuYWlyd2F5UHJpY2UuYmFzaWNQcmljZSArICcvS0fvvIjmi7zotKflpLHotKXml7bvvIzmr4/lhazmlqTku7fmoLzvvIk8L3A+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJqdGpcIj7pmLbmoq/ku7fmoLzvvJrvvIjmi7zotKfmiJDlip/ml7bvvIzmr4/lhazmlqTku7fmoLzlj4LogIPooajvvIk8L3A+IDx0YWJsZT4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dGhlYWQ+IDx0cj4gJyArIHRoICsgJzwvdHI+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC90aGVhZD4gPHRib2R5PiA8dHI+ICcgKyB0YiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgPC90cj4gPC90Ym9keT4gPC90YWJsZT48L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICQoJy5zdGVwMicpLmZpbmQoJy5iZCcpLmh0bWwoc3RyKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXh0cmFJbml0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zZWwtc2cnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gJCh0aGlzKS5wYXJlbnRzKCcuc2ctbWl4Jyk7XHJcbiAgICAgICAgICAgIGVsZS5zaWJsaW5ncygpLmZpbmQoJy5zZWwtc2cnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQoJyNyaWdodC1zdGFydCcpLnZhbCgkKHRoaXMpLmRhdGEoJ3MnKSk7XHJcbiAgICAgICAgICAgIGRsRGF0YS5xeWcgPSAkKHRoaXMpLmRhdGEoJ3MnKTtcclxuICAgICAgICAgICAgJCgnI3JpZ2h0LWVuZCcpLnZhbCgkKHRoaXMpLmRhdGEoJ2UnKSk7XHJcbiAgICAgICAgICAgIGRsRGF0YS5tZGcgPSAkKHRoaXMpLmRhdGEoJ2UnKTtcclxuICAgICAgICAgICAgJCgnI3RyYW5zLWxpbmUnKS52YWwoJCh0aGlzKS5kYXRhKCdsaicpKTtcclxuICAgICAgICAgICAgZGxEYXRhLmhjID0gJCh0aGlzKS5kYXRhKCdsaicpO1xyXG4gICAgICAgICAgICAkKCcjcmlnaHQtdGltZScpLnZhbCgkKHRoaXMpLmRhdGEoJ3RpbWUnKSk7XHJcbiAgICAgICAgICAgIGRsRGF0YS5xZnJxID0gJCh0aGlzKS5kYXRhKCd0aW1lJyk7XHJcbiAgICAgICAgICAgICQoJy5saW1pdC1yZW1hcmsnKS5odG1sKCQodGhpcykuZGF0YSgnaW5mbycpKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJyNjdXN0b20nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2b2wgPSAkKCcjdm9sJykudmFsKClcclxuICAgICAgICAgICAgICAgICwgd2VpID0gJCgnI3dlaScpLnZhbCgpXHJcbiAgICAgICAgICAgICAgICAsIGFpZCA9ICQoJy5zZWwtc2cuYWN0aXZlJykuZGF0YSgnYWlkJylcclxuICAgICAgICAgICAgICAgICwgbGlkID0gJCgnLnNlbC1zZy5hY3RpdmUnKS5kYXRhKCdsaWQnKTtcclxuICAgICAgICAgICAgaWYgKHZvbCAmJiB3ZWkgJiYgYWlkICYmIGxpZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJjYXJnb1NpemVcIjogdm9sLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2FyZ29XZWlnaHRcIjogd2VpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYWlyd2F5SWRcIjogYWlkLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2FyZ29Db3VudFwiOiAkKCcjbnVtJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjdXN0b21EZWNsYXJlXCI6ICQoJyNjdXN0b20nKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKSA9PSAxLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibGNsSWRcIjogbGlkXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgRGF0YS5jYWxjdWxhdGUoZGF0YSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCAmJiBqc29uLnJlc0JvZHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBqc29uLnJlc0JvZHkuYWlyd2F5RmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHNmID0ganNvbi5yZXNCb2R5LnNlcnZpY2VGZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgc3RyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyN5Z3pqJykudmFsKGRhdGEuY2hhcmdpbmdUb3RhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5nZXQtemonKS5odG1sKCdDTlkgJyArIGpzb24ucmVzQm9keS50b3RhbEZlZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5nZXQta3lmJykuaHRtbCgnQ05ZICcgKyBkYXRhLmNoYXJnaW5nVG90YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdpLmdldC1reWYnKS5odG1sKCfnqbrov5DotLknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGxEYXRhWyd6aiddID0ganNvbi5yZXNCb2R5LnRvdGFsRmVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkbERhdGFbJ2RqJ10gPSBkYXRhLmNoYXJnaW5nVW5pdFByaWNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnaS5nZXQtZGonKS5odG1sKGRhdGEuY2hhcmdpbmdVbml0UHJpY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmdldC16bCcpLmh0bWwoZGF0YS5jaGFyZ2luZ1dlaWdodCArIChkYXRhLmNoYXJnaW5nV2VpZ2h0ID09IGRhdGEuY2FyZ28uY2hhcmdpbmdXZWlnaHQgPyAnJyA6ICfvvIjoh6rliqjpnaDnuqfvvIknKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzIGluIHNmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2YuaGFzT3duUHJvcGVydHkocykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IHNmW3NdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnPHA+PHNwYW4gY2xhc3M9XCJ0aXRsZVwiPicgKyBkLml0ZW1OYW1lICsgJzwvc3Bhbj48c3BhbiBjbGFzcz1cImJvZHlcIj5DTlkgJyArIGQuaXRlbVRvdGFsICsgJzwvc3Bhbj48L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcub3BlcmF0ZScpLmZpbmQoJy5wLWJvZHknKS5odG1sKHN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5wcmljZS1wdCcpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignYmx1cicsICcjdm9sLCN3ZWksI251bScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZvbCA9ICQoJyN2b2wnKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgLCB3ZWkgPSAkKCcjd2VpJykudmFsKClcclxuICAgICAgICAgICAgICAgICwgYWlkID0gJCgnLnNlbC1zZy5hY3RpdmUnKS5kYXRhKCdhaWQnKVxyXG4gICAgICAgICAgICAgICAgLCBsaWQgPSAkKCcuc2VsLXNnLmFjdGl2ZScpLmRhdGEoJ2xpZCcpXHJcbiAgICAgICAgICAgICAgICAsIHN1bSA9ICQoJyNudW0nKS52YWwoKTtcclxuICAgICAgICAgICAgZGxEYXRhWyd5Z3psJ10gPSAod2VpIHx8IDApO1xyXG4gICAgICAgICAgICBkbERhdGFbJ3lndGonXSA9ICh2b2wgfHwgMCk7XHJcbiAgICAgICAgICAgIGRsRGF0YVsneWdqcyddID0gKHN1bSB8fCAwKTtcclxuICAgICAgICAgICAgaWYgKHZvbCAmJiB3ZWkgJiYgYWlkICYmIGxpZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJjYXJnb1NpemVcIjogdm9sLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2FyZ29XZWlnaHRcIjogd2VpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYWlyd2F5SWRcIjogYWlkLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2FyZ29Db3VudFwiOiBzdW0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjdXN0b21EZWNsYXJlXCI6ICQoJyNjdXN0b20nKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKSA9PSAxLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibGNsSWRcIjogbGlkXHJcblxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIERhdGEuY2FsY3VsYXRlKGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDAgJiYganNvbi5yZXNCb2R5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ganNvbi5yZXNCb2R5LmFpcndheUZlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBzZiA9IGpzb24ucmVzQm9keS5zZXJ2aWNlRmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHN0ciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkbERhdGFbJ3pqJ10gPSBqc29uLnJlc0JvZHkudG90YWxGZWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRsRGF0YVsnZGonXSA9IGRhdGEuY2hhcmdpbmdVbml0UHJpY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5yaWdodC1wcmljZScpLmZpbmQoJ3RkJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5nZXQtcHJpY2UnKS5odG1sKGpzb24ucmVzQm9keS50b3RhbEZlZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zaW5nbGUtZmVlJykuaHRtbChkYXRhLmNoYXJnaW5nVW5pdFByaWNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnByaWNlLXdlaScpLmh0bWwoZGF0YS5jaGFyZ2luZ1dlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5nZXQtemonKS5odG1sKCdDTlkgJyArIGpzb24ucmVzQm9keS50b3RhbEZlZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5nZXQta3lmJykuaHRtbCgnQ05ZICcgKyBkYXRhLmNoYXJnaW5nVG90YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdpLmdldC1reWYnKS5odG1sKCfnqbrov5DotLknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnaS5nZXQtZGonKS5odG1sKGRhdGEuY2hhcmdpbmdVbml0UHJpY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuZ2V0LXpsJykuaHRtbChkYXRhLmNoYXJnaW5nV2VpZ2h0ICsgKGRhdGEuY2hhcmdpbmdXZWlnaHQgPT0gZGF0YS5jYXJnby5jaGFyZ2luZ1dlaWdodCA/ICcnIDogJ++8iOiHquWKqOmdoOe6p++8iScpICsgKGRhdGEubWluQ2hhcmdlID8gJ++8iOacgOS9jui/kOi0uSAnICsgZGF0YVsncG9saWN5J11bJ21pbiddICsgJyDvvIknIDogJycpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHMgaW4gc2YpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZi5oYXNPd25Qcm9wZXJ0eShzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gc2Zbc107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICc8cD48c3BhbiBjbGFzcz1cInRpdGxlXCI+JyArIGQuaXRlbU5hbWUgKyAnPC9zcGFuPjxzcGFuIGNsYXNzPVwiYm9keVwiPkNOWSAnICsgZC5pdGVtVG90YWwgKyAnPC9zcGFuPjwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5vcGVyYXRlJykuZmluZCgnLnAtYm9keScpLmh0bWwoc3RyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnByaWNlLXB0JykucmVtb3ZlQ2xhc3MoJ2RwLW4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdmb2N1cycsICcjdm9sLCN3ZWksI251bScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnLnRvcC1pbWcnKS5maW5kKCcuc3RlcDQnKS5hZGRDbGFzcygnZG9pbmcnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignYmx1cicsICcjbmFtZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZhbCA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmICh2YWwgPT0gJycgfHwgbmV3IFJlZ0V4cChcIl5bIF0rJFwiKS50ZXN0KHZhbCkpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykudmFsKCdjb25zb2wnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuY2xvc2UtYnRuJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcud2hpdGUtYmFjaycpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICQoJy5zaG93LXBhcnQnKS5hZGRDbGFzcygnZHAtbicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuc2hvdy1wcmljZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnLndoaXRlLWJhY2snKS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAkKCcucHJpY2UtbGlzdCcpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zaG93LW90aGVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gJCgnLm90aGVyLWxpc3QnKTtcclxuICAgICAgICAgICAgdmFyIGhlaWdodCA9IDUwO1xyXG4gICAgICAgICAgICBoZWlnaHQgKz0gZWxlLmZpbmQoJ3RyJykubGVuZ3RoICogMzA7XHJcbiAgICAgICAgICAgIGVsZS5jc3MoJ21hcmdpbi10b3AnLCAnLScgKyBwYXJzZUludChoZWlnaHQgLyAyKSArICdweCcpO1xyXG4gICAgICAgICAgICAkKCcud2hpdGUtYmFjaycpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgIGVsZS5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjc3VibWl0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY29kZSA9ICQoJyNyaWdodC1jb20nKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgLCBzdGFydCA9ICQoJyNyaWdodC1zdGFydCcpLnZhbCgpXHJcbiAgICAgICAgICAgICAgICAsIGVuZCA9ICQoJyNyaWdodC1lbmQnKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgLCBkdCA9ICQoJyNyaWdodC10aW1lJykudmFsKCkgKyAnIDAwOjAwOjAwJ1xyXG4gICAgICAgICAgICAgICAgLCBzaXplID0gJCgnI3ZvbCcpLnZhbCgpXHJcbiAgICAgICAgICAgICAgICAsIHdlaWdodCA9ICQoJyN3ZWknKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgLCBudW0gPSAkKCcjbnVtJykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmIChjb2RlICYmIHN0YXJ0ICYmIGVuZCAmJiBkdCAmJiBzaXplICYmIHdlaWdodCAmJiBudW0pIHtcclxuICAgICAgICAgICAgICAgICQoJ2lucHV0JykucmVtb3ZlQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiY29tcGFueUlkXCI6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhZ2VudENvbXBhbnlJZFwiOiAxMDAwMCxcclxuICAgICAgICAgICAgICAgICAgICBcIm1lbWJlcklkXCI6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhaXJDb21wYW55Q29kZVwiOiBjb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYWlyd2F5TGNsSWRcIjogJCgnLnNlbC1zZy5hY3RpdmUnKS5kYXRhKCdsaWQnKSxcclxuICAgICAgICAgICAgICAgICAgICBcImZsaWdodERhdGVcIjogZHQsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjYXJnb05hbWVcIjogJCgnI25hbWUnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBcImNhcmdvVHlwZVwiOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2FyZ29Db3VudFwiOiBudW0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjYXJnb1dlaWdodFwiOiB3ZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjYXJnb1NpemVcIjogc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICBcImJ1bGt5UmF0ZVwiOiAwLjIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjdXN0b21EZWNsYXJlXCI6ICQoJyNjdXN0b20nKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKSA9PSAxXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuYWlyd2F5TGNsSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBEYXRhLm9yZGVyKGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNDb2RlJyBpbiBqc29uICYmIGpzb24ucmVzQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gJy9vcmRlcic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gLTEwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IFwiL2xvZ2luXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5zZXRBbGVydChqc29uLnJlc01zZyB8fCAn5aeU5omY5aSx6LSl77yM6K+36YeN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuc2V0QWxlcnQoJ+ivt+mAieaLqeS4gOadoeiIque6vycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3JpZ2h0LWNvbScpLmFkZENsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNyaWdodC1jb20nKS5yZW1vdmVDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFzdGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNyaWdodC1zdGFydCcpLmFkZENsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNyaWdodC1zdGFydCcpLnJlbW92ZUNsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIWVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNyaWdodC1lbmQnKS5hZGRDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjcmlnaHQtZW5kJykucmVtb3ZlQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghZHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjcmlnaHQtdGltZScpLmFkZENsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNyaWdodC10aW1lJykucmVtb3ZlQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyN2b2wnKS5hZGRDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjdm9sJykucmVtb3ZlQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghd2VpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3dlaScpLmFkZENsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyN3ZWknKS5yZW1vdmVDbGFzcygnd2FybScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFudW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjbnVtJykuYWRkQ2xhc3MoJ3dhcm0nKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI251bScpLnJlbW92ZUNsYXNzKCd3YXJtJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNob3ctaGlzdG9yeScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGVsZSA9ICQoJy5zZy1lbmQuYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGlmIChlbGUubGVuZ3RoID4gMCAmJiBlbGUuZGF0YSgndmFsJykpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzaG93ID0gJCgnLmhpc3RvcnktcGFydCcpO1xyXG4gICAgICAgICAgICAgICAgc2hvdy5maW5kKCcuaC1xc2cnKS5odG1sKCQoJyNyaWdodC1zdGFydCcpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIHNob3cuZmluZCgnLmgtbWRnJykuaHRtbCgkKCcjcmlnaHQtZW5kJykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgc2hvdy5maW5kKCcuaC1oa2dzJykuaHRtbCgkKCcjcmlnaHQtY29tJykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgc2hvdy5maW5kKCcuaC1oeGxnJykuaHRtbCgkKCcjdHJhbnMtbGluZScpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIERhdGEuaGlzdG9yeSh7aWQ6IGVsZS5kYXRhKCd2YWwnKX0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmICdyZXNCb2R5JyBpbiBqc29uICYmIGpzb24ucmVzQm9keSBpbnN0YW5jZW9mIEFycmF5ICYmIGpzb24ucmVzQm9keS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBqc29uLnJlc0JvZHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGEgaW4gYXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJyLmhhc093blByb3BlcnR5KGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBhcnJbYV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICcgPHRyPiA8dGQ+JyArIChkLmFpcndheVByaWNlLnJhdGVbMF0ucG9saWN5Wyc0NSddIHx8ICcvJykgKyAnPC90ZD4gPHRkPicgKyAoZC5haXJ3YXlQcmljZS5yYXRlWzBdLnBvbGljeVsnMTAwJ10gfHwgJy8nKSArICc8L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIDx0ZD4nICsgKGQuYWlyd2F5UHJpY2UucmF0ZVswXS5wb2xpY3lbJzMwMCddIHx8ICcvJykgKyAnPC90ZD4gPHRkPicgKyAoZC5haXJ3YXlQcmljZS5yYXRlWzBdLnBvbGljeVsnNTAwJ10gfHwgJy8nKSArICc8L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIDx0ZD4nICsgKGQuYWlyd2F5UHJpY2UucmF0ZVswXS5wb2xpY3lbJzEwMDAnXSB8fCAnLycpICsgJzwvdGQ+IDx0ZD4nICsgbmV3IERhdGUoZC5tb2RpZnlEdCkuRm9ybWF0KCd5eXl5LU1NLWRkIGhoOm1tJykgKyAnPC90ZD48L3RyPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSAnIDx0cj48dGQgY29sc3Bhbj1cIjZcIj7mmoLml6Dljoblj7LmiqXku7c8L3RkPjwvdHI+JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvdy5maW5kKCd0Ym9keScpLmh0bWwoc3RyKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcud2hpdGUtYmFjaycpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvdy5yZW1vdmVDbGFzcygnZHAtbicpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmNvbGxhcHNlLWJ0bicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnIycgKyAkKHRoaXMpLmRhdGEoJ3RhcmdldCcpKS5jb2xsYXBzZSgndG9nZ2xlJyk7XHJcbiAgICAgICAgICAgIHZhciBlbGUgPSAkKHRoaXMpLmZpbmQoJy5vcGVuJyk7XHJcbiAgICAgICAgICAgIGVsZS5odG1sKGVsZS5odG1sKCkgPT0gJyvlsZXlvIAnID8gJy3mipjlj6AnIDogJyvlsZXlvIAnKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgY2FsY3VsYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuY2FsY3VsYXRlLWxvZ28nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5hZGQtcGFydCcpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBldnQgPSBldmVudC5zcmNFbGVtZW50ID8gZXZlbnQuc3JjRWxlbWVudCA6IGV2ZW50LnRhcmdldDtcclxuICAgICAgICAgICAgaWYgKCQoZXZ0KS5oYXNDbGFzcygnYWRkLXBhcnQnKSB8fCAkKGV2dCkuaGFzQ2xhc3MoJ2NhbGN1bGF0ZS1sb2dvJykgfHwgJChldnQpLnBhcmVudHMoJy5hZGQtcGFydCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy5hZGQtcGFydCcpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm11bHRpLWNhbGN1JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcjdm9sJykudmFsKHBhcnNlRmxvYXQoJCgnI2xvbmcnKS52YWwoKSB8fCAwKSAqIHBhcnNlRmxvYXQoJCgnI3dpZHRoJykudmFsKCkgfHwgMCkgKiBwYXJzZUZsb2F0KCQoJyNoZWlnaHQnKS52YWwoKSB8fCAwKSAqIHBhcnNlRmxvYXQoJCgnI3N1bS1udW0nKS52YWwoKSB8fCAwKSk7XHJcbiAgICAgICAgICAgICQoJy5hZGQtcGFydCcpLmFkZENsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIFwiY29tcGFueUlkXCI6IDAsXHJcbiAgICAgICAgICAgIFwiZW5hYmxlU3RhdGVcIjogMVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgRGF0YS5jb21wYW55KGRhdGEsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgIHZhciBzdHIgPSAnJztcclxuICAgICAgICAgICAgaWYgKGpzb24gJiYgJ3Jlc0NvZGUnIGluIGpzb24gJiYganNvbi5yZXNDb2RlID09IDAgJiYganNvbi5yZXNCb2R5KSB7XHJcbiAgICAgICAgICAgICAgICBsaW5lcyA9IGpzb24ucmVzQm9keTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBsIGluIGxpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGluZXMuaGFzT3duUHJvcGVydHkobCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHIgKz0gJzxzcGFuIGNsYXNzPVwic2VsLWNcIiBkYXRhLXZhbD1cIicgKyBsaW5lc1tsXSArICdcIj4nICsgbGluZXNbbF0gKyAnPC9zcGFuPic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLnN0ZXAxJykuZmluZCgnLmJkJykuaHRtbChzdHIpLnJlbW92ZUNsYXNzKCdkcC1uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGV4dHJhSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgYWlyQ29tcGFueUNvZGU6ICQoJy5zZWwtbGluZScpLmZpbmQoJy5hY3RpdmUnKS5kYXRhKCd2YWwnKSB8fCAnJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgRGF0YS5leHRyYShkYXRhLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICBpZiAoanNvbiAmJiAncmVzQ29kZScgaW4ganNvbiAmJiBqc29uLnJlc0NvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IGpzb24ucmVzQm9keSB8fCBbXVxyXG4gICAgICAgICAgICAgICAgICAgICwgc3RyID0gJyc7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBhIGluIGFycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcnIuaGFzT3duUHJvcGVydHkoYSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBhcnJbYV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAnPHRyPjx0ZD4nICsgZC5pdGVtTmFtZSArICc8L3RkPjx0ZD4nICsgZC5pdGVtUHJpY2UgKyAnPC90ZD48dGQ+JyArIChkLml0ZW1SZW1hcmsgfHwgJy8nKSArICc8L3RkPjwvdHI+J1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQoJy5vdGhlci1saXN0JykuZmluZCgndGJvZHknKS5odG1sKHN0cik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgZG93bmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5kbC1wZGYnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRsRGF0YS5wbSA9ICQoJyNuYW1lJykudmFsKCk7XHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL2Rvd24vYmpkJ1xyXG4gICAgICAgICAgICAgICAgLCB0eXBlOiAncG9zdCdcclxuICAgICAgICAgICAgICAgICwgZGF0YToge2Q6IGRsRGF0YSwgbmFtZTogJ+aKpeS7t+WNlSd9XHJcbiAgICAgICAgICAgICAgICAsIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgICAgICwgdGltZW91dDogMTAwMDAwXHJcbiAgICAgICAgICAgICAgICAsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCdzdGF0dXMnIGluIGpzb24gJiYganNvbi5zdGF0dXMgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihcIi9nZXRJbWdDb2RlL2JqZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGlzdGVuZXIoKTtcclxuICAgICAgICBjYWxjdWxhdGUoKTtcclxuICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgZXh0cmFJbml0KCk7XHJcbiAgICAgICAgZG93bmxvYWQoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJ1bjogcnVuXHJcbiAgICB9XHJcbn0oKSk7XHJcbm1vZHVsZS5leHBvcnRzID0gTGlzdGVuZXI7Il19
